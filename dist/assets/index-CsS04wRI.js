var fO=Object.defineProperty;var gO=(t,e,n)=>e in t?fO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>gO(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Gk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bk={exports:{}},Jh={},Vk={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=Symbol.for("react.element"),yO=Symbol.for("react.portal"),vO=Symbol.for("react.fragment"),xO=Symbol.for("react.strict_mode"),wO=Symbol.for("react.profiler"),bO=Symbol.for("react.provider"),_O=Symbol.for("react.context"),SO=Symbol.for("react.forward_ref"),kO=Symbol.for("react.suspense"),TO=Symbol.for("react.memo"),AO=Symbol.for("react.lazy"),qx=Symbol.iterator;function EO(t){return t===null||typeof t!="object"?null:(t=qx&&t[qx]||t["@@iterator"],typeof t=="function"?t:null)}var Hk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wk=Object.assign,qk={};function $o(t,e,n){this.props=t,this.context=e,this.refs=qk,this.updater=n||Hk}$o.prototype.isReactComponent={};$o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kk(){}Kk.prototype=$o.prototype;function Xy(t,e,n){this.props=t,this.context=e,this.refs=qk,this.updater=n||Hk}var Qy=Xy.prototype=new Kk;Qy.constructor=Xy;Wk(Qy,$o.prototype);Qy.isPureReactComponent=!0;var Kx=Array.isArray,Yk=Object.prototype.hasOwnProperty,e0={current:null},Zk={key:!0,ref:!0,__self:!0,__source:!0};function Jk(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Yk.call(e,r)&&!Zk.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Fc,type:t,key:i,ref:a,props:s,_owner:e0.current}}function CO(t,e){return{$$typeof:Fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function t0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fc}function NO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yx=/\/+/g;function dp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NO(""+t.key):e.toString(36)}function pd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fc:case yO:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+dp(a,0):r,Kx(s)?(n="",t!=null&&(n=t.replace(Yx,"$&/")+"/"),pd(s,e,n,"",function(u){return u})):s!=null&&(t0(s)&&(s=CO(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Yx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Kx(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+dp(i,o);a+=pd(i,e,n,l,s)}else if(l=EO(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+dp(i,o++),a+=pd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function bu(t,e,n){if(t==null)return t;var r=[],s=0;return pd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},fd={transition:null},RO={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:fd,ReactCurrentOwner:e0};function Xk(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:bu,forEach:function(t,e,n){bu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bu(t,function(){e++}),e},toArray:function(t){return bu(t,function(e){return e})||[]},only:function(t){if(!t0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=$o;Re.Fragment=vO;Re.Profiler=wO;Re.PureComponent=Xy;Re.StrictMode=xO;Re.Suspense=kO;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RO;Re.act=Xk;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wk({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=e0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Yk.call(e,l)&&!Zk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Fc,type:t.type,key:s,ref:i,props:r,_owner:a}};Re.createContext=function(t){return t={$$typeof:_O,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bO,_context:t},t.Consumer=t};Re.createElement=Jk;Re.createFactory=function(t){var e=Jk.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:SO,render:t}};Re.isValidElement=t0;Re.lazy=function(t){return{$$typeof:AO,_payload:{_status:-1,_result:t},_init:IO}};Re.memo=function(t,e){return{$$typeof:TO,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=fd.transition;fd.transition={};try{t()}finally{fd.transition=e}};Re.unstable_act=Xk;Re.useCallback=function(t,e){return mn.current.useCallback(t,e)};Re.useContext=function(t){return mn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return mn.current.useEffect(t,e)};Re.useId=function(){return mn.current.useId()};Re.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return mn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Re.useRef=function(t){return mn.current.useRef(t)};Re.useState=function(t){return mn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return mn.current.useTransition()};Re.version="18.3.1";Vk.exports=Re;var $=Vk.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OO=$,PO=Symbol.for("react.element"),jO=Symbol.for("react.fragment"),$O=Object.prototype.hasOwnProperty,DO=OO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LO={key:!0,ref:!0,__self:!0,__source:!0};function Qk(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)$O.call(e,r)&&!LO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PO,type:t,key:i,ref:a,props:s,_owner:DO.current}}Jh.Fragment=jO;Jh.jsx=Qk;Jh.jsxs=Qk;Bk.exports=Jh;var c=Bk.exports,eT={exports:{}},Wn={},tT={exports:{}},nT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var G=P.length;P.push(L);e:for(;0<G;){var X=G-1>>>1,ie=P[X];if(0<s(ie,L))P[X]=L,P[G]=ie,G=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var L=P[0],G=P.pop();if(G!==L){P[0]=G;e:for(var X=0,ie=P.length,Oe=ie>>>1;X<Oe;){var Fe=2*(X+1)-1,ke=P[Fe],A=Fe+1,k=P[A];if(0>s(ke,G))A<ie&&0>s(k,ke)?(P[X]=k,P[A]=G,X=A):(P[X]=ke,P[Fe]=G,X=Fe);else if(A<ie&&0>s(k,G))P[X]=k,P[A]=G,X=A;else break e}}return L}function s(P,L){var G=P.sortIndex-L.sortIndex;return G!==0?G:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,m=3,p=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=P)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(u)}}function b(P){if(w=!1,v(P),!y)if(n(l)!==null)y=!0,q(_);else{var L=n(u);L!==null&&z(b,L.startTime-P)}}function _(P,L){y=!1,w&&(w=!1,g(S),S=-1),p=!0;var G=m;try{for(v(L),h=n(l);h!==null&&(!(h.expirationTime>L)||P&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var ie=X(h.expirationTime<=L);L=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(l)&&r(l),v(L)}else r(l);h=n(l)}if(h!==null)var Oe=!0;else{var Fe=n(u);Fe!==null&&z(b,Fe.startTime-L),Oe=!1}return Oe}finally{h=null,m=G,p=!1}}var E=!1,C=null,S=-1,N=5,D=-1;function F(){return!(t.unstable_now()-D<N)}function Y(){if(C!==null){var P=t.unstable_now();D=P;var L=!0;try{L=C(!0,P)}finally{L?de():(E=!1,C=null)}}else E=!1}var de;if(typeof f=="function")de=function(){f(Y)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,B=H.port2;H.port1.onmessage=Y,de=function(){B.postMessage(null)}}else de=function(){x(Y,0)};function q(P){C=P,E||(E=!0,de())}function z(P,L){S=x(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,q(_))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var G=m;m=L;try{return P()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=m;m=P;try{return L()}finally{m=G}},t.unstable_scheduleCallback=function(P,L,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,P){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=G+ie,P={id:d++,callback:L,priorityLevel:P,startTime:G,expirationTime:ie,sortIndex:-1},G>X?(P.sortIndex=G,e(u,P),n(l)===null&&P===n(u)&&(w?(g(S),S=-1):w=!0,z(b,G-X))):(P.sortIndex=ie,e(l,P),y||p||(y=!0,q(_))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var L=m;return function(){var G=m;m=L;try{return P.apply(this,arguments)}finally{m=G}}}})(nT);tT.exports=nT;var MO=tT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO=$,Bn=MO;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rT=new Set,ic={};function fa(t,e){fo(t,e),fo(t+"Capture",e)}function fo(t,e){for(ic[t]=e,t=0;t<e.length;t++)rT.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zf=Object.prototype.hasOwnProperty,UO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zx={},Jx={};function zO(t){return zf.call(Jx,t)?!0:zf.call(Zx,t)?!1:UO.test(t)?Jx[t]=!0:(Zx[t]=!0,!1)}function GO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BO(t,e,n,r){if(e===null||typeof e>"u"||GO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var n0=/[\-:]([a-z])/g;function r0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n0,r0);Ht[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n0,r0);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n0,r0);Ht[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function s0(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BO(e,n,s,r)&&(n=null),r||s===null?zO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fs=FO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_u=Symbol.for("react.element"),Ma=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),Gf=Symbol.for("react.profiler"),sT=Symbol.for("react.provider"),iT=Symbol.for("react.context"),a0=Symbol.for("react.forward_ref"),Bf=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),o0=Symbol.for("react.memo"),ei=Symbol.for("react.lazy"),aT=Symbol.for("react.offscreen"),Xx=Symbol.iterator;function el(t){return t===null||typeof t!="object"?null:(t=Xx&&t[Xx]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,hp;function ml(t){if(hp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hp=e&&e[1]||""}return`
`+hp+t}var mp=!1;function pp(t,e){if(!t||mp)return"";mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{mp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ml(t):""}function VO(t){switch(t.tag){case 5:return ml(t.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return t=pp(t.type,!1),t;case 11:return t=pp(t.type.render,!1),t;case 1:return t=pp(t.type,!0),t;default:return""}}function Hf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case Ma:return"Portal";case Gf:return"Profiler";case i0:return"StrictMode";case Bf:return"Suspense";case Vf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iT:return(t.displayName||"Context")+".Consumer";case sT:return(t._context.displayName||"Context")+".Provider";case a0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o0:return e=t.displayName||null,e!==null?e:Hf(t.type)||"Memo";case ei:e=t._payload,t=t._init;try{return Hf(t(e))}catch{}}return null}function HO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hf(e);case 8:return e===i0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WO(t){var e=oT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Su(t){t._valueTracker||(t._valueTracker=WO(t))}function lT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wf(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cT(t,e){e=e.checked,e!=null&&s0(t,"checked",e,!1)}function qf(t,e){cT(t,e);var n=wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kf(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ew(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kf(t,e,n){(e!=="number"||Bd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pl=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(pl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function uT(t,e){var n=wi(e.value),r=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ku,hT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ku=ku||document.createElement("div"),ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qO=["Webkit","ms","Moz","O"];Object.keys(jl).forEach(function(t){qO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jl[e]=jl[t]})});function mT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jl.hasOwnProperty(t)&&jl[t]?(""+e).trim():e+"px"}function pT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KO=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jf(t,e){if(e){if(KO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=null;function l0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eg=null,lo=null,co=null;function rw(t){if(t=Gc(t)){if(typeof eg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=nm(e),eg(t.stateNode,t.type,e))}}function fT(t){lo?co?co.push(t):co=[t]:lo=t}function gT(){if(lo){var t=lo,e=co;if(co=lo=null,rw(t),e)for(t=0;t<e.length;t++)rw(e[t])}}function yT(t,e){return t(e)}function vT(){}var fp=!1;function xT(t,e,n){if(fp)return t(e,n);fp=!0;try{return yT(t,e,n)}finally{fp=!1,(lo!==null||co!==null)&&(vT(),gT())}}function oc(t,e){var n=t.stateNode;if(n===null)return null;var r=nm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var tg=!1;if(As)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){tg=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{tg=!1}function YO(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var $l=!1,Vd=null,Hd=!1,ng=null,ZO={onError:function(t){$l=!0,Vd=t}};function JO(t,e,n,r,s,i,a,o,l){$l=!1,Vd=null,YO.apply(ZO,arguments)}function XO(t,e,n,r,s,i,a,o,l){if(JO.apply(this,arguments),$l){if($l){var u=Vd;$l=!1,Vd=null}else throw Error(W(198));Hd||(Hd=!0,ng=u)}}function ga(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sw(t){if(ga(t)!==t)throw Error(W(188))}function QO(t){var e=t.alternate;if(!e){if(e=ga(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sw(s),t;if(i===r)return sw(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function bT(t){return t=QO(t),t!==null?_T(t):null}function _T(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_T(t);if(e!==null)return e;t=t.sibling}return null}var ST=Bn.unstable_scheduleCallback,iw=Bn.unstable_cancelCallback,eP=Bn.unstable_shouldYield,tP=Bn.unstable_requestPaint,vt=Bn.unstable_now,nP=Bn.unstable_getCurrentPriorityLevel,c0=Bn.unstable_ImmediatePriority,kT=Bn.unstable_UserBlockingPriority,Wd=Bn.unstable_NormalPriority,rP=Bn.unstable_LowPriority,TT=Bn.unstable_IdlePriority,Xh=null,Jr=null;function sP(t){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(Xh,t,void 0,(t.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:oP,iP=Math.log,aP=Math.LN2;function oP(t){return t>>>=0,t===0?32:31-(iP(t)/aP|0)|0}var Tu=64,Au=4194304;function fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=fl(o):(i&=a,i!==0&&(r=fl(i)))}else a=n&~s,a!==0?r=fl(a):i!==0&&(r=fl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ar(e),s=1<<n,r|=t[n],e&=~s;return r}function lP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Ar(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=lP(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function rg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AT(){var t=Tu;return Tu<<=1,!(Tu&4194240)&&(Tu=64),t}function gp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ar(e),t[e]=n}function uP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ar(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function u0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ar(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Je=0;function ET(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CT,d0,NT,IT,RT,sg=!1,Eu=[],ui=null,di=null,hi=null,lc=new Map,cc=new Map,ri=[],dP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aw(t,e){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function nl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gc(e),e!==null&&d0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hP(t,e,n,r,s){switch(e){case"focusin":return ui=nl(ui,t,e,n,r,s),!0;case"dragenter":return di=nl(di,t,e,n,r,s),!0;case"mouseover":return hi=nl(hi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lc.set(i,nl(lc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,cc.set(i,nl(cc.get(i)||null,t,e,n,r,s)),!0}return!1}function OT(t){var e=Hi(t.target);if(e!==null){var n=ga(e);if(n!==null){if(e=n.tag,e===13){if(e=wT(n),e!==null){t.blockedOn=e,RT(t.priority,function(){NT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ig(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qf=r,n.target.dispatchEvent(r),Qf=null}else return e=Gc(n),e!==null&&d0(e),t.blockedOn=n,!1;e.shift()}return!0}function ow(t,e,n){gd(t)&&n.delete(e)}function mP(){sg=!1,ui!==null&&gd(ui)&&(ui=null),di!==null&&gd(di)&&(di=null),hi!==null&&gd(hi)&&(hi=null),lc.forEach(ow),cc.forEach(ow)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,sg||(sg=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,mP)))}function uc(t){function e(s){return rl(s,t)}if(0<Eu.length){rl(Eu[0],t);for(var n=1;n<Eu.length;n++){var r=Eu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ui!==null&&rl(ui,t),di!==null&&rl(di,t),hi!==null&&rl(hi,t),lc.forEach(e),cc.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)OT(n),n.blockedOn===null&&ri.shift()}var uo=Fs.ReactCurrentBatchConfig,Kd=!0;function pP(t,e,n,r){var s=Je,i=uo.transition;uo.transition=null;try{Je=1,h0(t,e,n,r)}finally{Je=s,uo.transition=i}}function fP(t,e,n,r){var s=Je,i=uo.transition;uo.transition=null;try{Je=4,h0(t,e,n,r)}finally{Je=s,uo.transition=i}}function h0(t,e,n,r){if(Kd){var s=ig(t,e,n,r);if(s===null)Ap(t,e,r,Yd,n),aw(t,r);else if(hP(s,t,e,n,r))r.stopPropagation();else if(aw(t,r),e&4&&-1<dP.indexOf(t)){for(;s!==null;){var i=Gc(s);if(i!==null&&CT(i),i=ig(t,e,n,r),i===null&&Ap(t,e,r,Yd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ap(t,e,r,null,n)}}var Yd=null;function ig(t,e,n,r){if(Yd=null,t=l0(r),t=Hi(t),t!==null)if(e=ga(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yd=t,null}function PT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nP()){case c0:return 1;case kT:return 4;case Wd:case rP:return 16;case TT:return 536870912;default:return 16}default:return 16}}var ii=null,m0=null,yd=null;function jT(){if(yd)return yd;var t,e=m0,n=e.length,r,s="value"in ii?ii.value:ii.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return yd=s.slice(t,1<r?1-r:void 0)}function vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cu(){return!0}function lw(){return!1}function qn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cu:lw,this.isPropagationStopped=lw,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=qn(Do),zc=ut({},Do,{view:0,detail:0}),gP=qn(zc),yp,vp,sl,Qh=ut({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sl&&(sl&&t.type==="mousemove"?(yp=t.screenX-sl.screenX,vp=t.screenY-sl.screenY):vp=yp=0,sl=t),yp)},movementY:function(t){return"movementY"in t?t.movementY:vp}}),cw=qn(Qh),yP=ut({},Qh,{dataTransfer:0}),vP=qn(yP),xP=ut({},zc,{relatedTarget:0}),xp=qn(xP),wP=ut({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),bP=qn(wP),_P=ut({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SP=qn(_P),kP=ut({},Do,{data:0}),uw=qn(kP),TP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EP[t])?!!e[t]:!1}function f0(){return CP}var NP=ut({},zc,{key:function(t){if(t.key){var e=TP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f0,charCode:function(t){return t.type==="keypress"?vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IP=qn(NP),RP=ut({},Qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dw=qn(RP),OP=ut({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f0}),PP=qn(OP),jP=ut({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),$P=qn(jP),DP=ut({},Qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LP=qn(DP),MP=[9,13,27,32],g0=As&&"CompositionEvent"in window,Dl=null;As&&"documentMode"in document&&(Dl=document.documentMode);var FP=As&&"TextEvent"in window&&!Dl,$T=As&&(!g0||Dl&&8<Dl&&11>=Dl),hw=" ",mw=!1;function DT(t,e){switch(t){case"keyup":return MP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function UP(t,e){switch(t){case"compositionend":return LT(e);case"keypress":return e.which!==32?null:(mw=!0,hw);case"textInput":return t=e.data,t===hw&&mw?null:t;default:return null}}function zP(t,e){if(Ua)return t==="compositionend"||!g0&&DT(t,e)?(t=jT(),yd=m0=ii=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $T&&e.locale!=="ko"?null:e.data;default:return null}}var GP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GP[t.type]:e==="textarea"}function MT(t,e,n,r){fT(r),e=Zd(e,"onChange"),0<e.length&&(n=new p0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ll=null,dc=null;function BP(t){YT(t,0)}function em(t){var e=Ba(t);if(lT(e))return t}function VP(t,e){if(t==="change")return e}var FT=!1;if(As){var wp;if(As){var bp="oninput"in document;if(!bp){var fw=document.createElement("div");fw.setAttribute("oninput","return;"),bp=typeof fw.oninput=="function"}wp=bp}else wp=!1;FT=wp&&(!document.documentMode||9<document.documentMode)}function gw(){Ll&&(Ll.detachEvent("onpropertychange",UT),dc=Ll=null)}function UT(t){if(t.propertyName==="value"&&em(dc)){var e=[];MT(e,dc,t,l0(t)),xT(BP,e)}}function HP(t,e,n){t==="focusin"?(gw(),Ll=e,dc=n,Ll.attachEvent("onpropertychange",UT)):t==="focusout"&&gw()}function WP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return em(dc)}function qP(t,e){if(t==="click")return em(e)}function KP(t,e){if(t==="input"||t==="change")return em(e)}function YP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cr=typeof Object.is=="function"?Object.is:YP;function hc(t,e){if(Cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zf.call(e,s)||!Cr(t[s],e[s]))return!1}return!0}function yw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vw(t,e){var n=yw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yw(n)}}function zT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GT(){for(var t=window,e=Bd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bd(t.document)}return e}function y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZP(t){var e=GT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zT(n.ownerDocument.documentElement,n)){if(r!==null&&y0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vw(n,i);var a=vw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JP=As&&"documentMode"in document&&11>=document.documentMode,za=null,ag=null,Ml=null,og=!1;function xw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;og||za==null||za!==Bd(r)||(r=za,"selectionStart"in r&&y0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ml&&hc(Ml,r)||(Ml=r,r=Zd(ag,"onSelect"),0<r.length&&(e=new p0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=za)))}function Nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ga={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},_p={},BT={};As&&(BT=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function tm(t){if(_p[t])return _p[t];if(!Ga[t])return t;var e=Ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BT)return _p[t]=e[n];return t}var VT=tm("animationend"),HT=tm("animationiteration"),WT=tm("animationstart"),qT=tm("transitionend"),KT=new Map,ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,e){KT.set(t,e),fa(e,[t])}for(var Sp=0;Sp<ww.length;Sp++){var kp=ww[Sp],XP=kp.toLowerCase(),QP=kp[0].toUpperCase()+kp.slice(1);Ci(XP,"on"+QP)}Ci(VT,"onAnimationEnd");Ci(HT,"onAnimationIteration");Ci(WT,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(qT,"onTransitionEnd");fo("onMouseEnter",["mouseout","mouseover"]);fo("onMouseLeave",["mouseout","mouseover"]);fo("onPointerEnter",["pointerout","pointerover"]);fo("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ej=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function bw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XO(r,e,void 0,t),t.currentTarget=null}function YT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;bw(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;bw(s,o,u),i=l}}}if(Hd)throw t=ng,Hd=!1,ng=null,t}function et(t,e){var n=e[hg];n===void 0&&(n=e[hg]=new Set);var r=t+"__bubble";n.has(r)||(ZT(e,t,2,!1),n.add(r))}function Tp(t,e,n){var r=0;e&&(r|=4),ZT(n,t,r,e)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function mc(t){if(!t[Iu]){t[Iu]=!0,rT.forEach(function(n){n!=="selectionchange"&&(ej.has(n)||Tp(n,!1,t),Tp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Iu]||(e[Iu]=!0,Tp("selectionchange",!1,e))}}function ZT(t,e,n,r){switch(PT(e)){case 1:var s=pP;break;case 4:s=fP;break;default:s=h0}n=s.bind(null,e,n,t),s=void 0,!tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ap(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Hi(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}xT(function(){var u=i,d=l0(n),h=[];e:{var m=KT.get(t);if(m!==void 0){var p=p0,y=t;switch(t){case"keypress":if(vd(n)===0)break e;case"keydown":case"keyup":p=IP;break;case"focusin":y="focus",p=xp;break;case"focusout":y="blur",p=xp;break;case"beforeblur":case"afterblur":p=xp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PP;break;case VT:case HT:case WT:p=bP;break;case qT:p=$P;break;case"scroll":p=gP;break;case"wheel":p=LP;break;case"copy":case"cut":case"paste":p=SP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dw}var w=(e&4)!==0,x=!w&&t==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var f=u,v;f!==null;){v=f;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,g!==null&&(b=oc(f,g),b!=null&&w.push(pc(f,b,v)))),x)break;f=f.return}0<w.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Qf&&(y=n.relatedTarget||n.fromElement)&&(Hi(y)||y[Es]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Hi(y):null,y!==null&&(x=ga(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(w=cw,b="onMouseLeave",g="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(w=dw,b="onPointerLeave",g="onPointerEnter",f="pointer"),x=p==null?m:Ba(p),v=y==null?m:Ba(y),m=new w(b,f+"leave",p,n,d),m.target=x,m.relatedTarget=v,b=null,Hi(d)===u&&(w=new w(g,f+"enter",y,n,d),w.target=v,w.relatedTarget=x,b=w),x=b,p&&y)t:{for(w=p,g=y,f=0,v=w;v;v=Ta(v))f++;for(v=0,b=g;b;b=Ta(b))v++;for(;0<f-v;)w=Ta(w),f--;for(;0<v-f;)g=Ta(g),v--;for(;f--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ta(w),g=Ta(g)}w=null}else w=null;p!==null&&_w(h,m,p,w,!1),y!==null&&x!==null&&_w(h,x,y,w,!0)}}e:{if(m=u?Ba(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var _=VP;else if(pw(m))if(FT)_=KP;else{_=WP;var E=HP}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=qP);if(_&&(_=_(t,u))){MT(h,_,n,d);break e}E&&E(t,m,u),t==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&Kf(m,"number",m.value)}switch(E=u?Ba(u):window,t){case"focusin":(pw(E)||E.contentEditable==="true")&&(za=E,ag=u,Ml=null);break;case"focusout":Ml=ag=za=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,xw(h,n,d);break;case"selectionchange":if(JP)break;case"keydown":case"keyup":xw(h,n,d)}var C;if(g0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ua?DT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&($T&&n.locale!=="ko"&&(Ua||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ua&&(C=jT()):(ii=d,m0="value"in ii?ii.value:ii.textContent,Ua=!0)),E=Zd(u,S),0<E.length&&(S=new uw(S,t,null,n,d),h.push({event:S,listeners:E}),C?S.data=C:(C=LT(n),C!==null&&(S.data=C)))),(C=FP?UP(t,n):zP(t,n))&&(u=Zd(u,"onBeforeInput"),0<u.length&&(d=new uw("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}YT(h,e)})}function pc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=oc(t,n),i!=null&&r.unshift(pc(t,i,s)),i=oc(t,e),i!=null&&r.push(pc(t,i,s))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _w(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=oc(n,i),l!=null&&a.unshift(pc(n,l,o))):s||(l=oc(n,i),l!=null&&a.push(pc(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var tj=/\r\n?/g,nj=/\u0000|\uFFFD/g;function Sw(t){return(typeof t=="string"?t:""+t).replace(tj,`
`).replace(nj,"")}function Ru(t,e,n){if(e=Sw(e),Sw(t)!==e&&n)throw Error(W(425))}function Jd(){}var lg=null,cg=null;function ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,rj=typeof clearTimeout=="function"?clearTimeout:void 0,kw=typeof Promise=="function"?Promise:void 0,sj=typeof queueMicrotask=="function"?queueMicrotask:typeof kw<"u"?function(t){return kw.resolve(null).then(t).catch(ij)}:dg;function ij(t){setTimeout(function(){throw t})}function Ep(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),uc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);uc(e)}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Hr="__reactFiber$"+Lo,fc="__reactProps$"+Lo,Es="__reactContainer$"+Lo,hg="__reactEvents$"+Lo,aj="__reactListeners$"+Lo,oj="__reactHandles$"+Lo;function Hi(t){var e=t[Hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Es]||n[Hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tw(t);t!==null;){if(n=t[Hr])return n;t=Tw(t)}return e}t=n,n=t.parentNode}return null}function Gc(t){return t=t[Hr]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function nm(t){return t[fc]||null}var mg=[],Va=-1;function Ni(t){return{current:t}}function nt(t){0>Va||(t.current=mg[Va],mg[Va]=null,Va--)}function Xe(t,e){Va++,mg[Va]=t.current,t.current=e}var bi={},Qt=Ni(bi),Tn=Ni(!1),la=bi;function go(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function An(t){return t=t.childContextTypes,t!=null}function Xd(){nt(Tn),nt(Qt)}function Aw(t,e,n){if(Qt.current!==bi)throw Error(W(168));Xe(Qt,e),Xe(Tn,n)}function JT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,HO(t)||"Unknown",s));return ut({},n,r)}function Qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,la=Qt.current,Xe(Qt,t),Xe(Tn,Tn.current),!0}function Ew(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=JT(t,e,la),r.__reactInternalMemoizedMergedChildContext=t,nt(Tn),nt(Qt),Xe(Qt,t)):nt(Tn),Xe(Tn,n)}var gs=null,rm=!1,Cp=!1;function XT(t){gs===null?gs=[t]:gs.push(t)}function lj(t){rm=!0,XT(t)}function Ii(){if(!Cp&&gs!==null){Cp=!0;var t=0,e=Je;try{var n=gs;for(Je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gs=null,rm=!1}catch(s){throw gs!==null&&(gs=gs.slice(t+1)),ST(c0,Ii),s}finally{Je=e,Cp=!1}}return null}var Ha=[],Wa=0,eh=null,th=0,Qn=[],er=0,ca=null,ws=1,bs="";function Li(t,e){Ha[Wa++]=th,Ha[Wa++]=eh,eh=t,th=e}function QT(t,e,n){Qn[er++]=ws,Qn[er++]=bs,Qn[er++]=ca,ca=t;var r=ws;t=bs;var s=32-Ar(r)-1;r&=~(1<<s),n+=1;var i=32-Ar(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ws=1<<32-Ar(e)+s|n<<s|r,bs=i+t}else ws=1<<i|n<<s|r,bs=t}function v0(t){t.return!==null&&(Li(t,1),QT(t,1,0))}function x0(t){for(;t===eh;)eh=Ha[--Wa],Ha[Wa]=null,th=Ha[--Wa],Ha[Wa]=null;for(;t===ca;)ca=Qn[--er],Qn[er]=null,bs=Qn[--er],Qn[er]=null,ws=Qn[--er],Qn[er]=null}var Un=null,Mn=null,st=!1,kr=null;function eA(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,Mn=mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ca!==null?{id:ws,overflow:bs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,Mn=null,!0):!1;default:return!1}}function pg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fg(t){if(st){var e=Mn;if(e){var n=e;if(!Cw(t,e)){if(pg(t))throw Error(W(418));e=mi(n.nextSibling);var r=Un;e&&Cw(t,e)?eA(r,n):(t.flags=t.flags&-4097|2,st=!1,Un=t)}}else{if(pg(t))throw Error(W(418));t.flags=t.flags&-4097|2,st=!1,Un=t}}}function Nw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function Ou(t){if(t!==Un)return!1;if(!st)return Nw(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ug(t.type,t.memoizedProps)),e&&(e=Mn)){if(pg(t))throw tA(),Error(W(418));for(;e;)eA(t,e),e=mi(e.nextSibling)}if(Nw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Un?mi(t.stateNode.nextSibling):null;return!0}function tA(){for(var t=Mn;t;)t=mi(t.nextSibling)}function yo(){Mn=Un=null,st=!1}function w0(t){kr===null?kr=[t]:kr.push(t)}var cj=Fs.ReactCurrentBatchConfig;function il(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Pu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Iw(t){var e=t._init;return e(t._payload)}function nA(t){function e(g,f){if(t){var v=g.deletions;v===null?(g.deletions=[f],g.flags|=16):v.push(f)}}function n(g,f){if(!t)return null;for(;f!==null;)e(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=yi(g,f),g.index=0,g.sibling=null,g}function i(g,f,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<f?(g.flags|=2,f):v):(g.flags|=2,f)):(g.flags|=1048576,f)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,f,v,b){return f===null||f.tag!==6?(f=$p(v,g.mode,b),f.return=g,f):(f=s(f,v),f.return=g,f)}function l(g,f,v,b){var _=v.type;return _===Fa?d(g,f,v.props.children,b,v.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ei&&Iw(_)===f.type)?(b=s(f,v.props),b.ref=il(g,f,v),b.return=g,b):(b=Td(v.type,v.key,v.props,null,g.mode,b),b.ref=il(g,f,v),b.return=g,b)}function u(g,f,v,b){return f===null||f.tag!==4||f.stateNode.containerInfo!==v.containerInfo||f.stateNode.implementation!==v.implementation?(f=Dp(v,g.mode,b),f.return=g,f):(f=s(f,v.children||[]),f.return=g,f)}function d(g,f,v,b,_){return f===null||f.tag!==7?(f=ea(v,g.mode,b,_),f.return=g,f):(f=s(f,v),f.return=g,f)}function h(g,f,v){if(typeof f=="string"&&f!==""||typeof f=="number")return f=$p(""+f,g.mode,v),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case _u:return v=Td(f.type,f.key,f.props,null,g.mode,v),v.ref=il(g,null,f),v.return=g,v;case Ma:return f=Dp(f,g.mode,v),f.return=g,f;case ei:var b=f._init;return h(g,b(f._payload),v)}if(pl(f)||el(f))return f=ea(f,g.mode,v,null),f.return=g,f;Pu(g,f)}return null}function m(g,f,v,b){var _=f!==null?f.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:o(g,f,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _u:return v.key===_?l(g,f,v,b):null;case Ma:return v.key===_?u(g,f,v,b):null;case ei:return _=v._init,m(g,f,_(v._payload),b)}if(pl(v)||el(v))return _!==null?null:d(g,f,v,b,null);Pu(g,v)}return null}function p(g,f,v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(v)||null,o(f,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _u:return g=g.get(b.key===null?v:b.key)||null,l(f,g,b,_);case Ma:return g=g.get(b.key===null?v:b.key)||null,u(f,g,b,_);case ei:var E=b._init;return p(g,f,v,E(b._payload),_)}if(pl(b)||el(b))return g=g.get(v)||null,d(f,g,b,_,null);Pu(f,b)}return null}function y(g,f,v,b){for(var _=null,E=null,C=f,S=f=0,N=null;C!==null&&S<v.length;S++){C.index>S?(N=C,C=null):N=C.sibling;var D=m(g,C,v[S],b);if(D===null){C===null&&(C=N);break}t&&C&&D.alternate===null&&e(g,C),f=i(D,f,S),E===null?_=D:E.sibling=D,E=D,C=N}if(S===v.length)return n(g,C),st&&Li(g,S),_;if(C===null){for(;S<v.length;S++)C=h(g,v[S],b),C!==null&&(f=i(C,f,S),E===null?_=C:E.sibling=C,E=C);return st&&Li(g,S),_}for(C=r(g,C);S<v.length;S++)N=p(C,g,S,v[S],b),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?S:N.key),f=i(N,f,S),E===null?_=N:E.sibling=N,E=N);return t&&C.forEach(function(F){return e(g,F)}),st&&Li(g,S),_}function w(g,f,v,b){var _=el(v);if(typeof _!="function")throw Error(W(150));if(v=_.call(v),v==null)throw Error(W(151));for(var E=_=null,C=f,S=f=0,N=null,D=v.next();C!==null&&!D.done;S++,D=v.next()){C.index>S?(N=C,C=null):N=C.sibling;var F=m(g,C,D.value,b);if(F===null){C===null&&(C=N);break}t&&C&&F.alternate===null&&e(g,C),f=i(F,f,S),E===null?_=F:E.sibling=F,E=F,C=N}if(D.done)return n(g,C),st&&Li(g,S),_;if(C===null){for(;!D.done;S++,D=v.next())D=h(g,D.value,b),D!==null&&(f=i(D,f,S),E===null?_=D:E.sibling=D,E=D);return st&&Li(g,S),_}for(C=r(g,C);!D.done;S++,D=v.next())D=p(C,g,S,D.value,b),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?S:D.key),f=i(D,f,S),E===null?_=D:E.sibling=D,E=D);return t&&C.forEach(function(Y){return e(g,Y)}),st&&Li(g,S),_}function x(g,f,v,b){if(typeof v=="object"&&v!==null&&v.type===Fa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _u:e:{for(var _=v.key,E=f;E!==null;){if(E.key===_){if(_=v.type,_===Fa){if(E.tag===7){n(g,E.sibling),f=s(E,v.props.children),f.return=g,g=f;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ei&&Iw(_)===E.type){n(g,E.sibling),f=s(E,v.props),f.ref=il(g,E,v),f.return=g,g=f;break e}n(g,E);break}else e(g,E);E=E.sibling}v.type===Fa?(f=ea(v.props.children,g.mode,b,v.key),f.return=g,g=f):(b=Td(v.type,v.key,v.props,null,g.mode,b),b.ref=il(g,f,v),b.return=g,g=b)}return a(g);case Ma:e:{for(E=v.key;f!==null;){if(f.key===E)if(f.tag===4&&f.stateNode.containerInfo===v.containerInfo&&f.stateNode.implementation===v.implementation){n(g,f.sibling),f=s(f,v.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else e(g,f);f=f.sibling}f=Dp(v,g.mode,b),f.return=g,g=f}return a(g);case ei:return E=v._init,x(g,f,E(v._payload),b)}if(pl(v))return y(g,f,v,b);if(el(v))return w(g,f,v,b);Pu(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,f!==null&&f.tag===6?(n(g,f.sibling),f=s(f,v),f.return=g,g=f):(n(g,f),f=$p(v,g.mode,b),f.return=g,g=f),a(g)):n(g,f)}return x}var vo=nA(!0),rA=nA(!1),nh=Ni(null),rh=null,qa=null,b0=null;function _0(){b0=qa=rh=null}function S0(t){var e=nh.current;nt(nh),t._currentValue=e}function gg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ho(t,e){rh=t,b0=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(b0!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if(rh===null)throw Error(W(308));qa=t,rh.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var Wi=null;function k0(t){Wi===null?Wi=[t]:Wi.push(t)}function sA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,k0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Cs(t,r)}function Cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ti=!1;function T0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Cs(t,n)}return s=r.interleaved,s===null?(e.next=e,k0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Cs(t,n)}function xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u0(t,n)}}function Rw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,r){var s=t.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=u=l=null,o=i;do{var m=o.lane,p=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,w=o;switch(m=e,p=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=ut({},h,m);break e;case 2:ti=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);da|=a,t.lanes=a,t.memoizedState=h}}function Ow(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Bc={},Xr=Ni(Bc),gc=Ni(Bc),yc=Ni(Bc);function qi(t){if(t===Bc)throw Error(W(174));return t}function A0(t,e){switch(Xe(yc,e),Xe(gc,t),Xe(Xr,Bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zf(e,t)}nt(Xr),Xe(Xr,e)}function xo(){nt(Xr),nt(gc),nt(yc)}function aA(t){qi(yc.current);var e=qi(Xr.current),n=Zf(e,t.type);e!==n&&(Xe(gc,t),Xe(Xr,n))}function E0(t){gc.current===t&&(nt(Xr),nt(gc))}var ot=Ni(0);function ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Np=[];function C0(){for(var t=0;t<Np.length;t++)Np[t]._workInProgressVersionPrimary=null;Np.length=0}var wd=Fs.ReactCurrentDispatcher,Ip=Fs.ReactCurrentBatchConfig,ua=0,ct=null,It=null,$t=null,ah=!1,Fl=!1,vc=0,uj=0;function Yt(){throw Error(W(321))}function N0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cr(t[n],e[n]))return!1;return!0}function I0(t,e,n,r,s,i){if(ua=i,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wd.current=t===null||t.memoizedState===null?pj:fj,t=n(r,s),Fl){i=0;do{if(Fl=!1,vc=0,25<=i)throw Error(W(301));i+=1,$t=It=null,e.updateQueue=null,wd.current=gj,t=n(r,s)}while(Fl)}if(wd.current=oh,e=It!==null&&It.next!==null,ua=0,$t=It=ct=null,ah=!1,e)throw Error(W(300));return t}function R0(){var t=vc!==0;return vc=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?ct.memoizedState=$t=t:$t=$t.next=t,$t}function or(){if(It===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=$t===null?ct.memoizedState:$t.next;if(e!==null)$t=e,It=t;else{if(t===null)throw Error(W(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},$t===null?ct.memoizedState=$t=t:$t=$t.next=t}return $t}function xc(t,e){return typeof e=="function"?e(t):e}function Rp(t){var e=or(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=It,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((ua&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,ct.lanes|=d,da|=d}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,Cr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ct.lanes|=i,da|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Op(t){var e=or(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Cr(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function oA(){}function lA(t,e){var n=ct,r=or(),s=e(),i=!Cr(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,O0(dA.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,wc(9,uA.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(W(349));ua&30||cA(n,e,s)}return s}function cA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uA(t,e,n,r){e.value=n,e.getSnapshot=r,hA(e)&&mA(t)}function dA(t,e,n){return n(function(){hA(e)&&mA(t)})}function hA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cr(t,n)}catch{return!0}}function mA(t){var e=Cs(t,1);e!==null&&Er(e,t,1,-1)}function Pw(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:t},e.queue=t,t=t.dispatch=mj.bind(null,ct,t),[e.memoizedState,t]}function wc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pA(){return or().memoizedState}function bd(t,e,n,r){var s=Br();ct.flags|=t,s.memoizedState=wc(1|e,n,void 0,r===void 0?null:r)}function sm(t,e,n,r){var s=or();r=r===void 0?null:r;var i=void 0;if(It!==null){var a=It.memoizedState;if(i=a.destroy,r!==null&&N0(r,a.deps)){s.memoizedState=wc(e,n,i,r);return}}ct.flags|=t,s.memoizedState=wc(1|e,n,i,r)}function jw(t,e){return bd(8390656,8,t,e)}function O0(t,e){return sm(2048,8,t,e)}function fA(t,e){return sm(4,2,t,e)}function gA(t,e){return sm(4,4,t,e)}function yA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vA(t,e,n){return n=n!=null?n.concat([t]):null,sm(4,4,yA.bind(null,e,t),n)}function P0(){}function xA(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wA(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&N0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bA(t,e,n){return ua&21?(Cr(n,e)||(n=AT(),ct.lanes|=n,da|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function dj(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var r=Ip.transition;Ip.transition={};try{t(!1),e()}finally{Je=n,Ip.transition=r}}function _A(){return or().memoizedState}function hj(t,e,n){var r=gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SA(t))kA(e,n);else if(n=sA(t,e,n,r),n!==null){var s=hn();Er(n,t,r,s),TA(n,e,r)}}function mj(t,e,n){var r=gi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SA(t))kA(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Cr(o,a)){var l=e.interleaved;l===null?(s.next=s,k0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=sA(t,e,s,r),n!==null&&(s=hn(),Er(n,t,r,s),TA(n,e,r))}}function SA(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function kA(t,e){Fl=ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function TA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u0(t,n)}}var oh={readContext:ar,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},pj={readContext:ar,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:jw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bd(4194308,4,yA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return bd(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hj.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:Pw,useDebugValue:P0,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=Pw(!1),e=t[0];return t=dj.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,s=Br();if(st){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Dt===null)throw Error(W(349));ua&30||cA(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,jw(dA.bind(null,r,i,t),[t]),r.flags|=2048,wc(9,uA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Br(),e=Dt.identifierPrefix;if(st){var n=bs,r=ws;n=(r&~(1<<32-Ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fj={readContext:ar,useCallback:xA,useContext:ar,useEffect:O0,useImperativeHandle:vA,useInsertionEffect:fA,useLayoutEffect:gA,useMemo:wA,useReducer:Rp,useRef:pA,useState:function(){return Rp(xc)},useDebugValue:P0,useDeferredValue:function(t){var e=or();return bA(e,It.memoizedState,t)},useTransition:function(){var t=Rp(xc)[0],e=or().memoizedState;return[t,e]},useMutableSource:oA,useSyncExternalStore:lA,useId:_A,unstable_isNewReconciler:!1},gj={readContext:ar,useCallback:xA,useContext:ar,useEffect:O0,useImperativeHandle:vA,useInsertionEffect:fA,useLayoutEffect:gA,useMemo:wA,useReducer:Op,useRef:pA,useState:function(){return Op(xc)},useDebugValue:P0,useDeferredValue:function(t){var e=or();return It===null?e.memoizedState=t:bA(e,It.memoizedState,t)},useTransition:function(){var t=Op(xc)[0],e=or().memoizedState;return[t,e]},useMutableSource:oA,useSyncExternalStore:lA,useId:_A,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var im={isMounted:function(t){return(t=t._reactInternals)?ga(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=gi(t),i=_s(r,s);i.payload=e,n!=null&&(i.callback=n),e=pi(t,i,s),e!==null&&(Er(e,t,s,r),xd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=gi(t),i=_s(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pi(t,i,s),e!==null&&(Er(e,t,s,r),xd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=gi(t),s=_s(n,r);s.tag=2,e!=null&&(s.callback=e),e=pi(t,s,r),e!==null&&(Er(e,t,r,n),xd(e,t,r))}};function $w(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!hc(n,r)||!hc(s,i):!0}function AA(t,e,n){var r=!1,s=bi,i=e.contextType;return typeof i=="object"&&i!==null?i=ar(i):(s=An(e)?la:Qt.current,r=e.contextTypes,i=(r=r!=null)?go(t,s):bi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=im,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&im.enqueueReplaceState(e,e.state,null)}function vg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},T0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ar(i):(i=An(e)?la:Qt.current,s.context=go(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&im.enqueueReplaceState(s,s.state,null),sh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,e){try{var n="",r=e;do n+=VO(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yj=typeof WeakMap=="function"?WeakMap:Map;function EA(t,e,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ch||(ch=!0,Ng=r),xg(t,e)},n}function CA(t,e,n){n=_s(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xg(t,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Lw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Rj.bind(null,t,e,n),e.then(t,t))}function Mw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_s(-1,1),e.tag=2,pi(n,e,1))),n.lanes|=1),t)}var vj=Fs.ReactCurrentOwner,_n=!1;function cn(t,e,n,r){e.child=t===null?rA(e,null,n,r):vo(e,t.child,n,r)}function Uw(t,e,n,r,s){n=n.render;var i=e.ref;return ho(e,s),r=I0(t,e,n,r,i,s),n=R0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ns(t,e,s)):(st&&n&&v0(e),e.flags|=1,cn(t,e,r,s),e.child)}function zw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!z0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NA(t,e,i,r,s)):(t=Td(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:hc,n(a,r)&&t.ref===e.ref)return Ns(t,e,s)}return e.flags|=1,t=yi(i,r),t.ref=e.ref,t.return=e,e.child=t}function NA(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(hc(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,Ns(t,e,s)}return wg(t,e,n,r,s)}function IA(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Ya,Ln),Ln|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(Ya,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Xe(Ya,Ln),Ln|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Xe(Ya,Ln),Ln|=r;return cn(t,e,s,n),e.child}function RA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,n,r,s){var i=An(n)?la:Qt.current;return i=go(e,i),ho(e,s),n=I0(t,e,n,r,i,s),r=R0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ns(t,e,s)):(st&&r&&v0(e),e.flags|=1,cn(t,e,n,s),e.child)}function Gw(t,e,n,r,s){if(An(n)){var i=!0;Qd(e)}else i=!1;if(ho(e,s),e.stateNode===null)_d(t,e),AA(e,n,r),vg(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=An(n)?la:Qt.current,u=go(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Dw(e,a,r,u),ti=!1;var m=e.memoizedState;a.state=m,sh(e,r,a,s),l=e.memoizedState,o!==r||m!==l||Tn.current||ti?(typeof d=="function"&&(yg(e,n,d,r),l=e.memoizedState),(o=ti||$w(e,n,o,r,m,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,iA(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:wr(e.type,o),a.props=u,h=e.pendingProps,m=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=An(n)?la:Qt.current,l=go(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==l)&&Dw(e,a,r,l),ti=!1,m=e.memoizedState,a.state=m,sh(e,r,a,s);var y=e.memoizedState;o!==h||m!==y||Tn.current||ti?(typeof p=="function"&&(yg(e,n,p,r),y=e.memoizedState),(u=ti||$w(e,n,u,r,m,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return bg(t,e,n,r,i,s)}function bg(t,e,n,r,s,i){RA(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ew(e,n,!1),Ns(t,e,i);r=e.stateNode,vj.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vo(e,t.child,null,i),e.child=vo(e,null,o,i)):cn(t,e,o,i),e.memoizedState=r.state,s&&Ew(e,n,!0),e.child}function OA(t){var e=t.stateNode;e.pendingContext?Aw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Aw(t,e.context,!1),A0(t,e.containerInfo)}function Bw(t,e,n,r,s){return yo(),w0(s),e.flags|=256,cn(t,e,n,r),e.child}var _g={dehydrated:null,treeContext:null,retryLane:0};function Sg(t){return{baseLanes:t,cachePool:null,transitions:null}}function PA(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Xe(ot,s&1),t===null)return fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=lm(a,r,0,null),t=ea(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sg(n),e.memoizedState=_g,t):j0(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return xj(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=yi(o,i):(i=ea(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Sg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=_g,r}return i=t.child,t=i.sibling,r=yi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function j0(t,e){return e=lm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ju(t,e,n,r){return r!==null&&w0(r),vo(e,t.child,null,n),t=j0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xj(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Pp(Error(W(422))),ju(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lm({mode:"visible",children:r.children},s,0,null),i=ea(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vo(e,t.child,null,a),e.child.memoizedState=Sg(a),e.memoizedState=_g,i);if(!(e.mode&1))return ju(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(W(419)),r=Pp(i,r,void 0),ju(t,e,a,r)}if(o=(a&t.childLanes)!==0,_n||o){if(r=Dt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cs(t,s),Er(r,t,s,-1))}return U0(),r=Pp(Error(W(421))),ju(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Oj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mn=mi(s.nextSibling),Un=e,st=!0,kr=null,t!==null&&(Qn[er++]=ws,Qn[er++]=bs,Qn[er++]=ca,ws=t.id,bs=t.overflow,ca=e),e=j0(e,r.children),e.flags|=4096,e)}function Vw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gg(t.return,e,n)}function jp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jA(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vw(t,n,e);else if(t.tag===19)Vw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jp(e,!0,n,null,i);break;case"together":jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _d(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wj(t,e,n){switch(e.tag){case 3:OA(e),yo();break;case 5:aA(e);break;case 1:An(e.type)&&Qd(e);break;case 4:A0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Xe(nh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?PA(t,e,n):(Xe(ot,ot.current&1),t=Ns(t,e,n),t!==null?t.sibling:null);Xe(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jA(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,IA(t,e,n)}return Ns(t,e,n)}var $A,kg,DA,LA;$A=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kg=function(){};DA=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qi(Xr.current);var i=null;switch(n){case"input":s=Wf(t,s),r=Wf(t,r),i=[];break;case"select":s=ut({},s,{value:void 0}),r=ut({},r,{value:void 0}),i=[];break;case"textarea":s=Yf(t,s),r=Yf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jd)}Jf(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ic.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ic.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&et("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};LA=function(t,e,n,r){n!==r&&(e.flags|=4)};function al(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bj(t,e,n){var r=e.pendingProps;switch(x0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return An(e.type)&&Xd(),Zt(e),null;case 3:return r=e.stateNode,xo(),nt(Tn),nt(Qt),C0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kr!==null&&(Og(kr),kr=null))),kg(t,e),Zt(e),null;case 5:E0(e);var s=qi(yc.current);if(n=e.type,t!==null&&e.stateNode!=null)DA(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Zt(e),null}if(t=qi(Xr.current),Ou(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hr]=e,r[fc]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<gl.length;s++)et(gl[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":Qx(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":tw(r,i),et("invalid",r)}Jf(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ru(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ru(r.textContent,o,t),s=["children",""+o]):ic.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&et("scroll",r)}switch(n){case"input":Su(r),ew(r,i,!0);break;case"textarea":Su(r),nw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Hr]=e,t[fc]=r,$A(t,e,!1,!1),e.stateNode=t;e:{switch(a=Xf(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<gl.length;s++)et(gl[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":Qx(t,r),s=Wf(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ut({},r,{value:void 0}),et("invalid",t);break;case"textarea":tw(t,r),s=Yf(t,r),et("invalid",t);break;default:s=r}Jf(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?pT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ac(t,l):typeof l=="number"&&ac(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ic.hasOwnProperty(i)?l!=null&&i==="onScroll"&&et("scroll",t):l!=null&&s0(t,i,l,a))}switch(n){case"input":Su(t),ew(t,r,!1);break;case"textarea":Su(t),nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)LA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=qi(yc.current),qi(Xr.current),Ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hr]=e,(i=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:Ru(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ru(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hr]=e,e.stateNode=r}return Zt(e),null;case 13:if(nt(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Mn!==null&&e.mode&1&&!(e.flags&128))tA(),yo(),e.flags|=98560,i=!1;else if(i=Ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Hr]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),i=!1}else kr!==null&&(Og(kr),kr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Ot===0&&(Ot=3):U0())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return xo(),kg(t,e),t===null&&mc(e.stateNode.containerInfo),Zt(e),null;case 10:return S0(e.type._context),Zt(e),null;case 17:return An(e.type)&&Xd(),Zt(e),null;case 19:if(nt(ot),i=e.memoizedState,i===null)return Zt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)al(i,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ih(t),a!==null){for(e.flags|=128,al(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&vt()>bo&&(e.flags|=128,r=!0,al(i,!1),e.lanes=4194304)}else{if(!r)if(t=ih(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),al(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!st)return Zt(e),null}else 2*vt()-i.renderingStartTime>bo&&n!==1073741824&&(e.flags|=128,r=!0,al(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,n=ot.current,Xe(ot,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return F0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function _j(t,e){switch(x0(e),e.tag){case 1:return An(e.type)&&Xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),nt(Tn),nt(Qt),C0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E0(e),null;case 13:if(nt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ot),null;case 4:return xo(),null;case 10:return S0(e.type._context),null;case 22:case 23:return F0(),null;case 24:return null;default:return null}}var $u=!1,Jt=!1,Sj=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function Tg(t,e,n){try{n()}catch(r){pt(t,e,r)}}var Hw=!1;function kj(t,e){if(lg=Kd,t=GT(),y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===s&&(o=a),m===i&&++d===r&&(l=a),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cg={focusedElem:t,selectionRange:n},Kd=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,g=e.stateNode,f=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:wr(e.type,w),x);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){pt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return y=Hw,Hw=!1,y}function Ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tg(e,n,i)}s=s.next}while(s!==r)}}function am(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ag(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MA(t){var e=t.alternate;e!==null&&(t.alternate=null,MA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hr],delete e[fc],delete e[hg],delete e[aj],delete e[oj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FA(t){return t.tag===5||t.tag===3||t.tag===4}function Ww(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jd));else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function Cg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cg(t,e,n),t=t.sibling;t!==null;)Cg(t,e,n),t=t.sibling}var Ft=null,Sr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)UA(t,e,n),n=n.sibling}function UA(t,e,n){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(Xh,n)}catch{}switch(n.tag){case 5:Jt||Ka(n,e);case 6:var r=Ft,s=Sr;Ft=null,Ks(t,e,n),Ft=r,Sr=s,Ft!==null&&(Sr?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(Sr?(t=Ft,n=n.stateNode,t.nodeType===8?Ep(t.parentNode,n):t.nodeType===1&&Ep(t,n),uc(t)):Ep(Ft,n.stateNode));break;case 4:r=Ft,s=Sr,Ft=n.stateNode.containerInfo,Sr=!0,Ks(t,e,n),Ft=r,Sr=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Tg(n,e,a),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!Jt&&(Ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){pt(n,e,o)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Ks(t,e,n),Jt=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function qw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Sj),e.forEach(function(r){var s=Pj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ft=o.stateNode,Sr=!1;break e;case 3:Ft=o.stateNode.containerInfo,Sr=!0;break e;case 4:Ft=o.stateNode.containerInfo,Sr=!0;break e}o=o.return}if(Ft===null)throw Error(W(160));UA(i,a,s),Ft=null,Sr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){pt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zA(e,t),e=e.sibling}function zA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Lr(t),r&4){try{Ul(3,t,t.return),am(3,t)}catch(w){pt(t,t.return,w)}try{Ul(5,t,t.return)}catch(w){pt(t,t.return,w)}}break;case 1:ur(e,t),Lr(t),r&512&&n!==null&&Ka(n,n.return);break;case 5:if(ur(e,t),Lr(t),r&512&&n!==null&&Ka(n,n.return),t.flags&32){var s=t.stateNode;try{ac(s,"")}catch(w){pt(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&cT(s,i),Xf(o,a);var u=Xf(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?pT(s,h):d==="dangerouslySetInnerHTML"?hT(s,h):d==="children"?ac(s,h):s0(s,d,h,u)}switch(o){case"input":qf(s,i);break;case"textarea":uT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?oo(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[fc]=i}catch(w){pt(t,t.return,w)}}break;case 6:if(ur(e,t),Lr(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){pt(t,t.return,w)}}break;case 3:if(ur(e,t),Lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uc(e.containerInfo)}catch(w){pt(t,t.return,w)}break;case 4:ur(e,t),Lr(t);break;case 13:ur(e,t),Lr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(L0=vt())),r&4&&qw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(u=Jt)||d,ur(e,t),Jt=u):ur(e,t),Lr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(te=t,d=t.child;d!==null;){for(h=te=d;te!==null;){switch(m=te,p=m.child,m.tag){case 0:case 11:case 14:case 15:Ul(4,m,m.return);break;case 1:Ka(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){pt(r,n,w)}}break;case 5:Ka(m,m.return);break;case 22:if(m.memoizedState!==null){Yw(h);continue}}p!==null?(p.return=m,te=p):Yw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=mT("display",a))}catch(w){pt(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){pt(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ur(e,t),Lr(t),r&4&&qw(t);break;case 21:break;default:ur(e,t),Lr(t)}}function Lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FA(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ac(s,""),r.flags&=-33);var i=Ww(t);Cg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Ww(t);Eg(t,o,a);break;default:throw Error(W(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tj(t,e,n){te=t,GA(t)}function GA(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||$u;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Jt;o=$u;var u=Jt;if($u=a,(Jt=l)&&!u)for(te=s;te!==null;)a=te,l=a.child,a.tag===22&&a.memoizedState!==null?Zw(s):l!==null?(l.return=a,te=l):Zw(s);for(;i!==null;)te=i,GA(i),i=i.sibling;te=s,$u=o,Jt=u}Kw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):Kw(t)}}function Kw(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||am(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ow(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ow(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&uc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Jt||e.flags&512&&Ag(e)}catch(m){pt(e,e.return,m)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Yw(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Zw(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{am(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{Ag(e)}catch(l){pt(e,i,l)}break;case 5:var a=e.return;try{Ag(e)}catch(l){pt(e,a,l)}}}catch(l){pt(e,e.return,l)}if(e===t){te=null;break}var o=e.sibling;if(o!==null){o.return=e.return,te=o;break}te=e.return}}var Aj=Math.ceil,lh=Fs.ReactCurrentDispatcher,$0=Fs.ReactCurrentOwner,sr=Fs.ReactCurrentBatchConfig,Le=0,Dt=null,kt=null,Vt=0,Ln=0,Ya=Ni(0),Ot=0,bc=null,da=0,om=0,D0=0,zl=null,xn=null,L0=0,bo=1/0,fs=null,ch=!1,Ng=null,fi=null,Du=!1,ai=null,uh=0,Gl=0,Ig=null,Sd=-1,kd=0;function hn(){return Le&6?vt():Sd!==-1?Sd:Sd=vt()}function gi(t){return t.mode&1?Le&2&&Vt!==0?Vt&-Vt:cj.transition!==null?(kd===0&&(kd=AT()),kd):(t=Je,t!==0||(t=window.event,t=t===void 0?16:PT(t.type)),t):1}function Er(t,e,n,r){if(50<Gl)throw Gl=0,Ig=null,Error(W(185));Uc(t,n,r),(!(Le&2)||t!==Dt)&&(t===Dt&&(!(Le&2)&&(om|=n),Ot===4&&si(t,Vt)),En(t,r),n===1&&Le===0&&!(e.mode&1)&&(bo=vt()+500,rm&&Ii()))}function En(t,e){var n=t.callbackNode;cP(t,e);var r=qd(t,t===Dt?Vt:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?lj(Jw.bind(null,t)):XT(Jw.bind(null,t)),sj(function(){!(Le&6)&&Ii()}),n=null;else{switch(ET(r)){case 1:n=c0;break;case 4:n=kT;break;case 16:n=Wd;break;case 536870912:n=TT;break;default:n=Wd}n=ZA(n,BA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function BA(t,e){if(Sd=-1,kd=0,Le&6)throw Error(W(327));var n=t.callbackNode;if(mo()&&t.callbackNode!==n)return null;var r=qd(t,t===Dt?Vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dh(t,r);else{e=r;var s=Le;Le|=2;var i=HA();(Dt!==t||Vt!==e)&&(fs=null,bo=vt()+500,Qi(t,e));do try{Nj();break}catch(o){VA(t,o)}while(!0);_0(),lh.current=i,Le=s,kt!==null?e=0:(Dt=null,Vt=0,e=Ot)}if(e!==0){if(e===2&&(s=rg(t),s!==0&&(r=s,e=Rg(t,s))),e===1)throw n=bc,Qi(t,0),si(t,r),En(t,vt()),n;if(e===6)si(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ej(s)&&(e=dh(t,r),e===2&&(i=rg(t),i!==0&&(r=i,e=Rg(t,i))),e===1))throw n=bc,Qi(t,0),si(t,r),En(t,vt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Mi(t,xn,fs);break;case 3:if(si(t,r),(r&130023424)===r&&(e=L0+500-vt(),10<e)){if(qd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dg(Mi.bind(null,t,xn,fs),e);break}Mi(t,xn,fs);break;case 4:if(si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Ar(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Aj(r/1960))-r,10<r){t.timeoutHandle=dg(Mi.bind(null,t,xn,fs),r);break}Mi(t,xn,fs);break;case 5:Mi(t,xn,fs);break;default:throw Error(W(329))}}}return En(t,vt()),t.callbackNode===n?BA.bind(null,t):null}function Rg(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(Qi(t,e).flags|=256),t=dh(t,e),t!==2&&(e=xn,xn=n,e!==null&&Og(e)),t}function Og(t){xn===null?xn=t:xn.push.apply(xn,t)}function Ej(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~D0,e&=~om,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ar(e),r=1<<n;t[n]=-1,e&=~r}}function Jw(t){if(Le&6)throw Error(W(327));mo();var e=qd(t,0);if(!(e&1))return En(t,vt()),null;var n=dh(t,e);if(t.tag!==0&&n===2){var r=rg(t);r!==0&&(e=r,n=Rg(t,r))}if(n===1)throw n=bc,Qi(t,0),si(t,e),En(t,vt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mi(t,xn,fs),En(t,vt()),null}function M0(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(bo=vt()+500,rm&&Ii())}}function ha(t){ai!==null&&ai.tag===0&&!(Le&6)&&mo();var e=Le;Le|=1;var n=sr.transition,r=Je;try{if(sr.transition=null,Je=1,t)return t()}finally{Je=r,sr.transition=n,Le=e,!(Le&6)&&Ii()}}function F0(){Ln=Ya.current,nt(Ya)}function Qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rj(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(x0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xd();break;case 3:xo(),nt(Tn),nt(Qt),C0();break;case 5:E0(r);break;case 4:xo();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:S0(r.type._context);break;case 22:case 23:F0()}n=n.return}if(Dt=t,kt=t=yi(t.current,null),Vt=Ln=e,Ot=0,bc=null,D0=om=da=0,xn=zl=null,Wi!==null){for(e=0;e<Wi.length;e++)if(n=Wi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Wi=null}return t}function VA(t,e){do{var n=kt;try{if(_0(),wd.current=oh,ah){for(var r=ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ah=!1}if(ua=0,$t=It=ct=null,Fl=!1,vc=0,$0.current=null,n===null||n.return===null){Ot=1,bc=e,kt=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=Vt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Mw(a);if(p!==null){p.flags&=-257,Fw(p,a,o,i,e),p.mode&1&&Lw(i,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){Lw(i,u,e),U0();break e}l=Error(W(426))}}else if(st&&o.mode&1){var x=Mw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Fw(x,a,o,i,e),w0(wo(l,o));break e}}i=l=wo(l,o),Ot!==4&&(Ot=2),zl===null?zl=[i]:zl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=EA(i,l,e);Rw(i,g);break e;case 1:o=l;var f=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fi===null||!fi.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=CA(i,o,e);Rw(i,b);break e}}i=i.return}while(i!==null)}qA(n)}catch(_){e=_,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function HA(){var t=lh.current;return lh.current=oh,t===null?oh:t}function U0(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Dt===null||!(da&268435455)&&!(om&268435455)||si(Dt,Vt)}function dh(t,e){var n=Le;Le|=2;var r=HA();(Dt!==t||Vt!==e)&&(fs=null,Qi(t,e));do try{Cj();break}catch(s){VA(t,s)}while(!0);if(_0(),Le=n,lh.current=r,kt!==null)throw Error(W(261));return Dt=null,Vt=0,Ot}function Cj(){for(;kt!==null;)WA(kt)}function Nj(){for(;kt!==null&&!eP();)WA(kt)}function WA(t){var e=YA(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?qA(t):kt=e,$0.current=null}function qA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_j(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,kt=null;return}}else if(n=bj(n,e,Ln),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Mi(t,e,n){var r=Je,s=sr.transition;try{sr.transition=null,Je=1,Ij(t,e,n,r)}finally{sr.transition=s,Je=r}return null}function Ij(t,e,n,r){do mo();while(ai!==null);if(Le&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(uP(t,i),t===Dt&&(kt=Dt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Du||(Du=!0,ZA(Wd,function(){return mo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sr.transition,sr.transition=null;var a=Je;Je=1;var o=Le;Le|=4,$0.current=null,kj(t,n),zA(n,t),ZP(cg),Kd=!!lg,cg=lg=null,t.current=n,Tj(n),tP(),Le=o,Je=a,sr.transition=i}else t.current=n;if(Du&&(Du=!1,ai=t,uh=s),i=t.pendingLanes,i===0&&(fi=null),sP(n.stateNode),En(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ch)throw ch=!1,t=Ng,Ng=null,t;return uh&1&&t.tag!==0&&mo(),i=t.pendingLanes,i&1?t===Ig?Gl++:(Gl=0,Ig=t):Gl=0,Ii(),null}function mo(){if(ai!==null){var t=ET(uh),e=sr.transition,n=Je;try{if(sr.transition=null,Je=16>t?16:t,ai===null)var r=!1;else{if(t=ai,ai=null,uh=0,Le&6)throw Error(W(331));var s=Le;for(Le|=4,te=t.current;te!==null;){var i=te,a=i.child;if(te.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(te=u;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:Ul(8,d,i)}var h=d.child;if(h!==null)h.return=d,te=h;else for(;te!==null;){d=te;var m=d.sibling,p=d.return;if(MA(d),d===u){te=null;break}if(m!==null){m.return=p,te=m;break}te=p}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}te=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,te=a;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ul(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,te=g;break e}te=i.return}}var f=t.current;for(te=f;te!==null;){a=te;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,te=v;else e:for(a=f;te!==null;){if(o=te,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:am(9,o)}}catch(_){pt(o,o.return,_)}if(o===a){te=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,te=b;break e}te=o.return}}if(Le=s,Ii(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(Xh,t)}catch{}r=!0}return r}finally{Je=n,sr.transition=e}}return!1}function Xw(t,e,n){e=wo(n,e),e=EA(t,e,1),t=pi(t,e,1),e=hn(),t!==null&&(Uc(t,1,e),En(t,e))}function pt(t,e,n){if(t.tag===3)Xw(t,t,n);else for(;e!==null;){if(e.tag===3){Xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){t=wo(n,t),t=CA(e,t,1),e=pi(e,t,1),t=hn(),e!==null&&(Uc(e,1,t),En(e,t));break}}e=e.return}}function Rj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Vt&n)===n&&(Ot===4||Ot===3&&(Vt&130023424)===Vt&&500>vt()-L0?Qi(t,0):D0|=n),En(t,e)}function KA(t,e){e===0&&(t.mode&1?(e=Au,Au<<=1,!(Au&130023424)&&(Au=4194304)):e=1);var n=hn();t=Cs(t,e),t!==null&&(Uc(t,e,n),En(t,n))}function Oj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KA(t,n)}function Pj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),KA(t,n)}var YA;YA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,wj(t,e,n);_n=!!(t.flags&131072)}else _n=!1,st&&e.flags&1048576&&QT(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_d(t,e),t=e.pendingProps;var s=go(e,Qt.current);ho(e,n),s=I0(null,e,r,t,s,n);var i=R0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(r)?(i=!0,Qd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,T0(e),s.updater=im,e.stateNode=s,s._reactInternals=e,vg(e,r,t,n),e=bg(null,e,r,!0,i,n)):(e.tag=0,st&&i&&v0(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_d(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=$j(r),t=wr(r,t),s){case 0:e=wg(null,e,r,t,n);break e;case 1:e=Gw(null,e,r,t,n);break e;case 11:e=Uw(null,e,r,t,n);break e;case 14:e=zw(null,e,r,wr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wr(r,s),wg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wr(r,s),Gw(t,e,r,s,n);case 3:e:{if(OA(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,iA(t,e),sh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=wo(Error(W(423)),e),e=Bw(t,e,r,n,s);break e}else if(r!==s){s=wo(Error(W(424)),e),e=Bw(t,e,r,n,s);break e}else for(Mn=mi(e.stateNode.containerInfo.firstChild),Un=e,st=!0,kr=null,n=rA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yo(),r===s){e=Ns(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return aA(e),t===null&&fg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ug(r,s)?a=null:i!==null&&ug(r,i)&&(e.flags|=32),RA(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&fg(e),null;case 13:return PA(t,e,n);case 4:return A0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vo(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wr(r,s),Uw(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Xe(nh,r._currentValue),r._currentValue=a,i!==null)if(Cr(i.value,a)){if(i.children===s.children&&!Tn.current){e=Ns(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=_s(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),gg(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),gg(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ho(e,n),s=ar(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=wr(r,e.pendingProps),s=wr(r.type,s),zw(t,e,r,s,n);case 15:return NA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wr(r,s),_d(t,e),e.tag=1,An(r)?(t=!0,Qd(e)):t=!1,ho(e,n),AA(e,r,s),vg(e,r,s,n),bg(null,e,r,!0,t,n);case 19:return jA(t,e,n);case 22:return IA(t,e,n)}throw Error(W(156,e.tag))};function ZA(t,e){return ST(t,e)}function jj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new jj(t,e,n,r)}function z0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $j(t){if(typeof t=="function")return z0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===a0)return 11;if(t===o0)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Td(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")z0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Fa:return ea(n.children,s,i,e);case i0:a=8,s|=8;break;case Gf:return t=tr(12,n,e,s|2),t.elementType=Gf,t.lanes=i,t;case Bf:return t=tr(13,n,e,s),t.elementType=Bf,t.lanes=i,t;case Vf:return t=tr(19,n,e,s),t.elementType=Vf,t.lanes=i,t;case aT:return lm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sT:a=10;break e;case iT:a=9;break e;case a0:a=11;break e;case o0:a=14;break e;case ei:a=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=tr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ea(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function lm(t,e,n,r){return t=tr(22,t,r,e),t.elementType=aT,t.lanes=n,t.stateNode={isHidden:!1},t}function $p(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function Dp(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gp(0),this.expirationTimes=gp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function G0(t,e,n,r,s,i,a,o,l){return t=new Dj(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T0(i),t}function Lj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ma,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function JA(t){if(!t)return bi;t=t._reactInternals;e:{if(ga(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(An(n))return JT(t,n,e)}return e}function XA(t,e,n,r,s,i,a,o,l){return t=G0(n,r,!0,t,s,i,a,o,l),t.context=JA(null),n=t.current,r=hn(),s=gi(n),i=_s(r,s),i.callback=e??null,pi(n,i,s),t.current.lanes=s,Uc(t,s,r),En(t,r),t}function cm(t,e,n,r){var s=e.current,i=hn(),a=gi(s);return n=JA(n),e.context===null?e.context=n:e.pendingContext=n,e=_s(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pi(s,e,a),t!==null&&(Er(t,s,a,i),xd(t,s,a)),a}function hh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function B0(t,e){Qw(t,e),(t=t.alternate)&&Qw(t,e)}function Mj(){return null}var QA=typeof reportError=="function"?reportError:function(t){console.error(t)};function V0(t){this._internalRoot=t}um.prototype.render=V0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));cm(t,e,null,null)};um.prototype.unmount=V0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ha(function(){cm(null,t,null,null)}),e[Es]=null}};function um(t){this._internalRoot=t}um.prototype.unstable_scheduleHydration=function(t){if(t){var e=IT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&OT(t)}};function H0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eb(){}function Fj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=hh(a);i.call(u)}}var a=XA(e,r,t,0,null,!1,!1,"",eb);return t._reactRootContainer=a,t[Es]=a.current,mc(t.nodeType===8?t.parentNode:t),ha(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=hh(l);o.call(u)}}var l=G0(t,0,!1,null,null,!1,!1,"",eb);return t._reactRootContainer=l,t[Es]=l.current,mc(t.nodeType===8?t.parentNode:t),ha(function(){cm(e,l,n,r)}),l}function hm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=hh(a);o.call(l)}}cm(e,a,t,s)}else a=Fj(n,e,t,s,r);return hh(a)}CT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fl(e.pendingLanes);n!==0&&(u0(e,n|1),En(e,vt()),!(Le&6)&&(bo=vt()+500,Ii()))}break;case 13:ha(function(){var r=Cs(t,1);if(r!==null){var s=hn();Er(r,t,1,s)}}),B0(t,1)}};d0=function(t){if(t.tag===13){var e=Cs(t,134217728);if(e!==null){var n=hn();Er(e,t,134217728,n)}B0(t,134217728)}};NT=function(t){if(t.tag===13){var e=gi(t),n=Cs(t,e);if(n!==null){var r=hn();Er(n,t,e,r)}B0(t,e)}};IT=function(){return Je};RT=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};eg=function(t,e,n){switch(e){case"input":if(qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nm(r);if(!s)throw Error(W(90));lT(r),qf(r,s)}}}break;case"textarea":uT(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};yT=M0;vT=ha;var Uj={usingClientEntryPoint:!1,Events:[Gc,Ba,nm,fT,gT,M0]},ol={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zj={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bT(t),t===null?null:t.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||Mj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Xh=Lu.inject(zj),Jr=Lu}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uj;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H0(e))throw Error(W(200));return Lj(t,e,null,n)};Wn.createRoot=function(t,e){if(!H0(t))throw Error(W(299));var n=!1,r="",s=QA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=G0(t,1,!1,null,null,n,!1,r,s),t[Es]=e.current,mc(t.nodeType===8?t.parentNode:t),new V0(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=bT(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return ha(t)};Wn.hydrate=function(t,e,n){if(!dm(e))throw Error(W(200));return hm(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!H0(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=QA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=XA(e,null,t,1,n??null,s,!1,i,a),t[Es]=e.current,mc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new um(e)};Wn.render=function(t,e,n){if(!dm(e))throw Error(W(200));return hm(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!dm(t))throw Error(W(40));return t._reactRootContainer?(ha(function(){hm(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};Wn.unstable_batchedUpdates=M0;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dm(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return hm(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function eE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eE)}catch(t){console.error(t)}}eE(),eT.exports=Wn;var tE=eT.exports,nE,tb=tE;nE=tb.createRoot,tb.hydrateRoot;const rE=$.createContext({});function Gj(t){const e=$.useRef(null);return e.current===null&&(e.current=t()),e.current}const W0=typeof window<"u",Bj=W0?$.useLayoutEffect:$.useEffect,q0=$.createContext(null);function K0(t,e){t.indexOf(e)===-1&&t.push(e)}function Y0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Is=(t,e,n)=>n>e?e:n<t?t:n;let mh=()=>{};const Rs={},sE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function iE(t){return typeof t=="object"&&t!==null}const aE=t=>/^0[^.\s]+$/u.test(t);function Z0(t){let e;return()=>(e===void 0&&(e=t()),e)}const ir=t=>t,Vj=(t,e)=>n=>e(t(n)),Vc=(...t)=>t.reduce(Vj),_c=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class J0{constructor(){this.subscriptions=[]}add(e){return K0(this.subscriptions,e),()=>Y0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qr=t=>t*1e3,nr=t=>t/1e3;function oE(t,e){return e?t*(1e3/e):0}const lE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Hj=1e-7,Wj=12;function qj(t,e,n,r,s){let i,a,o=0;do a=e+(n-e)/2,i=lE(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>Hj&&++o<Wj);return a}function Hc(t,e,n,r){if(t===e&&n===r)return ir;const s=i=>qj(i,0,1,t,n);return i=>i===0||i===1?i:lE(s(i),e,r)}const cE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uE=t=>e=>1-t(1-e),dE=Hc(.33,1.53,.69,.99),X0=uE(dE),hE=cE(X0),mE=t=>(t*=2)<1?.5*X0(t):.5*(2-Math.pow(2,-10*(t-1))),Q0=t=>1-Math.sin(Math.acos(t)),pE=uE(Q0),fE=cE(Q0),Kj=Hc(.42,0,1,1),Yj=Hc(0,0,.58,1),gE=Hc(.42,0,.58,1),Zj=t=>Array.isArray(t)&&typeof t[0]!="number",yE=t=>Array.isArray(t)&&typeof t[0]=="number",nb={linear:ir,easeIn:Kj,easeInOut:gE,easeOut:Yj,circIn:Q0,circInOut:fE,circOut:pE,backIn:X0,backInOut:hE,backOut:dE,anticipate:mE},Jj=t=>typeof t=="string",rb=t=>{if(yE(t)){mh(t.length===4);const[e,n,r,s]=t;return Hc(e,n,r,s)}else if(Jj(t))return mh(nb[t]!==void 0),nb[t];return t},Mu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],sb={value:null,addProjectionMetrics:null};function Xj(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){a.has(h)&&(d.schedule(h),t()),l++,h(o)}const d={schedule:(h,m=!1,p=!1)=>{const w=p&&s?n:r;return m&&a.add(h),w.has(h)||w.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&sb.value&&sb.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const Qj=40;function vE(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Mu.reduce((v,b)=>(v[b]=Xj(i,e?b:void 0),v),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:p,postRender:y}=a,w=()=>{const v=Rs.useManualTiming?s.timestamp:performance.now();n=!1,Rs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,Qj),1)),s.timestamp=v,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),h.process(s),m.process(s),p.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(w))},x=()=>{n=!0,r=!0,s.isProcessing||t(w)};return{schedule:Mu.reduce((v,b)=>{const _=a[b];return v[b]=(E,C=!1,S=!1)=>(n||x(),_.schedule(E,C,S)),v},{}),cancel:v=>{for(let b=0;b<Mu.length;b++)a[Mu[b]].cancel(v)},state:s,steps:a}}const{schedule:it,cancel:_i,state:zt,steps:Lp}=vE(typeof requestAnimationFrame<"u"?requestAnimationFrame:ir,!0);let Ad;function e2(){Ad=void 0}const Sn={now:()=>(Ad===void 0&&Sn.set(zt.isProcessing||Rs.useManualTiming?zt.timestamp:performance.now()),Ad),set:t=>{Ad=t,queueMicrotask(e2)}},xE=t=>e=>typeof e=="string"&&e.startsWith(t),wE=xE("--"),t2=xE("var(--"),ev=t=>t2(t)?n2.test(t.split("/*")[0].trim()):!1,n2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sc={...Mo,transform:t=>Is(0,1,t)},Fu={...Mo,default:1},Bl=t=>Math.round(t*1e5)/1e5,tv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function r2(t){return t==null}const s2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nv=(t,e)=>n=>!!(typeof n=="string"&&s2.test(n)&&n.startsWith(t)||e&&!r2(n)&&Object.prototype.hasOwnProperty.call(n,e)),bE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,o]=r.match(tv);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},i2=t=>Is(0,255,t),Mp={...Mo,transform:t=>Math.round(i2(t))},Ki={test:nv("rgb","red"),parse:bE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mp.transform(t)+", "+Mp.transform(e)+", "+Mp.transform(n)+", "+Bl(Sc.transform(r))+")"};function a2(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Pg={test:nv("#"),parse:a2,transform:Ki.transform},Wc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qs=Wc("deg"),es=Wc("%"),we=Wc("px"),o2=Wc("vh"),l2=Wc("vw"),ib={...es,parse:t=>es.parse(t)/100,transform:t=>es.transform(t*100)},Za={test:nv("hsl","hue"),parse:bE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+es.transform(Bl(e))+", "+es.transform(Bl(n))+", "+Bl(Sc.transform(r))+")"},bt={test:t=>Ki.test(t)||Pg.test(t)||Za.test(t),parse:t=>Ki.test(t)?Ki.parse(t):Za.test(t)?Za.parse(t):Pg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ki.transform(t):Za.transform(t),getAnimatableNone:t=>{const e=bt.parse(t);return e.alpha=0,bt.transform(e)}},c2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function u2(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(tv))==null?void 0:e.length)||0)+(((n=t.match(c2))==null?void 0:n.length)||0)>0}const _E="number",SE="color",d2="var",h2="var(",ab="${}",m2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(m2,l=>(bt.test(l)?(r.color.push(i),s.push(SE),n.push(bt.parse(l))):l.startsWith(h2)?(r.var.push(i),s.push(d2),n.push(l)):(r.number.push(i),s.push(_E),n.push(parseFloat(l))),++i,ab)).split(ab);return{values:n,split:o,indexes:r,types:s}}function kE(t){return kc(t).values}function TE(t){const{split:e,types:n}=kc(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const o=n[a];o===_E?i+=Bl(s[a]):o===SE?i+=bt.transform(s[a]):i+=s[a]}return i}}const p2=t=>typeof t=="number"?0:bt.test(t)?bt.getAnimatableNone(t):t;function f2(t){const e=kE(t);return TE(t)(e.map(p2))}const Si={test:u2,parse:kE,createTransformer:TE,getAnimatableNone:f2};function Fp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function g2({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;s=Fp(l,o,t+1/3),i=Fp(l,o,t),a=Fp(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function ph(t,e){return n=>n>0?e:t}const lt=(t,e,n)=>t+(e-t)*n,Up=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},y2=[Pg,Ki,Za],v2=t=>y2.find(e=>e.test(t));function ob(t){const e=v2(t);if(!e)return!1;let n=e.parse(t);return e===Za&&(n=g2(n)),n}const lb=(t,e)=>{const n=ob(t),r=ob(e);if(!n||!r)return ph(t,e);const s={...n};return i=>(s.red=Up(n.red,r.red,i),s.green=Up(n.green,r.green,i),s.blue=Up(n.blue,r.blue,i),s.alpha=lt(n.alpha,r.alpha,i),Ki.transform(s))},jg=new Set(["none","hidden"]);function x2(t,e){return jg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function w2(t,e){return n=>lt(t,e,n)}function rv(t){return typeof t=="number"?w2:typeof t=="string"?ev(t)?ph:bt.test(t)?lb:S2:Array.isArray(t)?AE:typeof t=="object"?bt.test(t)?lb:b2:ph}function AE(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>rv(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function b2(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=rv(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function _2(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],o=t.values[a]??0;n[s]=o,r[i]++}return n}const S2=(t,e)=>{const n=Si.createTransformer(e),r=kc(t),s=kc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?jg.has(t)&&!s.values.length||jg.has(e)&&!r.values.length?x2(t,e):Vc(AE(_2(r,s),s.values),n):ph(t,e)};function EE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?lt(t,e,n):rv(t)(t,e)}const k2=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>it.update(e,n),stop:()=>_i(e),now:()=>zt.isProcessing?zt.timestamp:Sn.now()}},CE=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fh=2e4;function sv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fh;)e+=n,r=t.next(e);return e>=fh?1/0:e}function T2(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(sv(r),fh);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:nr(s)}}const A2=5;function NE(t,e,n){const r=Math.max(e-A2,0);return oE(n-t(r),e-r)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zp=.001;function E2({duration:t=dt.duration,bounce:e=dt.bounce,velocity:n=dt.velocity,mass:r=dt.mass}){let s,i,a=1-e;a=Is(dt.minDamping,dt.maxDamping,a),t=Is(dt.minDuration,dt.maxDuration,nr(t)),a<1?(s=u=>{const d=u*a,h=d*t,m=d-n,p=$g(u,a),y=Math.exp(-h);return zp-m/p*y},i=u=>{const h=u*a*t,m=h*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,y=Math.exp(-h),w=$g(Math.pow(u,2),a);return(-s(u)+zp>0?-1:1)*((m-p)*y)/w}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-zp+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const o=5/t,l=N2(s,i,o);if(t=Qr(t),isNaN(l))return{stiffness:dt.stiffness,damping:dt.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const C2=12;function N2(t,e,n){let r=n;for(let s=1;s<C2;s++)r=r-t(r)/e(r);return r}function $g(t,e){return t*Math.sqrt(1-e*e)}const I2=["duration","bounce"],R2=["stiffness","damping","mass"];function cb(t,e){return e.some(n=>t[n]!==void 0)}function O2(t){let e={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...t};if(!cb(t,R2)&&cb(t,I2))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Is(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:dt.mass,stiffness:s,damping:i}}else{const n=E2(t);e={...e,...n,mass:dt.mass},e.isResolvedFromDuration=!0}return e}function gh(t=dt.visualDuration,e=dt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:p}=O2({...n,velocity:-nr(n.velocity||0)}),y=m||0,w=u/(2*Math.sqrt(l*d)),x=a-i,g=nr(Math.sqrt(l/d)),f=Math.abs(x)<5;r||(r=f?dt.restSpeed.granular:dt.restSpeed.default),s||(s=f?dt.restDelta.granular:dt.restDelta.default);let v;if(w<1){const _=$g(g,w);v=E=>{const C=Math.exp(-w*g*E);return a-C*((y+w*g*x)/_*Math.sin(_*E)+x*Math.cos(_*E))}}else if(w===1)v=_=>a-Math.exp(-g*_)*(x+(y+g*x)*_);else{const _=g*Math.sqrt(w*w-1);v=E=>{const C=Math.exp(-w*g*E),S=Math.min(_*E,300);return a-C*((y+w*g*x)*Math.sinh(S)+_*x*Math.cosh(S))/_}}const b={calculatedDuration:p&&h||null,next:_=>{const E=v(_);if(p)o.done=_>=h;else{let C=_===0?y:0;w<1&&(C=_===0?Qr(y):NE(v,_,E));const S=Math.abs(C)<=r,N=Math.abs(a-E)<=s;o.done=S&&N}return o.value=o.done?a:E,o},toString:()=>{const _=Math.min(sv(b),fh),E=CE(C=>b.next(_*C).value,_,30);return _+"ms "+E},toTransition:()=>{}};return b}gh.applyToOptions=t=>{const e=T2(t,100,gh);return t.ease=e.ease,t.duration=Qr(e.duration),t.type="keyframes",t};function Dg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},p=S=>o!==void 0&&S<o||l!==void 0&&S>l,y=S=>o===void 0?l:l===void 0||Math.abs(o-S)<Math.abs(l-S)?o:l;let w=n*e;const x=h+w,g=a===void 0?x:a(x);g!==x&&(w=g-h);const f=S=>-w*Math.exp(-S/r),v=S=>g+f(S),b=S=>{const N=f(S),D=v(S);m.done=Math.abs(N)<=u,m.value=m.done?g:D};let _,E;const C=S=>{p(m.value)&&(_=S,E=gh({keyframes:[m.value,y(m.value)],velocity:NE(v,S,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:S=>{let N=!1;return!E&&_===void 0&&(N=!0,b(S),C(S)),_!==void 0&&S>=_?E.next(S-_):(!N&&b(S),m)}}}function P2(t,e,n){const r=[],s=n||Rs.mix||EE,i=t.length-1;for(let a=0;a<i;a++){let o=s(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||ir:e;o=Vc(l,o)}r.push(o)}return r}function j2(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(mh(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=P2(e,r,s),l=o.length,u=d=>{if(a&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const m=_c(t[h],t[h+1],d);return o[h](m)};return n?d=>u(Is(t[0],t[i-1],d)):u}function $2(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=_c(0,e,r);t.push(lt(n,1,s))}}function D2(t){const e=[0];return $2(e,t.length-1),e}function L2(t,e){return t.map(n=>n*e)}function M2(t,e){return t.map(()=>e||gE).splice(0,t.length-1)}function Vl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Zj(r)?r.map(rb):rb(r),i={done:!1,value:e[0]},a=L2(n&&n.length===e.length?n:D2(e),t),o=j2(a,e,{ease:Array.isArray(s)?s:M2(e,s)});return{calculatedDuration:t,next:l=>(i.value=o(l),i.done=l>=t,i)}}const F2=t=>t!==null;function iv(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(F2),o=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const U2={decay:Dg,inertia:Dg,tween:Vl,keyframes:Vl,spring:gh};function IE(t){typeof t.type=="string"&&(t.type=U2[t.type])}class av{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const z2=t=>t/100;class ov extends av{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;IE(e);const{type:n=Vl,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const l=n||Vl;l!==Vl&&typeof o[0]!="number"&&(this.mixKeyframes=Vc(z2,EE(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=sv(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:p,type:y,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),f=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,b=r;if(h){const S=Math.min(this.currentTime,s)/o;let N=Math.floor(S),D=S%1;!D&&S>=1&&(D=1),D===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(m==="reverse"?(D=1-D,p&&(D-=p/o)):m==="mirror"&&(b=a)),v=Is(0,1,D)*o}const _=f?{done:!1,value:d[0]}:b.next(v);i&&(_.value=i(_.value));let{done:E}=_;!f&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return C&&y!==Dg&&(_.value=iv(d,this.options,x,this.speed)),w&&w(_.value),C&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return nr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+nr(e)}get time(){return nr(this.currentTime)}set time(e){var n;e=Qr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=nr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=k2,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function G2(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Yi=t=>t*180/Math.PI,Lg=t=>{const e=Yi(Math.atan2(t[1],t[0]));return Mg(e)},B2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Lg,rotateZ:Lg,skewX:t=>Yi(Math.atan(t[1])),skewY:t=>Yi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Mg=t=>(t=t%360,t<0&&(t+=360),t),ub=Lg,db=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),V2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:db,scaleY:hb,scale:t=>(db(t)+hb(t))/2,rotateX:t=>Mg(Yi(Math.atan2(t[6],t[5]))),rotateY:t=>Mg(Yi(Math.atan2(-t[2],t[0]))),rotateZ:ub,rotate:ub,skewX:t=>Yi(Math.atan(t[4])),skewY:t=>Yi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Fg(t){return t.includes("scale")?1:0}function Ug(t,e){if(!t||t==="none")return Fg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=V2,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=B2,s=o}if(!s)return Fg(e);const i=r[e],a=s[1].split(",").map(W2);return typeof i=="function"?i(a):a[i]}const H2=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ug(n,e)};function W2(t){return parseFloat(t.trim())}const Fo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(Fo),mb=t=>t===Mo||t===we,q2=new Set(["x","y","z"]),K2=Fo.filter(t=>!q2.has(t));function Y2(t){const e=[];return K2.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ta={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ug(e,"x"),y:(t,{transform:e})=>Ug(e,"y")};ta.translateX=ta.x;ta.translateY=ta.y;const na=new Set;let zg=!1,Gg=!1,Bg=!1;function RE(){if(Gg){const t=Array.from(na).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Y2(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var o;(o=r.getValue(i))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gg=!1,zg=!1,na.forEach(t=>t.complete(Bg)),na.clear()}function OE(){na.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gg=!0)})}function Z2(){Bg=!0,OE(),RE(),Bg=!1}class lv{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(na.add(this),zg||(zg=!0,it.read(OE),it.resolveKeyframes(RE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}G2(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),na.delete(this)}cancel(){this.state==="scheduled"&&(na.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const J2=t=>t.startsWith("--");function X2(t,e,n){J2(e)?t.style.setProperty(e,n):t.style[e]=n}const Q2=Z0(()=>window.ScrollTimeline!==void 0),e$={};function t$(t,e){const n=Z0(t);return()=>e$[e]??n()}const PE=t$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,pb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yl([0,.65,.55,1]),circOut:yl([.55,0,1,.45]),backIn:yl([.31,.01,.66,-.59]),backOut:yl([.33,1.53,.69,.99])};function jE(t,e){if(t)return typeof t=="function"?PE()?CE(t,e):"ease-out":yE(t)?yl(t):Array.isArray(t)?t.map(n=>jE(n,e)||pb.easeOut):pb[t]}function n$(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[e]:n};l&&(d.offset=l);const h=jE(o,s);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(d,m)}function $E(t){return typeof t=="function"&&"applyToOptions"in t}function r$({type:t,...e}){return $E(t)&&PE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class s$ extends av{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,mh(typeof e.type!="string");const u=r$(e);this.animation=n$(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=iv(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):X2(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return nr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+nr(e)}get time(){return nr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Qr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Q2()?(this.animation.timeline=e,ir):n(this)}}const DE={anticipate:mE,backInOut:hE,circInOut:fE};function i$(t){return t in DE}function a$(t){typeof t.ease=="string"&&i$(t.ease)&&(t.ease=DE[t.ease])}const fb=10;class o$ extends s${constructor(e){a$(e),IE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new ov({...a,autoplay:!1}),l=Qr(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-fb).value,o.sample(l).value,fb),o.stop()}}const gb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Si.test(t)||t==="0")&&!t.startsWith("url("));function l$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function c$(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=gb(s,e),o=gb(i,e);return!a||!o?!1:l$(t)||(n==="spring"||$E(n))&&r}function Vg(t){t.duration=0,t.type="keyframes"}const u$=new Set(["opacity","clipPath","filter","transform"]),d$=Z0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h$(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return d$()&&n&&u$.has(n)&&(n!=="transform"||!u)&&!l&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const m$=40;class p$ extends av{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:d,...h}){var y;super(),this.stop=()=>{var w,x;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Sn.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:l,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||lv;this.keyframeResolver=new p(o,(w,x,g)=>this.onKeyframesResolved(w,x,m,!g),l,u,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Sn.now(),c$(e,i,a,o)||((Rs.instantAnimations||!l)&&(d==null||d(iv(e,r,n))),e[0]=e[e.length-1],Vg(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>m$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&h$(m)?new o$({...m,element:m.motionValue.owner.current}):new ov(m);p.finished.then(()=>this.notifyFinished()).catch(ir),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Z2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const f$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g$(t){const e=f$.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function LE(t,e,n=1){const[r,s]=g$(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return sE(a)?parseFloat(a):a}return ev(s)?LE(s,e,n+1):s}function cv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const ME=new Set(["width","height","top","left","right","bottom",...Fo]),y$={test:t=>t==="auto",parse:t=>t},FE=t=>e=>e.test(t),UE=[Mo,we,es,Qs,l2,o2,y$],yb=t=>UE.find(FE(t));function v$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aE(t):!0}const x$=new Set(["brightness","contrast","saturate","opacity"]);function w$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(tv)||[];if(!r)return t;const s=n.replace(r,"");let i=x$.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const b$=/\b([a-z-]*)\(.*?\)/gu,Hg={...Si,getAnimatableNone:t=>{const e=t.match(b$);return e?e.map(w$).join(" "):t}},vb={...Mo,transform:Math.round},_$={rotate:Qs,rotateX:Qs,rotateY:Qs,rotateZ:Qs,scale:Fu,scaleX:Fu,scaleY:Fu,scaleZ:Fu,skew:Qs,skewX:Qs,skewY:Qs,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Sc,originX:ib,originY:ib,originZ:we},uv={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,..._$,zIndex:vb,fillOpacity:Sc,strokeOpacity:Sc,numOctaves:vb},S$={...uv,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:Hg,WebkitFilter:Hg},zE=t=>S$[t];function GE(t,e){let n=zE(t);return n!==Hg&&(n=Si),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const k$=new Set(["auto","none","0"]);function T$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!k$.has(i)&&kc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=GE(n,s)}class A$ extends lv{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),ev(u))){const d=LE(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ME.has(r)||e.length!==2)return;const[s,i]=e,a=yb(s),o=yb(i);if(a!==o)if(mb(a)&&mb(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else ta[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||v$(e[s]))&&r.push(s);r.length&&T$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ta[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=ta[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function E$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const BE=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function C$(t){return iE(t)&&"offsetHeight"in t}const xb=30,N$=t=>!isNaN(parseFloat(t));class I${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Sn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=N$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new J0);const r=this.events[e].add(n);return e==="change"?()=>{r(),it.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xb);return oE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _o(t,e){return new I$(t,e)}const{schedule:dv,cancel:a7}=vE(queueMicrotask,!1),vr={x:!1,y:!1};function VE(){return vr.x||vr.y}function R$(t){return t==="x"||t==="y"?vr[t]?null:(vr[t]=!0,()=>{vr[t]=!1}):vr.x||vr.y?null:(vr.x=vr.y=!0,()=>{vr.x=vr.y=!1})}function HE(t,e){const n=E$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function wb(t){return!(t.pointerType==="touch"||VE())}function O$(t,e,n={}){const[r,s,i]=HE(t,n),a=o=>{if(!wb(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const d=h=>{wb(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(o=>{o.addEventListener("pointerenter",a,s)}),i}const WE=(t,e)=>e?t===e?!0:WE(t,e.parentElement):!1,hv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,P$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function j$(t){return P$.has(t.tagName)||t.tabIndex!==-1}const Ed=new WeakSet;function bb(t){return e=>{e.key==="Enter"&&t(e)}}function Gp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=bb(()=>{if(Ed.has(n))return;Gp(n,"down");const s=bb(()=>{Gp(n,"up")}),i=()=>Gp(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function _b(t){return hv(t)&&!VE()}function D$(t,e,n={}){const[r,s,i]=HE(t,n),a=o=>{const l=o.currentTarget;if(!_b(o))return;Ed.add(l);const u=e(l,o),d=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),Ed.has(l)&&Ed.delete(l),_b(p)&&typeof u=="function"&&u(p,{success:y})},h=p=>{d(p,l===window||l===document||n.useGlobalTarget||WE(l,p.target))},m=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),C$(o)&&(o.addEventListener("focus",u=>$$(u,s)),!j$(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function qE(t){return iE(t)&&"ownerSVGElement"in t}function L$(t){return qE(t)&&t.tagName==="svg"}const Xt=t=>!!(t&&t.getVelocity),M$=[...UE,bt,Si],F$=t=>M$.find(FE(t)),KE=$.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function U$(t=!0){const e=$.useContext(q0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=$.useId();$.useEffect(()=>{if(t)return s(i)},[t]);const a=$.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const YE=$.createContext({strict:!1}),Sb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},So={};for(const t in Sb)So[t]={isEnabled:e=>Sb[t].some(n=>!!e[n])};function z$(t){for(const e in t)So[e]={...So[e],...t[e]}}const G$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G$.has(t)}let ZE=t=>!yh(t);function B$(t){typeof t=="function"&&(ZE=e=>e.startsWith("on")?!yh(e):t(e))}try{B$(require("@emotion/is-prop-valid").default)}catch{}function V$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ZE(s)||n===!0&&yh(s)||!e&&!yh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const mm=$.createContext({});function pm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Tc(t){return typeof t=="string"||Array.isArray(t)}const mv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pv=["initial",...mv];function fm(t){return pm(t.animate)||pv.some(e=>Tc(t[e]))}function JE(t){return!!(fm(t)||t.variants)}function H$(t,e){if(fm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tc(n)?n:void 0,animate:Tc(r)?r:void 0}}return t.inherit!==!1?e:{}}function W$(t){const{initial:e,animate:n}=H$(t,$.useContext(mm));return $.useMemo(()=>({initial:e,animate:n}),[kb(e),kb(n)])}function kb(t){return Array.isArray(t)?t.join(" "):t}function Tb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ll={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=Tb(t,e.target.x),r=Tb(t,e.target.y);return`${n}% ${r}%`}},q$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Si.parse(t);if(s.length>5)return r;const i=Si.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const u=lt(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}},Wg={borderRadius:{...ll,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomLeftRadius:ll,borderBottomRightRadius:ll,boxShadow:q$};function XE(t,{layout:e,layoutId:n}){return Uo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wg[t]||t==="opacity")}const K$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y$=Fo.length;function Z$(t,e,n){let r="",s=!0;for(let i=0;i<Y$;i++){const a=Fo[i],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=BE(o,uv[a]);if(!l){s=!1;const d=K$[a]||a;r+=`${d}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function fv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(Uo.has(l)){a=!0;continue}else if(wE(l)){s[l]=u;continue}else{const d=BE(u,uv[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(e.transform||(a||n?r.transform=Z$(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const gv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function QE(t,e,n){for(const r in e)!Xt(e[r])&&!XE(r,n)&&(t[r]=e[r])}function J$({transformTemplate:t},e){return $.useMemo(()=>{const n=gv();return fv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function X$(t,e){const n=t.style||{},r={};return QE(r,n,t),Object.assign(r,J$(t,e)),r}function Q$(t,e){const n={},r=X$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const eD={offset:"stroke-dashoffset",array:"stroke-dasharray"},tD={offset:"strokeDashoffset",array:"strokeDasharray"};function nD(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?eD:tD;t[i.offset]=we.transform(-r);const a=we.transform(e),o=we.transform(n);t[i.array]=`${a} ${o}`}function e1(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},l,u,d){if(fv(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&nD(h,s,i,a,!1)}const t1=()=>({...gv(),attrs:{}}),n1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rD(t,e,n,r){const s=$.useMemo(()=>{const i=t1();return e1(i,e,n1(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};QE(i,t.style,t),s.style={...i,...s.style}}return s}const sD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yv(t){return typeof t!="string"||t.includes("-")?!1:!!(sD.indexOf(t)>-1||/[A-Z]/u.test(t))}function iD(t,e,n,{latestValues:r},s,i=!1){const o=(yv(t)?rD:Q$)(e,r,s,t),l=V$(e,typeof t=="string",i),u=t!==$.Fragment?{...l,...o,ref:n}:{},{children:d}=e,h=$.useMemo(()=>Xt(d)?d.get():d,[d]);return $.createElement(t,{...u,children:h})}function Ab(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function vv(t,e,n,r){if(typeof e=="function"){const[s,i]=Ab(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Ab(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Cd(t){return Xt(t)?t.get():t}function aD({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:oD(n,r,s,t),renderState:e()}}function oD(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Cd(i[m]);let{initial:a,animate:o}=t;const l=fm(t),u=JE(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!pm(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const y=vv(t,m[p]);if(y){const{transitionEnd:w,transition:x,...g}=y;for(const f in g){let v=g[f];if(Array.isArray(v)){const b=d?v.length-1:0;v=v[b]}v!==null&&(s[f]=v)}for(const f in w)s[f]=w[f]}}}return s}const r1=t=>(e,n)=>{const r=$.useContext(mm),s=$.useContext(q0),i=()=>aD(t,e,r,s);return n?i():Gj(i)};function xv(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(Xt(r[a])||e.style&&Xt(e.style[a])||XE(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const lD=r1({scrapeMotionValuesFromProps:xv,createRenderState:gv});function s1(t,e,n){const r=xv(t,e,n);for(const s in t)if(Xt(t[s])||Xt(e[s])){const i=Fo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const cD=r1({scrapeMotionValuesFromProps:s1,createRenderState:t1}),uD=Symbol.for("motionComponentSymbol");function Ja(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dD(t,e,n){return $.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ja(n)&&(n.current=r))},[e])}const wv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hD="framerAppearId",i1="data-"+wv(hD),a1=$.createContext({});function mD(t,e,n,r,s){var w,x;const{visualElement:i}=$.useContext(mm),a=$.useContext(YE),o=$.useContext(q0),l=$.useContext(KE).reducedMotion,u=$.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=$.useContext(a1);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&pD(u.current,n,s,h);const m=$.useRef(!1);$.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const p=n[i1],y=$.useRef(!!p&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return Bj(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),$.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),y.current=!1),d.enteringChildren=void 0)}),d}function pD(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:o1(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&Ja(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function o1(t){if(t)return t.options.allowProjection!==!1?t.projection:o1(t.parent)}function Bp(t,{forwardMotionProps:e=!1}={},n,r){n&&z$(n);const s=yv(t)?cD:lD;function i(o,l){let u;const d={...$.useContext(KE),...o,layoutId:fD(o)},{isStatic:h}=d,m=W$(o),p=s(o,h);if(!h&&W0){gD();const y=yD(d);u=y.MeasureLayout,m.visualElement=mD(t,p,d,r,y.ProjectionNode)}return c.jsxs(mm.Provider,{value:m,children:[u&&m.visualElement?c.jsx(u,{visualElement:m.visualElement,...d}):null,iD(t,o,dD(p,m.visualElement,l),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=$.forwardRef(i);return a[uD]=t,a}function fD({layoutId:t}){const e=$.useContext(rE).id;return e&&t!==void 0?e+"-"+t:t}function gD(t,e){$.useContext(YE).strict}function yD(t){const{drag:e,layout:n}=So;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function vD(t,e){if(typeof Proxy>"u")return Bp;const n=new Map,r=(i,a)=>Bp(i,a,t,e),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,Bp(a,void 0,t,e)),n.get(a))})}function l1({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xD({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wD(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vp(t){return t===void 0||t===1}function qg({scale:t,scaleX:e,scaleY:n}){return!Vp(t)||!Vp(e)||!Vp(n)}function Fi(t){return qg(t)||c1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function c1(t){return Eb(t.x)||Eb(t.y)}function Eb(t){return t&&t!=="0%"}function vh(t,e,n){const r=t-n,s=e*r;return n+s}function Cb(t,e,n,r,s){return s!==void 0&&(t=vh(t,s,r)),vh(t,n,r)+e}function Kg(t,e=0,n=1,r,s){t.min=Cb(t.min,e,n,r,s),t.max=Cb(t.max,e,n,r,s)}function u1(t,{x:e,y:n}){Kg(t.x,e.translate,e.scale,e.originPoint),Kg(t.y,n.translate,n.scale,n.originPoint)}const Nb=.999999999999,Ib=1.0000000000001;function bD(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Qa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,u1(t,a)),r&&Fi(i.latestValues)&&Qa(t,i.latestValues))}e.x<Ib&&e.x>Nb&&(e.x=1),e.y<Ib&&e.y>Nb&&(e.y=1)}function Xa(t,e){t.min=t.min+e,t.max=t.max+e}function Rb(t,e,n,r,s=.5){const i=lt(t.min,t.max,s);Kg(t,e,n,i,r)}function Qa(t,e){Rb(t.x,e.x,e.scaleX,e.scale,e.originX),Rb(t.y,e.y,e.scaleY,e.scale,e.originY)}function d1(t,e){return l1(wD(t.getBoundingClientRect(),e))}function _D(t,e,n){const r=d1(t,n),{scroll:s}=e;return s&&(Xa(r.x,s.offset.x),Xa(r.y,s.offset.y)),r}const Ob=()=>({translate:0,scale:1,origin:0,originPoint:0}),eo=()=>({x:Ob(),y:Ob()}),Pb=()=>({min:0,max:0}),Nt=()=>({x:Pb(),y:Pb()}),Yg={current:null},h1={current:!1};function SD(){if(h1.current=!0,!!W0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=t.matches;t.addEventListener("change",e),e()}else Yg.current=!1}const kD=new WeakMap;function TD(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Xt(s))t.addValue(r,s);else if(Xt(i))t.addValue(r,_o(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,_o(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const jb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AD{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Sn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,it.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=fm(n),this.isVariantNode=JE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const p=h[m];l[m]!==void 0&&Xt(p)&&p.set(l[m])}}mount(e){var n;this.current=e,kD.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),h1.current||SD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),_i(this.notifyUpdate),_i(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Uo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&it.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in So){const n=So[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jb.length;r++){const s=jb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=TD(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_o(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(sE(r)||aE(r))?r=parseFloat(r):!F$(r)&&Si.test(n)&&(r=GE(e,n)),this.setBaseTarget(e,Xt(r)?r.get():r)),Xt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=vv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new J0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){dv.render(this.render)}}class m1 extends AD{constructor(){super(...arguments),this.KeyframeResolver=A$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function p1(t,{style:e,vars:n},r,s){const i=t.style;let a;for(a in e)i[a]=e[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function ED(t){return window.getComputedStyle(t)}class CD extends m1{constructor(){super(...arguments),this.type="html",this.renderInstance=p1}readValueFromInstance(e,n){var r;if(Uo.has(n))return(r=this.projection)!=null&&r.isProjecting?Fg(n):H2(e,n);{const s=ED(e),i=(wE(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return d1(e,n)}build(e,n,r){fv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return xv(e,n,r)}}const f1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ND(t,e,n,r){p1(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(f1.has(s)?s:wv(s),e.attrs[s])}class ID extends m1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Uo.has(n)){const r=zE(n);return r&&r.default||0}return n=f1.has(n)?n:wv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return s1(e,n,r)}build(e,n,r){e1(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){ND(e,n,r,s)}mount(e){this.isSVGTag=n1(e.tagName),super.mount(e)}}const RD=(t,e)=>yv(t)?new ID(e):new CD(e,{allowProjection:t!==$.Fragment});function po(t,e,n){const r=t.getProps();return vv(r,e,n!==void 0?n:r.custom,t)}const Zg=t=>Array.isArray(t);function OD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_o(n))}function PD(t){return Zg(t)?t[t.length-1]||0:t}function jD(t,e){const n=po(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const o=PD(i[a]);OD(t,a,o)}}function $D(t){return!!(Xt(t)&&t.add)}function Jg(t,e){const n=t.getValue("willChange");if($D(n))return n.add(e);if(!n&&Rs.WillChange){const r=new Rs.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function g1(t){return t.props[i1]}const DD=t=>t!==null;function LD(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(DD),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const MD={type:"spring",stiffness:500,damping:25,restSpeed:10},FD=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),UD={type:"keyframes",duration:.8},zD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GD=(t,{keyframes:e})=>e.length>2?UD:Uo.has(t)?t.startsWith("scale")?FD(e[1]):MD:zD;function BD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const bv=(t,e,n,r={},s,i)=>a=>{const o=cv(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:s};BD(o)||Object.assign(d,GD(t,d)),d.duration&&(d.duration=Qr(d.duration)),d.repeatDelay&&(d.repeatDelay=Qr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Vg(d),d.delay===0&&(h=!0)),(Rs.instantAnimations||Rs.skipAnimations)&&(h=!0,Vg(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&e.get()!==void 0){const m=LD(d.keyframes,o);if(m!==void 0){it.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new ov(d):new p$(d)};function VD({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function y1(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(i=r);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),m=o[d];if(m===void 0||u&&VD(u,d))continue;const p={delay:n,...cv(i||{},d)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===y&&!p.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const g=g1(t);if(g){const f=window.MotionHandoffAnimation(g,d,it);f!==null&&(p.startTime=f,w=!0)}}Jg(t,d),h.start(bv(d,h,m,t.shouldReduceMotion&&ME.has(d)?{type:!1}:p,t,w));const x=h.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{it.update(()=>{a&&jD(t,a)})}),l}function v1(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),a=t.size,o=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:o-i*r}function Xg(t,e,n={}){var l;const r=po(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(y1(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return HD(t,e,u,d,h,m,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,d]=o==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function HD(t,e,n=0,r=0,s=0,i=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(Xg(l,e,{...a,delay:n+(typeof r=="function"?0:r)+v1(t.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function WD(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Xg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Xg(t,e,n);else{const s=typeof e=="function"?po(t,e,n.custom):e;r=Promise.all(y1(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function x1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const qD=pv.length;function w1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?w1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qD;n++){const r=pv[n],s=t.props[r];(Tc(s)||s===!1)&&(e[r]=s)}return e}const KD=[...mv].reverse(),YD=mv.length;function ZD(t){return e=>Promise.all(e.map(({animation:n,options:r})=>WD(t,n,r)))}function JD(t){let e=ZD(t),n=$b(),r=!0;const s=l=>(u,d)=>{var m;const h=po(t,d,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:p,transitionEnd:y,...w}=h;u={...u,...w,...y}}return u};function i(l){e=l(t)}function a(l){const{props:u}=t,d=w1(t.parent)||{},h=[],m=new Set;let p={},y=1/0;for(let x=0;x<YD;x++){const g=KD[x],f=n[g],v=u[g]!==void 0?u[g]:d[g],b=Tc(v),_=g===l?f.isActive:null;_===!1&&(y=x);let E=v===d[g]&&v!==u[g]&&b;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),f.protectedKeys={...p},!f.isActive&&_===null||!v&&!f.prevProp||pm(v)||typeof v=="boolean")continue;const C=XD(f.prevProp,v);let S=C||g===l&&f.isActive&&!E&&b||x>y&&b,N=!1;const D=Array.isArray(v)?v:[v];let F=D.reduce(s(g),{});_===!1&&(F={});const{prevResolvedValues:Y={}}=f,de={...Y,...F},H=z=>{S=!0,m.has(z)&&(N=!0,m.delete(z)),f.needsAnimating[z]=!0;const P=t.getValue(z);P&&(P.liveStyle=!1)};for(const z in de){const P=F[z],L=Y[z];if(p.hasOwnProperty(z))continue;let G=!1;Zg(P)&&Zg(L)?G=!x1(P,L):G=P!==L,G?P!=null?H(z):m.add(z):P!==void 0&&m.has(z)?H(z):f.protectedKeys[z]=!0}f.prevProp=v,f.prevResolvedValues=F,f.isActive&&(p={...p,...F}),r&&t.blockInitialAnimation&&(S=!1);const B=E&&C;S&&(!B||N)&&h.push(...D.map(z=>{const P={type:g};if(typeof z=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:L}=t,G=po(L,z);if(L.enteringChildren&&G){const{delayChildren:X}=G.transition||{};P.delay=v1(L.enteringChildren,t,X)}}return{animation:z,options:P}}))}if(m.size){const x={};if(typeof u.initial!="boolean"){const g=po(t,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(x.transition=g.transition)}m.forEach(g=>{const f=t.getBaseTarget(g),v=t.getValue(g);v&&(v.liveStyle=!0),x[g]=f??null}),h.push({animation:x})}let w=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(h):Promise.resolve()}function o(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=$b()}}}function XD(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!x1(e,t):!1}function $i(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $b(){return{animate:$i(!0),whileInView:$i(),whileHover:$i(),whileTap:$i(),whileDrag:$i(),whileFocus:$i(),exit:$i()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QD extends Ri{constructor(e){super(e),e.animationState||(e.animationState=JD(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let eL=0;class tL extends Ri{constructor(){super(...arguments),this.id=eL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nL={animation:{Feature:QD},exit:{Feature:tL}};function Ac(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function qc(t){return{point:{x:t.pageX,y:t.pageY}}}const rL=t=>e=>hv(e)&&t(e,qc(e));function Hl(t,e,n,r){return Ac(t,e,rL(n),r)}const b1=1e-4,sL=1-b1,iL=1+b1,_1=.01,aL=0-_1,oL=0+_1;function un(t){return t.max-t.min}function lL(t,e,n){return Math.abs(t-e)<=n}function Db(t,e,n,r=.5){t.origin=r,t.originPoint=lt(e.min,e.max,t.origin),t.scale=un(n)/un(e),t.translate=lt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=sL&&t.scale<=iL||isNaN(t.scale))&&(t.scale=1),(t.translate>=aL&&t.translate<=oL||isNaN(t.translate))&&(t.translate=0)}function Wl(t,e,n,r){Db(t.x,e.x,n.x,r?r.originX:void 0),Db(t.y,e.y,n.y,r?r.originY:void 0)}function Lb(t,e,n){t.min=n.min+e.min,t.max=t.min+un(e)}function cL(t,e,n){Lb(t.x,e.x,n.x),Lb(t.y,e.y,n.y)}function Mb(t,e,n){t.min=e.min-n.min,t.max=t.min+un(e)}function xh(t,e,n){Mb(t.x,e.x,n.x),Mb(t.y,e.y,n.y)}function Zn(t){return[t("x"),t("y")]}const S1=({current:t})=>t?t.ownerDocument.defaultView:null,Fb=(t,e)=>Math.abs(t-e);function uL(t,e){const n=Fb(t.x,e.x),r=Fb(t.y,e.y);return Math.sqrt(n**2+r**2)}class k1{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Wp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=uL(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:w}=m,{timestamp:x}=zt;this.history.push({...w,timestamp:x});const{onStart:g,onMove:f}=this.handlers;p||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),f&&f(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Hp(p,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Wp(m.type==="pointercancel"?this.lastMoveEventInfo:Hp(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,g),w&&w(m,g)},!hv(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const o=qc(e),l=Hp(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=zt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Wp(l,this.history)),this.removeListeners=Vc(Hl(this.contextWindow,"pointermove",this.handlePointerMove),Hl(this.contextWindow,"pointerup",this.handlePointerUp),Hl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_i(this.updatePoint)}}function Hp(t,e){return e?{point:e(t.point)}:t}function Ub(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wp({point:t},e){return{point:t,delta:Ub(t,T1(e)),offset:Ub(t,dL(e)),velocity:hL(e,.1)}}function dL(t){return t[0]}function T1(t){return t[t.length-1]}function hL(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=T1(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Qr(e)));)n--;if(!r)return{x:0,y:0};const i=nr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mL(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?lt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?lt(n,t,r.max):Math.min(t,n)),t}function zb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pL(t,{top:e,left:n,bottom:r,right:s}){return{x:zb(t.x,n,s),y:zb(t.y,e,r)}}function Gb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function fL(t,e){return{x:Gb(t.x,e.x),y:Gb(t.y,e.y)}}function gL(t,e){let n=.5;const r=un(t),s=un(e);return s>r?n=_c(e.min,e.max-r,t.min):r>s&&(n=_c(t.min,t.max-s,e.min)),Is(0,1,n)}function yL(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qg=.35;function vL(t=Qg){return t===!1?t=0:t===!0&&(t=Qg),{x:Bb(t,"left","right"),y:Bb(t,"top","bottom")}}function Bb(t,e,n){return{min:Vb(t,e),max:Vb(t,n)}}function Vb(t,e){return typeof t=="number"?t:t[e]||0}const xL=new WeakMap;class wL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qc(h).point)},a=(h,m)=>{const{drag:p,dragPropagation:y,onDragStart:w}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R$(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(g=>{let f=this.getAxisMotionValue(g).get()||0;if(es.test(f)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[g];b&&(f=un(b)*(parseFloat(f)/100))}}this.originPoint[g]=f}),w&&it.postRender(()=>w(h,m)),Jg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:w,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=m;if(y&&this.currentDirection===null){this.currentDirection=bL(g),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),x&&x(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Zn(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new k1(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:S1(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&it.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Uu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=mL(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Ja(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=pL(r.layoutBox,e):this.constraints=!1,this.elastic=vL(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=yL(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ja(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=_D(r,s.root,this.visualElement.getTransformPagePoint());let a=fL(s.layout.layoutBox,i);if(n){const o=n(xD(a));this.hasMutatedConstraints=!!o,o&&(a=l1(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Zn(d=>{if(!Uu(d,n,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Jg(this.visualElement,e),r.start(bv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zn(n=>{const{drag:r}=this.getProps();if(!Uu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];i.set(e[n]-lt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ja(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=gL({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zn(a=>{if(!Uu(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(lt(l,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;xL.set(this.visualElement,this);const e=this.visualElement.current,n=Hl(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ja(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),it.read(r);const a=Ac(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Qg,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function Uu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function bL(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class _L extends Ri{constructor(e){super(e),this.removeGroupControls=ir,this.removeListeners=ir,this.controls=new wL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hb=t=>(e,n)=>{t&&it.postRender(()=>t(e,n))};class SL extends Ri{constructor(){super(...arguments),this.removePointerDownListener=ir}onPointerDown(e){this.session=new k1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Hb(e),onStart:Hb(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&it.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=Hl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let qp=!1;class kL extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),qp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Nd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,qp=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||it.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),dv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;qp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function A1(t){const[e,n]=U$(),r=$.useContext(rE);return c.jsx(kL,{...t,layoutGroup:r,switchLayoutGroup:$.useContext(a1),isPresent:e,safeToRemove:n})}function TL(t,e,n){const r=Xt(t)?t:_o(t);return r.start(bv("",r,e,n)),r.animation}const AL=(t,e)=>t.depth-e.depth;class EL{constructor(){this.children=[],this.isDirty=!1}add(e){K0(this.children,e),this.isDirty=!0}remove(e){Y0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AL),this.isDirty=!1,this.children.forEach(e)}}function CL(t,e){const n=Sn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(_i(r),t(i-e))};return it.setup(r,!0),()=>_i(r)}const E1=["TopLeft","TopRight","BottomLeft","BottomRight"],NL=E1.length,Wb=t=>typeof t=="string"?parseFloat(t):t,qb=t=>typeof t=="number"||we.test(t);function IL(t,e,n,r,s,i){s?(t.opacity=lt(0,n.opacity??1,RL(r)),t.opacityExit=lt(e.opacity??1,0,OL(r))):i&&(t.opacity=lt(e.opacity??1,n.opacity??1,r));for(let a=0;a<NL;a++){const o=`border${E1[a]}Radius`;let l=Kb(e,o),u=Kb(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||qb(l)===qb(u)?(t[o]=Math.max(lt(Wb(l),Wb(u),r),0),(es.test(u)||es.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=lt(e.rotate||0,n.rotate||0,r))}function Kb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const RL=C1(0,.5,pE),OL=C1(.5,.95,ir);function C1(t,e,n){return r=>r<t?0:r>e?1:n(_c(t,e,r))}function Yb(t,e){t.min=e.min,t.max=e.max}function dr(t,e){Yb(t.x,e.x),Yb(t.y,e.y)}function Zb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Jb(t,e,n,r,s){return t-=e,t=vh(t,1/n,r),s!==void 0&&(t=vh(t,1/s,r)),t}function PL(t,e=0,n=1,r=.5,s,i=t,a=t){if(es.test(e)&&(e=parseFloat(e),e=lt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=lt(i.min,i.max,r);t===i&&(o-=e),t.min=Jb(t.min,e,n,o,s),t.max=Jb(t.max,e,n,o,s)}function Xb(t,e,[n,r,s],i,a){PL(t,e[n],e[r],e[s],e.scale,i,a)}const jL=["x","scaleX","originX"],$L=["y","scaleY","originY"];function Qb(t,e,n,r){Xb(t.x,e,jL,n?n.x:void 0,r?r.x:void 0),Xb(t.y,e,$L,n?n.y:void 0,r?r.y:void 0)}function e_(t){return t.translate===0&&t.scale===1}function N1(t){return e_(t.x)&&e_(t.y)}function t_(t,e){return t.min===e.min&&t.max===e.max}function DL(t,e){return t_(t.x,e.x)&&t_(t.y,e.y)}function n_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function I1(t,e){return n_(t.x,e.x)&&n_(t.y,e.y)}function r_(t){return un(t.x)/un(t.y)}function s_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class LL{constructor(){this.members=[]}add(e){K0(this.members,e),e.scheduleRender()}remove(e){if(Y0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ML(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Kp=["","X","Y","Z"],FL=1e3;let UL=0;function Yp(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function R1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=g1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",it,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&R1(r)}function O1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=UL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BL),this.nodes.forEach(qL),this.nodes.forEach(KL),this.nodes.forEach(VL)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new EL)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new J0),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=qE(a)&&!L$(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;it.read(()=>{h=window.innerWidth}),t(a,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=CL(m,250),Nd.hasAnimatedSinceResize&&(Nd.hasAnimatedSinceResize=!1,this.nodes.forEach(o_)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||QL,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=u.getProps(),g=!this.targetLayout||!I1(this.targetLayout,p),f=!h&&m;if(this.options.layoutRoot||this.resumeFrom||f||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...cv(y,"layout"),onPlay:w,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(d,f)}else h||o_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_i(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YL),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&R1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(i_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(a_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WL),this.nodes.forEach(zL),this.nodes.forEach(GL)):this.nodes.forEach(a_),this.clearAllSnapshots();const o=Sn.now();zt.delta=Is(0,1e3/60,o-zt.timestamp),zt.timestamp=o,zt.isProcessing=!0,Lp.update.process(zt),Lp.preRender.process(zt),Lp.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HL),this.sharedNodes.forEach(ZL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!un(this.snapshot.measuredBox.x)&&!un(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!N1(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||Fi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),eM(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Nt();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(tM))){const{scroll:d}=this.root;d&&(Xa(o.x,d.offset.x),Xa(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=Nt();if(dr(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&dr(o,a),Xa(o.x,h.offset.x),Xa(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=Nt();dr(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Qa(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Fi(d.latestValues)&&Qa(l,d.latestValues)}return Fi(this.latestValues)&&Qa(l,this.latestValues),l}removeTransform(a){const o=Nt();dr(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Fi(u.latestValues))continue;qg(u.latestValues)&&u.updateSnapshot();const d=Nt(),h=u.measurePageBox();dr(d,h),Qb(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Fi(this.latestValues)&&Qb(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=zt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),u1(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||qg(this.parent.latestValues)||c1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),xh(this.relativeTargetOrigin,o,l),dr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;dr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;bD(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Nt());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Zb(this.prevProjectionDelta.x,this.projectionDelta.x),Zb(this.prevProjectionDelta.y,this.projectionDelta.y)),Wl(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!s_(this.projectionDelta.x,this.prevProjectionDelta.x)||!s_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=eo(),this.projectionDelta=eo(),this.projectionDeltaWithTransform=eo()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=eo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Nt(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=p!==y,x=this.getStack(),g=!x||x.members.length<=1,f=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(XL));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const _=b/1e3;l_(h.x,a.x,_),l_(h.y,a.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JL(this.relativeTarget,this.relativeTargetOrigin,m,_),v&&DL(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Nt()),dr(v,this.relativeTarget)),w&&(this.animationValues=d,IL(d,u,this.latestValues,_,f,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(_i(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{Nd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_o(0)),this.currentAnimation=TL(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&P1(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Nt();const h=un(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const m=un(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}dr(o,l),Qa(o,d),Wl(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new LL),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Yp("z",a,u,this.animationValues);for(let d=0;d<Kp.length;d++)Yp(`rotate${Kp[d]}`,a,u,this.animationValues),Yp(`skew${Kp[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fi(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=ML(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:m,y:p}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Wg){if(d[y]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:g}=Wg[y],f=h==="none"?d[y]:w(d[y],u);if(x){const v=x.length;for(let b=0;b<v;b++)a[x[b]]=f}else g?this.options.visualElement.renderState.vars[y]=f:a[y]=f}this.options.layoutId&&(a.pointerEvents=u===this?Cd(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(i_),this.root.sharedNodes.clear()}}}function zL(t){t.updateLayout()}function GL(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Zn(h=>{const m=a?e.measuredBox[h]:e.layoutBox[h],p=un(m);m.min=r[h].min,m.max=m.min+p}):P1(i,e.layoutBox,r)&&Zn(h=>{const m=a?e.measuredBox[h]:e.layoutBox[h],p=un(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const o=eo();Wl(o,r,e.layoutBox);const l=eo();a?Wl(l,t.applyTransform(s,!0),e.measuredBox):Wl(l,r,e.layoutBox);const u=!N1(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const y=Nt();xh(y,e.layoutBox,m.layoutBox);const w=Nt();xh(w,r,p.layoutBox),I1(y,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function BL(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function VL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HL(t){t.clearSnapshot()}function i_(t){t.clearMeasurements()}function a_(t){t.isLayoutDirty=!1}function WL(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function o_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qL(t){t.resolveTargetDelta()}function KL(t){t.calcProjection()}function YL(t){t.resetSkewAndRotation()}function ZL(t){t.removeLeadSnapshot()}function l_(t,e,n){t.translate=lt(e.translate,0,n),t.scale=lt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function c_(t,e,n,r){t.min=lt(e.min,n.min,r),t.max=lt(e.max,n.max,r)}function JL(t,e,n,r){c_(t.x,e.x,n.x,r),c_(t.y,e.y,n.y,r)}function XL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const QL={duration:.45,ease:[.4,0,.1,1]},u_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),d_=u_("applewebkit/")&&!u_("chrome/")?Math.round:ir;function h_(t){t.min=d_(t.min),t.max=d_(t.max)}function eM(t){h_(t.x),h_(t.y)}function P1(t,e,n){return t==="position"||t==="preserve-aspect"&&!lL(r_(e),r_(n),.2)}function tM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const nM=O1({attachResizeListener:(t,e)=>Ac(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zp={current:void 0},j1=O1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zp.current){const t=new nM({});t.mount(window),t.setOptions({layoutScroll:!0}),Zp.current=t}return Zp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),rM={pan:{Feature:SL},drag:{Feature:_L,ProjectionNode:j1,MeasureLayout:A1}};function m_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&it.postRender(()=>i(e,qc(e)))}class sM extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=O$(e,(n,r)=>(m_(this.node,r,"Start"),s=>m_(this.node,s,"End"))))}unmount(){}}class iM extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vc(Ac(this.node.current,"focus",()=>this.onFocus()),Ac(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function p_(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&it.postRender(()=>i(e,qc(e)))}class aM extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=D$(e,(n,r)=>(p_(this.node,r,"Start"),(s,{success:i})=>p_(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ey=new WeakMap,Jp=new WeakMap,oM=t=>{const e=ey.get(t.target);e&&e(t)},lM=t=>{t.forEach(oM)};function cM({root:t,...e}){const n=t||document;Jp.has(n)||Jp.set(n,{});const r=Jp.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(lM,{root:t,...e})),r[s]}function uM(t,e,n){const r=cM(e);return ey.set(t,n),r.observe(t),()=>{ey.delete(t),r.unobserve(t)}}const dM={some:0,all:1};class hM extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:dM[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return uM(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mM(e,n))&&this.startObserver()}unmount(){}}function mM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pM={inView:{Feature:hM},tap:{Feature:aM},focus:{Feature:iM},hover:{Feature:sM}},fM={layout:{ProjectionNode:j1,MeasureLayout:A1}},gM={...nL,...pM,...rM,...fM},Ge=vD(gM,RD);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Se=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>$.createElement("svg",{ref:d,...yM,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${vM(t)}`,o].join(" "),...u},[...e.map(([h,m])=>$.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=Se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=Se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=Se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Se("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=Se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Se("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=Se("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Se("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Se("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Se("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Se("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Se("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=Se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Se("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=Se("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=Se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),x_={en:{aiPoweredGeneration:"AI-powered documentation generation",sourceSelection:"Source Selection",clickToCollapse:"Click to collapse",clickToExpand:"Click to expand",formats:"Formats",sections:"Sections",selectAtLeastOne:"Select at least one format and section",token:"Token",add:"Add",change:"Change",hide:"Hide",openaiKey:"OpenAI Key",saveChanges:"Save Changes",edit:"Edit",save:"Save",editDocumentation:"Edit Documentation",editDocumentationPlaceholder:"Edit your documentation here...",runWorkflow:"Run Workflow",generate:"Generate",startWritingDocumentation:"Start Writing Documentation",generating:"Generating...",documentation:"Documentation",noDocumentation:"No documentation generated yet",export:"Export",commit:"Commit",settings:"Settings",statistics:"Statistics",length:"Length",modelUsed:"Model Used",estTokens:"Est. Tokens",estCost:"Est. Cost",words:"Words",lines:"Lines",characters:"Characters",fileSize:"File Size",readingTime:"Reading Time",avgWordsPerLine:"Avg Words/Line",headers:"Headers",codeBlocks:"Code Blocks",links:"Links",inputTokens:"Input Tokens",outputTokens:"Output Tokens",wordCount:"Word Count",lineCount:"Line Count",characterCount:"Characters",estimatedTokens:"Estimated Tokens",cost:"Cost",avg:"Avg",wordsPerLine:"words/line",fileSizeLabel:"File size",lengthLabel:"Length",input:"Input",output:"Output",wordsUnit:"words",charactersUnit:"characters",tokensUnit:"tokens",bytesUnit:"bytes",charsUnit:"chars",minUnit:"min",source:"Source",qualityScores:"Quality Scores",refactorProposals:"Refactor Proposals",badges:"Badges",pdfExport:"PDF Export",clear:"Clear",formatsLocked:"Formats and sections are locked after generation.",runNewWorkflow:"Run a new workflow to change them.",agentWorkflow:"Agent Workflow",useAiAgents:"Use AI agents for automated pipeline",singleRepo:"Single Repository",multiRepo:"Multi-Repository",githubUrl:"GitHub URL",selectRepos:"Select Repositories",selectAtLeastOneRepo:"Please select at least one repository",selectAtLeastOneFormat:"Please select at least one output format",selectAtLeastOneSection:"Please select at least one documentation section type",pleaseProvideUrl:"Please provide a GitHub URL",reviewAndCommit:'Review the documentation below, then click "Commit to Repos" if you want to commit it.',commitToRepos:"Commit to Repos",committing:"Committing...",clearDocumentation:"Clear documentation to change formats/sections",toChangeFormats:"to change formats/sections",gitScribe:"GitScribe",aiPowered:"AI-POWERED",aiPoweredDocumentationTitle:"AI-Powered Documentation for GitHub Repositories",aiPoweredDocumentationDescription:"Automatically generate comprehensive documentation from single or multiple GitHub repositories. Powered by AI agents that analyze, plan, and write documentation for your codebase.",githubIntegration:"GitHub Integration",githubIntegrationDescription:"Generate documentation from any GitHub repository",multiRepoSupport:"Multi-Repo Support",multiRepoSupportDescription:"Generate documentation for multiple repositories simultaneously",autoCommitExport:"Auto-Commit & Export",autoCommitExportDescription:"Automatically commit documentation to repos or download as Markdown",readyToStart:"Ready to start?",generateDocumentationFromRepos:"Generate documentation from GitHub repositories",noAccountNeeded:"No account needed - Start immediately!",startImmediately:"Start immediately!",whyChooseOurTool:"Why Choose Our Documentation Tool",whyChooseOurToolDescription:"Streamline your documentation workflow with AI-powered generation",aiAgentWorkflows:"AI Agent Workflows",aiAgentWorkflowsDescription:"Automated agent system that discovers, analyzes, plans, and writes documentation for your repositories.",autoUpdateFollow:"Auto-Update & Follow",autoUpdateFollowDescription:"Automatically detect changes and regenerate documentation when repositories are updated.",githubIntegrationFeature:"GitHub Integration",githubIntegrationFeatureDescription:"Seamless commit integration and direct repository access for your documentation workflow.",readyToGetStarted:"Ready to get started?",joinDevelopers:"Join developers and teams automating their documentation workflow",startGeneratingDocumentation:"Start Generating Documentation",footerDescription:"AI-powered documentation generation for GitHub repositories with multi-repo support, agent workflows, and auto-update features.",madeWith:"Made with",forDevelopers:"for developers",features:"Features",resources:"Resources",connect:"Connect",contactUs:"Contact Us",Donate:"Donate",buyMeACoffee:"Buy me a coffee",supportGitScribe:"Support GitScribe",supportGitScribeDevelopment:"Help us continue developing and improving GitScribe",ifYouFindGitScribeUseful:"If you find GitScribe useful and would like to support its development, consider buying us a coffee!",whySupport:"Why Support GitScribe?",gitScribeIsFreeAndOpenSource:"GitScribe is free and open-source, built with passion for the developer community.",yourSupportHelpsUs:"Your support helps us:",newFeatures:"New Features",developNewFeaturesAndImprovements:"Develop new features and improvements based on user feedback",maintenanceAndUpdates:"Maintenance & Updates",keepGitScribeRunningSmoothly:"Keep GitScribe running smoothly with regular updates and bug fixes",freeAndOpenSource:"Free & Open Source",maintainFreeAccessForEveryone:"Maintain free access for everyone while improving the tool",otherWaysToSupport:"Other Ways to Support",starOnGitHub:"Star on GitHub",starringOurRepository:"Starring our repository helps others discover GitScribe",visitGitHub:"Visit GitHub",shareFeedback:"Share Feedback",letUsKnowWhatYouThink:"Let us know what you think and how we can improve",thankYou:"Thank You!",everyContributionMatters:"Every contribution matters, no matter how small.",whetherThroughDonations:"Whether through donations, GitHub stars, or feedback,",weAppreciateYourSupport:"we appreciate your support in making GitScribe better for everyone.",allRightsReserved:"All rights reserved",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",cookiePolicy:"Cookie Policy",overview:"Overview",gettingStarted:"Getting Started",supportedFormats:"Supported Formats",repositoryAccess:"Repository Access",fileAnalysis:"File Analysis",codeUnderstanding:"Code Understanding",createGitHubToken:"Create a GitHub Personal Access Token",addTokenToGitScribe:"Add Token to GitScribe",startGenerating:"Start Generating",requiredScopes:"Required scopes",forPrivateRepos:"for private repos and commits",forPublicRepos:"For public repos, a token is optional but recommended to avoid rate limits",enterRepositoryUrl:"Enter your repository URL",chooseOutputFormats:"Choose output formats and section types",clickRunWorkflow:'Click "Run Workflow"',selectMultipleRepositories:"Select Multiple Repositories",aiPoweredAnalysis:"AI-powered analysis",automaticallyAnalyze:"Automatically analyze",connectToAnyRepository:"Connect to any GitHub repository",usingPersonalAccessToken:"using your Personal Access Token",goToGitHubSettings:"Go to GitHub Settings",developerSettings:"Developer settings",personalAccessTokens:"Personal access tokens",tokensClassic:"Tokens (classic)",enterYourToken:"Enter your token",githubTokenField:"in the GitHub Token field",documentationEditorSettings:"in the documentation editor settings",clickSaveChanges:'Click "Save Changes"',persistIt:"to persist it",egOwnerRepo:"e.g., owner/repo",thenClickRunWorkflow:'then click "Run Workflow"',startAiAgentWorkflow:"to start the AI agent workflow",youCanUseAnyOfTheseFormats:"You can use any of these formats to specify a repository",toSpecifyRepository:"to specify a repository",seamlesslyConnectWithGitHub:"Seamlessly connect with GitHub to generate documentation from your repositories",generateDocumentationFromRepositories:"generate documentation from your repositories",gitScribeIntegratesDirectly:"GitScribe integrates directly with GitHub's API",accessYourRepositories:"to access your repositories",generateComprehensiveDocumentation:"and generate comprehensive documentation",whetherPublicOrPrivate:"Whether you're working with public or private repositories",ourIntegrationMakesItEasy:"our integration makes it easy",documentYourCodebase:"to document your codebase",connectToAnyGitHubRepository:"Connect to any GitHub repository",automaticallyAnalyzeRepository:"Automatically analyze repository",repositoryStructure:"repository structure",codeFiles:"code files",configuration:"and configuration",aiPoweredAnalysisOfCodebase:"AI-powered analysis of your codebase",generateAccurateDocumentation:"to generate accurate documentation",tokenOptionalButRecommended:"For public repos, a token is optional but recommended",avoidRateLimits:"to avoid rate limits",multiRepoSupportTitle:"Multi-Repository Support",generateDocumentationForMultiple:"Generate documentation for multiple",simultaneously:"simultaneously",selectMultipleRepositoriesTitle:"Select Multiple Repositories",batchProcessing:"Batch Processing",unifiedDocumentation:"Unified Documentation",individualDocumentation:"Individual Documentation",aiPoweredGenerationTitle:"AI-Powered Generation",aiPoweredGenerationDescription:"Leverage advanced AI to create comprehensive, accurate documentation",exportCommitTitle:"Export & Commit",exportCommitDescription:"Export documentation or commit directly to your repositories",documentationTitle:"Documentation",apiReferenceTitle:"API Reference",examplesTitle:"Examples",supportTitle:"Support",privacyPolicyTitle:"Privacy Policy",termsOfServiceTitle:"Terms of Service",cookiePolicyTitle:"Cookie Policy",assistantGreeting:"Hi! I'm your AI assistant. I can help you edit and improve your documentation! ",assistantCapabilities:"I can:",assistantRewriteSections:"Rewrite sections",assistantImproveClarity:"Improve clarity and readability",assistantFixGrammar:"Fix grammar and spelling",assistantAddRemoveContent:"Add or remove content",assistantRestructure:"Restructure the documentation",assistantFormatText:"Format text better",assistantTellMeWhatToChange:"Just tell me what you'd like to change!",assistantErrorNoDocumentation:"Documentation editing mode requires documentation to be loaded. Please generate documentation first.",assistantErrorUnknown:"Sorry, I encountered an error",assistantErrorApiKey:"Configuration error: OpenAI API key is missing. Please check your environment variables.",assistantErrorParse:`I had trouble understanding that request. Could you try rephrasing it? For example:
 "Add a pricing section"
 "Change the primary color to blue"
 "Update the hero title"`,assistantErrorNetwork:"Network error: Please check your internet connection and try again.",assistantPlaceholderLoading:"AI is generating your request...",assistantPlaceholderReady:"Ask me anything about your documentation...",assistantTitleSend:"Send message",assistantTitleType:"Type a message to send",assistantClearConversation:"Clear conversation",selectRepositories:"Select Repositories",selected:"selected",close:"Close",searchRepositories:"Search repositories...",visibility:"Visibility:",all:"All",public:"Public",private:"Private",refresh:"Refresh",loadingRepositories:"Loading repositories...",noRepositoriesMatch:"No repositories match your search.",noRepositoriesFound:"No repositories found.",lastPushed:"Last pushed:",repositoriesSelected:"repositories selected",repositorySelected:"repository selected",noRepositoriesSelected:"No repositories selected",selectAll:"Select All",selectAllFiltered:"Select all filtered repositories",allFilteredReposSelected:"All filtered repositories are already selected",clearAll:"Clear All",done:"Done",repositoryDiscovery:"Repository Discovery",repositoryAnalysis:"Repository Analysis",qualityAnalysis:"Quality Analysis",refactorProposal:"Refactor Proposal",documentationPlanning:"Documentation Planning",documentationWriting:"Documentation Writing",gitOperations:"Git Operations",complete:"Complete",running:"Running...",processing:"Processing:",completed:" Completed",error:"Error:",automatedPipeline:"Automated documentation generation pipeline",outputFormats:"Output Formats",sectionTypes:"Section Types",pleaseSelectAtLeastOneRepository:"Please select at least one repository",noWorkflowState:"No workflow state available",noDocumentationToCommit:"No documentation to commit",commitFailed:"Commit failed",generatedFeatures:"Generated Features",workflowComplete:"Workflow Complete!",generatedDocumentationFor:"Generated documentation for",repository:"repository",repositories:"repositories",committedTo:"Committed to",backTo:"Back to",cancel:"Cancel",branch:"Branch",commitMessage:"Commit Message",scrollToTop:"Scroll to top",scrollToBottom:"Scroll to bottom",hideAiAssistant:"Hide AI Assistant",showAiAssistant:"Show AI Assistant",enableAutoUpdate:"Enable auto-update on push/merge",disableAutoUpdate:"Disable auto-update",format:"Format:",section:"Section:",addDocumentation:"Add documentation",ownerRepoOrGithub:"owner/repo or github.com/owner/repo",ownerRepoPlaceholder:"owner/repo",keyFeatures:"Key Features",selectAndProcessMultiple:"Select and process multiple repositories in a single operation",eachRepositoryGetsOwn:"Each repository gets its own dedicated documentation file",batchCommit:"Batch Commit",commitToAllSelected:"Commit documentation to all selected repositories with one click",howToUse:"How to Use",selectMultipleReposStep:"1. Select Multiple Repositories",clickSelectReposButton:'Click "Select repositories" button to browse and select from your GitHub repositories. You can search and filter by visibility.',browseAndSelectFromGitHub:"browse and select from your GitHub repositories",searchAndFilterByVisibility:"You can search and filter by visibility",chooseOutputFormatsSections:"2. Choose Output Formats & Sections",selectOneOrMoreFormats:"Select one or more output formats",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"and documentation section types",readmeArchitectureApi:"(README, Architecture, API, etc.)",runWorkflowStep:"3. Run Workflow",clickRunWorkflowToStart:'Click "Run Workflow" to start the AI agent workflow',systemWillProcessEachRepo:"The system will process each repository",throughDiscoveryAnalysisPlanning:"through discovery, analysis, planning, and writing stages",reviewCommitStep:"4. Review & Commit",reviewDocumentationInTabs:"Review documentation in separate tabs for each repository",switchBetweenFormatsSections:"Switch between formats and sections",whenReadyClickCommitToRepos:'When ready, click "Commit to Repos"',commitAllAtOnce:"to commit all at once",benefits:"Benefits",saveTimeProcessingMultiple:"Save time by processing multiple repositories simultaneously",maintainConsistentFormat:"Maintain consistent documentation format across projects",easyManagementWithTabs:"Easy management with tabbed interface for each repository",batchCommitFunctionality:"Batch commit functionality for efficient workflow",aiModels:"AI Models",gitScribeSupportsMultipleModels:"GitScribe supports multiple OpenAI models",chooseBasedOnNeeds:"Choose based on your needs",speedCostQuality:"for speed, cost, and quality",gpt4oMiniRecommended:"GPT-4o Mini (Recommended)",fastAndCostEffective:"Fast and cost-effective for most documentation tasks",bestBalanceSpeedQuality:"Best balance of speed and quality",gpt4o:"GPT-4o",mostAdvancedModel:"Most advanced model",complexCodebases:"for complex codebases",highestQualityHigherCost:"Highest quality, higher cost",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Balanced performance and accuracy",goodForLargeRepos:"Good for large repositories",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Fast and economical",simpleProjects:"for simple projects",lowestCostOption:"Lowest cost option",youCanChangeModel:"You can change the model",settingsPanel:"in the Settings panel",realtimeCostEstimation:"Real-time cost estimation",statisticsSidebar:"is displayed in the Statistics sidebar",aiAssistant:"AI Assistant",aiAssistantFeature:"The AI Assistant feature allows you",interactivelyEditImprove:"to interactively edit and improve your documentation",rewriteSectionsForClarity:"Rewrite sections for better clarity",fixGrammarSpellingErrors:"Fix grammar and spelling errors",addRemoveContentBasedOnNeeds:"Add or remove content based on your needs",restructureDocumentation:"Restructure documentation for better flow",formatTextImproveReadability:"Format text and improve readability",costEstimation:"Cost Estimation",gitScribeProvidesRealtime:"GitScribe provides real-time cost estimation",basedOn:"based on",selectedAiModelPricing:"Selected AI model pricing",estimatedTokenUsage:"Estimated token usage",documentationLengthComplexity:"Documentation length and complexity",costsDisplayedInStatistics:"Costs are displayed",duringGeneration:"during generation",github:"GitHub",exportDocumentation:"Export Documentation",exportDocumentationDescription:"Export your generated documentation in multiple formats including Markdown, HTML, PDF, and more. Download documentation files or commit them directly to your GitHub repositories.",downloadGeneratedDocumentation:"Download your generated documentation in multiple formats for use in documentation sites, wikis, or version control systems.",exportFormats:"Export Formats",markdownStandardFormat:"Markdown - Standard .md format for GitHub, GitLab, and documentation sites",markdownMermaidDescription:"Markdown + Mermaid - Markdown with AI-generated diagrams",mdxDescription:"MDX - Markdown with JSX components for interactive docs",openapiDescription:"OpenAPI - YAML format for API documentation",htmlDescription:"HTML - Fully styled HTML pages ready for deployment",eachFormatGenerated:"Each format is generated with section-specific content tailored to the selected section types.",commitToRepository:"Commit to Repository",automaticallyCommitDocumentation:"Automatically commit generated documentation directly to your GitHub repositories. Perfect for keeping documentation in sync with your codebase.",howItWorks:"How It Works",runWorkflowGenerate:"Run the workflow to generate documentation for your repository(ies)",reviewGeneratedDocumentation:"Review the generated documentation in the viewer",clickCommitToRepos:'Click "Commit to Repos" button (appears after workflow completes)',enterCommitMessage:'Enter a commit message (e.g., "docs: Add comprehensive documentation")',specifyTargetBranch:"Specify the target branch (default: main)",documentationCommitted:"Documentation is committed with the selected format and section types",workflowStopsAfterGeneration:"The workflow stops after generation, allowing you to review before committing.",controlOverCommits:"This ensures you have control over what gets committed to your repositories.",whenWorkingWithMultiple:"When working with multiple repositories, each repository receives its own dedicated documentation files based on your selected formats and sections.",eachRepositoryReceives:"Each repository receives its own dedicated documentation files based on your selected formats and sections.",commitOperationProcesses:"The commit operation processes all selected repositories in batch.",documentationStoredSeparately:"Each repository's documentation is stored separately and committed to the correct repository.",autoUpdateFeature:"Auto-Update Feature",enableAutoUpdateDescription:"Enable auto-update to automatically regenerate and commit documentation when your repository receives new commits or merges to the main branch.",automaticUpdates:"Automatic Updates",monitorsRepositories:"Monitors repositories every 5 minutes",detectsPushesMerges:"Detects pushes and merges to main branch",automaticallyRegenerates:"Automatically regenerates documentation",commitsUpdatedDocumentation:"Commits updated documentation with timestamp",multiRepoOverview:"GitScribe's multi-repository support allows you to process multiple GitHub repositories at once, saving time and effort when documenting multiple projects.",completeGuideToUsing:"Complete guide to using GitScribe",welcomeToGitScribe:"Welcome to GitScribe! An AI-powered documentation generation tool that automatically creates comprehensive documentation for your GitHub repositories using advanced AI agent workflows.",aiPoweredDocumentationTool:"AI-powered documentation generation tool",quickStart:"Quick Start",addOpenAiKey:"Add your OpenAI API key in the settings",optionalAddGitHubToken:"(Optional) Add a GitHub Personal Access Token for private repos",enterRepositoryUrlOrSelect:"Enter a GitHub repository URL or select multiple repositories",clickRunWorkflowStart:'Click "Run Workflow" to start the AI agent workflow',reviewEditCommit:"Review generated documentation, edit with AI Assistant, and commit",coreFeatures:"Core Features",directIntegration:"Direct integration with GitHub API for repository access and commits",processMultipleRepos:"Process multiple repositories simultaneously with batch operations",intelligentAgentSystem:"Intelligent agent system for automated documentation generation",multipleOutputFormats:"Multiple output formats and direct GitHub commits",outputFormatsDescription:"GitScribe supports multiple documentation formats to suit different needs:",standardMarkdownFormat:"Standard markdown format for GitHub, GitLab, and documentation sites",markdownWithDiagrams:"Markdown with AI-generated Mermaid diagrams for architecture and flows",markdownWithJsx:"Markdown with JSX components for interactive documentation",yamlFormatForApi:"YAML format for API documentation with endpoint specifications",fullyStyledHtml:"Fully styled HTML pages ready for deployment",documentationSections:"Documentation Sections",generateDifferentTypes:"Generate different types of documentation sections:",readmeDescription:"README - Project overview, installation, usage, and features",architectureDescription:"Architecture - System design, component structure, and data flow",apiReferenceDescription:"API Reference - Endpoint documentation, request/response schemas",componentsDescription:"Components - Component documentation with props and usage examples",testingCicdDescription:"Testing & CI/CD - Test setup, CI/CD pipeline, and deployment",changelogDescription:"Changelog - Version history and release notes",aiAgentWorkflow:"AI Agent Workflow",gitScribeUsesIntelligent:"GitScribe uses an intelligent agent system that processes repositories through multiple stages:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Validates and discovers repositories",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analyzes structure, tech stack, and complexity",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Creates structured documentation plan",docsWriter:"DocsWriter",generatesDocumentation:"- Generates documentation in selected formats",learnMore:"Learn More",exploreOtherPages:"Explore the other pages in this documentation section for detailed information about each feature and how to use them effectively.",aiPoweredOverview:"GitScribe uses OpenAI's advanced language models to analyze your codebase and generate comprehensive, well-structured documentation. Our AI understands code context, relationships, and best practices to create documentation that's both accurate and readable.",gitScribeUsesOpenAI:"GitScribe uses OpenAI's advanced language models",completeApiDocumentation:"Complete API documentation for developers",agentWorkflowSystem:"Agent Workflow System",gitScribeUsesLangGraph:"GitScribe uses a LangGraph-style agent system for automated documentation generation:",agentWorkflowSteps:"// Agent Workflow Steps",agentState:"Agent State",workflowMaintainsSharedState:"The workflow maintains shared state between agents, including:",discoveredRepositories:"Discovered repositories",repositoryAnalyses:"Repository analyses",documentationPlans:"Documentation plans",generatedDocumentationByFormat:"Generated documentation (by format and section)",commitResults:"Commit results",githubService:"GitHub Service",langChainService:"LangChain Service",typeDefinitions:"Type Definitions",exampleUseCases:"Example use cases and workflows",example1SingleRepository:"Example 1: Single Repository",scenario:"Scenario",youWantToGenerate:"You want to generate comprehensive documentation for a single React project with multiple formats.",steps:"Steps",enterGitHubRepositoryUrl:"Enter GitHub repository URL:",selectOutputFormatsEg:"Select output formats (e.g., Markdown, MDX, HTML)",selectSectionTypesEg:"Select section types (e.g., README, Architecture, API)",watchWorkflowProgress:"Watch the workflow progress through discovery, analysis, planning, and writing",reviewGeneratedDocumentationSwitch:"Review generated documentation, switch between formats and sections",clickCommitToReposWhenReady:'Click "Commit to Repos" when ready to commit',example2MultipleRepositories:"Example 2: Multiple Repositories",youManageMultipleMicroservices:"You manage multiple microservices and want to document them all at once with consistent formatting.",clickSelectRepositories:'Click "Select repositories" and choose multiple repos from your GitHub account',selectOutputFormatsEgOpenAPI:"Select output formats (e.g., Markdown + OpenAPI for API docs)",monitorWorkflowProgress:"Monitor workflow progress for each repository",reviewEachRepositoryDocumentation:"Review each repository's documentation in separate tabs",switchBetweenFormatsSectionsForEach:"Switch between formats and sections for each repo",commitAllRepositoriesAtOnce:'Commit all repositories at once with "Commit to Repos"',example3AutoUpdateWorkflow:"Example 3: Auto-Update Workflow",youWantDocumentationToAutoUpdate:"You want documentation to automatically update when code changes.",selectRepositoriesInMultiRepoMode:"Select repositories in multi-repo mode",enableAutoUpdateForEach:"Enable auto-update for each repository (bell icon)",toggleGlobalAutoUpdateSwitch:"Toggle global auto-update switch",documentationWillAutoUpdate:"Documentation will auto-update on every push/merge to main",example4UsingAiAssistant:"Example 4: Using AI Assistant",youWantToImproveDocumentation:"You want to improve the generated documentation with AI help.",examplePrompts:"Example Prompts",addSectionExplainingInstallation:'"Add a section explaining the installation process"',makeApiDocumentationMoreDetailed:'"Make the API documentation section more detailed"',fixAllGrammarErrors:'"Fix all grammar errors"',restructureDocumentationForBetterFlow:'"Restructure the documentation for better flow"',needHelp:"Need Help?",wereHereToHelp:"We're here to help! If you're experiencing issues or have questions about GitScribe, here are the best ways to get support.",contactOptions:"Contact Options",emailSupport:"Email Support",getDirectHelpViaEmail:"Get direct help via email",githubIssues:"GitHub Issues",reportBugsOrRequestFeatures:"Report bugs or request features",openAnIssue:"Open an issue",commonIssues:"Common Issues",openaiApiKeyError:"OpenAI API Key Error",addOpenAiKeyInSettings:'Add your OpenAI API key in the Settings panel. Click the Settings icon, enter your key, and click "Save Changes".',githubRateLimiting:"GitHub Rate Limiting",addGitHubTokenInSettings:"Add a GitHub Personal Access Token in the Settings panel to increase rate limits and access private repositories.",requiredScopeRepo:"Required scope:",workflowNotStarting:"Workflow Not Starting",ensureYouHaveSelected:'Ensure you have selected at least one output format and one section type. The "Run Workflow" button requires both to be enabled.',documentationNotCommitting:"Documentation Not Committing",makeSureGitHubTokenHasRepoScope:"Make sure your GitHub token has the",checkOutComprehensiveDocumentation:"Check out our comprehensive documentation for detailed guides and API references.",howWeProtectAndHandle:"How we protect and handle your data",lastUpdated:"Last updated:",introduction:"Introduction",gitScribeCommittedToPrivacy:'GitScribe ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you use our service.',informationWeCollect:"Information We Collect",personalInformation:"Personal Information",weMayCollectPersonalInfo:"We may collect personal information such as email addresses when you create an account or contact us for support.",githubTokens:"GitHub Tokens",githubTokensStoredLocally:"GitHub Personal Access Tokens are stored locally in your browser's localStorage. We do not transmit or store these tokens on our servers.",usageData:"Usage Data",weMayCollectUsageData:"We may collect information about how you use our service, including repository URLs and documentation generation preferences.",howWeUseYourInformation:"How We Use Your Information",toProvideAndImprove:"To provide and improve our documentation generation service",toProcessYourRequests:"To process your requests and generate documentation",toCommunicateWithYou:"To communicate with you about your account or support requests",toAnalyzeUsagePatterns:"To analyze usage patterns and improve our service",dataSecurity:"Data Security",weImplementSecurityMeasures:"We implement appropriate security measures to protect your information. GitHub tokens are stored locally in your browser and never transmitted to our servers. All API communications are encrypted using HTTPS.",thirdPartyServices:"Third-Party Services",weUseFollowingThirdParty:"We use the following third-party services:",openaiForAiPowered:"OpenAI: For AI-powered documentation generation using GPT models",githubForRepositoryAccess:"GitHub: For repository access, file operations, and commits via GitHub API",localStorageForStoring:"LocalStorage: For storing user preferences, tokens, and project history locally in your browser",allDataStoredLocally:"All data is stored locally in your browser. GitHub tokens and API keys are never transmitted to our servers.",yourRights:"Your Rights",youHaveRightToAccess:"You have the right to access, update, or delete your personal information. You can manage your account settings or contact us at",contactUsPrivacy:"Contact Us",ifYouHaveQuestionsPrivacy:"If you have questions about this Privacy Policy, please contact us at",termsAndConditions:"Terms and conditions for using GitScribe",agreementToTerms:"Agreement to Terms",byAccessingOrUsing:'By accessing or using GitScribe ("the Service"), you agree to be bound by these Terms of Service. If you disagree with any part of these terms, you may not access the Service.',useOfService:"Use of Service",eligibility:"Eligibility",youMustBeAtLeast18:"You must be at least 18 years old or have parental consent to use this Service.",accountResponsibility:"Account Responsibility",youAreResponsibleForMaintaining:"You are responsible for maintaining the security of your account and any API keys or tokens you use with the Service.",acceptableUse:"Acceptable Use",youAgreeNotTo:"You agree not to:",useServiceForIllegalPurpose:"Use the Service for any illegal purpose",violateLawsOrRegulations:"Violate any laws or regulations",infringeOnIntellectualProperty:"Infringe on intellectual property rights",transmitMaliciousCode:"Transmit malicious code or viruses",attemptUnauthorizedAccess:"Attempt to gain unauthorized access to the Service",apiUsageAndCosts:"API Usage and Costs",gitScribeUsesOpenAIApi:"GitScribe uses OpenAI's API for AI-powered features. You are responsible for:",youAreResponsibleFor:"You are responsible for:",providingYourOwnOpenAiKey:"Providing your own OpenAI API key",allCostsAssociated:"All costs associated with API usage",managingYourApiKeySecurity:"Managing your API key security",intellectualProperty:"Intellectual Property",serviceOwnedByGitScribe:"The Service and its original content, features, and functionality are owned by GitScribe and are protected by international copyright, trademark, and other intellectual property laws.",limitationOfLiability:"Limitation of Liability",gitScribeProvidedAsIs:'GitScribe is provided "as is" without warranties of any kind. We are not liable for any damages arising from your use of the Service, including but not limited to data loss, documentation errors, or API costs.',changesToTerms:"Changes to Terms",weReserveRightToModify:"We reserve the right to modify these terms at any time. Continued use of the Service after changes constitutes acceptance of the new terms.",contactTerms:"Contact",forQuestionsAboutTerms:"For questions about these Terms, contact us at",howWeUseCookies:"How we use cookies and similar technologies",whatAreCookies:"What Are Cookies",cookiesAreSmallTextFiles:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your browsing experience.",howWeUseCookiesTitle:"How We Use Cookies",essentialCookies:"Essential Cookies",theseCookiesAreNecessary:"These cookies are necessary for the Service to function. They include authentication tokens and session information.",preferenceCookies:"Preference Cookies",weUseLocalStorageToStore:"We use localStorage to store your preferences, such as GitHub tokens and UI settings. This data is stored locally in your browser and never transmitted to our servers.",analyticsCookies:"Analytics Cookies",weMayUseAnalyticsCookies:"We may use analytics cookies to understand how users interact with our Service and improve our features.",localStorageUsage:"LocalStorage Usage",gitScribeUsesBrowserLocalStorage:"GitScribe uses browser localStorage (not cookies) to store:",githubPersonalAccessTokensEncrypted:"GitHub Personal Access Tokens (encrypted locally)",userPreferencesAndSettings:"User preferences and settings",autoFollowRepositoryConfigurations:"Auto-follow repository configurations",thisDataRemainsOnDevice:"This data remains on your device and is never shared with third parties.",managingCookies:"Managing Cookies",youCanControlCookies:"You can control cookies through your browser settings. However, disabling essential cookies may affect the functionality of the Service.",toClearLocalStorageData:"To clear localStorage data, you can use your browser's developer tools or clear browsing data.",thirdPartyCookies:"Third-Party Cookies",weMayUseThirdPartyServices:"We may use third-party services that set their own cookies. These services include:",analyticsProviders:"Analytics providers (if applicable)",contactCookiePolicy:"Contact",forQuestionsAboutCookiePolicy:"For questions about our Cookie Policy, contact us at",pageNotFound:"Page Not Found",theRequestedPageCouldNotBeFound:"The requested page could not be found",thePageYoureLookingForDoesntExist:"The page you're looking for doesn't exist.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architecture",sectionApiReference:"API Reference",sectionComponents:"Components",sectionTestingCicd:"Testing & CI/CD",sectionChangelog:"Changelog",sectionInlineCode:"Inline Code Documentation",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",sectionInlineCodeShort:"CODE",aiPoweredDocumentationGenerationForGitHub:"AI-powered documentation generation for GitHub repositories",requiredForAiPoweredDocumentationGeneration:"Required for AI-powered documentation generation.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Please provide a commit message",githubTokenRequiredForCommitting:"GitHub token is required for committing files",documentationNotFoundForRepository:"Documentation not found for this repository. Please generate documentation first.",successfullyCommittedToRepository:"Successfully committed documentation to 1 repository!",successfullyCommittedToRepositories:"Successfully committed documentation to {count} repositories!",failedToCommitToRepository:"Failed to commit to 1 repository",failedToCommitToRepositories:"Failed to commit to {count} repositories",failedToCommitDocumentation:"Failed to commit documentation",documentationHelper:"Documentation helper",clearConversationHistoryConfirm:"Clear conversation history?",readyToHelp:"Ready to help!",iCanHelpEditDocumentation:"I can help you edit and improve your documentation",editSections:"Edit sections",improveClarity:"Improve clarity",fixGrammar:"Fix grammar",aiIsThinking:"AI is thinking...",send:"Send",beSpecificForBetterResults:"Be specific for better results",pressEnterToSend:"Press Enter to send",errorEditingDocumentation:"Error editing documentation",unknownErrorOccurred:"Unknown error occurred",workflowFailed:"Workflow failed",viewCommit:"View commit",repositoryQualityScores:"Repository Quality Scores",folderStructureRefactorProposals:"Folder Structure Refactor Proposals",recommendedStructure:"Recommended Structure:",proposedMoves:"Proposed Moves",moreMoves:"more moves...",warnings:"Warnings",generatedRepositoryBadges:"Generated Repository Badges",badgeMarkdownCopiedToClipboard:"Badge markdown copied to clipboard!",copyBadgeMarkdown:"Copy Badge Markdown",pdfExportFailed:"PDF export failed"},fr:{aiPoweredGeneration:"Gnration de documentation alimente par IA",sourceSelection:"Slection de Source",clickToCollapse:"Cliquez pour rduire",clickToExpand:"Cliquez pour dvelopper",formats:"Formats",sections:"Sections",selectAtLeastOne:"Slectionnez au moins un format et une section",token:"Jeton",add:"Ajouter",change:"Changer",hide:"Masquer",openaiKey:"Cl OpenAI",saveChanges:"Enregistrer les Modifications",edit:"Modifier",save:"Enregistrer",editDocumentation:"Modifier la Documentation",editDocumentationPlaceholder:"Modifiez votre documentation ici...",runWorkflow:"Excuter le Workflow",generate:"Gnrer",startWritingDocumentation:"Commencer  crire la Documentation",generating:"Gnration...",documentation:"Documentation",noDocumentation:"Aucune documentation gnre pour le moment",export:"Exporter",commit:"Valider",settings:"Paramtres",statistics:"Statistiques",length:"Longueur",modelUsed:"Modle Utilis",estTokens:"Tokens Est.",estCost:"Cot Est.",words:"Mots",lines:"Lignes",characters:"Caractres",fileSize:"Taille du Fichier",readingTime:"Temps de Lecture",avgWordsPerLine:"Mots Moy./Ligne",headers:"En-ttes",codeBlocks:"Blocs de Code",links:"Liens",inputTokens:"Tokens d'Entre",outputTokens:"Tokens de Sortie",wordCount:"Nombre de Mots",lineCount:"Nombre de Lignes",characterCount:"Caractres",estimatedTokens:"Tokens Estims",cost:"Cot",avg:"Moy.",wordsPerLine:"mots/ligne",fileSizeLabel:"Taille du fichier",lengthLabel:"Longueur",input:"Entre",output:"Sortie",wordsUnit:"mots",charactersUnit:"caractres",tokensUnit:"tokens",bytesUnit:"octets",charsUnit:"caractres",minUnit:"min",source:"Source",qualityScores:"Scores de Qualit",refactorProposals:"Propositions de Refactorisation",badges:"Badges",pdfExport:"Export PDF",clear:"Effacer",formatsLocked:"Les formats et sections sont verrouills aprs gnration.",runNewWorkflow:"Excutez un nouveau workflow pour les modifier.",agentWorkflow:"Workflow d'Agent",useAiAgents:"Utiliser des agents IA pour le pipeline automatis",singleRepo:"Dpt Unique",multiRepo:"Multi-Dpts",githubUrl:"URL GitHub",selectRepos:"Slectionner les Dpts",selectAtLeastOneRepo:"Veuillez slectionner au moins un dpt",selectAtLeastOneFormat:"Veuillez slectionner au moins un format de sortie",selectAtLeastOneSection:"Veuillez slectionner au moins un type de section de documentation",pleaseProvideUrl:"Veuillez fournir une URL GitHub",reviewAndCommit:'Examinez la documentation ci-dessous, puis cliquez sur "Valider dans les Dpts" si vous souhaitez la valider.',commitToRepos:"Valider dans les Dpts",committing:"Validation...",clearDocumentation:"Effacer la documentation pour modifier les formats/sections",toChangeFormats:"pour modifier les formats/sections",gitScribe:"GitScribe",aiPowered:"ALIMENT PAR IA",aiPoweredDocumentationTitle:"Documentation Alimente par IA pour les Dpts GitHub",aiPoweredDocumentationDescription:"Gnrez automatiquement une documentation complte  partir d'un ou plusieurs dpts GitHub. Aliment par des agents IA qui analysent, planifient et rdigent la documentation pour votre base de code.",githubIntegration:"Intgration GitHub",githubIntegrationDescription:"Gnrer de la documentation  partir de n'importe quel dpt GitHub",multiRepoSupport:"Support Multi-Dpts",multiRepoSupportDescription:"Gnrer de la documentation pour plusieurs dpts simultanment",autoCommitExport:"Validation & Export Automatiques",autoCommitExportDescription:"Valider automatiquement la documentation dans les dpts ou la tlcharger en Markdown",readyToStart:"Prt  commencer?",generateDocumentationFromRepos:"Gnrer de la documentation  partir de dpts GitHub",noAccountNeeded:"Aucun compte requis - Commencez immdiatement!",startImmediately:"Commencez immdiatement!",whyChooseOurTool:"Pourquoi Choisir Notre Outil de Documentation",whyChooseOurToolDescription:"Rationalisez votre flux de travail de documentation avec une gnration alimente par IA",aiAgentWorkflows:"Workflows d'Agents IA",aiAgentWorkflowsDescription:"Systme d'agents automatis qui dcouvre, analyse, planifie et rdige la documentation pour vos dpts.",autoUpdateFollow:"Mise  Jour & Suivi Automatiques",autoUpdateFollowDescription:"Dtecter automatiquement les changements et rgnrer la documentation lorsque les dpts sont mis  jour.",githubIntegrationFeature:"Intgration GitHub",githubIntegrationFeatureDescription:"Intgration de validation transparente et accs direct aux dpts pour votre flux de travail de documentation.",readyToGetStarted:"Prt  commencer?",joinDevelopers:"Rejoignez les dveloppeurs et les quipes qui automatisent leur flux de travail de documentation",startGeneratingDocumentation:"Commencer  Gnrer la Documentation",footerDescription:"Gnration de documentation alimente par IA pour les dpts GitHub avec support multi-dpts, workflows d'agents et fonctionnalits de mise  jour automatique.",madeWith:"Fait avec",forDevelopers:"pour les dveloppeurs",features:"Fonctionnalits",resources:"Ressources",connect:"Se Connecter",contactUs:"Nous Contacter",Donate:"Faire un don",buyMeACoffee:"Offrez-moi un caf",supportGitScribe:"Soutenez GitScribe",supportGitScribeDevelopment:"Aidez-nous  continuer  dvelopper et amliorer GitScribe",ifYouFindGitScribeUseful:"Si vous trouvez GitScribe utile et souhaitez soutenir son dveloppement, pensez  nous offrir un caf!",whySupport:"Pourquoi soutenir GitScribe?",gitScribeIsFreeAndOpenSource:"GitScribe est gratuit et open-source, construit avec passion pour la communaut des dveloppeurs.",yourSupportHelpsUs:"Votre soutien nous aide :",newFeatures:"Nouvelles Fonctionnalits",developNewFeaturesAndImprovements:"Dvelopper de nouvelles fonctionnalits et amliorations bases sur les commentaires des utilisateurs",maintenanceAndUpdates:"Maintenance & Mises  Jour",keepGitScribeRunningSmoothly:"Maintenir GitScribe en bon fonctionnement avec des mises  jour rgulires et des corrections de bugs",freeAndOpenSource:"Gratuit & Open Source",maintainFreeAccessForEveryone:"Maintenir l'accs gratuit pour tous tout en amliorant l'outil",otherWaysToSupport:"Autres Faons de Soutenir",starOnGitHub:"toile sur GitHub",starringOurRepository:"toiler notre dpt aide les autres  dcouvrir GitScribe",visitGitHub:"Visiter GitHub",shareFeedback:"Partager des Commentaires",letUsKnowWhatYouThink:"Faites-nous savoir ce que vous pensez et comment nous pouvons nous amliorer",thankYou:"Merci!",everyContributionMatters:"Chaque contribution compte, aussi petite soit-elle.",whetherThroughDonations:"Que ce soit par des dons, des toiles GitHub ou des commentaires,",weAppreciateYourSupport:"nous apprcions votre soutien pour rendre GitScribe meilleur pour tous.",allRightsReserved:"Tous droits rservs",privacyPolicy:"Politique de Confidentialit",termsOfService:"Conditions d'Utilisation",cookiePolicy:"Politique des Cookies",overview:"Aperu",gettingStarted:"Pour Commencer",supportedFormats:"Formats Pris en Charge",repositoryAccess:"Accs au Dpt",fileAnalysis:"Analyse de Fichiers",codeUnderstanding:"Comprhension du Code",createGitHubToken:"Crer un Jeton d'Accs Personnel GitHub",addTokenToGitScribe:"Ajouter le Jeton  GitScribe",startGenerating:"Commencer la Gnration",requiredScopes:"Portes requises",forPrivateRepos:"pour les dpts privs et les commits",forPublicRepos:"Pour les dpts publics, un jeton est facultatif mais recommand pour viter les limites de dbit",enterRepositoryUrl:"Entrez l'URL de votre dpt",chooseOutputFormats:"Choisissez les formats de sortie et les types de sections",clickRunWorkflow:'Cliquez sur "Excuter le Workflow"',selectMultipleRepositories:"Slectionner Plusieurs Dpts",aiPoweredAnalysis:"Analyse alimente par IA",automaticallyAnalyze:"Analyser automatiquement",connectToAnyRepository:"Se connecter  n'importe quel dpt GitHub",usingPersonalAccessToken:"en utilisant votre Jeton d'Accs Personnel",goToGitHubSettings:"Allez dans les Paramtres GitHub",developerSettings:"Paramtres du dveloppeur",personalAccessTokens:"Jetons d'accs personnels",tokensClassic:"Jetons (classique)",enterYourToken:"Entrez votre jeton",githubTokenField:"dans le champ Jeton GitHub",documentationEditorSettings:"dans les paramtres de l'diteur de documentation",clickSaveChanges:'Cliquez sur "Enregistrer les Modifications"',persistIt:"pour le conserver",egOwnerRepo:"par ex., propritaire/dpt",thenClickRunWorkflow:'puis cliquez sur "Excuter le Workflow"',startAiAgentWorkflow:"pour dmarrer le workflow de l'agent IA",youCanUseAnyOfTheseFormats:"Vous pouvez utiliser l'un de ces formats pour spcifier un dpt",toSpecifyRepository:"pour spcifier un dpt",seamlesslyConnectWithGitHub:"Connectez-vous facilement  GitHub pour gnrer de la documentation  partir de vos dpts",generateDocumentationFromRepositories:"gnrer de la documentation  partir de vos dpts",gitScribeIntegratesDirectly:"GitScribe s'intgre directement avec l'API GitHub",accessYourRepositories:"pour accder  vos dpts",generateComprehensiveDocumentation:"et gnrer une documentation complte",whetherPublicOrPrivate:"Que vous travailliez avec des dpts publics ou privs",ourIntegrationMakesItEasy:"notre intgration facilite",documentYourCodebase:"la documentation de votre base de code",connectToAnyGitHubRepository:"Se connecter  n'importe quel dpt GitHub",automaticallyAnalyzeRepository:"Analyser automatiquement le dpt",repositoryStructure:"structure du dpt",codeFiles:"fichiers de code",configuration:"et configuration",aiPoweredAnalysisOfCodebase:"Analyse alimente par IA de votre base de code",generateAccurateDocumentation:"pour gnrer une documentation prcise",tokenOptionalButRecommended:"Pour les dpts publics, un jeton est facultatif mais recommand",avoidRateLimits:"pour viter les limites de dbit",multiRepoSupportTitle:"Support Multi-Dpts",generateDocumentationForMultiple:"Gnrer de la documentation pour plusieurs",simultaneously:"simultanment",selectMultipleRepositoriesTitle:"Slectionner Plusieurs Dpts",batchProcessing:"Traitement par Lots",unifiedDocumentation:"Documentation Unifie",individualDocumentation:"Documentation Individuelle",aiPoweredGenerationTitle:"Gnration Alimente par IA",aiPoweredGenerationDescription:"Exploitez l'IA avance pour crer une documentation complte et prcise",exportCommitTitle:"Export & Commit",exportCommitDescription:"Exporter la documentation ou la committer directement dans vos dpts",documentationTitle:"Documentation",apiReferenceTitle:"Rfrence API",examplesTitle:"Exemples",supportTitle:"Support",privacyPolicyTitle:"Politique de Confidentialit",termsOfServiceTitle:"Conditions d'Utilisation",cookiePolicyTitle:"Politique des Cookies",assistantGreeting:"Salut! Je suis votre assistant IA. Je peux vous aider  modifier et amliorer votre documentation! ",assistantCapabilities:"Je peux:",assistantRewriteSections:"Rcrire des sections",assistantImproveClarity:"Amliorer la clart et la lisibilit",assistantFixGrammar:"Corriger la grammaire et l'orthographe",assistantAddRemoveContent:"Ajouter ou supprimer du contenu",assistantRestructure:"Restructurer la documentation",assistantFormatText:"Mieux formater le texte",assistantTellMeWhatToChange:"Dites-moi simplement ce que vous aimeriez changer!",assistantErrorNoDocumentation:"Le mode d'dition de documentation ncessite que la documentation soit charge. Veuillez d'abord gnrer la documentation.",assistantErrorUnknown:"Dsol, j'ai rencontr une erreur",assistantErrorApiKey:"Erreur de configuration: La cl API OpenAI est manquante. Veuillez vrifier vos variables d'environnement.",assistantErrorParse:`J'ai eu du mal  comprendre cette demande. Pourriez-vous essayer de la reformuler? Par exemple:
 "Ajouter une section de tarification"
 "Changer la couleur principale en bleu"
 "Mettre  jour le titre principal"`,assistantErrorNetwork:"Erreur rseau: Veuillez vrifier votre connexion Internet et ressayer.",assistantPlaceholderLoading:"L'IA gnre votre demande...",assistantPlaceholderReady:"Demandez-moi n'importe quoi sur votre documentation...",assistantTitleSend:"Envoyer le message",assistantTitleType:"Tapez un message  envoyer",assistantClearConversation:"Effacer la conversation",selectRepositories:"Slectionner les Dpts",selected:"slectionn",close:"Fermer",searchRepositories:"Rechercher des dpts...",visibility:"Visibilit:",all:"Tous",public:"Public",private:"Priv",refresh:"Actualiser",loadingRepositories:"Chargement des dpts...",noRepositoriesMatch:"Aucun dpt ne correspond  votre recherche.",noRepositoriesFound:"Aucun dpt trouv.",lastPushed:"Dernire mise  jour:",repositoriesSelected:"dpts slectionns",repositorySelected:"dpt slectionn",noRepositoriesSelected:"Aucun dpt slectionn",selectAll:"Tout Slectionner",selectAllFiltered:"Slectionner tous les dpts filtrs",allFilteredReposSelected:"Tous les dpts filtrs sont dj slectionns",clearAll:"Tout Effacer",done:"Termin",repositoryDiscovery:"Dcouverte de Dpt",repositoryAnalysis:"Analyse de Dpt",qualityAnalysis:"Analyse de Qualit",refactorProposal:"Proposition de Refactorisation",documentationPlanning:"Planification de Documentation",documentationWriting:"Rdaction de Documentation",gitOperations:"Oprations Git",complete:"Termin",running:"En cours...",processing:"Traitement:",completed:" Termin",error:"Erreur:",automatedPipeline:"Pipeline automatis de gnration de documentation",outputFormats:"Formats de Sortie",sectionTypes:"Types de Sections",pleaseSelectAtLeastOneRepository:"Veuillez slectionner au moins un dpt",noWorkflowState:"Aucun tat de workflow disponible",noDocumentationToCommit:"Aucune documentation  committer",commitFailed:"chec du commit",generatedFeatures:"Fonctionnalits Gnres",workflowComplete:"Workflow Termin!",generatedDocumentationFor:"Documentation gnre pour",repository:"dpt",repositories:"Dpts",committedTo:"Committ dans",backTo:"Retour ",cancel:"Annuler",branch:"Branche",commitMessage:"Message de Commit",scrollToTop:"Faire dfiler vers le haut",scrollToBottom:"Faire dfiler vers le bas",hideAiAssistant:"Masquer l'Assistant IA",showAiAssistant:"Afficher l'Assistant IA",enableAutoUpdate:"Activer la mise  jour automatique lors du push/merge",disableAutoUpdate:"Dsactiver la mise  jour automatique",format:"Format:",section:"Section:",addDocumentation:"Ajouter de la documentation",ownerRepoOrGithub:"propritaire/dpt ou github.com/propritaire/dpt",ownerRepoPlaceholder:"propritaire/dpt",keyFeatures:"Fonctionnalits Cls",selectAndProcessMultiple:"Slectionner et traiter plusieurs dpts en une seule opration",eachRepositoryGetsOwn:"Chaque dpt obtient son propre fichier de documentation ddi",batchCommit:"Commit par Lots",commitToAllSelected:"Committer la documentation dans tous les dpts slectionns en un clic",howToUse:"Comment Utiliser",selectMultipleReposStep:"1. Slectionner Plusieurs Dpts",clickSelectReposButton:'Cliquez sur le bouton "Slectionner les dpts" pour parcourir et slectionner parmi vos dpts GitHub. Vous pouvez rechercher et filtrer par visibilit.',browseAndSelectFromGitHub:"parcourir et slectionner parmi vos dpts GitHub",searchAndFilterByVisibility:"Vous pouvez rechercher et filtrer par visibilit",chooseOutputFormatsSections:"2. Choisir les Formats de Sortie et Sections",selectOneOrMoreFormats:"Slectionnez un ou plusieurs formats de sortie",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"et types de sections de documentation",readmeArchitectureApi:"(README, Architecture, API, etc.)",runWorkflowStep:"3. Excuter le Workflow",clickRunWorkflowToStart:`Cliquez sur "Excuter le Workflow" pour dmarrer le workflow de l'agent IA`,systemWillProcessEachRepo:"Le systme traitera chaque dpt",throughDiscoveryAnalysisPlanning:" travers les tapes de dcouverte, analyse, planification et rdaction",reviewCommitStep:"4. Examiner et Committer",reviewDocumentationInTabs:"Examinez la documentation dans des onglets spars pour chaque dpt",switchBetweenFormatsSections:"Basculez entre les formats et sections",whenReadyClickCommitToRepos:'Lorsque vous tes prt, cliquez sur "Committer dans les Dpts"',commitAllAtOnce:"pour tout committer en une fois",benefits:"Avantages",saveTimeProcessingMultiple:"Gagnez du temps en traitant plusieurs dpts simultanment",maintainConsistentFormat:"Maintenez un format de documentation cohrent entre les projets",easyManagementWithTabs:"Gestion facile avec interface  onglets pour chaque dpt",batchCommitFunctionality:"Fonctionnalit de commit par lots pour un workflow efficace",aiModels:"Modles IA",gitScribeSupportsMultipleModels:"GitScribe prend en charge plusieurs modles OpenAI",chooseBasedOnNeeds:"Choisissez selon vos besoins",speedCostQuality:"pour la vitesse, le cot et la qualit",gpt4oMiniRecommended:"GPT-4o Mini (Recommand)",fastAndCostEffective:"Rapide et rentable pour la plupart des tches de documentation",bestBalanceSpeedQuality:"Meilleur quilibre entre vitesse et qualit",gpt4o:"GPT-4o",mostAdvancedModel:"Modle le plus avanc",complexCodebases:"pour les bases de code complexes",highestQualityHigherCost:"Qualit maximale, cot plus lev",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Performance et prcision quilibres",goodForLargeRepos:"Bon pour les grands dpts",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Rapide et conomique",simpleProjects:"pour les projets simples",lowestCostOption:"Option la moins chre",youCanChangeModel:"Vous pouvez changer le modle",settingsPanel:"dans le panneau Paramtres",realtimeCostEstimation:"Estimation des cots en temps rel",statisticsSidebar:"est affich dans la barre latrale Statistiques",aiAssistant:"Assistant IA",aiAssistantFeature:"La fonctionnalit Assistant IA vous permet",interactivelyEditImprove:"de modifier et amliorer votre documentation de manire interactive",rewriteSectionsForClarity:"Rcrire des sections pour plus de clart",fixGrammarSpellingErrors:"Corriger les erreurs de grammaire et d'orthographe",addRemoveContentBasedOnNeeds:"Ajouter ou supprimer du contenu selon vos besoins",restructureDocumentation:"Restructurer la documentation pour un meilleur flux",formatTextImproveReadability:"Formater le texte et amliorer la lisibilit",costEstimation:"Estimation des Cots",gitScribeProvidesRealtime:"GitScribe fournit une estimation des cots en temps rel",basedOn:"bas sur",selectedAiModelPricing:"Tarification du modle IA slectionn",estimatedTokenUsage:"Utilisation estime des tokens",documentationLengthComplexity:"Longueur et complexit de la documentation",costsDisplayedInStatistics:"Les cots sont affichs",duringGeneration:"pendant la gnration",github:"GitHub",exportDocumentation:"Exporter la Documentation",exportDocumentationDescription:"Exportez votre documentation gnre dans plusieurs formats, notamment Markdown, HTML, PDF et plus encore. Tlchargez les fichiers de documentation ou commitez-les directement dans vos dpts GitHub.",downloadGeneratedDocumentation:"Tlchargez votre documentation gnre dans plusieurs formats pour une utilisation dans des sites de documentation, wikis ou systmes de contrle de version.",exportFormats:"Formats d'Export",markdownStandardFormat:"Markdown - Format .md standard pour GitHub, GitLab et sites de documentation",markdownMermaidDescription:"Markdown + Mermaid - Markdown avec diagrammes gnrs par IA",mdxDescription:"MDX - Markdown avec composants JSX pour une documentation interactive",openapiDescription:"OpenAPI - Format YAML pour la documentation API",htmlDescription:"HTML - Pages HTML entirement stylises prtes pour le dploiement",eachFormatGenerated:"Chaque format est gnr avec un contenu spcifique  la section adapt aux types de sections slectionns.",commitToRepository:"Valider dans le Dpt",automaticallyCommitDocumentation:"Validez automatiquement la documentation gnre directement dans vos dpts GitHub. Parfait pour garder la documentation synchronise avec votre base de code.",howItWorks:"Comment a Marche",runWorkflowGenerate:"Excutez le workflow pour gnrer la documentation pour votre/vos dpt(s)",reviewGeneratedDocumentation:"Examinez la documentation gnre dans la visionneuse",clickCommitToRepos:'Cliquez sur le bouton "Valider dans les Dpts" (apparat aprs la fin du workflow)',enterCommitMessage:'Entrez un message de commit (par ex., "docs: Ajouter une documentation complte")',specifyTargetBranch:"Spcifiez la branche cible (par dfaut: main)",documentationCommitted:"La documentation est valide avec le format et les types de sections slectionns",workflowStopsAfterGeneration:"Le workflow s'arrte aprs la gnration, vous permettant de rviser avant de valider.",controlOverCommits:"Cela garantit que vous avez le contrle sur ce qui est valid dans vos dpts.",whenWorkingWithMultiple:"Lorsque vous travaillez avec plusieurs dpts, chaque dpt reoit ses propres fichiers de documentation ddis bass sur vos formats et sections slectionns.",eachRepositoryReceives:"Chaque dpt reoit ses propres fichiers de documentation ddis bass sur vos formats et sections slectionns.",commitOperationProcesses:"L'opration de commit traite tous les dpts slectionns par lots.",documentationStoredSeparately:"La documentation de chaque dpt est stocke sparment et valide dans le bon dpt.",autoUpdateFeature:"Fonctionnalit de Mise  Jour Automatique",enableAutoUpdateDescription:"Activez la mise  jour automatique pour rgnrer et valider automatiquement la documentation lorsque votre dpt reoit de nouveaux commits ou fusions vers la branche principale.",automaticUpdates:"Mises  Jour Automatiques",monitorsRepositories:"Surveille les dpts toutes les 5 minutes",detectsPushesMerges:"Dtecte les push et fusions vers la branche principale",automaticallyRegenerates:"Rgnre automatiquement la documentation",commitsUpdatedDocumentation:"Valide la documentation mise  jour avec horodatage",multiRepoOverview:"Le support multi-dpts de GitScribe vous permet de traiter plusieurs dpts GitHub  la fois, conomisant du temps et des efforts lors de la documentation de plusieurs projets.",completeGuideToUsing:"Guide complet pour utiliser GitScribe",welcomeToGitScribe:"Bienvenue sur GitScribe! Un outil de gnration de documentation aliment par IA qui cre automatiquement une documentation complte pour vos dpts GitHub en utilisant des workflows d'agents IA avancs.",aiPoweredDocumentationTool:"Outil de gnration de documentation aliment par IA",quickStart:"Dmarrage Rapide",addOpenAiKey:"Ajoutez votre cl API OpenAI dans les paramtres",optionalAddGitHubToken:"(Optionnel) Ajoutez un Token d'Accs Personnel GitHub pour les dpts privs",enterRepositoryUrlOrSelect:"Entrez une URL de dpt GitHub ou slectionnez plusieurs dpts",clickRunWorkflowStart:`Cliquez sur "Excuter le Workflow" pour dmarrer le workflow de l'agent IA`,reviewEditCommit:"Examinez la documentation gnre, modifiez avec l'Assistant IA et validez",coreFeatures:"Fonctionnalits Principales",directIntegration:"Intgration directe avec l'API GitHub pour l'accs aux dpts et les commits",processMultipleRepos:"Traiter plusieurs dpts simultanment avec des oprations par lots",intelligentAgentSystem:"Systme d'agents intelligent pour la gnration automatise de documentation",multipleOutputFormats:"Plusieurs formats de sortie et commits GitHub directs",outputFormatsDescription:"GitScribe prend en charge plusieurs formats de documentation pour rpondre  diffrents besoins:",standardMarkdownFormat:"Format markdown standard pour GitHub, GitLab et sites de documentation",markdownWithDiagrams:"Markdown avec diagrammes Mermaid gnrs par IA pour l'architecture et les flux",markdownWithJsx:"Markdown avec composants JSX pour une documentation interactive",yamlFormatForApi:"Format YAML pour la documentation API avec spcifications d'endpoints",fullyStyledHtml:"Pages HTML entirement stylises prtes pour le dploiement",documentationSections:"Sections de Documentation",generateDifferentTypes:"Gnrer diffrents types de sections de documentation:",readmeDescription:"README - Aperu du projet, installation, utilisation et fonctionnalits",architectureDescription:"Architecture - Conception du systme, structure des composants et flux de donnes",apiReferenceDescription:"Rfrence API - Documentation des endpoints, schmas de requte/rponse",componentsDescription:"Composants - Documentation des composants avec props et exemples d'utilisation",testingCicdDescription:"Tests & CI/CD - Configuration des tests, pipeline CI/CD et dploiement",changelogDescription:"Changelog - Historique des versions et notes de version",aiAgentWorkflow:"Workflow d'Agent IA",gitScribeUsesIntelligent:"GitScribe utilise un systme d'agents intelligent qui traite les dpts  travers plusieurs tapes:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Valide et dcouvre les dpts",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analyse la structure, la pile technologique et la complexit",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Cre un plan de documentation structur",docsWriter:"DocsWriter",generatesDocumentation:"- Gnre la documentation dans les formats slectionns",learnMore:"En Savoir Plus",exploreOtherPages:"Explorez les autres pages de cette section de documentation pour des informations dtailles sur chaque fonctionnalit et comment les utiliser efficacement.",aiPoweredOverview:"GitScribe utilise les modles de langage avancs d'OpenAI pour analyser votre base de code et gnrer une documentation complte et bien structure. Notre IA comprend le contexte du code, les relations et les meilleures pratiques pour crer une documentation  la fois prcise et lisible.",gitScribeUsesOpenAI:"GitScribe utilise les modles de langage avancs d'OpenAI",completeApiDocumentation:"Documentation API complte pour les dveloppeurs",agentWorkflowSystem:"Systme de Workflow d'Agents",gitScribeUsesLangGraph:"GitScribe utilise un systme d'agents de style LangGraph pour la gnration automatise de documentation:",agentWorkflowSteps:"// tapes du Workflow d'Agents",agentState:"tat de l'Agent",workflowMaintainsSharedState:"Le workflow maintient un tat partag entre les agents, incluant:",discoveredRepositories:"Dpts dcouverts",repositoryAnalyses:"Analyses de dpts",documentationPlans:"Plans de documentation",generatedDocumentationByFormat:"Documentation gnre (par format et section)",commitResults:"Rsultats des commits",githubService:"Service GitHub",langChainService:"Service LangChain",typeDefinitions:"Dfinitions de Types",exampleUseCases:"Cas d'utilisation et workflows d'exemple",example1SingleRepository:"Exemple 1: Dpt Unique",scenario:"Scnario",youWantToGenerate:"Vous souhaitez gnrer une documentation complte pour un projet React unique avec plusieurs formats.",steps:"tapes",enterGitHubRepositoryUrl:"Entrez l'URL du dpt GitHub:",selectOutputFormatsEg:"Slectionnez les formats de sortie (par ex., Markdown, MDX, HTML)",selectSectionTypesEg:"Slectionnez les types de sections (par ex., README, Architecture, API)",watchWorkflowProgress:"Suivez la progression du workflow  travers la dcouverte, l'analyse, la planification et la rdaction",reviewGeneratedDocumentationSwitch:"Examinez la documentation gnre, basculez entre les formats et sections",clickCommitToReposWhenReady:'Cliquez sur "Committer dans les Dpts" lorsque vous tes prt  committer',example2MultipleRepositories:"Exemple 2: Plusieurs Dpts",youManageMultipleMicroservices:"Vous grez plusieurs microservices et souhaitez les documenter tous en mme temps avec un formatage cohrent.",clickSelectRepositories:'Cliquez sur "Slectionner les dpts" et choisissez plusieurs dpts de votre compte GitHub',selectOutputFormatsEgOpenAPI:"Slectionnez les formats de sortie (par ex., Markdown + OpenAPI pour la documentation API)",monitorWorkflowProgress:"Surveillez la progression du workflow pour chaque dpt",reviewEachRepositoryDocumentation:"Examinez la documentation de chaque dpt dans des onglets spars",switchBetweenFormatsSectionsForEach:"Basculez entre les formats et sections pour chaque dpt",commitAllRepositoriesAtOnce:'Committer tous les dpts en une fois avec "Committer dans les Dpts"',example3AutoUpdateWorkflow:"Exemple 3: Workflow de Mise  Jour Automatique",youWantDocumentationToAutoUpdate:"Vous souhaitez que la documentation se mette  jour automatiquement lorsque le code change.",selectRepositoriesInMultiRepoMode:"Slectionnez les dpts en mode multi-dpts",enableAutoUpdateForEach:"Activez la mise  jour automatique pour chaque dpt (icne de cloche)",toggleGlobalAutoUpdateSwitch:"Basculez l'interrupteur de mise  jour automatique globale",documentationWillAutoUpdate:"La documentation se mettra  jour automatiquement  chaque push/merge vers main",example4UsingAiAssistant:"Exemple 4: Utilisation de l'Assistant IA",youWantToImproveDocumentation:"Vous souhaitez amliorer la documentation gnre avec l'aide de l'IA.",examplePrompts:"Exemples de Prompts",addSectionExplainingInstallation:`"Ajouter une section expliquant le processus d'installation"`,makeApiDocumentationMoreDetailed:'"Rendre la section de documentation API plus dtaille"',fixAllGrammarErrors:'"Corriger toutes les erreurs de grammaire"',restructureDocumentationForBetterFlow:'"Restructurer la documentation pour un meilleur flux"',needHelp:"Besoin d'Aide?",wereHereToHelp:"Nous sommes l pour vous aider! Si vous rencontrez des problmes ou avez des questions sur GitScribe, voici les meilleures faons d'obtenir de l'aide.",contactOptions:"Options de Contact",emailSupport:"Support par Email",getDirectHelpViaEmail:"Obtenez de l'aide directe par email",githubIssues:"Problmes GitHub",reportBugsOrRequestFeatures:"Signaler des bugs ou demander des fonctionnalits",openAnIssue:"Ouvrir un problme",commonIssues:"Problmes Courants",openaiApiKeyError:"Erreur de Cl API OpenAI",addOpenAiKeyInSettings:`Ajoutez votre cl API OpenAI dans le panneau Paramtres. Cliquez sur l'icne Paramtres, entrez votre cl et cliquez sur "Enregistrer les Modifications".`,githubRateLimiting:"Limitation de Dbit GitHub",addGitHubTokenInSettings:"Ajoutez un Token d'Accs Personnel GitHub dans le panneau Paramtres pour augmenter les limites de dbit et accder aux dpts privs.",requiredScopeRepo:"Porte requise:",workflowNotStarting:"Workflow Ne Dmarre Pas",ensureYouHaveSelected:`Assurez-vous d'avoir slectionn au moins un format de sortie et un type de section. Le bouton "Excuter le Workflow" ncessite que les deux soient activs.`,documentationNotCommitting:"Documentation Ne Committe Pas",makeSureGitHubTokenHasRepoScope:"Assurez-vous que votre token GitHub a la",checkOutComprehensiveDocumentation:"Consultez notre documentation complte pour des guides dtaills et des rfrences API.",howWeProtectAndHandle:"Comment nous protgeons et grons vos donnes",lastUpdated:"Dernire mise  jour:",introduction:"Introduction",gitScribeCommittedToPrivacy:`GitScribe ("nous", "notre" ou "nos") s'engage  protger votre vie prive. Cette Politique de Confidentialit explique comment nous collectons, utilisons et protgeons vos informations lorsque vous utilisez notre service.`,informationWeCollect:"Informations que Nous Collectons",personalInformation:"Informations Personnelles",weMayCollectPersonalInfo:"Nous pouvons collecter des informations personnelles telles que les adresses email lorsque vous crez un compte ou nous contactez pour obtenir de l'aide.",githubTokens:"Tokens GitHub",githubTokensStoredLocally:"Les Tokens d'Accs Personnel GitHub sont stocks localement dans le localStorage de votre navigateur. Nous ne transmettons ni ne stockons ces tokens sur nos serveurs.",usageData:"Donnes d'Utilisation",weMayCollectUsageData:"Nous pouvons collecter des informations sur la faon dont vous utilisez notre service, y compris les URLs des dpts et les prfrences de gnration de documentation.",howWeUseYourInformation:"Comment Nous Utilisons Vos Informations",toProvideAndImprove:"Pour fournir et amliorer notre service de gnration de documentation",toProcessYourRequests:"Pour traiter vos demandes et gnrer de la documentation",toCommunicateWithYou:"Pour communiquer avec vous concernant votre compte ou vos demandes d'aide",toAnalyzeUsagePatterns:"Pour analyser les modles d'utilisation et amliorer notre service",dataSecurity:"Scurit des Donnes",weImplementSecurityMeasures:"Nous mettons en place des mesures de scurit appropries pour protger vos informations. Les tokens GitHub sont stocks localement dans votre navigateur et ne sont jamais transmis  nos serveurs. Toutes les communications API sont cryptes en utilisant HTTPS.",thirdPartyServices:"Services Tiers",weUseFollowingThirdParty:"Nous utilisons les services tiers suivants:",openaiForAiPowered:"OpenAI: Pour la gnration de documentation alimente par IA en utilisant les modles GPT",githubForRepositoryAccess:"GitHub: Pour l'accs aux dpts, les oprations sur fichiers et les commits via l'API GitHub",localStorageForStoring:"LocalStorage: Pour stocker les prfrences utilisateur, tokens et historique de projet localement dans votre navigateur",allDataStoredLocally:"Toutes les donnes sont stockes localement dans votre navigateur. Les tokens GitHub et les cls API ne sont jamais transmis  nos serveurs.",yourRights:"Vos Droits",youHaveRightToAccess:"Vous avez le droit d'accder, de mettre  jour ou de supprimer vos informations personnelles. Vous pouvez grer les paramtres de votre compte ou nous contacter ",contactUsPrivacy:"Nous Contacter",ifYouHaveQuestionsPrivacy:"Si vous avez des questions concernant cette Politique de Confidentialit, veuillez nous contacter ",termsAndConditions:"Termes et conditions d'utilisation de GitScribe",agreementToTerms:"Acceptation des Termes",byAccessingOrUsing:`En accdant ou en utilisant GitScribe ("le Service"), vous acceptez d'tre li par ces Conditions d'Utilisation. Si vous n'tes pas d'accord avec une partie de ces termes, vous ne pouvez pas accder au Service.`,useOfService:"Utilisation du Service",eligibility:"ligibilit",youMustBeAtLeast18:"Vous devez avoir au moins 18 ans ou avoir le consentement parental pour utiliser ce Service.",accountResponsibility:"Responsabilit du Compte",youAreResponsibleForMaintaining:"Vous tes responsable de maintenir la scurit de votre compte et de toutes les cls API ou tokens que vous utilisez avec le Service.",acceptableUse:"Utilisation Acceptable",youAgreeNotTo:"Vous acceptez de ne pas:",useServiceForIllegalPurpose:"Utiliser le Service  des fins illgales",violateLawsOrRegulations:"Violer toute loi ou rglementation",infringeOnIntellectualProperty:"Porter atteinte aux droits de proprit intellectuelle",transmitMaliciousCode:"Transmettre du code malveillant ou des virus",attemptUnauthorizedAccess:"Tenter d'obtenir un accs non autoris au Service",apiUsageAndCosts:"Utilisation et Cots de l'API",gitScribeUsesOpenAIApi:"GitScribe utilise l'API d'OpenAI pour les fonctionnalits alimentes par IA. Vous tes responsable de:",youAreResponsibleFor:"Vous tes responsable de:",providingYourOwnOpenAiKey:"Fournir votre propre cl API OpenAI",allCostsAssociated:"Tous les cots associs  l'utilisation de l'API",managingYourApiKeySecurity:"Grer la scurit de votre cl API",intellectualProperty:"Proprit Intellectuelle",serviceOwnedByGitScribe:"Le Service et son contenu original, fonctionnalits et fonctionnalits sont la proprit de GitScribe et sont protgs par les lois internationales sur le droit d'auteur, les marques de commerce et autres lois sur la proprit intellectuelle.",limitationOfLiability:"Limitation de Responsabilit",gitScribeProvidedAsIs:`GitScribe est fourni "tel quel" sans garanties d'aucune sorte. Nous ne sommes pas responsables des dommages rsultant de votre utilisation du Service, y compris mais sans s'y limiter, la perte de donnes, les erreurs de documentation ou les cots de l'API.`,changesToTerms:"Modifications des Termes",weReserveRightToModify:"Nous nous rservons le droit de modifier ces termes  tout moment. L'utilisation continue du Service aprs les modifications constitue une acceptation des nouveaux termes.",contactTerms:"Contact",forQuestionsAboutTerms:"Pour des questions concernant ces Termes, contactez-nous ",howWeUseCookies:"Comment nous utilisons les cookies et technologies similaires",whatAreCookies:"Que Sont les Cookies",cookiesAreSmallTextFiles:"Les cookies sont de petits fichiers texte stocks sur votre appareil lorsque vous visitez un site web. Ils aident les sites web  se souvenir de vos prfrences et  amliorer votre exprience de navigation.",howWeUseCookiesTitle:"Comment Nous Utilisons les Cookies",essentialCookies:"Cookies Essentiels",theseCookiesAreNecessary:"Ces cookies sont ncessaires au fonctionnement du Service. Ils incluent les tokens d'authentification et les informations de session.",preferenceCookies:"Cookies de Prfrence",weUseLocalStorageToStore:"Nous utilisons localStorage pour stocker vos prfrences, telles que les tokens GitHub et les paramtres de l'interface utilisateur. Ces donnes sont stockes localement dans votre navigateur et ne sont jamais transmises  nos serveurs.",analyticsCookies:"Cookies d'Analyse",weMayUseAnalyticsCookies:"Nous pouvons utiliser des cookies d'analyse pour comprendre comment les utilisateurs interagissent avec notre Service et amliorer nos fonctionnalits.",localStorageUsage:"Utilisation de LocalStorage",gitScribeUsesBrowserLocalStorage:"GitScribe utilise le localStorage du navigateur (pas les cookies) pour stocker:",githubPersonalAccessTokensEncrypted:"Tokens d'Accs Personnel GitHub (crypts localement)",userPreferencesAndSettings:"Prfrences et paramtres utilisateur",autoFollowRepositoryConfigurations:"Configurations de suivi automatique des dpts",thisDataRemainsOnDevice:"Ces donnes restent sur votre appareil et ne sont jamais partages avec des tiers.",managingCookies:"Gestion des Cookies",youCanControlCookies:"Vous pouvez contrler les cookies via les paramtres de votre navigateur. Cependant, dsactiver les cookies essentiels peut affecter la fonctionnalit du Service.",toClearLocalStorageData:"Pour effacer les donnes localStorage, vous pouvez utiliser les outils de dveloppement de votre navigateur ou effacer les donnes de navigation.",thirdPartyCookies:"Cookies Tiers",weMayUseThirdPartyServices:"Nous pouvons utiliser des services tiers qui dfinissent leurs propres cookies. Ces services incluent:",analyticsProviders:"Fournisseurs d'analyse (le cas chant)",contactCookiePolicy:"Contact",forQuestionsAboutCookiePolicy:"Pour des questions concernant notre Politique des Cookies, contactez-nous ",pageNotFound:"Page Non Trouve",theRequestedPageCouldNotBeFound:"La page demande n'a pas pu tre trouve",thePageYoureLookingForDoesntExist:"La page que vous recherchez n'existe pas.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architecture",sectionApiReference:"Rfrence API",sectionComponents:"Composants",sectionTestingCicd:"Tests & CI/CD",sectionChangelog:"Changelog",sectionInlineCode:"Documentation de Code Inline",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",sectionInlineCodeShort:"CODE",aiPoweredDocumentationGenerationForGitHub:"Gnration de documentation alimente par IA pour les dpts GitHub",requiredForAiPoweredDocumentationGeneration:"Requis pour la gnration de documentation alimente par IA.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Veuillez fournir un message de commit",githubTokenRequiredForCommitting:"Le token GitHub est requis pour committer les fichiers",documentationNotFoundForRepository:"Documentation introuvable pour ce dpt. Veuillez d'abord gnrer la documentation.",successfullyCommittedToRepository:"Documentation committe avec succs dans 1 dpt!",successfullyCommittedToRepositories:"Documentation committe avec succs dans {count} dpts!",failedToCommitToRepository:"chec du commit dans 1 dpt",failedToCommitToRepositories:"chec du commit dans {count} dpts",failedToCommitDocumentation:"chec du commit de la documentation",documentationHelper:"Assistant de documentation",clearConversationHistoryConfirm:"Effacer l'historique de conversation?",readyToHelp:"Prt  aider!",iCanHelpEditDocumentation:"Je peux vous aider  modifier et amliorer votre documentation",editSections:"Modifier les sections",improveClarity:"Amliorer la clart",fixGrammar:"Corriger la grammaire",aiIsThinking:"L'IA rflchit...",send:"Envoyer",beSpecificForBetterResults:"Soyez spcifique pour de meilleurs rsultats",pressEnterToSend:"Appuyez sur Entre pour envoyer",errorEditingDocumentation:"Erreur lors de l'dition de la documentation",unknownErrorOccurred:"Une erreur inconnue s'est produite",workflowFailed:"Le workflow a chou",viewCommit:"Voir le commit",repositoryQualityScores:"Scores de Qualit des Dpts",folderStructureRefactorProposals:"Propositions de Refactorisation de la Structure de Dossiers",recommendedStructure:"Structure Recommande:",proposedMoves:"Dplacements Proposs",moreMoves:"plus de dplacements...",warnings:"Avertissements",generatedRepositoryBadges:"Badges de Dpt Gnrs",badgeMarkdownCopiedToClipboard:"Markdown du badge copi dans le presse-papiers!",copyBadgeMarkdown:"Copier le Markdown du Badge",pdfExportFailed:"chec de l'export PDF"},de:{aiPoweredGeneration:"KI-gesttzte Dokumentationsgenerierung",sourceSelection:"Quellenauswahl",clickToCollapse:"Zum Reduzieren klicken",clickToExpand:"Zum Erweitern klicken",formats:"Formate",sections:"Abschnitte",selectAtLeastOne:"Whlen Sie mindestens ein Format und einen Abschnitt",token:"Token",add:"Hinzufgen",change:"ndern",hide:"Ausblenden",openaiKey:"OpenAI-Schlssel",saveChanges:"nderungen Speichern",edit:"Bearbeiten",save:"Speichern",editDocumentation:"Dokumentation Bearbeiten",editDocumentationPlaceholder:"Bearbeiten Sie Ihre Dokumentation hier...",runWorkflow:"Workflow Ausfhren",generate:"Generieren",startWritingDocumentation:"Dokumentation Schreiben Beginnen",generating:"Wird generiert...",documentation:"Dokumentation",noDocumentation:"Noch keine Dokumentation generiert",export:"Exportieren",commit:"bernehmen",settings:"Einstellungen",statistics:"Statistiken",length:"Lnge",modelUsed:"Verwendetes Modell",estTokens:"Geschtzte Tokens",estCost:"Geschtzte Kosten",words:"Wrter",lines:"Zeilen",characters:"Zeichen",fileSize:"Dateigre",readingTime:"Lesezeit",avgWordsPerLine:" Wrter/Zeile",headers:"berschriften",codeBlocks:"Code-Blcke",links:"Links",inputTokens:"Eingabe-Tokens",outputTokens:"Ausgabe-Tokens",wordCount:"Wortanzahl",lineCount:"Zeilenanzahl",characterCount:"Zeichen",estimatedTokens:"Geschtzte Tokens",cost:"Kosten",avg:"",wordsPerLine:"Wrter/Zeile",fileSizeLabel:"Dateigre",lengthLabel:"Lnge",input:"Eingabe",output:"Ausgabe",wordsUnit:"Wrter",charactersUnit:"Zeichen",tokensUnit:"Tokens",bytesUnit:"Bytes",charsUnit:"Zeichen",minUnit:"Min",source:"Quelle",qualityScores:"Qualittsbewertungen",refactorProposals:"Refaktorisierungsvorschlge",badges:"Abzeichen",pdfExport:"PDF-Export",clear:"Lschen",formatsLocked:"Formate und Abschnitte sind nach der Generierung gesperrt.",runNewWorkflow:"Fhren Sie einen neuen Workflow aus, um sie zu ndern.",agentWorkflow:"Agent-Workflow",useAiAgents:"KI-Agenten fr automatisierte Pipeline verwenden",singleRepo:"Einzelnes Repository",multiRepo:"Multi-Repository",githubUrl:"GitHub-URL",selectRepos:"Repositories Auswhlen",selectAtLeastOneRepo:"Bitte whlen Sie mindestens ein Repository aus",selectAtLeastOneFormat:"Bitte whlen Sie mindestens ein Ausgabeformat aus",selectAtLeastOneSection:"Bitte whlen Sie mindestens einen Dokumentationsabschnittstyp aus",pleaseProvideUrl:"Bitte geben Sie eine GitHub-URL an",reviewAndCommit:'berprfen Sie die Dokumentation unten und klicken Sie dann auf "In Repositories bernehmen", wenn Sie sie bernehmen mchten.',commitToRepos:"In Repositories bernehmen",committing:"Wird bernommen...",clearDocumentation:"Dokumentation lschen, um Formate/Abschnitte zu ndern",toChangeFormats:"um Formate/Abschnitte zu ndern",gitScribe:"GitScribe",aiPowered:"KI-GESTTZT",aiPoweredDocumentationTitle:"KI-gesttzte Dokumentation fr GitHub-Repositories",aiPoweredDocumentationDescription:"Generieren Sie automatisch umfassende Dokumentation aus einzelnen oder mehreren GitHub-Repositories. Angetrieben von KI-Agenten, die Dokumentation fr Ihre Codebasis analysieren, planen und schreiben.",githubIntegration:"GitHub-Integration",githubIntegrationDescription:"Generieren Sie Dokumentation aus jedem GitHub-Repository",multiRepoSupport:"Multi-Repository-Untersttzung",multiRepoSupportDescription:"Generieren Sie Dokumentation fr mehrere Repositories gleichzeitig",autoCommitExport:"Automatische bernahme & Export",autoCommitExportDescription:"Automatisch Dokumentation in Repositories bernehmen oder als Markdown herunterladen",readyToStart:"Bereit zu starten?",generateDocumentationFromRepos:"Generieren Sie Dokumentation aus GitHub-Repositories",noAccountNeeded:"Kein Konto erforderlich - Sofort starten!",startImmediately:"Sofort starten!",whyChooseOurTool:"Warum Unser Dokumentationstool Whlen",whyChooseOurToolDescription:"Optimieren Sie Ihren Dokumentations-Workflow mit KI-gesttzter Generierung",aiAgentWorkflows:"KI-Agent-Workflows",aiAgentWorkflowsDescription:"Automatisiertes Agentensystem, das Dokumentation fr Ihre Repositories entdeckt, analysiert, plant und schreibt.",autoUpdateFollow:"Automatische Aktualisierung & Verfolgung",autoUpdateFollowDescription:"Automatisch nderungen erkennen und Dokumentation neu generieren, wenn Repositories aktualisiert werden.",githubIntegrationFeature:"GitHub-Integration",githubIntegrationFeatureDescription:"Nahtlose Commit-Integration und direkter Repository-Zugriff fr Ihren Dokumentations-Workflow.",readyToGetStarted:"Bereit zu starten?",joinDevelopers:"Treten Sie Entwicklern und Teams bei, die ihren Dokumentations-Workflow automatisieren",startGeneratingDocumentation:"Dokumentation Generieren Starten",footerDescription:"KI-gesttzte Dokumentationsgenerierung fr GitHub-Repositories mit Multi-Repository-Untersttzung, Agent-Workflows und Auto-Update-Funktionen.",madeWith:"Gemacht mit",forDevelopers:"fr Entwickler",features:"Funktionen",resources:"Ressourcen",connect:"Verbinden",contactUs:"Kontaktieren Sie uns",Donate:"Spenden",buyMeACoffee:"Kauf mir einen Kaffee",supportGitScribe:"GitScribe untersttzen",supportGitScribeDevelopment:"Helfen Sie uns, GitScribe weiterzuentwickeln und zu verbessern",ifYouFindGitScribeUseful:"Wenn Sie GitScribe ntzlich finden und dessen Entwicklung untersttzen mchten, erwgen Sie, uns einen Kaffee zu kaufen!",whySupport:"Warum GitScribe untersttzen?",gitScribeIsFreeAndOpenSource:"GitScribe ist kostenlos und Open-Source, mit Leidenschaft fr die Entwicklergemeinschaft gebaut.",yourSupportHelpsUs:"Ihre Untersttzung hilft uns:",newFeatures:"Neue Funktionen",developNewFeaturesAndImprovements:"Neue Funktionen und Verbesserungen basierend auf Benutzerfeedback entwickeln",maintenanceAndUpdates:"Wartung & Updates",keepGitScribeRunningSmoothly:"GitScribe mit regelmigen Updates und Fehlerbehebungen reibungslos am Laufen halten",freeAndOpenSource:"Kostenlos & Open Source",maintainFreeAccessForEveryone:"Kostenlosen Zugang fr alle aufrechterhalten und gleichzeitig das Tool verbessern",otherWaysToSupport:"Andere Wege zur Untersttzung",starOnGitHub:"Auf GitHub bewerten",starringOurRepository:"Das Bewerten unseres Repositories hilft anderen, GitScribe zu entdecken",visitGitHub:"GitHub besuchen",shareFeedback:"Feedback teilen",letUsKnowWhatYouThink:"Lassen Sie uns wissen, was Sie denken und wie wir uns verbessern knnen",thankYou:"Vielen Dank!",everyContributionMatters:"Jeder Beitrag zhlt, egal wie klein.",whetherThroughDonations:"Ob durch Spenden, GitHub-Bewertungen oder Feedback,",weAppreciateYourSupport:"wir schtzen Ihre Untersttzung, um GitScribe fr alle besser zu machen.",allRightsReserved:"Alle Rechte vorbehalten",privacyPolicy:"Datenschutzrichtlinie",termsOfService:"Nutzungsbedingungen",cookiePolicy:"Cookie-Richtlinie",overview:"bersicht",gettingStarted:"Erste Schritte",supportedFormats:"Untersttzte Formate",repositoryAccess:"Repository-Zugriff",fileAnalysis:"Dateianalyse",codeUnderstanding:"Code-Verstndnis",createGitHubToken:"GitHub Personal Access Token erstellen",addTokenToGitScribe:"Token zu GitScribe hinzufgen",startGenerating:"Generierung starten",requiredScopes:"Erforderliche Berechtigungen",forPrivateRepos:"fr private Repositories und Commits",forPublicRepos:"Fr ffentliche Repositories ist ein Token optional, aber empfohlen, um Rate-Limits zu vermeiden",enterRepositoryUrl:"Geben Sie Ihre Repository-URL ein",chooseOutputFormats:"Whlen Sie Ausgabeformate und Abschnittstypen",clickRunWorkflow:'Klicken Sie auf "Workflow Ausfhren"',selectMultipleRepositories:"Mehrere Repositories Auswhlen",aiPoweredAnalysis:"KI-gesttzte Analyse",automaticallyAnalyze:"Automatisch analysieren",connectToAnyRepository:"Verbinden Sie sich mit jedem GitHub-Repository",usingPersonalAccessToken:"mit Ihrem Personal Access Token",goToGitHubSettings:"Gehen Sie zu GitHub-Einstellungen",developerSettings:"Entwicklereinstellungen",personalAccessTokens:"Personal Access Tokens",tokensClassic:"Tokens (klassisch)",enterYourToken:"Geben Sie Ihren Token ein",githubTokenField:"im GitHub-Token-Feld",documentationEditorSettings:"in den Dokumentations-Editor-Einstellungen",clickSaveChanges:'Klicken Sie auf "nderungen Speichern"',persistIt:"um es zu speichern",egOwnerRepo:"z.B. Eigentmer/Repository",thenClickRunWorkflow:'dann klicken Sie auf "Workflow Ausfhren"',startAiAgentWorkflow:"um den KI-Agent-Workflow zu starten",youCanUseAnyOfTheseFormats:"Sie knnen eines dieser Formate verwenden, um ein Repository anzugeben",toSpecifyRepository:"um ein Repository anzugeben",seamlesslyConnectWithGitHub:"Verbinden Sie sich nahtlos mit GitHub, um Dokumentation aus Ihren Repositories zu generieren",generateDocumentationFromRepositories:"Dokumentation aus Ihren Repositories generieren",gitScribeIntegratesDirectly:"GitScribe integriert sich direkt mit der GitHub-API",accessYourRepositories:"um auf Ihre Repositories zuzugreifen",generateComprehensiveDocumentation:"und umfassende Dokumentation zu generieren",whetherPublicOrPrivate:"Ob Sie mit ffentlichen oder privaten Repositories arbeiten",ourIntegrationMakesItEasy:"unsere Integration macht es einfach",documentYourCodebase:"Ihre Codebasis zu dokumentieren",connectToAnyGitHubRepository:"Verbinden Sie sich mit jedem GitHub-Repository",automaticallyAnalyzeRepository:"Repository automatisch analysieren",repositoryStructure:"Repository-Struktur",codeFiles:"Codedateien",configuration:"und Konfiguration",aiPoweredAnalysisOfCodebase:"KI-gesttzte Analyse Ihrer Codebasis",generateAccurateDocumentation:"um genaue Dokumentation zu generieren",tokenOptionalButRecommended:"Fr ffentliche Repositories ist ein Token optional, aber empfohlen",avoidRateLimits:"um Rate-Limits zu vermeiden",multiRepoSupportTitle:"Multi-Repository-Untersttzung",generateDocumentationForMultiple:"Generieren Sie Dokumentation fr mehrere",simultaneously:"gleichzeitig",selectMultipleRepositoriesTitle:"Mehrere Repositories Auswhlen",batchProcessing:"Stapelverarbeitung",unifiedDocumentation:"Einheitliche Dokumentation",individualDocumentation:"Individuelle Dokumentation",aiPoweredGenerationTitle:"KI-gesttzte Generierung",aiPoweredGenerationDescription:"Nutzen Sie fortschrittliche KI, um umfassende, genaue Dokumentation zu erstellen",exportCommitTitle:"Export & Commit",exportCommitDescription:"Exportieren Sie Dokumentation oder committen Sie direkt in Ihre Repositories",documentationTitle:"Dokumentation",apiReferenceTitle:"API-Referenz",examplesTitle:"Beispiele",supportTitle:"Support",privacyPolicyTitle:"Datenschutzrichtlinie",termsOfServiceTitle:"Nutzungsbedingungen",cookiePolicyTitle:"Cookie-Richtlinie",assistantGreeting:"Hallo! Ich bin Ihr KI-Assistent. Ich kann Ihnen beim Bearbeiten und Verbessern Ihrer Dokumentation helfen! ",assistantCapabilities:"Ich kann:",assistantRewriteSections:"Abschnitte umschreiben",assistantImproveClarity:"Klarheit und Lesbarkeit verbessern",assistantFixGrammar:"Grammatik und Rechtschreibung korrigieren",assistantAddRemoveContent:"Inhalte hinzufgen oder entfernen",assistantRestructure:"Dokumentation umstrukturieren",assistantFormatText:"Text besser formatieren",assistantTellMeWhatToChange:"Sagen Sie mir einfach, was Sie ndern mchten!",assistantErrorNoDocumentation:"Der Dokumentationsbearbeitungsmodus erfordert, dass die Dokumentation geladen ist. Bitte generieren Sie zuerst die Dokumentation.",assistantErrorUnknown:"Entschuldigung, es ist ein Fehler aufgetreten",assistantErrorApiKey:"Konfigurationsfehler: OpenAI API-Schlssel fehlt. Bitte berprfen Sie Ihre Umgebungsvariablen.",assistantErrorParse:`Ich hatte Schwierigkeiten, diese Anfrage zu verstehen. Knnten Sie versuchen, sie umzuformulieren? Zum Beispiel:
 "Fgen Sie einen Preisabschnitt hinzu"
 "ndern Sie die Hauptfarbe zu blau"
 "Aktualisieren Sie den Haupttitel"`,assistantErrorNetwork:"Netzwerkfehler: Bitte berprfen Sie Ihre Internetverbindung und versuchen Sie es erneut.",assistantPlaceholderLoading:"KI generiert Ihre Anfrage...",assistantPlaceholderReady:"Fragen Sie mich alles ber Ihre Dokumentation...",assistantTitleSend:"Nachricht senden",assistantTitleType:"Geben Sie eine Nachricht ein, um sie zu senden",assistantClearConversation:"Konversation lschen",selectRepositories:"Repositories Auswhlen",selected:"ausgewhlt",close:"Schlieen",searchRepositories:"Repositories suchen...",visibility:"Sichtbarkeit:",all:"Alle",public:"ffentlich",private:"Privat",refresh:"Aktualisieren",loadingRepositories:"Repositories werden geladen...",noRepositoriesMatch:"Keine Repositories entsprechen Ihrer Suche.",noRepositoriesFound:"Keine Repositories gefunden.",lastPushed:"Zuletzt aktualisiert:",repositoriesSelected:"Repositories ausgewhlt",repositorySelected:"Repository ausgewhlt",noRepositoriesSelected:"Keine Repositories ausgewhlt",selectAll:"Alle Auswhlen",selectAllFiltered:"Alle gefilterten Repositories auswhlen",allFilteredReposSelected:"Alle gefilterten Repositories sind bereits ausgewhlt",clearAll:"Alle Lschen",done:"Fertig",repositoryDiscovery:"Repository-Entdeckung",repositoryAnalysis:"Repository-Analyse",qualityAnalysis:"Qualittsanalyse",refactorProposal:"Refaktorisierungsvorschlag",documentationPlanning:"Dokumentationsplanung",documentationWriting:"Dokumentationserstellung",gitOperations:"Git-Operationen",complete:"Abgeschlossen",running:"Luft...",processing:"Verarbeitung:",completed:" Abgeschlossen",error:"Fehler:",automatedPipeline:"Automatisierte Dokumentationsgenerierungs-Pipeline",outputFormats:"Ausgabeformate",sectionTypes:"Abschnittstypen",pleaseSelectAtLeastOneRepository:"Bitte whlen Sie mindestens ein Repository aus",noWorkflowState:"Kein Workflow-Zustand verfgbar",noDocumentationToCommit:"Keine Dokumentation zum Committen",commitFailed:"Commit fehlgeschlagen",generatedFeatures:"Generierte Funktionen",workflowComplete:"Workflow Abgeschlossen!",generatedDocumentationFor:"Dokumentation generiert fr",repository:"Repository",repositories:"Repositories",committedTo:"Committet in",backTo:"Zurck zu",cancel:"Abbrechen",branch:"Branch",commitMessage:"Commit-Nachricht",scrollToTop:"Nach oben scrollen",scrollToBottom:"Nach unten scrollen",hideAiAssistant:"KI-Assistenten ausblenden",showAiAssistant:"KI-Assistenten anzeigen",enableAutoUpdate:"Automatische Aktualisierung bei Push/Merge aktivieren",disableAutoUpdate:"Automatische Aktualisierung deaktivieren",format:"Format:",section:"Abschnitt:",addDocumentation:"Dokumentation hinzufgen",ownerRepoOrGithub:"Eigentmer/Repository oder github.com/Eigentmer/Repository",ownerRepoPlaceholder:"Eigentmer/Repository",keyFeatures:"Hauptfunktionen",selectAndProcessMultiple:"Mehrere Repositories in einem einzigen Vorgang auswhlen und verarbeiten",eachRepositoryGetsOwn:"Jedes Repository erhlt seine eigene dedizierte Dokumentationsdatei",batchCommit:"Stapel-Commit",commitToAllSelected:"Dokumentation mit einem Klick in alle ausgewhlten Repositories committen",howToUse:"So Verwenden Sie Es",selectMultipleReposStep:"1. Mehrere Repositories Auswhlen",clickSelectReposButton:'Klicken Sie auf die Schaltflche "Repositories auswhlen", um in Ihren GitHub-Repositories zu suchen und auszuwhlen. Sie knnen nach Sichtbarkeit suchen und filtern.',browseAndSelectFromGitHub:"in Ihren GitHub-Repositories suchen und auswhlen",searchAndFilterByVisibility:"Sie knnen nach Sichtbarkeit suchen und filtern",chooseOutputFormatsSections:"2. Ausgabeformate & Abschnitte Whlen",selectOneOrMoreFormats:"Whlen Sie ein oder mehrere Ausgabeformate",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"und Dokumentationsabschnittstypen",readmeArchitectureApi:"(README, Architektur, API, etc.)",runWorkflowStep:"3. Workflow Ausfhren",clickRunWorkflowToStart:'Klicken Sie auf "Workflow Ausfhren", um den KI-Agent-Workflow zu starten',systemWillProcessEachRepo:"Das System verarbeitet jedes Repository",throughDiscoveryAnalysisPlanning:"durch Entdeckungs-, Analyse-, Planungs- und Schreibphasen",reviewCommitStep:"4. berprfen & Committen",reviewDocumentationInTabs:"berprfen Sie die Dokumentation in separaten Tabs fr jedes Repository",switchBetweenFormatsSections:"Zwischen Formaten und Abschnitten wechseln",whenReadyClickCommitToRepos:'Wenn Sie bereit sind, klicken Sie auf "In Repositories Committen"',commitAllAtOnce:"um alles auf einmal zu committen",benefits:"Vorteile",saveTimeProcessingMultiple:"Sparen Sie Zeit, indem Sie mehrere Repositories gleichzeitig verarbeiten",maintainConsistentFormat:"Konsistentes Dokumentationsformat ber Projekte hinweg beibehalten",easyManagementWithTabs:"Einfache Verwaltung mit Tab-Interface fr jedes Repository",batchCommitFunctionality:"Stapel-Commit-Funktionalitt fr effizienten Workflow",aiModels:"KI-Modelle",gitScribeSupportsMultipleModels:"GitScribe untersttzt mehrere OpenAI-Modelle",chooseBasedOnNeeds:"Whlen Sie basierend auf Ihren Bedrfnissen",speedCostQuality:"fr Geschwindigkeit, Kosten und Qualitt",gpt4oMiniRecommended:"GPT-4o Mini (Empfohlen)",fastAndCostEffective:"Schnell und kosteneffektiv fr die meisten Dokumentationsaufgaben",bestBalanceSpeedQuality:"Beste Balance aus Geschwindigkeit und Qualitt",gpt4o:"GPT-4o",mostAdvancedModel:"Fortgeschrittenstes Modell",complexCodebases:"fr komplexe Codebasen",highestQualityHigherCost:"Hchste Qualitt, hhere Kosten",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Ausgewogene Leistung und Genauigkeit",goodForLargeRepos:"Gut fr groe Repositories",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Schnell und wirtschaftlich",simpleProjects:"fr einfache Projekte",lowestCostOption:"Gnstigste Option",youCanChangeModel:"Sie knnen das Modell ndern",settingsPanel:"im Einstellungsbereich",realtimeCostEstimation:"Echtzeit-Kostenschtzung",statisticsSidebar:"wird in der Statistik-Sidebar angezeigt",aiAssistant:"KI-Assistent",aiAssistantFeature:"Die KI-Assistent-Funktion ermglicht es Ihnen",interactivelyEditImprove:"Ihre Dokumentation interaktiv zu bearbeiten und zu verbessern",rewriteSectionsForClarity:"Abschnitte fr bessere Klarheit umschreiben",fixGrammarSpellingErrors:"Grammatik- und Rechtschreibfehler korrigieren",addRemoveContentBasedOnNeeds:"Inhalte basierend auf Ihren Bedrfnissen hinzufgen oder entfernen",restructureDocumentation:"Dokumentation fr besseren Fluss umstrukturieren",formatTextImproveReadability:"Text formatieren und Lesbarkeit verbessern",costEstimation:"Kostenschtzung",gitScribeProvidesRealtime:"GitScribe bietet Echtzeit-Kostenschtzung",basedOn:"basierend auf",selectedAiModelPricing:"Preisgestaltung des ausgewhlten KI-Modells",estimatedTokenUsage:"Geschtzter Token-Verbrauch",documentationLengthComplexity:"Dokumentationslnge und -komplexitt",costsDisplayedInStatistics:"Kosten werden angezeigt",duringGeneration:"whrend der Generierung",github:"GitHub",exportDocumentation:"Dokumentation Exportieren",exportDocumentationDescription:"Exportieren Sie Ihre generierte Dokumentation in mehreren Formaten, einschlielich Markdown, HTML, PDF und mehr. Laden Sie Dokumentationsdateien herunter oder committen Sie sie direkt in Ihre GitHub-Repositories.",downloadGeneratedDocumentation:"Laden Sie Ihre generierte Dokumentation in mehreren Formaten fr die Verwendung in Dokumentationsseiten, Wikis oder Versionskontrollsystemen herunter.",exportFormats:"Exportformate",markdownStandardFormat:"Markdown - Standard .md Format fr GitHub, GitLab und Dokumentationsseiten",markdownMermaidDescription:"Markdown + Mermaid - Markdown mit KI-generierten Diagrammen",mdxDescription:"MDX - Markdown mit JSX-Komponenten fr interaktive Dokumentation",openapiDescription:"OpenAPI - YAML-Format fr API-Dokumentation",htmlDescription:"HTML - Vollstndig gestylte HTML-Seiten bereit fr die Bereitstellung",eachFormatGenerated:"Jedes Format wird mit abschnittsspezifischem Inhalt generiert, der auf die ausgewhlten Abschnittstypen zugeschnitten ist.",commitToRepository:"In Repository Committen",automaticallyCommitDocumentation:"Committen Sie automatisch generierte Dokumentation direkt in Ihre GitHub-Repositories. Perfekt, um die Dokumentation mit Ihrer Codebasis synchron zu halten.",howItWorks:"Wie Es Funktioniert",runWorkflowGenerate:"Fhren Sie den Workflow aus, um Dokumentation fr Ihr(e) Repository(s) zu generieren",reviewGeneratedDocumentation:"berprfen Sie die generierte Dokumentation im Viewer",clickCommitToRepos:'Klicken Sie auf die Schaltflche "In Repositories Committen" (erscheint nach Abschluss des Workflows)',enterCommitMessage:'Geben Sie eine Commit-Nachricht ein (z.B. "docs: Umfassende Dokumentation hinzufgen")',specifyTargetBranch:"Geben Sie den Zielbranch an (Standard: main)",documentationCommitted:"Die Dokumentation wird mit dem ausgewhlten Format und den Abschnittstypen committet",workflowStopsAfterGeneration:"Der Workflow stoppt nach der Generierung, sodass Sie vor dem Committen berprfen knnen.",controlOverCommits:"Dies stellt sicher, dass Sie die Kontrolle darber haben, was in Ihre Repositories committet wird.",whenWorkingWithMultiple:"Bei der Arbeit mit mehreren Repositories erhlt jedes Repository seine eigenen dedizierten Dokumentationsdateien basierend auf Ihren ausgewhlten Formaten und Abschnitten.",eachRepositoryReceives:"Jedes Repository erhlt seine eigenen dedizierten Dokumentationsdateien basierend auf Ihren ausgewhlten Formaten und Abschnitten.",commitOperationProcesses:"Die Commit-Operation verarbeitet alle ausgewhlten Repositories stapelweise.",documentationStoredSeparately:"Die Dokumentation jedes Repositories wird separat gespeichert und im richtigen Repository committet.",autoUpdateFeature:"Auto-Update-Funktion",enableAutoUpdateDescription:"Aktivieren Sie Auto-Update, um die Dokumentation automatisch zu regenerieren und zu committen, wenn Ihr Repository neue Commits oder Merges zur Hauptbranch erhlt.",automaticUpdates:"Automatische Updates",monitorsRepositories:"berwacht Repositories alle 5 Minuten",detectsPushesMerges:"Erkennt Pushes und Merges zur Hauptbranch",automaticallyRegenerates:"Regeneriert automatisch die Dokumentation",commitsUpdatedDocumentation:"Committet aktualisierte Dokumentation mit Zeitstempel",multiRepoOverview:"Die Multi-Repository-Untersttzung von GitScribe ermglicht es Ihnen, mehrere GitHub-Repositories gleichzeitig zu verarbeiten und spart Zeit und Aufwand bei der Dokumentation mehrerer Projekte.",completeGuideToUsing:"Vollstndiger Leitfaden zur Verwendung von GitScribe",welcomeToGitScribe:"Willkommen bei GitScribe! Ein KI-gesttztes Dokumentationsgenerierungstool, das automatisch umfassende Dokumentation fr Ihre GitHub-Repositories mit fortgeschrittenen KI-Agent-Workflows erstellt.",aiPoweredDocumentationTool:"KI-gesttztes Dokumentationsgenerierungstool",quickStart:"Schnellstart",addOpenAiKey:"Fgen Sie Ihren OpenAI API-Schlssel in den Einstellungen hinzu",optionalAddGitHubToken:"(Optional) Fgen Sie ein GitHub Personal Access Token fr private Repos hinzu",enterRepositoryUrlOrSelect:"Geben Sie eine GitHub-Repository-URL ein oder whlen Sie mehrere Repositories aus",clickRunWorkflowStart:'Klicken Sie auf "Workflow Ausfhren", um den KI-Agent-Workflow zu starten',reviewEditCommit:"berprfen Sie die generierte Dokumentation, bearbeiten Sie sie mit dem KI-Assistenten und committen Sie",coreFeatures:"Kernfunktionen",directIntegration:"Direkte Integration mit der GitHub-API fr Repository-Zugriff und Commits",processMultipleRepos:"Verarbeiten Sie mehrere Repositories gleichzeitig mit Stapeloperationen",intelligentAgentSystem:"Intelligentes Agentensystem fr automatisierte Dokumentationsgenerierung",multipleOutputFormats:"Mehrere Ausgabeformate und direkte GitHub-Commits",outputFormatsDescription:"GitScribe untersttzt mehrere Dokumentationsformate fr verschiedene Bedrfnisse:",standardMarkdownFormat:"Standard-Markdown-Format fr GitHub, GitLab und Dokumentationsseiten",markdownWithDiagrams:"Markdown mit KI-generierten Mermaid-Diagrammen fr Architektur und Flows",markdownWithJsx:"Markdown mit JSX-Komponenten fr interaktive Dokumentation",yamlFormatForApi:"YAML-Format fr API-Dokumentation mit Endpoint-Spezifikationen",fullyStyledHtml:"Vollstndig gestylte HTML-Seiten bereit fr die Bereitstellung",documentationSections:"Dokumentationsabschnitte",generateDifferentTypes:"Generieren Sie verschiedene Arten von Dokumentationsabschnitten:",readmeDescription:"README - Projektbersicht, Installation, Verwendung und Funktionen",architectureDescription:"Architektur - Systemdesign, Komponentenstruktur und Datenfluss",apiReferenceDescription:"API-Referenz - Endpoint-Dokumentation, Request/Response-Schemas",componentsDescription:"Komponenten - Komponentendokumentation mit Props und Verwendungsbeispielen",testingCicdDescription:"Tests & CI/CD - Test-Setup, CI/CD-Pipeline und Bereitstellung",changelogDescription:"Changelog - Versionsverlauf und Release-Notes",aiAgentWorkflow:"KI-Agent-Workflow",gitScribeUsesIntelligent:"GitScribe verwendet ein intelligentes Agentensystem, das Repositories in mehreren Phasen verarbeitet:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Validiert und entdeckt Repositories",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analysiert Struktur, Tech-Stack und Komplexitt",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Erstellt einen strukturierten Dokumentationsplan",docsWriter:"DocsWriter",generatesDocumentation:"- Generiert Dokumentation in ausgewhlten Formaten",learnMore:"Mehr Erfahren",exploreOtherPages:"Erkunden Sie die anderen Seiten in diesem Dokumentationsabschnitt fr detaillierte Informationen zu jeder Funktion und wie Sie sie effektiv verwenden.",aiPoweredOverview:"GitScribe nutzt die fortgeschrittenen Sprachmodelle von OpenAI, um Ihre Codebasis zu analysieren und umfassende, gut strukturierte Dokumentation zu generieren. Unsere KI versteht Code-Kontext, Beziehungen und Best Practices, um Dokumentation zu erstellen, die sowohl genau als auch lesbar ist.",gitScribeUsesOpenAI:"GitScribe nutzt die fortgeschrittenen Sprachmodelle von OpenAI",completeApiDocumentation:"Vollstndige API-Dokumentation fr Entwickler",agentWorkflowSystem:"Agent-Workflow-System",gitScribeUsesLangGraph:"GitScribe nutzt ein LangGraph-hnliches Agentensystem fr die automatisierte Dokumentationsgenerierung:",agentWorkflowSteps:"// Agent-Workflow-Schritte",agentState:"Agent-Status",workflowMaintainsSharedState:"Der Workflow verwaltet einen gemeinsamen Status zwischen Agenten, einschlielich:",discoveredRepositories:"Entdeckte Repositories",repositoryAnalyses:"Repository-Analysen",documentationPlans:"Dokumentationsplne",generatedDocumentationByFormat:"Generierte Dokumentation (nach Format und Abschnitt)",commitResults:"Commit-Ergebnisse",githubService:"GitHub-Service",langChainService:"LangChain-Service",typeDefinitions:"Typdefinitionen",exampleUseCases:"Beispiel-Anwendungsflle und Workflows",example1SingleRepository:"Beispiel 1: Einzelnes Repository",scenario:"Szenario",youWantToGenerate:"Sie mchten umfassende Dokumentation fr ein einzelnes React-Projekt mit mehreren Formaten generieren.",steps:"Schritte",enterGitHubRepositoryUrl:"GitHub-Repository-URL eingeben:",selectOutputFormatsEg:"Ausgabeformate auswhlen (z.B. Markdown, MDX, HTML)",selectSectionTypesEg:"Abschnittstypen auswhlen (z.B. README, Architektur, API)",watchWorkflowProgress:"Beobachten Sie den Workflow-Fortschritt durch Entdeckung, Analyse, Planung und Schreiben",reviewGeneratedDocumentationSwitch:"berprfen Sie die generierte Dokumentation, wechseln Sie zwischen Formaten und Abschnitten",clickCommitToReposWhenReady:'Klicken Sie auf "In Repositories Committen", wenn Sie bereit sind zu committen',example2MultipleRepositories:"Beispiel 2: Mehrere Repositories",youManageMultipleMicroservices:"Sie verwalten mehrere Microservices und mchten sie alle auf einmal mit konsistentem Format dokumentieren.",clickSelectRepositories:'Klicken Sie auf "Repositories auswhlen" und whlen Sie mehrere Repos aus Ihrem GitHub-Konto aus',selectOutputFormatsEgOpenAPI:"Ausgabeformate auswhlen (z.B. Markdown + OpenAPI fr API-Dokumentation)",monitorWorkflowProgress:"berwachen Sie den Workflow-Fortschritt fr jedes Repository",reviewEachRepositoryDocumentation:"berprfen Sie die Dokumentation jedes Repositories in separaten Tabs",switchBetweenFormatsSectionsForEach:"Wechseln Sie zwischen Formaten und Abschnitten fr jedes Repo",commitAllRepositoriesAtOnce:'Committen Sie alle Repositories auf einmal mit "In Repositories Committen"',example3AutoUpdateWorkflow:"Beispiel 3: Auto-Update-Workflow",youWantDocumentationToAutoUpdate:"Sie mchten, dass die Dokumentation automatisch aktualisiert wird, wenn sich der Code ndert.",selectRepositoriesInMultiRepoMode:"Repositories im Multi-Repo-Modus auswhlen",enableAutoUpdateForEach:"Auto-Update fr jedes Repository aktivieren (Glocken-Symbol)",toggleGlobalAutoUpdateSwitch:"Globalen Auto-Update-Schalter umschalten",documentationWillAutoUpdate:"Die Dokumentation wird bei jedem Push/Merge zu main automatisch aktualisiert",example4UsingAiAssistant:"Beispiel 4: KI-Assistent verwenden",youWantToImproveDocumentation:"Sie mchten die generierte Dokumentation mit KI-Hilfe verbessern.",examplePrompts:"Beispiel-Prompts",addSectionExplainingInstallation:'"Fgen Sie einen Abschnitt hinzu, der den Installationsprozess erklrt"',makeApiDocumentationMoreDetailed:'"Machen Sie den API-Dokumentationsabschnitt detaillierter"',fixAllGrammarErrors:'"Korrigieren Sie alle Grammatikfehler"',restructureDocumentationForBetterFlow:'"Strukturieren Sie die Dokumentation fr einen besseren Fluss um"',needHelp:"Brauchen Sie Hilfe?",wereHereToHelp:"Wir sind hier, um zu helfen! Wenn Sie Probleme haben oder Fragen zu GitScribe haben, finden Sie hier die besten Mglichkeiten, Untersttzung zu erhalten.",contactOptions:"Kontaktoptionen",emailSupport:"E-Mail-Support",getDirectHelpViaEmail:"Erhalten Sie direkte Hilfe per E-Mail",githubIssues:"GitHub-Issues",reportBugsOrRequestFeatures:"Fehler melden oder Funktionen anfordern",openAnIssue:"Ein Issue ffnen",commonIssues:"Hufige Probleme",openaiApiKeyError:"OpenAI API-Schlssel-Fehler",addOpenAiKeyInSettings:'Fgen Sie Ihren OpenAI API-Schlssel im Einstellungsbereich hinzu. Klicken Sie auf das Einstellungssymbol, geben Sie Ihren Schlssel ein und klicken Sie auf "nderungen Speichern".',githubRateLimiting:"GitHub-Ratenbegrenzung",addGitHubTokenInSettings:"Fgen Sie ein GitHub Personal Access Token im Einstellungsbereich hinzu, um Ratenbegrenzungen zu erhhen und auf private Repositories zuzugreifen.",requiredScopeRepo:"Erforderlicher Bereich:",workflowNotStarting:"Workflow startet nicht",ensureYouHaveSelected:'Stellen Sie sicher, dass Sie mindestens ein Ausgabeformat und einen Abschnittstyp ausgewhlt haben. Die Schaltflche "Workflow Ausfhren" erfordert, dass beide aktiviert sind.',documentationNotCommitting:"Dokumentation wird nicht committet",makeSureGitHubTokenHasRepoScope:"Stellen Sie sicher, dass Ihr GitHub-Token den",checkOutComprehensiveDocumentation:"Schauen Sie sich unsere umfassende Dokumentation fr detaillierte Anleitungen und API-Referenzen an.",howWeProtectAndHandle:"Wie wir Ihre Daten schtzen und verwalten",lastUpdated:"Zuletzt aktualisiert:",introduction:"Einfhrung",gitScribeCommittedToPrivacy:'GitScribe ("wir", "unser" oder "uns") ist dem Schutz Ihrer Privatsphre verpflichtet. Diese Datenschutzrichtlinie erklrt, wie wir Ihre Informationen sammeln, verwenden und schtzen, wenn Sie unseren Service nutzen.',informationWeCollect:"Informationen, die wir sammeln",personalInformation:"Persnliche Informationen",weMayCollectPersonalInfo:"Wir knnen persnliche Informationen wie E-Mail-Adressen sammeln, wenn Sie ein Konto erstellen oder uns fr Support kontaktieren.",githubTokens:"GitHub-Tokens",githubTokensStoredLocally:"GitHub Personal Access Tokens werden lokal im localStorage Ihres Browsers gespeichert. Wir bertragen oder speichern diese Tokens nicht auf unseren Servern.",usageData:"Nutzungsdaten",weMayCollectUsageData:"Wir knnen Informationen darber sammeln, wie Sie unseren Service nutzen, einschlielich Repository-URLs und Dokumentationsgenerierungsprferenzen.",howWeUseYourInformation:"Wie wir Ihre Informationen verwenden",toProvideAndImprove:"Um unseren Dokumentationsgenerierungsservice bereitzustellen und zu verbessern",toProcessYourRequests:"Um Ihre Anfragen zu verarbeiten und Dokumentation zu generieren",toCommunicateWithYou:"Um mit Ihnen ber Ihr Konto oder Support-Anfragen zu kommunizieren",toAnalyzeUsagePatterns:"Um Nutzungsmuster zu analysieren und unseren Service zu verbessern",dataSecurity:"Datensicherheit",weImplementSecurityMeasures:"Wir implementieren angemessene Sicherheitsmanahmen zum Schutz Ihrer Informationen. GitHub-Tokens werden lokal in Ihrem Browser gespeichert und niemals an unsere Server bertragen. Alle API-Kommunikationen werden mit HTTPS verschlsselt.",thirdPartyServices:"Drittanbieter-Services",weUseFollowingThirdParty:"Wir verwenden die folgenden Drittanbieter-Services:",openaiForAiPowered:"OpenAI: Fr KI-gesttzte Dokumentationsgenerierung mit GPT-Modellen",githubForRepositoryAccess:"GitHub: Fr Repository-Zugriff, Dateioperationen und Commits ber die GitHub-API",localStorageForStoring:"LocalStorage: Zum lokalen Speichern von Benutzereinstellungen, Tokens und Projektverlauf in Ihrem Browser",allDataStoredLocally:"Alle Daten werden lokal in Ihrem Browser gespeichert. GitHub-Tokens und API-Schlssel werden niemals an unsere Server bertragen.",yourRights:"Ihre Rechte",youHaveRightToAccess:"Sie haben das Recht, auf Ihre persnlichen Informationen zuzugreifen, sie zu aktualisieren oder zu lschen. Sie knnen Ihre Kontoeinstellungen verwalten oder uns kontaktieren unter",contactUsPrivacy:"Kontaktieren Sie uns",ifYouHaveQuestionsPrivacy:"Wenn Sie Fragen zu dieser Datenschutzrichtlinie haben, kontaktieren Sie uns bitte unter",termsAndConditions:"Nutzungsbedingungen fr GitScribe",agreementToTerms:"Zustimmung zu den Bedingungen",byAccessingOrUsing:'Durch den Zugriff auf oder die Nutzung von GitScribe ("der Service") stimmen Sie zu, an diese Nutzungsbedingungen gebunden zu sein. Wenn Sie mit einem Teil dieser Bedingungen nicht einverstanden sind, drfen Sie mglicherweise nicht auf den Service zugreifen.',useOfService:"Nutzung des Services",eligibility:"Berechtigung",youMustBeAtLeast18:"Sie mssen mindestens 18 Jahre alt sein oder die Zustimmung der Eltern haben, um diesen Service zu nutzen.",accountResponsibility:"Kontoverantwortung",youAreResponsibleForMaintaining:"Sie sind verantwortlich fr die Sicherheit Ihres Kontos und aller API-Schlssel oder Tokens, die Sie mit dem Service verwenden.",acceptableUse:"Akzeptable Nutzung",youAgreeNotTo:"Sie stimmen zu, nicht:",useServiceForIllegalPurpose:"Den Service fr illegale Zwecke zu nutzen",violateLawsOrRegulations:"Gesetze oder Vorschriften zu verletzen",infringeOnIntellectualProperty:"Geistiges Eigentum zu verletzen",transmitMaliciousCode:"Bsartigen Code oder Viren zu bertragen",attemptUnauthorizedAccess:"Unbefugten Zugriff auf den Service zu erlangen",apiUsageAndCosts:"API-Nutzung und Kosten",gitScribeUsesOpenAIApi:"GitScribe nutzt die OpenAI-API fr KI-gesttzte Funktionen. Sie sind verantwortlich fr:",youAreResponsibleFor:"Sie sind verantwortlich fr:",providingYourOwnOpenAiKey:"Bereitstellung Ihres eigenen OpenAI API-Schlssels",allCostsAssociated:"Alle mit der API-Nutzung verbundenen Kosten",managingYourApiKeySecurity:"Verwaltung der Sicherheit Ihres API-Schlssels",intellectualProperty:"Geistiges Eigentum",serviceOwnedByGitScribe:"Der Service und sein ursprnglicher Inhalt, Funktionen und Funktionalitt gehren GitScribe und sind durch internationale Urheberrechts-, Marken- und andere Gesetze zum geistigen Eigentum geschtzt.",limitationOfLiability:"Haftungsbeschrnkung",gitScribeProvidedAsIs:'GitScribe wird "wie besehen" ohne Gewhrleistung jeglicher Art bereitgestellt. Wir haften nicht fr Schden, die aus Ihrer Nutzung des Services entstehen, einschlielich, aber nicht beschrnkt auf Datenverlust, Dokumentationsfehler oder API-Kosten.',changesToTerms:"nderungen der Bedingungen",weReserveRightToModify:"Wir behalten uns das Recht vor, diese Bedingungen jederzeit zu ndern. Die fortgesetzte Nutzung des Services nach nderungen stellt eine Annahme der neuen Bedingungen dar.",contactTerms:"Kontakt",forQuestionsAboutTerms:"Bei Fragen zu diesen Bedingungen kontaktieren Sie uns unter",howWeUseCookies:"Wie wir Cookies und hnliche Technologien verwenden",whatAreCookies:"Was sind Cookies",cookiesAreSmallTextFiles:"Cookies sind kleine Textdateien, die auf Ihrem Gert gespeichert werden, wenn Sie eine Website besuchen. Sie helfen Websites, sich an Ihre Prferenzen zu erinnern und Ihr Browsing-Erlebnis zu verbessern.",howWeUseCookiesTitle:"Wie wir Cookies verwenden",essentialCookies:"Wesentliche Cookies",theseCookiesAreNecessary:"Diese Cookies sind fr die Funktionalitt des Services erforderlich. Sie umfassen Authentifizierungstokens und Sitzungsinformationen.",preferenceCookies:"Prferenz-Cookies",weUseLocalStorageToStore:"Wir verwenden localStorage, um Ihre Prferenzen zu speichern, wie z.B. GitHub-Tokens und UI-Einstellungen. Diese Daten werden lokal in Ihrem Browser gespeichert und niemals an unsere Server bertragen.",analyticsCookies:"Analyse-Cookies",weMayUseAnalyticsCookies:"Wir knnen Analyse-Cookies verwenden, um zu verstehen, wie Benutzer mit unserem Service interagieren und unsere Funktionen zu verbessern.",localStorageUsage:"LocalStorage-Nutzung",gitScribeUsesBrowserLocalStorage:"GitScribe verwendet Browser-LocalStorage (nicht Cookies) zum Speichern von:",githubPersonalAccessTokensEncrypted:"GitHub Personal Access Tokens (lokal verschlsselt)",userPreferencesAndSettings:"Benutzereinstellungen und Prferenzen",autoFollowRepositoryConfigurations:"Auto-Follow-Repository-Konfigurationen",thisDataRemainsOnDevice:"Diese Daten verbleiben auf Ihrem Gert und werden niemals mit Dritten geteilt.",managingCookies:"Cookies verwalten",youCanControlCookies:"Sie knnen Cookies ber Ihre Browser-Einstellungen steuern. Das Deaktivieren wesentlicher Cookies kann jedoch die Funktionalitt des Services beeintrchtigen.",toClearLocalStorageData:"Um LocalStorage-Daten zu lschen, knnen Sie die Entwicklertools Ihres Browsers verwenden oder Browsing-Daten lschen.",thirdPartyCookies:"Drittanbieter-Cookies",weMayUseThirdPartyServices:"Wir knnen Drittanbieter-Services verwenden, die ihre eigenen Cookies setzen. Diese Services umfassen:",analyticsProviders:"Analyse-Anbieter (falls zutreffend)",contactCookiePolicy:"Kontakt",forQuestionsAboutCookiePolicy:"Bei Fragen zu unserer Cookie-Richtlinie kontaktieren Sie uns unter",pageNotFound:"Seite nicht gefunden",theRequestedPageCouldNotBeFound:"Die angeforderte Seite konnte nicht gefunden werden",thePageYoureLookingForDoesntExist:"Die Seite, die Sie suchen, existiert nicht.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architektur",sectionApiReference:"API-Referenz",sectionComponents:"Komponenten",sectionTestingCicd:"Tests & CI/CD",sectionChangelog:"Changelog",sectionInlineCode:"Inline-Code-Dokumentation",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",sectionInlineCodeShort:"CODE",aiPoweredDocumentationGenerationForGitHub:"KI-gesttzte Dokumentationsgenerierung fr GitHub-Repositories",requiredForAiPoweredDocumentationGeneration:"Erforderlich fr KI-gesttzte Dokumentationsgenerierung.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Bitte geben Sie eine Commit-Nachricht an",githubTokenRequiredForCommitting:"GitHub-Token ist fr das Committen von Dateien erforderlich",documentationNotFoundForRepository:"Dokumentation fr dieses Repository nicht gefunden. Bitte generieren Sie zuerst die Dokumentation.",successfullyCommittedToRepository:"Dokumentation erfolgreich in 1 Repository committet!",successfullyCommittedToRepositories:"Dokumentation erfolgreich in {count} Repositories committet!",failedToCommitToRepository:"Fehler beim Committen in 1 Repository",failedToCommitToRepositories:"Fehler beim Committen in {count} Repositories",failedToCommitDocumentation:"Fehler beim Committen der Dokumentation",documentationHelper:"Dokumentationsassistent",clearConversationHistoryConfirm:"Konversationsverlauf lschen?",readyToHelp:"Bereit zu helfen!",iCanHelpEditDocumentation:"Ich kann Ihnen beim Bearbeiten und Verbessern Ihrer Dokumentation helfen",editSections:"Abschnitte bearbeiten",improveClarity:"Klarheit verbessern",fixGrammar:"Grammatik korrigieren",aiIsThinking:"KI denkt nach...",send:"Senden",beSpecificForBetterResults:"Seien Sie spezifisch fr bessere Ergebnisse",pressEnterToSend:"Drcken Sie Enter zum Senden",errorEditingDocumentation:"Fehler beim Bearbeiten der Dokumentation",unknownErrorOccurred:"Unbekannter Fehler aufgetreten",workflowFailed:"Workflow fehlgeschlagen",viewCommit:"Commit anzeigen",repositoryQualityScores:"Repository-Qualittsbewertungen",folderStructureRefactorProposals:"Ordnerstruktur-Refaktorisierungsvorschlge",recommendedStructure:"Empfohlene Struktur:",proposedMoves:"Vorgeschlagene Verschiebungen",moreMoves:"weitere Verschiebungen...",warnings:"Warnungen",generatedRepositoryBadges:"Generierte Repository-Badges",badgeMarkdownCopiedToClipboard:"Badge-Markdown in die Zwischenablage kopiert!",copyBadgeMarkdown:"Badge-Markdown kopieren",pdfExportFailed:"PDF-Export fehlgeschlagen"}};function LM(t,e="en"){var n;return((n=x_[e])==null?void 0:n[t])||x_.en[t]||t}function ya(t){return e=>LM(e,t)}function _v({onNavigate:t}){const e=new Date().getFullYear(),[n,r]=$.useState(()=>localStorage.getItem("selectedLanguage")||"en");$.useEffect(()=>{const a=()=>{const l=localStorage.getItem("selectedLanguage");l&&r(l)};window.addEventListener("storage",a);const o=setInterval(a,100);return()=>{window.removeEventListener("storage",a),clearInterval(o)}},[]);const s=ya(n),i=(a,o)=>{a.preventDefault(),t?t(o):window.dispatchEvent(new CustomEvent("navigate",{detail:o}))};return c.jsx("footer",{className:"bg-gradient-to-br from-white to-slate-50 border-t border-gray-200/50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:[c.jsxs("div",{className:"grid md:grid-cols-4 gap-8 lg:gap-12 mb-8",children:[c.jsxs("div",{className:"md:col-span-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"p-2.5 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl shadow-lg",children:c.jsx(Rd,{className:"w-5 h-5 text-white"})}),c.jsx("span",{className:"text-xl font-black gradient-text",children:s("gitScribe")})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:s("footerDescription")}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 font-medium",children:[c.jsx("span",{children:s("madeWith")}),c.jsx(ra,{className:"w-4 h-4 text-red-500 fill-red-500"}),c.jsx("span",{children:s("forDevelopers")})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-5 text-sm uppercase tracking-wider",children:s("features")}),c.jsxs("ul",{className:"space-y-3 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"github-integration"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("githubIntegration")})}),c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"multi-repo-support"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("multiRepoSupport")})}),c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"ai-powered-generation"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("aiPoweredGeneration")})}),c.jsx("li",{children:c.jsxs("a",{href:"#",onClick:a=>i(a,"export-commit"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:[s("export")," & ",s("commit")]})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-5 text-sm uppercase tracking-wider",children:s("resources")}),c.jsxs("ul",{className:"space-y-3 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"documentation-page"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("documentation")})}),c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"api-reference"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("apiReferenceTitle")})}),c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"examples"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("examplesTitle")})}),c.jsx("li",{children:c.jsx("a",{href:"#",onClick:a=>i(a,"support"),className:"text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:s("supportTitle")})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-5 text-sm uppercase tracking-wider",children:s("connect")}),c.jsxs("ul",{className:"space-y-3 text-sm",children:[c.jsx("li",{children:c.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:[c.jsx(xs,{className:"w-4 h-4"}),c.jsx("span",{children:s("github")})]})}),c.jsx("li",{children:c.jsxs("a",{href:"mailto:support@GitScribe.com",className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:[c.jsx(ny,{className:"w-4 h-4"}),c.jsx("span",{children:s("contactUs")})]})}),c.jsx("li",{children:c.jsxs("a",{href:"#",onClick:a=>i(a,"Donate"),className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors font-medium hover:underline",children:[c.jsx(ra,{className:"w-4 h-4"}),c.jsx("span",{children:s("Donate")})]})})]})]})]}),c.jsxs("div",{className:"pt-8 border-t border-gray-200/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[" ",e," ",s("gitScribe"),". ",s("allRightsReserved"),"."]}),c.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[c.jsx("a",{href:"#",onClick:a=>i(a,"privacy-policy"),className:"hover:text-orange-600 transition-colors font-medium hover:underline",children:s("privacyPolicy")}),c.jsx("a",{href:"#",onClick:a=>i(a,"terms-of-service"),className:"hover:text-orange-600 transition-colors font-medium hover:underline",children:s("termsOfService")}),c.jsx("a",{href:"#",onClick:a=>i(a,"cookie-policy"),className:"hover:text-orange-600 transition-colors font-medium hover:underline",children:s("cookiePolicy")})]})]})]})})}function MM({onGenerate:t}){const[e,n]=$.useState(()=>localStorage.getItem("selectedLanguage")||"en");$.useEffect(()=>{localStorage.setItem("selectedLanguage",e),window.dispatchEvent(new Event("languageChanged"))},[e]);const r=ya(e);return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50/30",children:[c.jsx(Ge.header,{className:"glass sticky top-0 z-50",initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[c.jsxs(Ge.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[c.jsx(Ge.div,{className:"p-2.5 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl shadow-lg",whileHover:{scale:1.1,rotate:360},transition:{duration:.5},children:c.jsx(Rd,{className:"w-6 h-6 text-white"})}),c.jsx("span",{className:"text-2xl font-black gradient-text",children:r("gitScribe")})]}),c.jsx(Ge.div,{className:"flex items-center gap-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:c.jsxs(Ge.select,{value:e,onChange:s=>n(s.target.value),className:"px-4 py-2.5 text-sm font-semibold rounded-xl glass text-slate-700 hover:bg-white/90 border border-slate-200/50 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md cursor-pointer",title:"Translate page",whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx("option",{value:"en",children:" EN"}),c.jsx("option",{value:"fr",children:" FR"}),c.jsx("option",{value:"de",children:" DE"})]})})]})}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsx("section",{className:"py-16 sm:py-20 lg:py-24",children:c.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[c.jsxs(Ge.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:[c.jsxs(Ge.div,{className:"mb-6 flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[c.jsx(Ge.div,{className:"h-1.5 w-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full shadow-sm",initial:{width:0},animate:{width:64},transition:{delay:.3,duration:.5}}),c.jsx("span",{className:"text-orange-600 font-bold text-sm uppercase tracking-wide",children:r("aiPowered")})]}),c.jsx(Ge.h1,{className:"text-5xl sm:text-6xl lg:text-7xl font-black text-gray-900 mb-6 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:c.jsx("span",{className:"gradient-text",children:r("aiPoweredDocumentationTitle")})}),c.jsx(Ge.p,{className:"text-lg sm:text-xl text-gray-600 mb-8 leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},children:r("aiPoweredDocumentationDescription")}),c.jsx(Ge.div,{className:"space-y-4 mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},children:[{icon:Rd,title:r("githubIntegration"),desc:r("githubIntegrationDescription")},{icon:ra,title:r("multiRepoSupport"),desc:r("multiRepoSupportDescription")},{icon:g_,title:r("autoCommitExport"),desc:r("autoCommitExportDescription")}].map((s,i)=>c.jsxs(Ge.div,{className:"flex items-start gap-4 p-4 rounded-xl hover:bg-white/50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+i*.1,duration:.5},whileHover:{x:5,transition:{duration:.2}},children:[c.jsx(Ge.div,{className:"p-3 bg-gradient-to-br from-orange-100 to-red-100 rounded-xl shadow-sm",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:c.jsx(s.icon,{className:"w-6 h-6 text-orange-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-900 mb-1",children:s.title}),c.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:s.desc})]})]},i))})]}),c.jsxs(Ge.div,{className:"relative",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut",delay:.2},children:[c.jsx(Ge.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-200/50 to-red-200/50 rounded-3xl blur-3xl opacity-60",animate:{scale:[1,1.05,1],opacity:[.6,.7,.6]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),c.jsxs(Ge.div,{className:"relative card-gradient p-8 lg:p-10",whileHover:{scale:1.02,y:-5},transition:{type:"spring",stiffness:300},children:[c.jsxs(Ge.div,{className:"text-center mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:[c.jsx(Ge.div,{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full mx-auto mb-4 flex items-center justify-center",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,repeatDelay:2},children:c.jsx(_t,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r("readyToStart")}),c.jsx("p",{className:"text-gray-600 mt-1",children:r("generateDocumentationFromRepos")}),c.jsxs(Ge.div,{className:"mt-3 inline-flex items-center gap-2 px-3 py-1 bg-orange-50 border border-orange-200 rounded-full text-xs text-orange-700",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4},whileHover:{scale:1.05},children:[c.jsx("span",{children:""}),c.jsx("span",{children:r("noAccountNeeded")})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Ge.button,{onClick:t,className:"btn-primary w-full py-4 text-lg flex items-center justify-center gap-3",whileHover:{scale:1.05,boxShadow:"0 10px 40px rgba(249, 115, 22, 0.5)"},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[c.jsx(Ge.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:c.jsx(_t,{className:"w-5 h-5"})}),r("startWritingDocumentation")]}),c.jsxs(Ge.p,{className:"text-xs text-gray-500 text-center mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:[" ",r("aiPoweredDocumentationGenerationForGitHub")]})]})]})]})]})}),c.jsxs("section",{className:"py-20 lg:py-24 border-t border-gray-200/50",children:[c.jsxs(Ge.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},children:[c.jsx("h2",{className:"text-4xl lg:text-5xl font-black text-gray-900 mb-4",children:c.jsx("span",{className:"gradient-text",children:r("whyChooseOurTool")})}),c.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:r("whyChooseOurToolDescription")})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-6 lg:gap-8",children:[{icon:D1,title:r("aiAgentWorkflows"),desc:r("aiAgentWorkflowsDescription"),color:"orange"},{icon:g_,title:r("githubIntegrationFeature"),desc:r("githubIntegrationFeatureDescription"),color:"orange"},{icon:Ut,title:r("multipleOutputFormats"),desc:r("outputFormatsDescription"),color:"orange"}].map((s,i)=>c.jsxs(Ge.div,{className:"group card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{delay:i*.2,duration:.6},whileHover:{y:-10,transition:{duration:.3}},children:[c.jsx(Ge.div,{className:`relative mb-6 h-40 bg-gradient-to-br from-${s.color}-50 to-${s.color==="orange"?"red":"orange"}-50 rounded-2xl overflow-hidden flex items-center justify-center shadow-md`,whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:c.jsx(Ge.div,{animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,delay:i*.5},children:c.jsx(s.icon,{className:`w-16 h-16 text-${s.color}-500`})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s.title}),c.jsx("p",{className:"text-gray-600 leading-relaxed",children:s.desc})]},i))})]}),c.jsx("section",{className:"py-20 lg:py-24",children:c.jsxs(Ge.div,{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-3xl p-8 lg:p-12 text-center text-white relative overflow-hidden shadow-2xl",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},children:[c.jsxs("div",{className:"absolute inset-0 opacity-10",children:[c.jsx(Ge.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},children:c.jsx(Rd,{className:"w-32 h-32 absolute top-0 right-0"})}),c.jsx(Ge.div,{animate:{rotate:[360,0],scale:[1,1.2,1]},transition:{rotate:{duration:25,repeat:1/0,ease:"linear"},scale:{duration:5,repeat:1/0,ease:"easeInOut"}},children:c.jsx(ra,{className:"w-24 h-24 absolute bottom-0 left-0"})})]}),c.jsxs(Ge.div,{className:"relative z-10",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2,duration:.6},children:[c.jsx("h2",{className:"text-4xl font-black mb-4",children:r("readyToGetStarted")}),c.jsx("p",{className:"text-orange-100 text-lg mb-8 max-w-2xl mx-auto",children:r("joinDevelopers")}),c.jsxs(Ge.button,{onClick:t,className:"bg-white text-orange-600 px-8 py-4 rounded-xl font-bold text-lg inline-block flex items-center gap-2 mx-auto shadow-xl hover:shadow-2xl",whileHover:{scale:1.05,boxShadow:"0 10px 40px rgba(255, 255, 255, 0.4)"},whileTap:{scale:.98},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4,duration:.5},children:[c.jsx(Ge.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:c.jsx(_t,{className:"w-5 h-5"})}),r("startGeneratingDocumentation")]})]})]})}),c.jsx(_v,{onNavigate:s=>{window.dispatchEvent(new CustomEvent("navigate",{detail:s}))}})]})]})}const FM="modulepreload",UM=function(t){return"/"+t},w_={},gm=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=UM(l),l in w_)return;w_[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":FM,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function b_({model:t="gpt-4o-mini",documentation:e,onUpdateDocumentation:n}){const[r,s]=$.useState(()=>typeof window<"u"&&window.localStorage&&window.localStorage.getItem("selectedLanguage")||"en");$.useEffect(()=>{if(typeof window>"u")return;const w=f=>{f.key==="selectedLanguage"&&f.newValue&&s(f.newValue)};window.addEventListener("storage",w);const x=()=>{if(window.localStorage){const f=window.localStorage.getItem("selectedLanguage");f&&f!==r&&s(f)}};window.addEventListener("languageChanged",x);const g=()=>{if(window.localStorage){const f=window.localStorage.getItem("selectedLanguage");f&&f!==r&&s(f)}};return window.addEventListener("focus",g),()=>{window.removeEventListener("storage",w),window.removeEventListener("languageChanged",x),window.removeEventListener("focus",g)}},[r]);const i=ya(r),[a,o]=$.useState([]),l=$.useCallback(()=>{e&&n&&o([{role:"assistant",content:"Hi! I'm your AI assistant. I can help you edit and improve your documentation.",timestamp:Date.now()}])},[e,n,i]);$.useEffect(()=>{a.length===0&&e&&n&&l()},[a.length,e,n,l]);const[u,d]=$.useState(""),[h,m]=$.useState(!1),p=$.useRef(null);$.useEffect(()=>{typeof window<"u"&&p.current&&p.current.scrollIntoView({behavior:"smooth"})},[a]);const y=async()=>{if(!u.trim()||h)return;const w=u.trim();d(""),o(x=>[...x,{role:"user",content:w,timestamp:Date.now()}]),m(!0);try{if(e&&n)if(zM(w)){const g=await BM(w,e,t,i,r);g.updatedDocumentation&&n(g.updatedDocumentation),o(f=>[...f,{role:"assistant",content:g.message,timestamp:Date.now()}])}else{const g=await GM(w,e,t,i,a,r),f=g.match(/<documentation>([\s\S]*?)<\/documentation>/);if(f&&n){const b=f[1].trim();b&&b.length>10&&b!==e&&n(b)}const v=g.replace(/<documentation>[\s\S]*?<\/documentation>/g,"").trim();o(b=>[...b,{role:"assistant",content:v||g,timestamp:Date.now()}])}}catch(x){console.error("Assistant error:",x);const g=x.message||i("unknownErrorOccurred");let f=`${i("assistantErrorUnknown")}: ${g}`;g.includes("API key")?f=i("assistantErrorApiKey"):g.includes("parse")||g.includes("JSON")?f=i("assistantErrorParse"):(g.includes("timeout")||g.includes("network"))&&(f=i("assistantErrorNetwork")),o(v=>[...v,{role:"assistant",content:f,timestamp:Date.now()}])}finally{m(!1)}};return c.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-slate-50 via-white to-orange-50/30 overflow-hidden",children:[c.jsxs("div",{className:"glass p-5 flex items-center justify-between flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl blur opacity-30"}),c.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-600 p-2.5 rounded-xl shadow-lg",children:c.jsx(_t,{className:"w-5 h-5 text-white"})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-slate-800 text-lg",children:i("aiAssistant")}),c.jsx("p",{className:"text-xs text-slate-500 font-medium",children:i("documentationHelper")})]})]}),a.length>1&&c.jsx("button",{onClick:()=>{confirm(i("clearConversationHistoryConfirm"))&&l()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-500 hover:text-slate-700",title:i("assistantClearConversation"),children:c.jsx(wt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-5 lg:p-6 space-y-5 min-h-0 overscroll-contain scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:[a.length===0&&c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center max-w-sm",children:[c.jsxs("div",{className:"relative mx-auto w-20 h-20 mb-4",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-500 rounded-full blur-xl opacity-30"}),c.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-600 p-4 rounded-full",children:c.jsx(_t,{className:"w-10 h-10 text-white"})})]}),c.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-2",children:i("readyToHelp")}),c.jsx("p",{className:"text-sm text-slate-500 mb-4",children:i("iCanHelpEditDocumentation")}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[c.jsxs("span",{className:"px-3 py-1.5 bg-orange-50 text-orange-700 rounded-lg text-xs font-medium",children:[" ",i("editSections")]}),c.jsxs("span",{className:"px-3 py-1.5 bg-red-50 text-red-700 rounded-lg text-xs font-medium",children:[" ",i("improveClarity")]}),c.jsxs("span",{className:"px-3 py-1.5 bg-orange-50 text-orange-700 rounded-lg text-xs font-medium",children:[" ",i("fixGrammar")]})]})]})}),a.map((w,x)=>c.jsx("div",{className:`flex ${w.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:c.jsxs("div",{className:`max-w-[85%] rounded-2xl px-5 py-4 shadow-xl ${w.role==="user"?"bg-gradient-to-br from-orange-600 to-red-600 text-white":"glass text-slate-800"}`,children:[w.role==="assistant"&&c.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-200/50",children:[c.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center",children:c.jsx(_t,{className:"w-3.5 h-3.5 text-white"})}),c.jsx("span",{className:"text-xs font-semibold text-slate-600",children:i("aiAssistant")})]}),c.jsx("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:w.content.split(`
`).map((g,f)=>{var N;const v=w.role==="user",b=v?"text-white":"text-slate-700",_=v?"text-white/90":"text-slate-600",E=v?"text-white":"text-slate-800",C=v?"text-white":"text-slate-900",S=v?"border-white/20":"border-slate-300/50";if(g.match(/^#{1,3}\s+/)){const D=((N=g.match(/^#+/))==null?void 0:N[0].length)||1,F=g.replace(/^#+\s+/,""),Y=D===1?`text-base font-bold mt-3 mb-2 ${E}`:D===2?`text-sm font-semibold mt-2 mb-1 ${b}`:`text-sm font-medium mt-1 ${_}`;return c.jsx("div",{className:Y,children:F},f)}if(g.includes(" **Changes Made:**"))return c.jsx("div",{className:`mt-3 pt-3 border-t ${S}`,children:c.jsxs("strong",{className:`font-semibold ${E} flex items-center gap-2`,children:[c.jsx("span",{children:""}),c.jsx("span",{children:g.replace(/\*\*/g,"")})]})},f);if(g.trim().match(/^(||||||)/))return c.jsxs("div",{className:`mt-2 font-medium ${b} flex items-start gap-2`,children:[c.jsx("span",{className:"text-lg",children:g.trim().charAt(0)}),c.jsx("span",{children:g.trim().substring(1).trim()})]},f);if(g.includes("**")){const D=g.split(/(\*\*[^*]+\*\*)/g);return c.jsx("div",{className:"my-1",children:D.map((F,Y)=>F.startsWith("**")&&F.endsWith("**")?c.jsx("strong",{className:`font-semibold ${C}`,children:F.slice(2,-2)},Y):c.jsx("span",{className:b,children:F},Y))},f)}return g.trim().startsWith("")||g.trim().startsWith("-")?c.jsxs("div",{className:`ml-4 ${b} my-1 flex items-start gap-2`,children:[c.jsx("span",{className:`${v?"text-white":"text-orange-500"} mt-1 font-bold`,children:""}),c.jsx("span",{children:g.trim().substring(1).trim()})]},f):c.jsx("div",{className:`my-1 ${b}`,children:g||""},f)})})]})},x)),h&&c.jsx("div",{className:"flex justify-start animate-in fade-in",children:c.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl px-4 py-3 shadow-lg",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(_t,{className:"w-4 h-4 text-orange-600 animate-pulse"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:i("aiIsThinking")})]})]})})}),c.jsx("div",{ref:p})]}),c.jsxs("div",{className:"glass p-5 flex-shrink-0",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"flex-1 relative",children:c.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),onKeyPress:w=>{w.key==="Enter"&&!w.shiftKey&&!h&&u.trim()&&(w.preventDefault(),y())},placeholder:i(h?"assistantPlaceholderLoading":"assistantPlaceholderReady"),className:"w-full px-4 py-3 bg-white border-2 border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 placeholder:text-black text-black",disabled:h})}),c.jsx("button",{onClick:y,disabled:h||!u.trim(),className:"btn-primary px-6 py-3 flex items-center gap-2",title:u.trim()?i("assistantTitleSend"):i("assistantTitleType"),children:h?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),c.jsx("span",{className:"text-sm hidden sm:inline",children:i("generating")})]}):c.jsxs(c.Fragment,{children:[c.jsx(jM,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline text-sm",children:i("send")})]})})]}),c.jsxs("div",{className:"mt-2 text-xs text-slate-500 flex items-center gap-4 flex-wrap",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{children:""}),c.jsx("span",{children:i("beSpecificForBetterResults")})]}),c.jsxs("span",{className:"hidden sm:inline flex items-center gap-1",children:[c.jsx("span",{children:""}),c.jsx("span",{children:i("pressEnterToSend")})]})]})]})]})}function zM(t){const e=t.toLowerCase(),r=["edit","change","update","modify","rewrite","fix","correct","add","remove","delete","insert","replace","improve","enhance","make it","make the","change the","update the","edit the","should be","needs to be","must be","please add","please remove","can you add","can you remove","can you change","can you edit","translate","translation","convert to","transform","reformat","restructure"].some(o=>e.includes(o)),s=e.startsWith("edit")||e.startsWith("change")||e.startsWith("update")||e.startsWith("add")||e.startsWith("remove")||e.startsWith("fix")||e.startsWith("rewrite")||e.startsWith("translate")||e.startsWith("convert")||e.startsWith("transform")||e.startsWith("reformat")||e.startsWith("restructure"),i=e.trim().endsWith("?")||e.includes("what")||e.includes("how")||e.includes("why")||e.includes("when")||e.includes("where")||e.includes("can you explain")||e.includes("tell me")||e.includes("describe"),a=e.includes("hello")||e.includes("hi")||e.includes("thanks")||e.includes("thank you")||e.includes("ok")||e.includes("okay")||e.length<10;return i||a?!1:r||s}async function GM(t,e,n="gpt-4o-mini",r,s=[],i="en"){const o=t.toLowerCase().includes("fix")||t.toLowerCase().includes("improve")||t.toLowerCase().includes("change")||t.toLowerCase().includes("update")||t.toLowerCase().includes("add")||t.toLowerCase().includes("remove")||t.toLowerCase().includes("translate")||t.toLowerCase().includes("edit")?16384:2048,{callLangChain:l}=await gm(async()=>{const{callLangChain:y}=await Promise.resolve().then(()=>nO);return{callLangChain:y}},void 0),u=s.slice(-6).map(y=>`${y.role==="user"?"User":"Assistant"}: ${y.content}`).join(`

`),d={en:"Respond in English. Use clear, professional English for all responses.",fr:"Rpondez en franais. Utilisez un franais clair et professionnel pour toutes les rponses.",de:"Antworten Sie auf Deutsch. Verwenden Sie klares, professionelles Deutsch fr toutes les rponses."},m=`You are a helpful AI assistant with FULL ACCESS to edit and modify documentation. You can:
- Answer questions about the documentation
- Explain sections or concepts
- Provide suggestions and recommendations
- Discuss the documentation content
- Help users understand what's in their documentation
- Edit, translate, or manipulate the documentation when requested or when it would be helpful
- Proactively improve the documentation when you notice issues

IMPORTANT: You have FULL ACCESS to modify the documentation. If the user asks for changes, suggests improvements, or you notice something that should be fixed, you can and should update the documentation.

${d[i]||d.en}

Be friendly, conversational, and helpful. If the user asks about something specific in the documentation, reference it. If they ask for changes or improvements, make those changes directly.

HELPFUL HINTS TO SHARE:
- When appropriate, mention that users can edit the documentation by using commands like: "edit", "change", "update", "add", "remove", "fix", "rewrite", "improve", "enhance", "translate"
- Mention that they can use phrases like: "edit the...", "change the...", "add a section about...", "remove the...", "fix the grammar", "update the...", "translate to French", "translate the introduction to Spanish", etc.
- Let users know that questions and casual chat won't trigger edits - only explicit edit commands will modify the documentation
- Inform users about translation capabilities: "translate to [language]", "translate the [section] to [language]", "translate entire documentation to [language]"
- Be helpful and guide users on how to use the assistant effectively`,p=`The user is having a conversation about their documentation. Here's the conversation so far:

${u?`Previous conversation:
${u}

`:""}

User's current message: "${t}"

Current documentation (you have FULL ACCESS to edit this):
\`\`\`
${e}
\`\`\`

Please respond conversationally to the user's message. 

IF THE USER ASKS FOR CHANGES, IMPROVEMENTS, OR EDITS:
- Make the changes directly to the documentation
- Return the updated documentation in this format:
  <documentation>
  [Complete updated documentation here]
  </documentation>
- Explain what you changed in your response

IF THE USER IS JUST ASKING QUESTIONS:
- Answer their questions helpfully
- You can still suggest improvements and offer to make them

You have FULL ACCESS to modify the documentation. If the user wants changes, make them. If you notice something that should be improved and the user seems open to suggestions, you can proactively improve it.

Be natural, conversational, and helpful.`;try{return(await l(p,m,n,.7,void 0,!1,o)).trim()}catch(y){return console.error("[Assistant] Error processing conversational request:",y),r?`${r("assistantErrorUnknown")}: ${y.message}`:`Error: ${y.message}`}}async function BM(t,e,n="gpt-4o-mini",r,s="en"){const{callLangChain:i}=await gm(async()=>{const{callLangChain:d}=await Promise.resolve().then(()=>nO);return{callLangChain:d}},void 0),a={en:"Respond in English. Use clear, professional English for all responses. When explaining changes, write in English.",fr:"Rpondez en franais. Utilisez un franais clair et professionnel pour toutes les rponses. Lorsque vous expliquez les modifications, crivez en franais.",de:"Antworten Sie auf Deutsch. Verwenden Sie klares, professionelles Deutsch fr toutes les rponses. Wenn Sie nderungen erklren, schreiben Sie auf Deutsch."},l=`You are a helpful AI assistant with FULL ACCESS to edit, improve, and manipulate documentation text. Your role is to help users edit, translate, and transform their documentation. You have COMPLETE CONTROL over the documentation and can make any changes needed.

${a[s]||a.en}

FULL ACCESS: You can modify any part of the documentation - add sections, remove content, rewrite text, translate, restructure, reformat, or make any other changes. There are no restrictions on what you can change.

YOUR CAPABILITIES:
- Translate documentation or sections to any language (French, German, Spanish, Italian, Japanese, Chinese, Arabic, etc.)
- Rewrite sections for better clarity
- Improve grammar, spelling, and style
- Add missing information
- Remove unnecessary content
- Restructure documentation for better flow
- Format text properly
- Make content more professional and readable
- Convert between different text formats
- Summarize or expand content
- Change tone or style (formal, casual, technical, etc.)
- Extract specific information
- Combine or split sections

TRANSLATION CAPABILITIES:
- When the user asks to translate, you MUST ACTUALLY TRANSLATE the entire documentation or specified sections to the requested language
- DO NOT just say you translated it - YOU MUST PROVIDE THE TRANSLATED TEXT in the <documentation> section
- Translate ALL descriptive text content to the target language
- Maintain all markdown formatting during translation (headers, lists, code blocks, etc.)
- Preserve code blocks, file paths, URLs, and technical terms unchanged (only translate descriptive text)
- Keep the structure and organization intact
- Translate accurately while maintaining the original meaning
- The output MUST be in the target language, not the original language

YOUR APPROACH:
- Preserve the original structure and meaning (unless restructuring is requested)
- Make improvements while keeping the user's intent
- Be clear about what changes you made
- Maintain markdown formatting
- Keep technical accuracy
- For translations, ensure natural, fluent language in the target language`,u=`The user wants to edit, translate, or manipulate their documentation. Here's their request:

"${t}"

Current documentation:
\`\`\`
${e}
\`\`\`

CRITICAL INSTRUCTIONS:
1. Understand what the user wants to do (edit, translate, reformat, restructure, etc.)
2. If it's a translation request:
   - Identify the target language from the request (e.g., "translate to French" = French, "translate to Spanish" = Spanish)
   - ACTUALLY TRANSLATE the entire documentation or the specified sections - DO NOT just say you translated it, YOU MUST PROVIDE THE TRANSLATED TEXT
   - Translate ALL text content to the target language
   - Maintain all markdown formatting, code blocks, and structure exactly as they are
   - Keep code blocks, file paths, URLs, and technical terms unchanged (only translate descriptive text)
   - Ensure natural, fluent translation in the target language
   - The <documentation> section MUST contain the ACTUAL TRANSLATED TEXT, not the original
3. If it's an edit request (not translation):
   - Make the requested changes
   - Preserve structure and formatting
4. Return the complete updated documentation with ALL changes applied
5. Explain briefly what you changed

IMPORTANT: When translating, you MUST provide the actual translated content in the <documentation> section. Do not just copy the original text - translate it to the requested language.

Return your response in this format:
<explanation>
Brief explanation of what you changed (e.g., "Translated the entire documentation to French" or "Improved grammar and clarity in the introduction section")
</explanation>

<documentation>
[Complete updated documentation here - MUST be translated if translation was requested]
</documentation>`;try{const h=t.toLowerCase().includes("translate")||t.toLowerCase().includes("translation")?16384:4096,m=await i(u,l,n,.7,void 0,!1,h),p=m.match(/<explanation>([\s\S]*?)<\/explanation>/),y=m.match(/<documentation>([\s\S]*?)<\/documentation>/),w=p?p[1].trim():"I've updated your documentation.";let x=y?y[1].trim():e;if(!y&&m.length>100)if(!(p!==null))x=m.trim();else{const f=m.split("</explanation>")[1];f&&(x=f.replace(/<documentation>/g,"").replace(/<\/documentation>/g,"").trim())}return(!x||x.length<10)&&(x=e),{message:w,updatedDocumentation:x}}catch(d){return console.error("[Assistant] Error processing documentation edit:",d),{message:r?`${r("errorEditingDocumentation")}: ${d.message}`:`Error editing documentation: ${d.message}`,updatedDocumentation:e}}}function ym(t){const e=[/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)(?:\/tree\/([^\/]+))?/,/^github\.com\/([^\/]+)\/([^\/]+)(?:\/tree\/([^\/]+))?/,/^([^\/]+)\/([^\/]+)$/];for(const n of e){const r=t.trim().match(n);if(r)return{owner:r[1],repo:r[2],branch:r[3]||"main"}}return null}function VM(t){try{localStorage.setItem("github_token",t),console.log("GitHub token stored successfully")}catch(e){throw console.error("Failed to store GitHub token:",e),new Error("Could not store GitHub token in localStorage")}}function dn(){try{const t=localStorage.getItem("github_token");if(t)return t}catch{console.warn("Could not access localStorage for GitHub token")}return null}function zo(t){const e=new Headers;if(e.set("Accept","application/vnd.github.v3+json"),t){const n=t.trim().replace(/[^\x00-\x7F]/g,"");n&&e.set("Authorization",`token ${n}`)}return e}async function Ss(t,e,n="",r="main",s){try{const i=s||dn(),a=zo(i),o=n?`contents/${n}`:"contents",l=`https://api.github.com/repos/${t}/${e}/${o}?ref=${r}`,u=await fetch(l,{headers:a});if(!u.ok){if(u.status===404)return[];throw new Error(`Failed to list contents: ${u.status} ${u.statusText}`)}const d=await u.json();return Array.isArray(d)?d.map(h=>({name:h.name,type:h.type==="file"?"file":"dir",path:h.path,size:h.size})):d.type==="file"?[{name:d.name,type:"file",path:d.path,size:d.size}]:[]}catch(i){throw console.error("Error listing GitHub contents:",i),new Error(`Failed to list repository contents: ${i.message}`)}}async function Sv(t,e,n="",r="main",s,i=3){if(i<=0)return[];const a=[];try{const o=await Ss(t,e,n,r,s);for(const l of o)if(l.type==="file")a.push(l.path);else if(l.type==="dir"&&!l.name.startsWith(".")&&l.name!=="node_modules"){const u=await Sv(t,e,l.path,r,s,i-1);a.push(...u)}}catch(o){console.warn(`Failed to list files in ${n}:`,o)}return a}async function L1(t,e,n="",r="main",s,i="",a=!0,o=10,l=0){if(l>=o)return"";try{const d=(await Ss(t,e,n,r,s)).filter(p=>!(p.name.startsWith(".")&&p.name!==".github"&&p.name!==".vscode"||p.name==="node_modules"||p.name==="dist"||p.name==="build"));if(d.length===0)return"";let h="";const m=d.sort((p,y)=>p.type!==y.type?p.type==="dir"?-1:1:p.name.localeCompare(y.name));for(let p=0;p<m.length;p++){const y=m[p],w=p===m.length-1,x=w?" ":" ",g=w?"    ":"   ";if(h+=`${i}${x}${y.name}
`,y.type==="dir"){const f=await L1(t,e,y.path,r,s,i+g,w,o,l+1);h+=f}}return h}catch(u){return console.warn(`Failed to generate directory tree for ${n}:`,u),""}}async function qr(t,e,n,r="main",s){try{const i=s||dn();if(i)try{const d=`https://api.github.com/repos/${t}/${e}/contents/${n}?ref=${r}`,h=zo(i),m=await fetch(d,{method:"GET",headers:h});if(m.ok){const p=await m.json();if(p.content&&p.encoding==="base64"){const y=atob(p.content.replace(/\s/g,""));return console.log(`Successfully fetched ${n} via API, length: ${y.length}`),y}}else if(m.status===404)return r==="master"?qr(t,e,n,"main",s):null;console.warn("GitHub API request failed, falling back to raw URL")}catch(d){console.warn("GitHub API request error, falling back to raw URL:",d)}const a=`https://raw.githubusercontent.com/${t}/${e}/${r}/${n}`;console.log("Fetching GitHub file via raw URL:",a);const o=new Headers;if(o.set("Accept","application/json, text/plain, */*"),i){const d=i.trim().replace(/[^\x00-\x7F]/g,"");d&&o.set("Authorization",`token ${d}`)}const l=await fetch(a,{method:"GET",headers:o});if(console.log("GitHub file response status:",l.status,l.statusText),!l.ok){if(l.status===404)return r==="master"?(console.log("Trying main branch instead of master"),qr(t,e,n,"main",s)):null;throw l.status===403?new Error("Rate limited or repository is private. Try using a GitHub personal access token."):new Error(`Failed to fetch file: ${l.status} ${l.statusText}`)}const u=await l.text();return console.log(`Successfully fetched ${n}, length: ${u.length}`),u}catch(i){throw console.error("Error fetching GitHub file:",i),i.message?i:new Error(`Network error: ${i.message||"Failed to fetch from GitHub"}`)}}async function M1(t){const e=dn();if(!e)throw new Error("GitHub token is required.");const{visibility:n="all",affiliation:r,perPage:s=100,page:i=1}=t||{},a=zo(e),o=new URLSearchParams({per_page:s.toString(),page:i.toString()});n!=="all"&&o.append("visibility",n),r&&o.append("affiliation",r);try{const l=`https://api.github.com/user/repos?${o.toString()}`,u=await fetch(l,{headers:a});if(!u.ok)throw u.status===401?new Error("Invalid or expired GitHub token. Please check your token."):u.status===403?new Error("Rate limited or insufficient permissions. Please check your token permissions."):new Error(`Failed to fetch repositories: ${u.status} ${u.statusText}`);return(await u.json()).map(h=>({id:h.id,name:h.name,fullName:h.full_name,owner:h.owner.login,private:h.private,htmlUrl:h.html_url,description:h.description||void 0,defaultBranch:h.default_branch||"main",lastPushedAt:h.pushed_at||void 0,language:h.language||void 0}))}catch(l){throw console.error("Error fetching user repositories:",l),l.message?l:new Error(`Failed to fetch repositories: ${l.message||"Unknown error"}`)}}async function HM(t,e,n){try{const r=n||dn(),s=zo(r),i=`https://api.github.com/repos/${t}/${e}/branches`,a=await fetch(i,{headers:s});if(!a.ok)throw a.status===404?new Error("Repository not found"):a.status===401||a.status===403?new Error("Invalid or insufficient permissions. Please check your GitHub token."):new Error(`Failed to fetch branches: ${a.status} ${a.statusText}`);return(await a.json()).map(l=>l.name).sort((l,u)=>l==="main"||l==="master"?-1:u==="main"||u==="master"?1:l.localeCompare(u))}catch(r){throw console.error("Error fetching repository branches:",r),new Error(`Failed to fetch branches: ${r.message||"Unknown error"}`)}}async function WM(t,e,n,r="main",s){const i=s||dn();if(!i)throw new Error("GitHub token is required for file operations.");const a=zo(i);try{const o=`https://api.github.com/repos/${t}/${e}/contents/${n}?ref=${r}`,l=await fetch(o,{headers:a});if(l.status===404)return null;if(!l.ok)throw new Error(`Failed to get file SHA: ${l.status} ${l.statusText}`);return(await l.json()).sha||null}catch(o){throw console.error("Error getting file SHA:",o),o.message&&o.message.includes("Failed to get file SHA")?o:new Error(`Failed to get file SHA: ${o.message||"Unknown error"}`)}}async function qM(t,e,n,r,s,i="main",a,o){const l=a||dn();if(!l)throw new Error("GitHub token is required for file operations.");const u=await WM(t,e,n,i,l),d=btoa(unescape(encodeURIComponent(r))),h=zo(l);h.set("Content-Type","application/json");const m={message:s,content:d,branch:i};u&&(m.sha=u);try{const p=`https://api.github.com/repos/${t}/${e}/contents/${n}`,y=await fetch(p,{method:"PUT",headers:h,body:JSON.stringify(m)});if(!y.ok){const x=await y.json().catch(()=>({}));throw y.status===409?new Error("File was modified by another commit. Please try again."):y.status===403?new Error("Insufficient permissions. Token needs repo scope."):new Error(`Failed to create/update file: ${y.status} ${y.statusText}. ${x.message||""}`)}const w=await y.json();return{commit:{sha:w.commit.sha,html_url:w.commit.html_url}}}catch(p){throw console.error("Error creating/updating file:",p),p.message&&p.message.includes("Failed to create/update file")?p:new Error(`Failed to create/update file: ${p.message||"Unknown error"}`)}}function KM({selectedRepos:t,onSelectionChange:e,onClose:n}){const[r,s]=$.useState([]),[i,a]=$.useState(!1),[o,l]=$.useState(""),[u,d]=$.useState(""),[h,m]=$.useState("all"),[p]=$.useState(()=>localStorage.getItem("selectedLanguage")||"en"),y=ya(p);$.useEffect(()=>{w()},[h]);const w=async()=>{a(!0),l("");try{const _=await M1({visibility:h,perPage:100});s(_)}catch(_){l(_.message||"Failed to load repositories"),console.error("Error loading repos:",_)}finally{a(!1)}},x=_=>{const E=t.some(C=>C.id===_.id);e(E?t.filter(C=>C.id!==_.id):[...t,_])},g=_=>t.some(E=>E.id===_.id),f=r.filter(_=>_.name.toLowerCase().includes(u.toLowerCase())||_.fullName.toLowerCase().includes(u.toLowerCase())||_.description&&_.description.toLowerCase().includes(u.toLowerCase())),v=()=>{const _=[...t];f.forEach(E=>{g(E)||_.push(E)}),e(_)},b=()=>f.length>0&&f.every(_=>g(_));return c.jsxs("div",{className:"card max-w-4xl w-full max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg",children:c.jsx(xs,{className:"w-5 h-5 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:y("selectRepositories")}),t.length>0&&c.jsxs("span",{className:"px-3 py-1.5 bg-gradient-to-r from-orange-100 to-red-100 text-orange-700 rounded-full text-sm font-bold shadow-sm",children:[t.length," ",y("selected")]})]}),n&&c.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:y("close"),children:c.jsx(wt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"mb-6 space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(PM,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",placeholder:y("searchRepositories"),value:u,onChange:_=>d(_.target.value),className:"input-modern pl-12"})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:y("visibility")}),c.jsx("div",{className:"flex gap-2",children:["all","public","private"].map(_=>c.jsx("button",{onClick:()=>m(_),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-all ${h===_?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y(_==="all"?"all":_==="public"?"public":"private")},_))}),c.jsx("button",{onClick:w,disabled:i,className:"ml-auto px-4 py-2 text-sm font-semibold bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y("refresh")})]})]}),o&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3 text-red-700 shadow-sm",children:[c.jsx(xM,{className:"w-5 h-5"}),c.jsx("span",{className:"text-sm font-medium",children:o})]}),i&&c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx(ty,{className:"w-6 h-6 text-blue-500 animate-spin"}),c.jsx("span",{className:"ml-2 text-gray-600",children:y("loadingRepositories")})]}),!i&&!o&&c.jsx("div",{className:"flex-1 overflow-y-auto border-2 border-gray-200 rounded-xl scrollbar-thin",children:f.length===0?c.jsx("div",{className:"p-12 text-center text-gray-500",children:c.jsx("p",{className:"text-lg font-medium",children:y(u?"noRepositoriesMatch":"noRepositoriesFound")})}):c.jsx("div",{className:"divide-y divide-gray-200",children:f.map(_=>{const E=g(_);return c.jsx("div",{onClick:()=>x(_),className:`p-5 cursor-pointer transition-all hover:bg-gradient-to-r hover:from-orange-50/50 hover:to-red-50/50 ${E?"bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-l-orange-500":""}`,children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`mt-1 w-6 h-6 rounded-lg border-2 flex items-center justify-center flex-shrink-0 transition-all ${E?"bg-gradient-to-r from-orange-500 to-red-500 border-orange-500 shadow-md":"border-gray-300 hover:border-orange-300"}`,children:E&&c.jsx(SM,{className:"w-4 h-4 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:_.name}),_.private&&c.jsx("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded-lg",children:y("private")}),_.language&&c.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-700 text-xs font-semibold rounded-lg",children:_.language})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:_.fullName}),_.description&&c.jsx("p",{className:"text-sm text-gray-500 mt-2 line-clamp-2 leading-relaxed",children:_.description}),_.lastPushedAt&&c.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[y("lastPushed")," ",new Date(_.lastPushedAt).toLocaleDateString()]})]})]})},_.id)})})}),c.jsxs("div",{className:"mt-6 flex items-center justify-between pt-6 border-t border-gray-200",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-700",children:t.length>0?`${t.length} ${t.length!==1?y("repositories"):y("repository")} ${y("selected")}`:y("noRepositoriesSelected")}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:v,disabled:f.length===0||b(),className:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:b()?y("allFilteredReposSelected"):y("selectAllFiltered"),children:y("selectAll")}),c.jsx("button",{onClick:()=>e([]),disabled:t.length===0,className:"btn-secondary px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:y("clearAll")}),n&&c.jsx("button",{onClick:n,className:"btn-primary px-6 py-2 text-sm",children:y("done")})]})]})]})}var pe=(t=>(t.DISCOVERY="discovery",t.ANALYSIS="analysis",t.PLANNING="planning",t.WRITING="writing",t.COMPLETE="complete",t))(pe||{});async function YM(t){console.log("[RepoDiscovery] Starting repository discovery...");const e={currentStep:pe.DISCOVERY,progress:{current:0,total:1,currentAgent:"RepoDiscovery"}};try{if(t.selectedRepos&&t.selectedRepos.length>0){console.log("[RepoDiscovery] Validating",t.selectedRepos.length,"selected repositories");const n=[];for(const r of t.selectedRepos)try{r.fullName&&r.owner&&r.name&&n.push(r)}catch(s){console.warn(`[RepoDiscovery] Invalid repo: ${r.fullName}`,s)}n.length>0?(e.discoveredRepos=n,e.completedSteps=new Set([pe.DISCOVERY]),e.progress={current:1,total:1,currentAgent:"RepoDiscovery"},console.log("[RepoDiscovery] Validated",n.length,"repositories")):(e.completedSteps=new Set([pe.DISCOVERY]),e.errors=new Map([["discovery","No valid repositories found"]]),console.warn("[RepoDiscovery] No valid repositories after validation"))}else try{const n=await M1({perPage:100});n&&n.length>0?(e.discoveredRepos=n,e.completedSteps=new Set([pe.DISCOVERY]),e.progress={current:1,total:1,currentAgent:"RepoDiscovery"},console.log("[RepoDiscovery] Discovered",n.length,"user repositories")):(e.completedSteps=new Set([pe.DISCOVERY]),e.errors=new Map([["discovery","No repositories found"]]),console.warn("[RepoDiscovery] No repositories found"))}catch(n){console.error("[RepoDiscovery] Failed to fetch user repos:",n),e.completedSteps=new Set([pe.DISCOVERY]),e.errors=new Map([["discovery",n.message||"Failed to discover repositories"]])}}catch(n){console.error("[RepoDiscovery] Error:",n),e.completedSteps=new Set([pe.DISCOVERY]),e.errors=new Map([["discovery",n.message||"Discovery failed"]])}return e}function Bu(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function be(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function j(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let F1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return F1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function ry(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const sy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class he extends Error{}class Wt extends he{constructor(e,n,r,s){super(`${Wt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new vm({message:r,cause:sy(n)});const i=n==null?void 0:n.error;return e===400?new U1(e,i,r,s):e===401?new z1(e,i,r,s):e===403?new G1(e,i,r,s):e===404?new B1(e,i,r,s):e===409?new V1(e,i,r,s):e===422?new H1(e,i,r,s):e===429?new W1(e,i,r,s):e>=500?new q1(e,i,r,s):new Wt(e,i,r,s)}}class Fn extends Wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class vm extends Wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class xm extends vm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class U1 extends Wt{}class z1 extends Wt{}class G1 extends Wt{}class B1 extends Wt{}class V1 extends Wt{}class H1 extends Wt{}class W1 extends Wt{}class q1 extends Wt{}class K1 extends he{constructor(){super("Could not parse response content as the length limit was reached")}}class Y1 extends he{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class vl extends Error{constructor(e){super(e)}}const ZM=/^[a-z][a-z0-9+.-]*:/i,JM=t=>ZM.test(t);let vn=t=>(vn=Array.isArray,vn(t)),__=vn;function Z1(t){return typeof t!="object"?{}:t??{}}function XM(t){if(!t)return!0;for(const e in t)return!1;return!0}function QM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ef(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const e5=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new he(`${t} must be an integer`);if(e<0)throw new he(`${t} must be a positive integer`);return e},t5=t=>{try{return JSON.parse(t)}catch{return}},Kc=t=>new Promise(e=>setTimeout(e,t)),Pa="6.9.1",n5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function r5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const s5=()=>{var n;const t=r5();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pa,"X-Stainless-OS":k_(Deno.build.os),"X-Stainless-Arch":S_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pa,"X-Stainless-OS":k_(globalThis.process.platform??"unknown"),"X-Stainless-Arch":S_(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=i5();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function i5(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const S_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",k_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let T_;const a5=()=>T_??(T_=s5());function o5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function J1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function X1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return J1({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function Q1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function l5(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const c5=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),eC="RFC3986",tC=t=>String(t),A_={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:tC},u5="RFC1738";let iy=(t,e)=>(iy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),iy(t,e));const Mr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),tf=1024,d5=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=tf){const l=i.length>=tf?i.slice(o,o+tf):i,u=[];for(let d=0;d<l.length;++d){let h=l.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===u5&&(h===40||h===41)){u[u.length]=l.charAt(d);continue}if(h<128){u[u.length]=Mr[h];continue}if(h<2048){u[u.length]=Mr[192|h>>6]+Mr[128|h&63];continue}if(h<55296||h>=57344){u[u.length]=Mr[224|h>>12]+Mr[128|h>>6&63]+Mr[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=Mr[240|h>>18]+Mr[128|h>>12&63]+Mr[128|h>>6&63]+Mr[128|h&63]}a+=u.join("")}return a};function h5(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function E_(t,e){if(vn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const nC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},rC=function(t,e){Array.prototype.push.apply(t,vn(e)?e:[e])};let C_;const Ct={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:d5,encodeValuesOnly:!1,format:eC,formatter:tC,indices:!1,serializeDate(t){return(C_??(C_=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function m5(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const nf={};function sC(t,e,n,r,s,i,a,o,l,u,d,h,m,p,y,w,x,g){let f=t,v=g,b=0,_=!1;for(;(v=v.get(nf))!==void 0&&!_;){const D=v.get(t);if(b+=1,typeof D<"u"){if(D===b)throw new RangeError("Cyclic object value");_=!0}typeof v.get(nf)>"u"&&(b=0)}if(typeof u=="function"?f=u(e,f):f instanceof Date?f=m==null?void 0:m(f):n==="comma"&&vn(f)&&(f=E_(f,function(D){return D instanceof Date?m==null?void 0:m(D):D})),f===null){if(i)return l&&!w?l(e,Ct.encoder,x,"key",p):e;f=""}if(m5(f)||h5(f)){if(l){const D=w?e:l(e,Ct.encoder,x,"key",p);return[(y==null?void 0:y(D))+"="+(y==null?void 0:y(l(f,Ct.encoder,x,"value",p)))]}return[(y==null?void 0:y(e))+"="+(y==null?void 0:y(String(f)))]}const E=[];if(typeof f>"u")return E;let C;if(n==="comma"&&vn(f))w&&l&&(f=E_(f,l)),C=[{value:f.length>0?f.join(",")||null:void 0}];else if(vn(u))C=u;else{const D=Object.keys(f);C=d?D.sort(d):D}const S=o?String(e).replace(/\./g,"%2E"):String(e),N=r&&vn(f)&&f.length===1?S+"[]":S;if(s&&vn(f)&&f.length===0)return N+"[]";for(let D=0;D<C.length;++D){const F=C[D],Y=typeof F=="object"&&typeof F.value<"u"?F.value:f[F];if(a&&Y===null)continue;const de=h&&o?F.replace(/\./g,"%2E"):F,H=vn(f)?typeof n=="function"?n(N,de):N:N+(h?"."+de:"["+de+"]");g.set(t,b);const B=new WeakMap;B.set(nf,g),rC(E,sC(Y,H,n,r,s,i,a,o,n==="comma"&&w&&vn(f)?null:l,u,d,h,m,p,y,w,x,B))}return E}function p5(t=Ct){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ct.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=eC;if(typeof t.format<"u"){if(!iy(A_,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=A_[n];let s=Ct.filter;(typeof t.filter=="function"||vn(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in nC?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ct.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ct.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ct.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ct.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ct.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ct.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ct.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ct.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ct.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ct.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ct.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ct.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ct.strictNullHandling}}function f5(t,e={}){let n=t;const r=p5(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):vn(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=nC[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const u=new WeakMap;for(let m=0;m<s.length;++m){const p=s[m];r.skipNulls&&n[p]===null||rC(a,sC(n[p],p,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const d=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}function g5(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let N_;function kv(t){let e;return(N_??(e=new globalThis.TextEncoder,N_=e.encode.bind(e)))(t)}let I_;function R_(t){let e;return(I_??(e=new globalThis.TextDecoder,I_=e.decode.bind(e)))(t)}var Pn,jn;class wm{constructor(){Pn.set(this,void 0),jn.set(this,void 0),be(this,Pn,new Uint8Array),be(this,jn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kv(e):e;be(this,Pn,g5([j(this,Pn,"f"),n]));const r=[];let s;for(;(s=y5(j(this,Pn,"f"),j(this,jn,"f")))!=null;){if(s.carriage&&j(this,jn,"f")==null){be(this,jn,s.index);continue}if(j(this,jn,"f")!=null&&(s.index!==j(this,jn,"f")+1||s.carriage)){r.push(R_(j(this,Pn,"f").subarray(0,j(this,jn,"f")-1))),be(this,Pn,j(this,Pn,"f").subarray(j(this,jn,"f"))),be(this,jn,null);continue}const i=j(this,jn,"f")!==null?s.preceding-1:s.preceding,a=R_(j(this,Pn,"f").subarray(0,i));r.push(a),be(this,Pn,j(this,Pn,"f").subarray(s.index)),be(this,jn,null)}return r}flush(){return j(this,Pn,"f").length?this.decode(`
`):[]}}Pn=new WeakMap,jn=new WeakMap;wm.NEWLINE_CHARS=new Set([`
`,"\r"]);wm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function y5(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function v5(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const wh={off:0,error:200,warn:300,info:400,debug:500},O_=(t,e,n)=>{if(t){if(QM(wh,t))return t;Gt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(wh))}`)}};function xl(){}function Vu(t,e,n){return!e||wh[t]>wh[n]?xl:e[t].bind(e)}const x5={error:xl,warn:xl,info:xl,debug:xl};let P_=new WeakMap;function Gt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return x5;const r=P_.get(e);if(r&&r[0]===n)return r[1];const s={error:Vu("error",e,n),warn:Vu("warn",e,n),info:Vu("info",e,n),debug:Vu("debug",e,n)};return P_.set(e,[n,s]),s}const Ui=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var ul;class Kr{constructor(e,n,r){this.iterator=e,ul.set(this,void 0),this.controller=n,be(this,ul,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Gt(r):console;async function*a(){if(s)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of w5(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(d){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),d}if(u&&u.error)throw new Wt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Wt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}o=!0}catch(l){if(ry(l))return;throw l}finally{o||n.abort()}}return new Kr(a,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const o=new wm,l=Q1(e);for await(const u of l)for(const d of o.decode(u))yield d;for(const u of o.flush())yield u}async function*a(){if(s)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(ry(l))return;throw l}finally{o||n.abort()}}return new Kr(a,n,r)}[(ul=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new Kr(()=>s(e),this.controller,j(this,ul,"f")),new Kr(()=>s(n),this.controller,j(this,ul,"f"))]}toReadableStream(){const e=this;let n;return J1({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const a=kv(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*w5(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new he("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new he("Attempted to iterate over a response with no body");const n=new _5,r=new wm,s=Q1(t.body);for await(const i of b5(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*b5(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?kv(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=v5(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class _5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=S5(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function S5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function iC(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{var h;if(e.options.stream)return Gt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Kr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(h=o==null?void 0:o.split(";")[0])==null?void 0:h.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const m=await n.json();return aC(m,n)}return await n.text()})();return Gt(t).debug(`[${r}] response parsed`,Ui({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}function aC(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var wl;class bm extends Promise{constructor(e,n,r=iC){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,wl.set(this,void 0),be(this,wl,e)}_thenUnwrap(e){return new bm(j(this,wl,"f"),this.responsePromise,async(n,r)=>aC(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(j(this,wl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}wl=new WeakMap;var Hu;class Tv{constructor(e,n,r,s){Hu.set(this,void 0),be(this,Hu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new he("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await j(this,Hu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Hu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class k5 extends bm{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await iC(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class _m extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Tt extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...Z1(this.options.query),after:n}}:null}}class bh extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Z1(this.options.query),after:e}}:null}}const oC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Kl(t,e,n){return oC(),new File(t,e??"unknown_file",n)}function Od(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Av=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",j_=async(t,e)=>ay(t.body)?{...t,body:await lC(t.body,e)}:t,ma=async(t,e)=>({...t,body:await lC(t.body,e)}),$_=new WeakMap;function T5(t){const e=typeof t=="function"?t:t.fetch,n=$_.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return $_.set(e,r),r}const lC=async(t,e)=>{if(!await T5(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>oy(n,r,s))),n},cC=t=>t instanceof Blob&&"name"in t,A5=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Av(t)||cC(t)),ay=t=>{if(A5(t))return!0;if(Array.isArray(t))return t.some(ay);if(t&&typeof t=="object"){for(const e in t)if(ay(t[e]))return!0}return!1},oy=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Kl([await n.blob()],Od(n)));else if(Av(n))t.append(e,Kl([await new Response(X1(n)).blob()],Od(n)));else if(cC(n))t.append(e,n,Od(n));else if(Array.isArray(n))await Promise.all(n.map(r=>oy(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>oy(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},uC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",E5=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&uC(t),C5=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function N5(t,e,n){if(oC(),t=await t,E5(t))return t instanceof File?t:Kl([await t.arrayBuffer()],t.name);if(C5(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Kl(await ly(s),e,n)}const r=await ly(t);if(e||(e=Od(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Kl(r,e,n)}async function ly(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(uC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Av(t))for await(const r of t)e.push(...await ly(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${I5(t)}`)}return e}function I5(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ce{constructor(e){this._client=e}}function dC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const D_=Object.freeze(Object.create(null)),R5=(t=dC)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],a=n.reduce((d,h,m)=>{var w;/[?#]/.test(h)&&(s=!0);const p=r[m];let y=(s?encodeURIComponent:t)(""+p);return m!==r.length&&(p==null||typeof p=="object"&&p.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??D_)??D_))==null?void 0:w.toString))&&(y=p+"",i.push({start:d.length+h.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),d+h+(m===r.length?"":y)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(o))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((d,h)=>d.start-h.start),i.length>0){let d=0;const h=i.reduce((m,p)=>{const y=" ".repeat(p.start-d),w="^".repeat(p.length);return d=p.start+p.length,m+y+w},"");throw new he(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${a}
${h}`)}return a},V=R5(dC);let hC=class extends ce{list(e,n={},r){return this._client.getAPIList(V`/chat/completions/${e}/messages`,Tt,{query:n,...r})}};function _h(t){return t!==void 0&&"function"in t&&t.function!==void 0}function O5(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function Ev(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Yc(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function P5(t,e){return!e||!mC(e)?{...t,choices:t.choices.map(n=>(pC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Cv(t,e)}function Cv(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new K1;if(r.finish_reason==="content_filter")throw new Y1;return pC(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>$5(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?j5(e,r.message.content):null}}});return{...t,choices:n}}function j5(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function $5(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return _h(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Yc(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function D5(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return _h(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return _h(n)&&(Yc(n)||(n==null?void 0:n.function.strict)||!1)}function mC(t){var e;return Ev(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Yc(n)||n.type==="function"&&n.function.strict===!0))??!1}function pC(t){for(const e of t||[])if(e.type!=="function")throw new he(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function L5(t){for(const e of t??[]){if(e.type!=="function")throw new he(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new he(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Sh=t=>(t==null?void 0:t.role)==="assistant",fC=t=>(t==null?void 0:t.role)==="tool";var cy,Pd,jd,bl,_l,$d,Sl,ms,kl,kh,Th,ja,gC;class Nv{constructor(){cy.add(this),this.controller=new AbortController,Pd.set(this,void 0),jd.set(this,()=>{}),bl.set(this,()=>{}),_l.set(this,void 0),$d.set(this,()=>{}),Sl.set(this,()=>{}),ms.set(this,{}),kl.set(this,!1),kh.set(this,!1),Th.set(this,!1),ja.set(this,!1),be(this,Pd,new Promise((e,n)=>{be(this,jd,e,"f"),be(this,bl,n,"f")})),be(this,_l,new Promise((e,n)=>{be(this,$d,e,"f"),be(this,Sl,n,"f")})),j(this,Pd,"f").catch(()=>{}),j(this,_l,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},j(this,cy,"m",gC).bind(this))},0)}_connected(){this.ended||(j(this,jd,"f").call(this),this._emit("connect"))}get ended(){return j(this,kl,"f")}get errored(){return j(this,kh,"f")}get aborted(){return j(this,Th,"f")}abort(){this.controller.abort()}on(e,n){return(j(this,ms,"f")[e]||(j(this,ms,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=j(this,ms,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(j(this,ms,"f")[e]||(j(this,ms,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{be(this,ja,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){be(this,ja,!0),await j(this,_l,"f")}_emit(e,...n){if(j(this,kl,"f"))return;e==="end"&&(be(this,kl,!0),j(this,$d,"f").call(this));const r=j(this,ms,"f")[e];if(r&&(j(this,ms,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!j(this,ja,"f")&&!(r!=null&&r.length)&&Promise.reject(s),j(this,bl,"f").call(this,s),j(this,Sl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!j(this,ja,"f")&&!(r!=null&&r.length)&&Promise.reject(s),j(this,bl,"f").call(this,s),j(this,Sl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Pd=new WeakMap,jd=new WeakMap,bl=new WeakMap,_l=new WeakMap,$d=new WeakMap,Sl=new WeakMap,ms=new WeakMap,kl=new WeakMap,kh=new WeakMap,Th=new WeakMap,ja=new WeakMap,cy=new WeakSet,gC=function(e){if(be(this,kh,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Fn),e instanceof Fn)return be(this,Th,!0),this._emit("abort",e);if(e instanceof he)return this._emit("error",e);if(e instanceof Error){const n=new he(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new he(String(e)))};function M5(t){return typeof t.parse=="function"}var ln,uy,Ah,dy,hy,my,yC,vC;const F5=10;class xC extends Nv{constructor(){super(...arguments),ln.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),fC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Sh(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new he("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),j(this,ln,"m",uy).call(this)}async finalMessage(){return await this.done(),j(this,ln,"m",Ah).call(this)}async finalFunctionToolCall(){return await this.done(),j(this,ln,"m",dy).call(this)}async finalFunctionToolCallResult(){return await this.done(),j(this,ln,"m",hy).call(this)}async totalUsage(){return await this.done(),j(this,ln,"m",my).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=j(this,ln,"m",Ah).call(this);n&&this._emit("finalMessage",n);const r=j(this,ln,"m",uy).call(this);r&&this._emit("finalContent",r);const s=j(this,ln,"m",dy).call(this);s&&this._emit("finalFunctionToolCall",s);const i=j(this,ln,"m",hy).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",j(this,ln,"m",my).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),j(this,ln,"m",yC).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Cv(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,y,w;const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&i.type==="function"&&((p=i==null?void 0:i.function)==null?void 0:p.name),{maxChatCompletions:u=F5}=r||{},d=n.tools.map(x=>{if(Yc(x)){if(!x.$callback)throw new he("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),h={};for(const x of d)x.type==="function"&&(h[x.function.name||x.function.function.name]=x.function);const m="tools"in n?d.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<u;++x){const f=(y=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:y.message;if(!f)throw new he("missing message in ChatCompletion response");if(!((w=f.tool_calls)!=null&&w.length))return;for(const v of f.tool_calls){if(v.type!=="function")continue;const b=v.id,{name:_,arguments:E}=v.function,C=h[_];if(C){if(l&&l!==_){const F=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:b,content:F});continue}}else{const F=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(h).map(Y=>JSON.stringify(Y)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:b,content:F});continue}let S;try{S=M5(C)?await C.parse(E):E}catch(F){const Y=F instanceof Error?F.message:String(F);this._addMessage({role:s,tool_call_id:b,content:Y});continue}const N=await C.function(S,this),D=j(this,ln,"m",vC).call(this,N);if(this._addMessage({role:s,tool_call_id:b,content:D}),l)return}}}}ln=new WeakSet,uy=function(){return j(this,ln,"m",Ah).call(this).content??null},Ah=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Sh(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new he("stream ended without producing a ChatCompletionMessage with role=assistant")},dy=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Sh(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},hy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(fC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},my=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},yC=function(e){if(e.n!=null&&e.n>1)throw new he("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},vC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Iv extends xC{static runTools(e,n,r){const s=new Iv,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),Sh(e)&&e.content&&this._emit("content",e.content)}}const wC=1,bC=2,_C=4,SC=8,kC=16,TC=32,AC=64,EC=128,CC=256,NC=EC|CC,IC=kC|TC|NC|AC,RC=wC|bC|IC,OC=_C|SC,U5=RC|OC,jt={STR:wC,NUM:bC,ARR:_C,OBJ:SC,NULL:kC,BOOL:TC,NAN:AC,INFINITY:EC,MINUS_INFINITY:CC,INF:NC,SPECIAL:IC,ATOM:RC,COLLECTION:OC,ALL:U5};class z5 extends Error{}class G5 extends Error{}function B5(t,e=jt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return V5(t.trim(),e)}const V5=(t,e)=>{const n=t.length;let r=0;const s=m=>{throw new z5(`${m} at position ${r}`)},i=m=>{throw new G5(`${m} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||jt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||jt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||jt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||jt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||jt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||jt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),o=()=>{const m=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(p)))}catch(y){i(String(y))}else if(jt.STR&e)try{return JSON.parse(t.substring(m,r-Number(p))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&jt.OBJ&e)return m;const p=o();h(),r++;try{const y=a();Object.defineProperty(m,p,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(jt.OBJ&e)return m;throw y}h(),t[r]===","&&r++}}catch{if(jt.OBJ&e)return m;s("Expected '}' at end of object")}return r++,m},u=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(a()),h(),t[r]===","&&r++}catch{if(jt.ARR&e)return m;s("Expected ']' at end of array")}return r++,m},d=()=>{if(r===0){t==="-"&&jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(jt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(p))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(jt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&jt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(y){i(String(y))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},L_=t=>B5(t,jt.ALL^jt.NUM);var Et,hs,Na,Ys,rf,Wu,sf,af,of,qu,lf,M_;class Ec extends xC{constructor(e){super(),Et.add(this),hs.set(this,void 0),Na.set(this,void 0),Ys.set(this,void 0),be(this,hs,e),be(this,Na,[])}get currentChatCompletionSnapshot(){return j(this,Ys,"f")}static fromReadableStream(e){const n=new Ec(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Ec(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),j(this,Et,"m",rf).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)j(this,Et,"m",sf).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new Fn;return this._addChatCompletion(j(this,Et,"m",qu).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),j(this,Et,"m",rf).call(this),this._connected();const s=Kr.fromReadableStream(e,this.controller);let i;for await(const o of s)i&&i!==o.id&&this._addChatCompletion(j(this,Et,"m",qu).call(this)),j(this,Et,"m",sf).call(this,o),i=o.id;if((a=s.controller.signal)!=null&&a.aborted)throw new Fn;return this._addChatCompletion(j(this,Et,"m",qu).call(this))}[(hs=new WeakMap,Na=new WeakMap,Ys=new WeakMap,Et=new WeakSet,rf=function(){this.ended||be(this,Ys,void 0)},Wu=function(n){let r=j(this,Na,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},j(this,Na,"f")[n.index]=r,r)},sf=function(n){var s,i,a,o,l,u,d,h,m,p,y,w,x,g,f;if(this.ended)return;const r=j(this,Et,"m",M_).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const b=r.choices[v.index];v.delta.content!=null&&((s=b.message)==null?void 0:s.role)==="assistant"&&((i=b.message)!=null&&i.content)&&(this._emit("content",v.delta.content,b.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:b.message.content,parsed:b.message.parsed})),v.delta.refusal!=null&&((a=b.message)==null?void 0:a.role)==="assistant"&&((o=b.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:b.message.refusal}),((l=v.logprobs)==null?void 0:l.content)!=null&&((u=b.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=v.logprobs)==null?void 0:d.content,snapshot:((h=b.logprobs)==null?void 0:h.content)??[]}),((m=v.logprobs)==null?void 0:m.refusal)!=null&&((p=b.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(y=v.logprobs)==null?void 0:y.refusal,snapshot:((w=b.logprobs)==null?void 0:w.refusal)??[]});const _=j(this,Et,"m",Wu).call(this,b);b.finish_reason&&(j(this,Et,"m",of).call(this,b),_.current_tool_call_index!=null&&j(this,Et,"m",af).call(this,b,_.current_tool_call_index));for(const E of v.delta.tool_calls??[])_.current_tool_call_index!==E.index&&(j(this,Et,"m",of).call(this,b),_.current_tool_call_index!=null&&j(this,Et,"m",af).call(this,b,_.current_tool_call_index)),_.current_tool_call_index=E.index;for(const E of v.delta.tool_calls??[]){const C=(x=b.message.tool_calls)==null?void 0:x[E.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(g=C.function)==null?void 0:g.name,index:E.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((f=E.function)==null?void 0:f.arguments)??""}):(C==null||C.type,void 0))}}},af=function(n,r){var a,o,l;if(j(this,Et,"m",Wu).call(this,n).done_tool_calls.has(r))return;const i=(a=n.message.tool_calls)==null?void 0:a[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(o=j(this,hs,"f"))==null?void 0:o.tools)==null?void 0:l.find(d=>_h(d)&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Yc(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},of=function(n){var s,i;const r=j(this,Et,"m",Wu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=j(this,Et,"m",lf).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},qu=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const n=j(this,Ys,"f");if(!n)throw new he("request ended without sending any chunks");return be(this,Ys,void 0),be(this,Na,[]),H5(n,j(this,hs,"f"))},lf=function(){var r;const n=(r=j(this,hs,"f"))==null?void 0:r.response_format;return Ev(n)?n:null},M_=function(n){var r,s,i,a;let o=j(this,Ys,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=be(this,Ys,{...u,choices:[]});for(const{delta:d,finish_reason:h,index:m,logprobs:p=null,...y}of n.choices){let w=o.choices[m];if(w||(w=o.choices[m]={finish_reason:h,index:m,message:{},logprobs:p,...y}),p)if(!w.logprobs)w.logprobs=Object.assign({},p);else{const{content:E,refusal:C,...S}=p;Object.assign(w.logprobs,S),E&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...E)),C&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...C))}if(h&&(w.finish_reason=h,j(this,hs,"f")&&mC(j(this,hs,"f")))){if(h==="length")throw new K1;if(h==="content_filter")throw new Y1}if(Object.assign(w,y),!d)continue;const{content:x,refusal:g,function_call:f,role:v,tool_calls:b,..._}=d;if(Object.assign(w.message,_),g&&(w.message.refusal=(w.message.refusal||"")+g),v&&(w.message.role=v),f&&(w.message.function_call?(f.name&&(w.message.function_call.name=f.name),f.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=f.arguments)):w.message.function_call=f),x&&(w.message.content=(w.message.content||"")+x,!w.message.refusal&&j(this,Et,"m",lf).call(this)&&(w.message.parsed=L_(w.message.content))),b){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:E,id:C,type:S,function:N,...D}of b){const F=(a=w.message.tool_calls)[E]??(a[E]={});Object.assign(F,D),C&&(F.id=C),S&&(F.type=S),N&&(F.function??(F.function={name:N.name??"",arguments:""})),N!=null&&N.name&&(F.function.name=N.name),N!=null&&N.arguments&&(F.function.arguments+=N.arguments,D5(j(this,hs,"f"),F)&&(F.function.parsed_arguments=L_(F.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function H5(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:u,finish_reason:d,index:h,logprobs:m,...p})=>{if(!d)throw new he(`missing finish_reason for choice ${h}`);const{content:y=null,function_call:w,tool_calls:x,...g}=u,f=u.role;if(!f)throw new he(`missing role for choice ${h}`);if(w){const{arguments:v,name:b}=w;if(v==null)throw new he(`missing function_call.arguments for choice ${h}`);if(!b)throw new he(`missing function_call.name for choice ${h}`);return{...p,message:{content:y,function_call:{arguments:v,name:b},role:f,refusal:u.refusal??null},finish_reason:d,index:h,logprobs:m}}return x?{...p,index:h,finish_reason:d,logprobs:m,message:{...g,role:f,content:y,refusal:u.refusal??null,tool_calls:x.map((v,b)=>{const{function:_,type:E,id:C,...S}=v,{arguments:N,name:D,...F}=_||{};if(C==null)throw new he(`missing choices[${h}].tool_calls[${b}].id
${Ku(t)}`);if(E==null)throw new he(`missing choices[${h}].tool_calls[${b}].type
${Ku(t)}`);if(D==null)throw new he(`missing choices[${h}].tool_calls[${b}].function.name
${Ku(t)}`);if(N==null)throw new he(`missing choices[${h}].tool_calls[${b}].function.arguments
${Ku(t)}`);return{...S,id:C,type:E,function:{...F,name:D,arguments:N}}})}}:{...p,message:{...g,content:y,role:f,refusal:u.refusal??null},finish_reason:d,index:h,logprobs:m}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return P5(l,e)}function Ku(t){return JSON.stringify(t)}class Eh extends Ec{static fromReadableStream(e){const n=new Eh(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Eh(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let Rv=class extends ce{constructor(){super(...arguments),this.messages=new hC(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(V`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(V`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Tt,{query:e,...n})}delete(e,n){return this._client.delete(V`/chat/completions/${e}`,n)}parse(e,n){return L5(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Cv(r,e))}runTools(e,n){return e.stream?Eh.runTools(this._client,e,n):Iv.runTools(this._client,e,n)}stream(e,n){return Ec.createChatCompletion(this._client,e,n)}};Rv.Messages=hC;class Ov extends ce{constructor(){super(...arguments),this.completions=new Rv(this._client)}}Ov.Completions=Rv;const PC=Symbol("brand.privateNullableHeaders");function*W5(t){if(!t)return;if(PC in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():__(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=__(r[1])?r[1]:[r[1]];let a=!1;for(const o of i)o!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,o])}}const re=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,a]of W5(r)){const o=i.toLowerCase();s.has(o)||(e.delete(i),s.add(o)),a===null?(e.delete(i),n.add(o)):(e.append(i,a),n.delete(o))}}return{[PC]:!0,values:e,nulls:n}};class jC extends ce{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:re([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class $C extends ce{create(e,n){return this._client.post("/audio/transcriptions",ma({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class DC extends ce{create(e,n){return this._client.post("/audio/translations",ma({body:e,...n,__metadata:{model:e.model}},this._client))}}class Zc extends ce{constructor(){super(...arguments),this.transcriptions=new $C(this._client),this.translations=new DC(this._client),this.speech=new jC(this._client)}}Zc.Transcriptions=$C;Zc.Translations=DC;Zc.Speech=jC;class LC extends ce{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(V`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Tt,{query:e,...n})}cancel(e,n){return this._client.post(V`/batches/${e}/cancel`,n)}}class MC extends ce{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/assistants/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/assistants/${e}`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Tt,{query:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/assistants/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let FC=class extends ce{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class UC extends ce{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Sm=class extends ce{constructor(){super(...arguments),this.sessions=new FC(this._client),this.transcriptionSessions=new UC(this._client)}};Sm.Sessions=FC;Sm.TranscriptionSessions=UC;class zC extends ce{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(V`/chatkit/sessions/${e}/cancel`,{...n,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let GC=class extends ce{retrieve(e,n){return this._client.get(V`/chatkit/threads/${e}`,{...n,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",bh,{query:e,...n,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/chatkit/threads/${e}`,{...n,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(V`/chatkit/threads/${e}/items`,bh,{query:n,...r,headers:re([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class km extends ce{constructor(){super(...arguments),this.sessions=new zC(this._client),this.threads=new GC(this._client)}}km.Sessions=zC;km.Threads=GC;class BC extends ce{create(e,n,r){return this._client.post(V`/threads/${e}/messages`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(V`/threads/${s}/messages/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/messages/${e}`,{body:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/threads/${e}/messages`,Tt,{query:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(V`/threads/${s}/messages/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class VC extends ce{retrieve(e,n,r){const{thread_id:s,run_id:i,...a}=n;return this._client.get(V`/threads/${s}/runs/${i}/steps/${e}`,{query:a,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(V`/threads/${s}/runs/${e}/steps`,Tt,{query:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const q5=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var cf={};const Ia=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=cf==null?void 0:cf[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var Bt,Ji,py,Vr,Dd,br,Xi,no,Vi,Ch,Dn,Ld,Md,Yl,Tl,Al,F_,U_,z_,G_,B_,V_,H_;class Zl extends Nv{constructor(){super(...arguments),Bt.add(this),py.set(this,[]),Vr.set(this,{}),Dd.set(this,{}),br.set(this,void 0),Xi.set(this,void 0),no.set(this,void 0),Vi.set(this,void 0),Ch.set(this,void 0),Dn.set(this,void 0),Ld.set(this,void 0),Md.set(this,void 0),Yl.set(this,void 0)}[(py=new WeakMap,Vr=new WeakMap,Dd=new WeakMap,br=new WeakMap,Xi=new WeakMap,no=new WeakMap,Vi=new WeakMap,Ch=new WeakMap,Dn=new WeakMap,Ld=new WeakMap,Md=new WeakMap,Yl=new WeakMap,Bt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ji;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Kr.fromReadableStream(e,this.controller);for await(const a of s)j(this,Bt,"m",Tl).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new Fn;return this._addRun(j(this,Bt,"m",Al).call(this))}toReadableStream(){return new Kr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new Ji;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.submitToolOutputs(n,a,{...s,signal:this.controller.signal});this._connected();for await(const u of o)j(this,Bt,"m",Tl).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Fn;return this._addRun(j(this,Bt,"m",Al).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ji;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new Ji;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return j(this,Ld,"f")}currentRun(){return j(this,Md,"f")}currentMessageSnapshot(){return j(this,br,"f")}currentRunStepSnapshot(){return j(this,Yl,"f")}async finalRunSteps(){return await this.done(),Object.values(j(this,Vr,"f"))}async finalMessages(){return await this.done(),Object.values(j(this,Dd,"f"))}async finalRun(){if(await this.done(),!j(this,Xi,"f"))throw Error("Final run was not received.");return j(this,Xi,"f")}async _createThreadAssistantStream(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of a)j(this,Bt,"m",Tl).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Fn;return this._addRun(j(this,Bt,"m",Al).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const u of o)j(this,Bt,"m",Tl).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Fn;return this._addRun(j(this,Bt,"m",Al).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(ef(i)&&ef(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!ef(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ji=Zl,Tl=function(e){if(!this.ended)switch(be(this,Ld,e),j(this,Bt,"m",z_).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":j(this,Bt,"m",H_).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":j(this,Bt,"m",U_).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":j(this,Bt,"m",F_).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Al=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");if(!j(this,Xi,"f"))throw Error("Final run has not been received");return j(this,Xi,"f")},F_=function(e){const[n,r]=j(this,Bt,"m",B_).call(this,e,j(this,br,"f"));be(this,br,n),j(this,Dd,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=j(this,no,"f")){if(j(this,Vi,"f"))switch(j(this,Vi,"f").type){case"text":this._emit("textDone",j(this,Vi,"f").text,j(this,br,"f"));break;case"image_file":this._emit("imageFileDone",j(this,Vi,"f").image_file,j(this,br,"f"));break}be(this,no,s.index)}be(this,Vi,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(j(this,no,"f")!==void 0){const s=e.data.content[j(this,no,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,j(this,br,"f"));break;case"text":this._emit("textDone",s.text,j(this,br,"f"));break}}j(this,br,"f")&&this._emit("messageDone",e.data),be(this,br,void 0)}},U_=function(e){const n=j(this,Bt,"m",G_).call(this,e);switch(be(this,Yl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==j(this,Ch,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(j(this,Dn,"f")&&this._emit("toolCallDone",j(this,Dn,"f")),be(this,Ch,i.index),be(this,Dn,n.step_details.tool_calls[i.index]),j(this,Dn,"f")&&this._emit("toolCallCreated",j(this,Dn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":be(this,Yl,void 0),e.data.step_details.type=="tool_calls"&&j(this,Dn,"f")&&(this._emit("toolCallDone",j(this,Dn,"f")),be(this,Dn,void 0)),this._emit("runStepDone",e.data,n);break}},z_=function(e){j(this,py,"f").push(e),this._emit("event",e)},G_=function(e){switch(e.event){case"thread.run.step.created":return j(this,Vr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=j(this,Vr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ji.accumulateDelta(n,r.delta);j(this,Vr,"f")[e.data.id]=s}return j(this,Vr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":j(this,Vr,"f")[e.data.id]=e.data;break}if(j(this,Vr,"f")[e.data.id])return j(this,Vr,"f")[e.data.id];throw new Error("No snapshot available")},B_=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=j(this,Bt,"m",V_).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},V_=function(e,n){return Ji.accumulateDelta(n,e)},H_=function(e){switch(be(this,Md,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":be(this,Xi,e.data),j(this,Dn,"f")&&(this._emit("toolCallDone",j(this,Dn,"f")),be(this,Dn,void 0));break}};let Pv=class extends ce{constructor(){super(...arguments),this.steps=new VC(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(V`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(V`/threads/${s}/runs/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/runs/${e}`,{body:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/threads/${e}/runs`,Tt,{query:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(V`/threads/${s}/runs/${e}/cancel`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Zl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i;const s=re([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Kc(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Zl.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Zl.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Pv.Steps=VC;class Tm extends ce{constructor(){super(...arguments),this.runs=new Pv(this._client),this.messages=new BC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/threads/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/threads/${e}`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(V`/threads/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Zl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Tm.Runs=Pv;Tm.Messages=BC;class Go extends ce{constructor(){super(...arguments),this.realtime=new Sm(this._client),this.chatkit=new km(this._client),this.assistants=new MC(this._client),this.threads=new Tm(this._client)}}Go.Realtime=Sm;Go.ChatKit=km;Go.Assistants=MC;Go.Threads=Tm;class HC extends ce{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class WC extends ce{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(V`/containers/${s}/files/${e}/content`,{...r,headers:re([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let jv=class extends ce{constructor(){super(...arguments),this.content=new WC(this._client)}create(e,n,r){return this._client.post(V`/containers/${e}/files`,ma({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(V`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(V`/containers/${e}/files`,Tt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(V`/containers/${s}/files/${e}`,{...r,headers:re([{Accept:"*/*"},r==null?void 0:r.headers])})}};jv.Content=WC;class $v extends ce{constructor(){super(...arguments),this.files=new jv(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(V`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Tt,{query:e,...n})}delete(e,n){return this._client.delete(V`/containers/${e}`,{...n,headers:re([{Accept:"*/*"},n==null?void 0:n.headers])})}}$v.Files=jv;class qC extends ce{create(e,n,r){const{include:s,...i}=n;return this._client.post(V`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(V`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(V`/conversations/${e}/items`,bh,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(V`/conversations/${s}/items/${e}`,r)}}class Dv extends ce{constructor(){super(...arguments),this.items=new qC(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(V`/conversations/${e}`,n)}update(e,n,r){return this._client.post(V`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(V`/conversations/${e}`,n)}}Dv.Items=qC;let KC=class extends ce{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&Gt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(Gt(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=q5(l)}),a)))}};class YC extends ce{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(V`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(V`/evals/${s}/runs/${e}/output_items`,Tt,{query:i,...r})}}class Lv extends ce{constructor(){super(...arguments),this.outputItems=new YC(this._client)}create(e,n,r){return this._client.post(V`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(V`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(V`/evals/${e}/runs`,Tt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(V`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(V`/evals/${s}/runs/${e}`,r)}}Lv.OutputItems=YC;class Mv extends ce{constructor(){super(...arguments),this.runs=new Lv(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(V`/evals/${e}`,n)}update(e,n,r){return this._client.post(V`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Tt,{query:e,...n})}delete(e,n){return this._client.delete(V`/evals/${e}`,n)}}Mv.Runs=Lv;let ZC=class extends ce{create(e,n){return this._client.post("/files",ma({body:e,...n},this._client))}retrieve(e,n){return this._client.get(V`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Tt,{query:e,...n})}delete(e,n){return this._client.delete(V`/files/${e}`,n)}content(e,n){return this._client.get(V`/files/${e}/content`,{...n,headers:re([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await Kc(n),a=await this.retrieve(e),Date.now()-i>r)throw new xm({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class JC extends ce{}let XC=class extends ce{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Fv extends ce{constructor(){super(...arguments),this.graders=new XC(this._client)}}Fv.Graders=XC;class QC extends ce{create(e,n,r){return this._client.getAPIList(V`/fine_tuning/checkpoints/${e}/permissions`,_m,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(V`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(V`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Uv=class extends ce{constructor(){super(...arguments),this.permissions=new QC(this._client)}};Uv.Permissions=QC;class eN extends ce{list(e,n={},r){return this._client.getAPIList(V`/fine_tuning/jobs/${e}/checkpoints`,Tt,{query:n,...r})}}class zv extends ce{constructor(){super(...arguments),this.checkpoints=new eN(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(V`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Tt,{query:e,...n})}cancel(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(V`/fine_tuning/jobs/${e}/events`,Tt,{query:n,...r})}pause(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/resume`,n)}}zv.Checkpoints=eN;class Bo extends ce{constructor(){super(...arguments),this.methods=new JC(this._client),this.jobs=new zv(this._client),this.checkpoints=new Uv(this._client),this.alpha=new Fv(this._client)}}Bo.Methods=JC;Bo.Jobs=zv;Bo.Checkpoints=Uv;Bo.Alpha=Fv;class tN extends ce{}class Gv extends ce{constructor(){super(...arguments),this.graderModels=new tN(this._client)}}Gv.GraderModels=tN;class nN extends ce{createVariation(e,n){return this._client.post("/images/variations",ma({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ma({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class rN extends ce{retrieve(e,n){return this._client.get(V`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",_m,e)}delete(e,n){return this._client.delete(V`/models/${e}`,n)}}class sN extends ce{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class iN extends ce{accept(e,n,r){return this._client.post(V`/realtime/calls/${e}/accept`,{body:n,...r,headers:re([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(V`/realtime/calls/${e}/hangup`,{...n,headers:re([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(V`/realtime/calls/${e}/refer`,{body:n,...r,headers:re([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(V`/realtime/calls/${e}/reject`,{body:n,...r,headers:re([{Accept:"*/*"},r==null?void 0:r.headers])})}}class aN extends ce{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Am extends ce{constructor(){super(...arguments),this.clientSecrets=new aN(this._client),this.calls=new iN(this._client)}}Am.ClientSecrets=aN;Am.Calls=iN;function K5(t,e){return!e||!Z5(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:oN(t,e)}function oN(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:Q5(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:Y5(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||fy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function Y5(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function Z5(t){var e;return!!Ev((e=t.text)==null?void 0:e.format)}function J5(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function X5(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Q5(t,e){const n=X5(t.tools??[],e.name);return{...e,...e,parsed_arguments:J5(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function fy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ra,Yu,Zs,Zu,W_,q_,K_,Y_;class Bv extends Nv{constructor(e){super(),Ra.add(this),Yu.set(this,void 0),Zs.set(this,void 0),Zu.set(this,void 0),be(this,Yu,e)}static createResponse(e,n,r){const s=new Bv(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),j(this,Ra,"m",W_).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of i)j(this,Ra,"m",q_).call(this,l,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Fn;return j(this,Ra,"m",K_).call(this)}[(Yu=new WeakMap,Zs=new WeakMap,Zu=new WeakMap,Ra=new WeakSet,W_=function(){this.ended||be(this,Zs,void 0)},q_=function(n,r){if(this.ended)return;const s=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},i=j(this,Ra,"m",Y_).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new he(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new he(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new he(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new he(`missing output at index ${n.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:s(n.type,n);break}},K_=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const n=j(this,Zs,"f");if(!n)throw new he("request ended without sending any events");be(this,Zs,void 0);const r=e4(n,j(this,Yu,"f"));return be(this,Zu,r),r},Y_=function(n){var s;let r=j(this,Zs,"f");if(!r){if(n.type!=="response.created")throw new he(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=be(this,Zs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);const a=i.type,o=n.part;a==="message"&&o.type!=="reasoning_text"?i.content.push(o):a==="reasoning"&&o.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(o));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);if(i.type==="message"){const a=i.content[n.content_index];if(!a)throw new he(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new he(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const a=(s=i.content)==null?void 0:s[n.content_index];if(!a)throw new he(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new he(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{be(this,Zs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=j(this,Zu,"f");if(!e)throw new he("stream ended without producing a ChatCompletion");return e}}function e4(t,e){return K5(t,e)}class lN extends ce{list(e,n={},r){return this._client.getAPIList(V`/responses/${e}/input_items`,Tt,{query:n,...r})}}class cN extends ce{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Em extends ce{constructor(){super(...arguments),this.inputItems=new lN(this._client),this.inputTokens=new cN(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&fy(r),r))}retrieve(e,n={},r){return this._client.get(V`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&fy(s),s))}delete(e,n){return this._client.delete(V`/responses/${e}`,{...n,headers:re([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>oN(r,e))}stream(e,n){return Bv.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(V`/responses/${e}/cancel`,n)}}Em.InputItems=lN;Em.InputTokens=cN;class uN extends ce{create(e,n,r){return this._client.post(V`/uploads/${e}/parts`,ma({body:n,...r},this._client))}}class Vv extends ce{constructor(){super(...arguments),this.parts=new uN(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(V`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(V`/uploads/${e}/complete`,{body:n,...r})}}Vv.Parts=uN;const t4=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class dN extends ce{create(e,n,r){return this._client.post(V`/vector_stores/${e}/file_batches`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(V`/vector_stores/${s}/file_batches/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(V`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(V`/vector_stores/${s}/file_batches/${e}/files`,Tt,{query:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i;const s=re([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Kc(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,a=Math.min(i,n.length),o=this._client,l=n.values(),u=[...r];async function d(m){for(let p of m){const y=await o.files.create({file:p,purpose:"assistants"},s);u.push(y.id)}}const h=Array(a).fill(l).map(d);return await t4(h),await this.createAndPoll(e,{file_ids:u})}}class hN extends ce{create(e,n,r){return this._client.post(V`/vector_stores/${e}/files`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(V`/vector_stores/${s}/files/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(V`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/vector_stores/${e}/files`,Tt,{query:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(V`/vector_stores/${s}/files/${e}`,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){var i;const s=re([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.response.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(l=d)}}await Kc(l);break;case"failed":case"completed":return o}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(V`/vector_stores/${s}/files/${e}/content`,_m,{...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Cm extends ce{constructor(){super(...arguments),this.files=new hN(this._client),this.fileBatches=new dN(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/vector_stores/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/vector_stores/${e}`,{body:n,...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Tt,{query:e,...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/vector_stores/${e}`,{...n,headers:re([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(V`/vector_stores/${e}/search`,_m,{body:n,method:"post",...r,headers:re([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Cm.Files=hN;Cm.FileBatches=dN;class mN extends ce{create(e,n){return this._client.post("/videos",j_({body:e,...n},this._client))}retrieve(e,n){return this._client.get(V`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",bh,{query:e,...n})}delete(e,n){return this._client.delete(V`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(V`/videos/${e}/content`,{query:n,...r,headers:re([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(V`/videos/${e}/remix`,j_({body:n,...r},this._client))}}var $a,pN,Fd;class fN extends ce{constructor(){super(...arguments),$a.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");j(this,$a,"m",pN).call(this,r);const i=re([n]).values,a=j(this,$a,"m",Fd).call(this,i,"webhook-signature"),o=j(this,$a,"m",Fd).call(this,i,"webhook-timestamp"),l=j(this,$a,"m",Fd).call(this,i,"webhook-id"),u=parseInt(o,10);if(isNaN(u))throw new vl("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-u>s)throw new vl("Webhook timestamp is too old");if(u>d+s)throw new vl("Webhook timestamp is too new");const h=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${o}.${e}`:`${o}.${e}`,y=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of h)try{const x=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",y,x,new TextEncoder().encode(p)))return}catch{continue}throw new vl("The given webhook signature does not match the expected signature")}}$a=new WeakSet,pN=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Fd=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var gy,Hv,Ud,gN;class Ne{constructor({baseURL:e=Ia("OPENAI_BASE_URL"),apiKey:n=Ia("OPENAI_API_KEY"),organization:r=Ia("OPENAI_ORG_ID")??null,project:s=Ia("OPENAI_PROJECT_ID")??null,webhookSecret:i=Ia("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(gy.add(this),Ud.set(this,void 0),this.completions=new HC(this),this.chat=new Ov(this),this.embeddings=new KC(this),this.files=new ZC(this),this.images=new nN(this),this.audio=new Zc(this),this.moderations=new sN(this),this.models=new rN(this),this.fineTuning=new Bo(this),this.graders=new Gv(this),this.vectorStores=new Cm(this),this.webhooks=new fN(this),this.beta=new Go(this),this.batches=new LC(this),this.uploads=new Vv(this),this.responses=new Em(this),this.realtime=new Am(this),this.conversations=new Dv(this),this.evals=new Mv(this),this.containers=new $v(this),this.videos=new mN(this),n===void 0)throw new he("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:s,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&n5())throw new he(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??Hv.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=O_(o.logLevel,"ClientOptions.logLevel",this)??O_(Ia("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??o5(),be(this,Ud,c5),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return re([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return f5(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Pa}`}defaultIdempotencyKey(){return`stainless-node-retry-${F1()}`}makeStatusError(e,n,r,s){return Wt.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof he?r:new he(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new he(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!j(this,gy,"m",gN).call(this)&&r||this.baseURL,i=JM(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return XM(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new bm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var g,f;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:a,url:o,timeout:l}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(a,{url:o,options:s});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if(Gt(this).debug(`[${u}] sending request`,Ui({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:a.headers})),(g=s.signal)!=null&&g.aborted)throw new Fn;const m=new AbortController,p=await this.fetchWithTimeout(o,a,l,m).catch(sy),y=Date.now();if(p instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if((f=s.signal)!=null&&f.aborted)throw new Fn;const b=ry(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return Gt(this).info(`[${u}] connection ${b?"timed out":"failed"} - ${v}`),Gt(this).debug(`[${u}] connection ${b?"timed out":"failed"} (${v})`,Ui({retryOfRequestLogID:r,url:o,durationMs:y-h,message:p.message})),this.retryRequest(s,n,r??u);throw Gt(this).info(`[${u}] connection ${b?"timed out":"failed"} - error; no more retries left`),Gt(this).debug(`[${u}] connection ${b?"timed out":"failed"} (error; no more retries left)`,Ui({retryOfRequestLogID:r,url:o,durationMs:y-h,message:p.message})),b?new xm:new vm({cause:p})}const w=[...p.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,b])=>", "+v+": "+JSON.stringify(b)).join(""),x=`[${u}${d}${w}] ${a.method} ${o} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${y-h}ms`;if(!p.ok){const v=await this.shouldRetry(p);if(n&&v){const N=`retrying, ${n} attempts remaining`;return await l5(p.body),Gt(this).info(`${x} - ${N}`),Gt(this).debug(`[${u}] response error (${N})`,Ui({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:y-h})),this.retryRequest(s,n,r??u,p.headers)}const b=v?"error; no more retries left":"error; not retryable";Gt(this).info(`${x} - ${b}`);const _=await p.text().catch(N=>sy(N).message),E=t5(_),C=E?void 0:_;throw Gt(this).debug(`[${u}] response error (${b})`,Ui({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:C,durationMs:Date.now()-h})),this.makeStatusError(p.status,E,C,p.headers)}return Gt(this).info(x),Gt(this).debug(`[${u}] response start`,Ui({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:y-h})),{response:p,options:s,controller:m,requestLogID:u,retryOfRequestLogID:r,startTime:h}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new k5(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:a,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r),u=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,d={signal:s.signal,...u?{duplex:"half"}:{},method:"GET",...o};a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const a=s==null?void 0:s.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(i=l)}const o=s==null?void 0:s.get("retry-after");if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Kc(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:a,defaultBaseURL:o}=r,l=this.buildURL(i,a,o);"timeout"in r&&e5("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:s,bodyHeaders:u,retryCount:n});return{req:{method:s,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=re([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...a5(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=re([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:X1(e)}:j(this,Ud,"f").call(this,{body:e,headers:r})}}Hv=Ne,Ud=new WeakMap,gy=new WeakSet,gN=function(){return this.baseURL!=="https://api.openai.com/v1"};Ne.OpenAI=Hv;Ne.DEFAULT_TIMEOUT=6e5;Ne.OpenAIError=he;Ne.APIError=Wt;Ne.APIConnectionError=vm;Ne.APIConnectionTimeoutError=xm;Ne.APIUserAbortError=Fn;Ne.NotFoundError=B1;Ne.ConflictError=V1;Ne.RateLimitError=W1;Ne.BadRequestError=U1;Ne.AuthenticationError=z1;Ne.InternalServerError=q1;Ne.PermissionDeniedError=G1;Ne.UnprocessableEntityError=H1;Ne.InvalidWebhookSignatureError=vl;Ne.toFile=N5;Ne.Completions=HC;Ne.Chat=Ov;Ne.Embeddings=KC;Ne.Files=ZC;Ne.Images=nN;Ne.Audio=Zc;Ne.Moderations=sN;Ne.Models=rN;Ne.FineTuning=Bo;Ne.Graders=Gv;Ne.VectorStores=Cm;Ne.Webhooks=fN;Ne.Beta=Go;Ne.Batches=LC;Ne.Uploads=Vv;Ne.Responses=Em;Ne.Realtime=Am;Ne.Conversations=Dv;Ne.Evals=Mv;Ne.Containers=$v;Ne.Videos=mN;function yN(t){if(!t||typeof t!="object")return t;let e;return t.constructor.name===xm.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Fn.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="AbortError"):"status"in t&&t.status===400&&"message"in t&&typeof t.message=="string"&&t.message.includes("tool_calls")?e=Bu(t,"INVALID_TOOL_RESULTS"):"status"in t&&t.status===401?e=Bu(t,"MODEL_AUTHENTICATION"):"status"in t&&t.status===429?e=Bu(t,"MODEL_RATE_LIMIT"):"status"in t&&t.status===404?e=Bu(t,"MODEL_NOT_FOUND"):e=t,e}var n4=Object.defineProperty,De=(t,e)=>{for(var n in e)n4(t,n,{get:e[n],enumerable:!0})};function is(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Wv(t){return is(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function qv(t){return is(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function r4(t){return is(t)&&t.source_type==="text"&&"text"in t&&typeof t.text=="string"}function vN(t){return is(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function xN(t){if(is(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function yy(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const n=e[0].trim(),r=e[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const s={};for(const i of t.split(";").slice(1)){const a=i.split("=");if(a.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const o=a[0].trim(),l=a[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);s[o]=l}return{type:n,subtype:r,parameters:s}}function Cc({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const s=e?Uint8Array.from(atob(n[2]),i=>i.charCodeAt(0)):n[2];return{mime_type:r,data:s}}}function Kv(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function wN(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var s4=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const i4=Gk(s4);var bN={exports:{}};const a4=/[\p{Lu}]/u,o4=/[\p{Ll}]/u,Z_=/^[\p{Lu}](?![\p{Lu}])/gu,_N=/([\p{Alpha}\p{N}_]|$)/u,SN=/[_.\- ]+/,l4=new RegExp("^"+SN.source),J_=new RegExp(SN.source+_N.source,"gu"),X_=new RegExp("\\d+"+_N.source,"gu"),c4=(t,e,n)=>{let r=!1,s=!1,i=!1;for(let a=0;a<t.length;a++){const o=t[a];r&&a4.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,i=s,s=!0,a++):s&&i&&o4.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),i=s,s=!1,r=!0):(r=e(o)===o&&n(o)!==o,i=s,s=n(o)===o&&e(o)!==o)}return t},u4=(t,e)=>(Z_.lastIndex=0,t.replace(Z_,n=>e(n))),d4=(t,e)=>(J_.lastIndex=0,X_.lastIndex=0,t.replace(J_,(n,r)=>e(r)).replace(X_,n=>e(n))),kN=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(i=>i.trim()).filter(i=>i.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),r=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=c4(t,n,r)),t=t.replace(l4,""),e.preserveConsecutiveUppercase?t=u4(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),d4(t,r))};bN.exports=kN;bN.exports.default=kN;function h4(t,e){return(e==null?void 0:e[t])||i4(t)}function m4(t,e,n){const r={};for(const s in t)Object.hasOwn(t,s)&&(r[e(s,n)]=t[s]);return r}var p4={};De(p4,{Serializable:()=>ko,get_lc_unique_name:()=>Yv});function Q_(t){return Array.isArray(t)?[...t]:{...t}}function f4(t,e){const n=Q_(t);for(const[r,s]of Object.entries(e)){const[i,...a]=r.split(".").reverse();let o=n;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=Q_(o[l]),o=o[l]}o[i]!==void 0&&(o[i]={lc:1,type:"secret",id:[s]})}return n}function Yv(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var ko=class TN{constructor(e,...n){T(this,"lc_serializable",!1);T(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(r)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Yv(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof TN||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((s,i)=>(s[i]=i in this?this[i]:this.lc_kwargs[i],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(n,Reflect.get(s,"lc_secrets",this)),Object.assign(r,Reflect.get(s,"lc_attributes",this));return Object.keys(n).forEach(s=>{let i=this,a=r;const[o,...l]=s.split(".").reverse();for(const u of l.reverse()){if(!(u in i)||i[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof i[u]=="object"&&i[u]!=null?a[u]={}:Array.isArray(i[u])&&(a[u]=[])),i=i[u],a=a[u]}o in i&&i[o]!==void 0&&(a[o]=a[o]||i[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:m4(Object.keys(n).length?f4(r,n):r,h4,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function me(t,e){return Te(t)&&t.type===e}function Te(t){return typeof t=="object"&&t!==null}function ts(t){return Array.isArray(t)}function ne(t){return typeof t=="string"}function _r(t){return typeof t=="number"}function Zv(t){return t instanceof Uint8Array}function eS(t){try{return JSON.parse(t)}catch{return}}const Nc=t=>t();function g4(t){if(t.type==="char_location"&&ne(t.document_title)&&_r(t.start_char_index)&&_r(t.end_char_index)&&ne(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="page_location"&&ne(t.document_title)&&_r(t.start_page_number)&&_r(t.end_page_number)&&ne(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="content_block_location"&&ne(t.document_title)&&_r(t.start_block_index)&&_r(t.end_block_index)&&ne(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="web_search_result_location"&&ne(t.url)&&ne(t.title)&&ne(t.encrypted_index)&&ne(t.cited_text)){const{url:e,title:n,encrypted_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"url",url:e,title:n,startIndex:Number(r),endIndex:Number(r),citedText:s}}if(t.type==="search_result_location"&&ne(t.source)&&ne(t.title)&&_r(t.start_block_index)&&_r(t.end_block_index)&&ne(t.cited_text)){const{source:e,title:n,start_block_index:r,end_block_index:s,cited_text:i,...a}=t;return{...a,type:"citation",source:"search",url:e,title:n??void 0,startIndex:r,endIndex:s,citedText:i}}}function AN(t){if(me(t,"document")&&Te(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ne(t.source.media_type)&&ne(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ne(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&ne(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&ne(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(me(t,"image")&&Te(t.source)&&"type"in t.source){if(t.source.type==="base64"&&ne(t.source.media_type)&&ne(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&ne(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&ne(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function y4(t){function*e(){for(const n of t){const r=AN(n);r?yield r:yield n}}return Array.from(e())}function tS(t){function*e(){var r;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n){if(me(s,"text")&&ne(s.text)){const{text:i,citations:a,...o}=s;if(ts(a)&&a.length){const l=a.reduce((u,d)=>{const h=g4(d);return h?[...u,h]:u},[]);yield{...o,type:"text",text:i,annotations:l};continue}else{yield{...o,type:"text",text:i};continue}}else if(me(s,"thinking")&&ne(s.thinking)){const{thinking:i,signature:a,...o}=s;yield{...o,type:"reasoning",reasoning:i,signature:a};continue}else if(me(s,"redacted_thinking")){yield{type:"non_standard",value:s};continue}else if(me(s,"tool_use")&&ne(s.name)&&ne(s.id)){yield{type:"tool_call",id:s.id,name:s.name,args:s.input};continue}else if(me(s,"input_json_delta")){if(x4(t)&&((r=t.tool_call_chunks)!=null&&r.length)){const i=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:i.id,name:i.name,args:i.args,index:i.index};continue}}else if(me(s,"server_tool_use")&&ne(s.name)&&ne(s.id)){const{name:i,id:a}=s;if(i==="web_search"){const o=Nc(()=>{if(typeof s.input=="string")return s.input;if(Te(s.input)&&ne(s.input.query))return s.input.query;if(ne(s.partial_json)){const l=eS(s.partial_json);if(l!=null&&l.query)return l.query}return""});yield{id:a,type:"server_tool_call",name:"web_search",args:{query:o}};continue}else if(s.name==="code_execution"){const o=Nc(()=>{if(typeof s.input=="string")return s.input;if(Te(s.input)&&ne(s.input.code))return s.input.code;if(ne(s.partial_json)){const l=eS(s.partial_json);if(l!=null&&l.code)return l.code}return""});yield{id:a,type:"server_tool_call",name:"code_execution",args:{code:o}};continue}}else if(me(s,"web_search_tool_result")&&ne(s.tool_use_id)&&ts(s.content)){const{content:i,tool_use_id:a}=s,o=i.reduce((l,u)=>me(u,"web_search_result")?[...l,u.url]:l,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:a,status:"success",output:{urls:o}};continue}else if(me(s,"code_execution_tool_result")&&ne(s.tool_use_id)&&Te(s.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(me(s,"mcp_tool_use")){yield{id:s.id,type:"server_tool_call",name:"mcp_tool_use",args:s.input};continue}else if(me(s,"mcp_tool_result")&&ne(s.tool_use_id)&&Te(s.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(me(s,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:s.input};continue}else if(me(s,"search_result")){yield{id:s.id,type:"non_standard",value:s};continue}else if(me(s,"tool_result")){yield{id:s.id,type:"non_standard",value:s};continue}else{const i=AN(s);if(i){yield i;continue}}yield{type:"non_standard",value:s}}}return Array.from(e())}const v4={translateContent:tS,translateContentChunk:tS};function x4(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function w4(t){return Wv(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:qv(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:vN(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function b4(t){return t.map(w4)}function _4(t){return!!(me(t,"image_url")&&Te(t.image_url)||me(t,"input_audio")&&Te(t.input_audio)||me(t,"file")&&Te(t.file))}function S4(t){if(me(t,"image_url")&&Te(t.image_url)&&ne(t.image_url.url)){const e=Cc({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(me(t,"input_audio")&&Te(t.input_audio)&&ne(t.input_audio.data)&&ne(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(me(t,"file")&&Te(t.file)&&ne(t.file.data)){const e=Cc({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(ne(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function k4(t){const e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Jv(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function T4(t){const e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Jv(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function Jv(t){const e=[];for(const n of t)_4(n)?e.push(S4(n)):e.push(n);return e}function A4(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:r,end_index:s}=t;return{type:"citation",url:e,title:n,startIndex:r,endIndex:s}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:r}=t;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:e}}return t}function EN(t){function*e(){var r;Te((r=t.additional_kwargs)==null?void 0:r.reasoning)&&ts(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((i,a)=>Te(a)&&ne(a.text)?`${i}${a.text}`:i,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n)if(me(s,"text")){const{text:i,annotations:a,...o}=s;Array.isArray(a)?yield{...o,type:"text",text:String(i),annotations:a.map(A4)}:yield{...o,type:"text",text:String(i)}}for(const s of t.tool_calls??[])yield{type:"tool_call",id:s.id,name:s.name,args:s.args};if(Te(t.additional_kwargs)&&ts(t.additional_kwargs.tool_outputs))for(const s of t.additional_kwargs.tool_outputs){if(me(s,"web_search_call")){yield{id:s.id,type:"server_tool_call",name:"web_search",args:{query:s.query}};continue}else if(me(s,"file_search_call")){yield{id:s.id,type:"server_tool_call",name:"file_search",args:{query:s.query}};continue}else if(me(s,"computer_call")){yield{type:"non_standard",value:s};continue}else if(me(s,"code_interpreter_call")){if(ne(s.code)&&(yield{id:s.id,type:"server_tool_call",name:"code_interpreter",args:{code:s.code}}),ts(s.outputs)){const i=Nc(()=>{if(s.status!=="in_progress"){if(s.status==="completed")return 0;if(s.status==="incomplete")return 127;if(s.status!=="interpreting"&&s.status==="failed")return 1}});for(const a of s.outputs)if(me(a,"logs")){yield{type:"server_tool_call_result",toolCallId:s.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:i??0,stderr:[0,void 0].includes(i)?void 0:String(a.logs),stdout:[0,void 0].includes(i)?String(a.logs):void 0}};continue}}continue}else if(me(s,"mcp_call")){yield{id:s.id,type:"server_tool_call",name:"mcp_call",args:s.input};continue}else if(me(s,"mcp_list_tools")){yield{id:s.id,type:"server_tool_call",name:"mcp_list_tools",args:s.input};continue}else if(me(s,"mcp_approval_request")){yield{type:"non_standard",value:s};continue}else if(me(s,"image_generation_call")){yield{type:"non_standard",value:s};continue}Te(s)&&(yield{type:"non_standard",value:s})}}return Array.from(e())}function E4(t){function*e(){yield*EN(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const C4={translateContent:t=>typeof t.content=="string"?k4(t):EN(t),translateContentChunk:t=>typeof t.content=="string"?T4(t):E4(t)};function N4(t,e="pretty"){return e==="pretty"?I4(t):JSON.stringify(t)}function I4(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),s="=".repeat(r),i=n.length%2===0?s:`${s}=`;if(e.push(`${s}${n}${i}`),t.type==="ai"){const a=t;if(a.tool_calls&&a.tool_calls.length>0){e.push("Tool Calls:");for(const o of a.tool_calls){e.push(`  ${o.name} (${o.id})`),e.push(` Call ID: ${o.id}`),e.push("  Args:");for(const[l,u]of Object.entries(o.args))e.push(`    ${l}: ${u}`)}}}if(t.type==="tool"){const a=t;a.name&&e.push(`Name: ${a.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const uf=Symbol.for("langchain.message");function Os(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>is(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Jc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>is(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function CN(t,e){return t==="error"||e==="error"?"error":"success"}function R4(t,e){function n(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>n(a,s+1));const i={};for(const a of Object.keys(r))i[a]=n(r[a],s+1);return i}return JSON.stringify(n(t,0),null,2)}var zk,Us=class extends ko{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);T(this,"lc_namespace",["langchain_core","messages"]);T(this,"lc_serializable",!0);T(this,zk,!0);T(this,"id");T(this,"name");T(this,"content");T(this,"additional_kwargs");T(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[b4,Jv,y4].reduce((s,i)=>i(s),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&uf in e&&e[uf]===!0&&wN(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(zk=uf,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=R4(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return N4(this,e)}};function O4(t){return Array.isArray(t)&&t.every(e=>typeof e.index=="number")}function en(t={},e={}){const n={...t};for(const[r,s]of Object.entries(e))if(n[r]==null)n[r]=s;else{if(s==null)continue;if(typeof n[r]!=typeof s||Array.isArray(n[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?n[r]=s:n[r]+=s}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=en(n[r],s);else if(Array.isArray(n[r]))n[r]=Jc(n[r],s);else{if(n[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Jc(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){const s=n.findIndex(i=>{const a=typeof i=="object",o="index"in i&&i.index===r.index,l="id"in i&&"id"in r&&(i==null?void 0:i.id)===(r==null?void 0:r.id),u=!("id"in i)||!(i!=null&&i.id)||!("id"in r)||!(r!=null&&r.id);return a&&o&&(l||u)});s!==-1&&typeof n[s]=="object"&&n[s]!==null?n[s]=en(n[s],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function NN(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return Jc(t,e);if(typeof t=="object"&&typeof e=="object")return en(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}var Oi=class IN extends Us{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===IN.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function RN(t){return typeof t.role=="string"}function oi(t){return typeof(t==null?void 0:t._getType)=="function"}function Xv(t){return Oi.isInstance(t)}function ON(t,e){return en(t??{},e??{})}function PN(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function P4(t,e){const n={...PN(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function j4(t,e){const n={...PN(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function jN(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:P4(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:j4(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var $4={};De($4,{ToolMessage:()=>as,ToolMessageChunk:()=>Xc,defaultToolCallParser:()=>ex,isDirectToolOutput:()=>Qv,isToolMessage:()=>$N,isToolMessageChunk:()=>DN});function Qv(t){return t!=null&&typeof t=="object"&&"lc_direct_tool_output"in t&&t.lc_direct_tool_output===!0}var as=class extends Us{constructor(e,n,r){const s=typeof e=="string"||Array.isArray(e)?{content:e,name:r,tool_call_id:n}:e;super(s);T(this,"lc_direct_tool_output",!0);T(this,"type","tool");T(this,"status");T(this,"tool_call_id");T(this,"metadata");T(this,"artifact");this.tool_call_id=s.tool_call_id,this.artifact=s.artifact,this.status=s.status,this.metadata=s.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Xc=class extends Oi{constructor(e){super(e);T(this,"type","tool");T(this,"tool_call_id");T(this,"status");T(this,"artifact");this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const n=this.constructor;return new n({content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),artifact:NN(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:CN(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function ex(t){const e=[],n=[];for(const r of t)if(r.function){const s=r.function.name;try{const i=JSON.parse(r.function.arguments);e.push({name:s||"",args:i||{},id:r.id})}catch{n.push({name:s,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}function $N(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function DN(t){return t._getType()==="tool"}function vy(t,e=Nm){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let r=t.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const s=r.indexOf("```");let i=r;return s!==-1&&(i=r.substring(0,s)),e(i.trim())}function Nm(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,s=!1;for(let i of t){if(r)i==='"'&&!s?r=!1:i===`
`&&!s?i="\\n":i==="\\"?s=!s:s=!1;else if(i==='"')r=!0,s=!1;else if(i==="{")n.push("}");else if(i==="[")n.push("]");else if(i==="}"||i==="]")if(n&&n[n.length-1]===i)n.pop();else return null;e+=i}r&&(e+='"');for(let i=n.length-1;i>=0;i-=1)e+=n[i];try{return JSON.parse(e)}catch{return null}}function tx(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function D4(t){if(Te(t.document)&&Te(t.document.source)){const e=Te(t.document)&&ne(t.document.format)?t.document.format:"",n=tx(e);if(Te(t.document.source)){if(Te(t.document.source.s3Location)&&ne(t.document.source.s3Location.uri))return{type:"file",mimeType:n,fileId:t.document.source.s3Location.uri};if(Zv(t.document.source.bytes))return{type:"file",mimeType:n,data:t.document.source.bytes};if(ne(t.document.source.text))return{type:"file",mimeType:n,data:Buffer.from(t.document.source.text).toString("base64")};if(ts(t.document.source.content)){const r=t.document.source.content.reduce((s,i)=>Te(i)&&ne(i.text)?s+i.text:s,"");return{type:"file",mimeType:n,data:r}}}}return{type:"non_standard",value:t}}function L4(t){if(me(t,"image")&&Te(t.image)){const e=Te(t.image)&&ne(t.image.format)?t.image.format:"",n=tx(e);if(Te(t.image.source)){if(Te(t.image.source.s3Location)&&ne(t.image.source.s3Location.uri))return{type:"image",mimeType:n,fileId:t.image.source.s3Location.uri};if(Zv(t.image.source.bytes))return{type:"image",mimeType:n,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function M4(t){if(me(t,"video")&&Te(t.video)){const e=Te(t.video)&&ne(t.video.format)?t.video.format:"",n=tx(e);if(Te(t.video.source)){if(Te(t.video.source.s3Location)&&ne(t.video.source.s3Location.uri))return{type:"video",mimeType:n,fileId:t.video.source.s3Location.uri};if(Zv(t.video.source.bytes))return{type:"video",mimeType:n,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function nS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(me(r,"citations_content")&&Te(r.citationsContent)){const s=ts(r.citationsContent.content)?r.citationsContent.content.reduce((a,o)=>Te(o)&&ne(o.text)?a+o.text:a,""):"",i=ts(r.citationsContent.citations)?r.citationsContent.citations.reduce((a,o)=>{if(Te(o)){const l=ts(o.sourceContent)?o.sourceContent.reduce((d,h)=>Te(h)&&ne(h.text)?d+h.text:d,""):"",u=Nc(()=>{if(Te(o.location)){const d=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Te(d))return{source:_r(d.documentIndex)?d.documentIndex.toString():void 0,startIndex:_r(d.start)?d.start:void 0,endIndex:_r(d.end)?d.end:void 0}}return{}});a.push({type:"citation",citedText:l,...u})}return a},[]):[];yield{type:"text",text:s,annotations:i};continue}else if(me(r,"document")&&Te(r.document)){yield D4(r);continue}else if(me(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(me(r,"image")&&Te(r.image)){yield L4(r);continue}else if(me(r,"reasoning_content")&&ne(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(me(r,"text")&&ne(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(me(r,"tool_call"))continue;if(me(r,"video")&&Te(r.video)){yield M4(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(e())}const F4={translateContent:nS,translateContentChunk:nS};function rS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"text")&&ne(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"inlineData")&&Te(r.inlineData)&&ne(r.inlineData.mimeType)&&ne(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(me(r,"functionCall")&&Te(r.functionCall)&&ne(r.functionCall.name)&&Te(r.functionCall.args)){yield{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(me(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(me(r,"fileData")&&Te(r.fileData)&&ne(r.fileData.mimeType)&&ne(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(me(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(me(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const U4={translateContent:rS,translateContentChunk:rS};function sS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"reasoning")&&ne(r.reasoning)){const s=Nc(()=>{var a;const i=n.indexOf(r);if(ts((a=t.additional_kwargs)==null?void 0:a.signatures)&&i>=0)return t.additional_kwargs.signatures.at(i)});ne(s)?yield{type:"reasoning",reasoning:r.reasoning,signature:s}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(me(r,"text")&&ne(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"image_url")){if(ne(r.image_url))if(r.image_url.startsWith("data:")){const s=/^data:([^;]+);base64,(.+)$/,i=r.image_url.match(s);i?yield{type:"image",data:i[2],mimeType:i[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(me(r,"media")&&ne(r.mimeType)&&ne(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const z4={translateContent:sS,translateContentChunk:sS};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",v4],["bedrock-converse",F4],["google-genai",U4],["google-vertexai",z4],["openai",C4]]));function LN(t){return globalThis.lc_block_translators_registry.get(t)}var Nn=class extends Us{constructor(e){var r;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const s=(r=n.additional_kwargs)==null?void 0:r.tool_calls,i=n.tool_calls;s!=null&&s.length>0&&(i===void 0||i.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(s!=null&&i===void 0){const[a,o]=ex(s);n.tool_calls=a??[],n.invalid_tool_calls=o??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.contentBlocks.push(...n.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const a=n.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>{var l;return!((l=n.tool_calls)!=null&&l.some(u=>u.id===o.id&&u.name===o.name))});a.length>0&&(n.tool_calls=a.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(n);T(this,"type","ai");T(this,"tool_calls",[]);T(this,"invalid_tool_calls",[]);T(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=LN(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(r=>!e.some(s=>s.id===r.id&&s.name===r.name));e.push(...n.map(r=>({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function Im(t){return t._getType()==="ai"}function xy(t){return t._getType()==="ai"}var cs=class extends Oi{constructor(e){var r,s;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const a=(e.tool_call_chunks??[]).reduce((u,d)=>{const h=u.findIndex(([m])=>"id"in d&&d.id&&"index"in d&&d.index!==void 0?d.id===m.id&&d.index===m.index:"id"in d&&d.id?d.id===m.id:"index"in d&&d.index!==void 0?d.index===m.index:!1);return h!==-1?u[h].push(d):u.push([d]),u},[]),o=[],l=[];for(const u of a){let d=null;const h=((r=u[0])==null?void 0:r.name)??"",m=u.map(w=>w.args||"").join(""),p=m.length?m:"{}",y=(s=u[0])==null?void 0:s.id;try{if(d=Nm(p),!y||d===null||typeof d!="object"||Array.isArray(d))throw new Error("Malformed tool call chunk args.");o.push({name:h,args:d,id:y,type:"tool_call"})}catch{l.push({name:h,args:p,id:y,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:o,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);T(this,"type","ai");T(this,"tool_calls",[]);T(this,"invalid_tool_calls",[]);T(this,"tool_call_chunks",[]);T(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=LN(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(r=>r.type==="tool_call").map(r=>r.id);for(const r of this.tool_calls)r.id&&!n.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:ON(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const s=Jc(this.tool_call_chunks,e.tool_call_chunks);s!==void 0&&s.length>0&&(n.tool_call_chunks=s)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=jN(this.usage_metadata,e.usage_metadata));const r=this.constructor;return new r(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}},va=class MN extends Us{constructor(n,r){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:r});super(n);T(this,"type","generic");T(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return MN}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},Qc=class extends Oi{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);T(this,"type","generic");T(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function G4(t){return t._getType()==="generic"}function B4(t){return t._getType()==="generic"}var Rm=class extends Us{constructor(e){super(e);T(this,"type","function");T(this,"name");this.name=e.name}static lc_name(){return"FunctionMessage"}},eu=class extends Oi{constructor(){super(...arguments);T(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function V4(t){return t._getType()==="function"}function H4(t){return t._getType()==="function"}var us=class extends Us{constructor(e){super(e);T(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},tu=class extends Oi{constructor(e){super(e);T(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function W4(t){return t.getType()==="human"}function q4(t){return t.getType()==="human"}var Ps=class zd extends Us{constructor(n){super(n);T(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new zd({...this,content:Os(this.content,n)});if(zd.isInstance(n))return new zd({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:Os(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},ki=class extends Oi{constructor(e){super(e);T(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:Os(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function K4(t){return t._getType()==="system"}function Y4(t){return t._getType()==="system"}var Nh=class extends Us{constructor(e){super({...e,content:[]});T(this,"type","remove");T(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}};function FN(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function Jl(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}function Z4(t){return!!(t&&typeof t=="object"&&"toolCall"in t&&t.toolCall!=null&&typeof t.toolCall=="object"&&"id"in t.toolCall&&typeof t.toolCall.id=="string")}var Ih=class extends Error{constructor(e,n){super(e);T(this,"output");this.output=n}};const UN=t=>t();function J4(t){return Jl(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function X4(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function df(t){let e,n;if(X4(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...s}=t;e=r,n=s}if(e==="human"||e==="user")return new us(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...s}=n;if(!Array.isArray(r))return new Nn(n);const i=r.map(J4);return new Nn({...s,tool_calls:i})}else{if(e==="system")return new Ps(n);if(e==="developer")return new Ps({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new as({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new Nh({...n,id:n.id});throw FN(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Xl(t){if(typeof t=="string")return new us(t);if(oi(t))return t;if(Array.isArray(t)){const[e,n]=t;return df({type:e,content:n})}else if(RN(t)){const{role:e,...n}=t;return df({...n,type:e})}else return df(t)}function nx(t,e="Human",n="AI"){const r=[];for(const s of t){let i;if(s._getType()==="human")i=e;else if(s._getType()==="ai")i=n;else if(s._getType()==="system")i="System";else if(s._getType()==="tool")i="Tool";else if(s._getType()==="generic")i=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const a=s.name?`${s.name}, `:"",o=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);r.push(`${i}: ${a}${o}`)}return r.join(`
`)}function Q4(t){if(t.data!==void 0)return t;{const e=t;return{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}}}}function rx(t){const e=Q4(t);switch(e.type){case"human":return new us(e.data);case"ai":return new Nn(e.data);case"system":return new Ps(e.data);case"function":if(e.data.name===void 0)throw new Error("Name must be defined for function messages");return new Rm(e.data);case"tool":if(e.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new as(e.data);case"generic":if(e.data.role===void 0)throw new Error("Role must be defined for chat messages");return new va(e.data);default:throw new Error(`Got unexpected type: ${e.type}`)}}function eF(t){return t.map(rx)}function tF(t){return t.map(e=>e.toDict())}function Rh(t){var n;const e=t._getType();if(e==="human")return new tu({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new cs({...r})}else{if(e==="system")return new ki({...t});if(e==="function")return new eu({...t});if(va.isInstance(t))return new Qc({...t});throw new Error("Unknown message type.")}}const zN=Symbol.for("ls:tracing_async_local_storage"),Ql=Symbol.for("lc:context_variables"),nF=t=>{globalThis[zN]=t},Ic=()=>globalThis[zN];var hf={},rF={};De(rF,{getEnv:()=>sx,getEnvironmentVariable:()=>ns,getRuntimeEnvironment:()=>WN,isBrowser:()=>GN,isDeno:()=>Om,isJsDom:()=>VN,isNode:()=>HN,isWebWorker:()=>BN});const GN=()=>typeof window<"u"&&typeof window.document<"u",BN=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",VN=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),Om=()=>typeof Deno<"u",HN=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Om(),sx=()=>{let t;return GN()?t="browser":HN()?t="node":BN()?t="webworker":VN()?t="jsdom":Om()?t="deno":t="other",t};let mf;function WN(){return mf===void 0&&(mf={library:"langchain-js",runtime:sx()}),mf}function ns(t){try{return typeof process<"u"?hf==null?void 0:hf[t]:Om()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const sF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ec(t){return typeof t=="string"&&sF.test(t)}function iF(t){if(!ec(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Mt=[];for(var pf=0;pf<256;++pf)Mt.push((pf+256).toString(16).slice(1));function ix(t,e=0){return(Mt[t[e+0]]+Mt[t[e+1]]+Mt[t[e+2]]+Mt[t[e+3]]+"-"+Mt[t[e+4]]+Mt[t[e+5]]+"-"+Mt[t[e+6]]+Mt[t[e+7]]+"-"+Mt[t[e+8]]+Mt[t[e+9]]+"-"+Mt[t[e+10]]+Mt[t[e+11]]+Mt[t[e+12]]+Mt[t[e+13]]+Mt[t[e+14]]+Mt[t[e+15]]).toLowerCase()}var Ju,aF=new Uint8Array(16);function qN(){if(!Ju&&(Ju=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ju))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ju(aF)}function oF(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var lF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",cF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function uF(t,e,n){function r(s,i,a,o){var l;if(typeof s=="string"&&(s=oF(s)),typeof i=="string"&&(i=iF(i)),((l=i)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){o=o||0;for(var d=0;d<16;++d)a[o+d]=u[d];return a}return ix(u)}try{r.name=t}catch{}return r.DNS=lF,r.URL=cF,r}var dF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const iS={randomUUID:dF};function wn(t,e,n){if(iS.randomUUID&&!e&&!t)return iS.randomUUID();t=t||{};var r=t.random||(t.rng||qN)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ix(r)}function hF(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function ff(t,e){return t<<e|t>>>32-e}function mF(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),o=new Array(a),l=0;l<a;++l){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];o[l]=u}o[a-1][14]=(t.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<a;++h){for(var m=new Uint32Array(80),p=0;p<16;++p)m[p]=o[h][p];for(var y=16;y<80;++y)m[y]=ff(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);for(var w=n[0],x=n[1],g=n[2],f=n[3],v=n[4],b=0;b<80;++b){var _=Math.floor(b/20),E=ff(w,5)+hF(_,x,g,f)+v+e[_]+m[b]>>>0;v=f,f=g,g=ff(x,30)>>>0,x=w,w=E}n[0]=n[0]+w>>>0,n[1]=n[1]+x>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+f>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var El=uF("v5",80,mF),aS=null,oS=null,hr=0;function pF(t,e,n){t=t||{};var r=e&&n||0,s=e||new Uint8Array(16),i=t.random||(t.rng||qN)(),a=t.msecs!==void 0?t.msecs:Date.now(),o=t.seq!==void 0?t.seq:null,l=oS,u=aS;return a>hr&&t.msecs===void 0&&(hr=a,o!==null&&(l=null,u=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,u=o&524287),(l===null||u===null)&&(l=i[6]&127,l=l<<8|i[7],u=i[8]&63,u=u<<8|i[9],u=u<<5|i[10]>>>3),a+1e4>hr&&o===null?++u>524287&&(u=0,++l>4095&&(l=0,hr++)):hr=a,oS=l,aS=u,s[r++]=hr/1099511627776&255,s[r++]=hr/4294967296&255,s[r++]=hr/16777216&255,s[r++]=hr/65536&255,s[r++]=hr/256&255,s[r++]=hr&255,s[r++]=l>>>4&15|112,s[r++]=l&255,s[r++]=u>>>13&63|128,s[r++]=u>>>5&255,s[r++]=u<<3&255|i[10]&7,s[r++]=i[11],s[r++]=i[12],s[r++]=i[13],s[r++]=i[14],s[r++]=i[15],e||ix(s)}var fF={};De(fF,{BaseCallbackHandler:()=>nu,callbackHandlerPrefersStreaming:()=>ax,isBaseCallbackHandler:()=>KN});var gF=class{};function ax(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var nu=class extends gF{constructor(e){super();T(this,"lc_serializable",!1);T(this,"lc_kwargs");T(this,"ignoreLLM",!1);T(this,"ignoreChain",!1);T(this,"ignoreAgent",!1);T(this,"ignoreRetriever",!1);T(this,"ignoreCustomEvent",!1);T(this,"raiseError",!1);T(this,"awaitHandlers",ns("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Yv(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return ko.prototype.toJSON.call(this)}toJSONNotImplemented(){return ko.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends nu{constructor(){super();T(this,"name",wn());Object.assign(this,e)}}return new n}};const KN=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},yF="gen_ai.operation.name",vF="gen_ai.system",lS="gen_ai.request.model",xF="gen_ai.response.model",cS="gen_ai.usage.input_tokens",uS="gen_ai.usage.output_tokens",dS="gen_ai.usage.total_tokens",wF="gen_ai.request.max_tokens",bF="gen_ai.request.temperature",_F="gen_ai.request.top_p",SF="gen_ai.request.frequency_penalty",kF="gen_ai.request.presence_penalty",TF="gen_ai.response.finish_reasons",AF="gen_ai.prompt",EF="gen_ai.completion",CF="gen_ai.request.extra_query",NF="gen_ai.request.extra_body",IF="gen_ai.serialized.name",RF="gen_ai.serialized.signature",OF="gen_ai.serialized.doc",PF="gen_ai.response.id",jF="gen_ai.response.service_tier",$F="gen_ai.response.system_fingerprint",DF="gen_ai.usage.input_token_details",LF="gen_ai.usage.output_token_details",MF="langsmith.trace.session_id",FF="langsmith.trace.session_name",UF="langsmith.span.kind",zF="langsmith.trace.name",GF="langsmith.metadata",hS="langsmith.span.tags",BF="langsmith.request.streaming",VF="langsmith.request.headers",HF=(...t)=>fetch(...t),YN=Symbol.for("ls:fetch_implementation"),WF=()=>{const t=globalThis[YN];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},qF=t=>async(...e)=>{if(t||bn("DEBUG")==="true"){const[r,s]=e;console.log(` ${(s==null?void 0:s.method)||"GET"} ${r}`)}const n=await(globalThis[YN]??HF)(...e);return(t||bn("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},ZN=()=>bn("PROJECT")??os("LANGCHAIN_SESSION")??"default",mS={};function wy(t){mS[t]||(console.warn(t),mS[t]=!0)}const KF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ee(t,e){if(!KF.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function YF(t){const e=typeof t=="string"?Date.parse(t):t;return pF({msecs:e,seq:0})}const JN="0.3.82";var tc={};let Fr;const ZF=()=>typeof window<"u"&&typeof window.document<"u",JF=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",XF=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),XN=()=>typeof Deno<"u",QF=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!XN(),QN=()=>Fr||(typeof Bun<"u"?Fr="bun":ZF()?Fr="browser":QF()?Fr="node":JF()?Fr="webworker":XF()?Fr="jsdom":XN()?Fr="deno":Fr="other",Fr);let gf;function eI(){if(gf===void 0){const t=QN(),e=t3();gf={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:JN,...e}}return gf}function tI(){const t=e3(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,s]of Object.entries(t))typeof s=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[r]=s);return e}function e3(){const t={};try{if(typeof process<"u"&&tc)for(const[e,n]of Object.entries(tc))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function os(t){try{return typeof process<"u"?tc==null?void 0:tc[t]:void 0}catch{return}}function bn(t){return os(`LANGSMITH_${t}`)||os(`LANGCHAIN_${t}`)}let yf;function t3(){if(yf!==void 0)return yf;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=os(n);r!==void 0&&(e[n]=r)}return yf=e,e}function nI(){return os("OTEL_ENABLED")==="true"||bn("OTEL_ENABLED")==="true"}class n3{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&nI()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class r3{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new n3})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class s3{active(){return{}}with(e,n){return n()}}const vf=Symbol.for("ls:otel_trace"),xf=Symbol.for("ls:otel_context"),pS=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),i3=new r3,a3=new s3;class o3{getTraceInstance(){return globalThis[vf]??i3}getContextInstance(){return globalThis[xf]??a3}initializeGlobalInstances(e){globalThis[vf]===void 0&&(globalThis[vf]=e.trace),globalThis[xf]===void 0&&(globalThis[xf]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[pS]=e}getDefaultOTLPTracerComponents(){return globalThis[pS]??void 0}}const ox=new o3;function rI(){return ox.getTraceInstance()}function l3(){return ox.getContextInstance()}function c3(){return ox.getDefaultOTLPTracerComponents()}const u3={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function d3(t){return u3[t]||t}class h3{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const s=this.createSpanForRun(r,r.run,n.get(r.id));s&&!r.run.end_time&&this.spans.set(r.id,s)}else this.updateSpanForRun(r,r.run)}catch(s){console.error(`Error processing operation ${r.id}:`,s)}}createSpanForRun(e,n,r){const s=r&&rI().getSpan(r);if(s)try{return this.finishSpanSetup(s,n,e)}catch(i){console.error(`Failed to create span for run ${e.id}:`,i);return}}finishSpanSetup(e,n,r){return this.setSpanAttributes(e,n,r),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,n,e),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const s=n.end_time;s&&(r.end(new Date(s)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const s=r.invocation_params;if(s.model)return s.model;if(s.model_name)return s.model_name}}}setSpanAttributes(e,n,r){var o;if("run_type"in n&&n.run_type){e.setAttribute(UF,n.run_type);const l=d3(n.run_type||"chain");e.setAttribute(yF,l)}"name"in n&&n.name&&e.setAttribute(zF,n.name),"session_id"in n&&n.session_id&&e.setAttribute(MF,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(FF,n.session_name),this.setGenAiSystem(e,n);const s=this.extractModelName(n);s&&e.setAttribute(lS,s),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(cS,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(uS,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(dS,n.total_tokens),this.setInvocationParameters(e,n);const i=((o=n.extra)==null?void 0:o.metadata)||{};for(const[l,u]of Object.entries(i))u!=null&&e.setAttribute(`${GF}.${l}`,String(u));const a=n.tags;if(a&&Array.isArray(a)?e.setAttribute(hS,a.join(", ")):a&&e.setAttribute(hS,String(a)),"serialized"in n&&typeof n.serialized=="object"){const l=n.serialized;l.name&&e.setAttribute(IF,String(l.name)),l.signature&&e.setAttribute(RF,String(l.signature)),l.doc&&e.setAttribute(OF,String(l.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,n){let r="langchain";const s=this.extractModelName(n);if(s){const i=s.toLowerCase();i.includes("anthropic")||i.startsWith("claude")?r="anthropic":i.includes("bedrock")?r="aws.bedrock":i.includes("azure")&&i.includes("openai")?r="az.ai.openai":i.includes("azure")&&i.includes("inference")?r="az.ai.inference":i.includes("cohere")?r="cohere":i.includes("deepseek")?r="deepseek":i.includes("gemini")?r="gemini":i.includes("groq")?r="groq":i.includes("watson")||i.includes("ibm")?r="ibm.watsonx.ai":i.includes("mistral")?r="mistral_ai":i.includes("gpt")||i.includes("openai")?r="openai":i.includes("perplexity")||i.includes("sonar")?r="perplexity":i.includes("vertex")?r="vertex_ai":(i.includes("xai")||i.includes("grok"))&&(r="xai")}e.setAttribute(vF,r)}setInvocationParameters(e,n){var s,i;if(!((i=(s=n.extra)==null?void 0:s.metadata)!=null&&i.invocation_params))return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(wF,r.max_tokens),r.temperature!==void 0&&e.setAttribute(bF,r.temperature),r.top_p!==void 0&&e.setAttribute(_F,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(SF,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(kF,r.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(lS,r.model),r.stream!==void 0&&e.setAttribute(BF,r.stream),r.extra_headers&&e.setAttribute(VF,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(CF,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(NF,JSON.stringify(r.extra_body))),e.setAttribute(AF,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,s=this.getUnifiedRunTokens(r);if(s&&(e.setAttribute(cS,s[0]),e.setAttribute(uS,s[1]),e.setAttribute(dS,s[0]+s[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(xF,String(r.model)),r.id&&e.setAttribute(PF,r.id),r.choices&&Array.isArray(r.choices)){const i=r.choices.map(a=>a.finish_reason).filter(a=>a).map(String);i.length>0&&e.setAttribute(TF,i.join(", "))}if(r.service_tier&&e.setAttribute(jF,r.service_tier),r.system_fingerprint&&e.setAttribute($F,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const i=r.usage_metadata;i.input_token_details&&e.setAttribute(DF,JSON.stringify(i.input_token_details)),i.output_token_details&&e.setAttribute(LF,JSON.stringify(i.output_token_details))}}e.setAttribute(EF,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const r=Object.keys(e);for(const a of r){const o=e[a];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const s=e.generations||[];if(!Array.isArray(s))return null;const i=Array.isArray(s[0])?s.flat():s;for(const a of i)if(typeof a=="object"&&a.message&&typeof a.message=="object"&&a.message.kwargs&&typeof a.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const m3=Object.prototype.toString,p3=t=>m3.call(t)==="[object Error]",f3=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function g3(t){if(!(t&&p3(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:f3.has(n)}function y3(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Xu(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let v3=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function x3(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let s=Math.round(r*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function fS(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function w3({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:s}){var p,y,w;const i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof v3)throw i.originalError;const a=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:i,attemptNumber:e,retriesLeft:a,retriesConsumed:n});if(await s.onFailedAttempt(l),fS(r,o)<=0)throw i;const u=await s.shouldConsumeRetry(l),d=fS(r,o);if(d<=0||a<=0)throw i;if(i instanceof TypeError&&!g3(i)){if(u)throw i;return(p=s.signal)==null||p.throwIfAborted(),!1}if(!await s.shouldRetry(l))throw i;if(!u)return(y=s.signal)==null||y.throwIfAborted(),!1;const h=x3(n,s),m=Math.min(h,d);return m>0&&await new Promise((x,g)=>{var b,_;const f=()=>{var E;clearTimeout(v),(E=s.signal)==null||E.removeEventListener("abort",f),g(s.signal.reason)},v=setTimeout(()=>{var E;(E=s.signal)==null||E.removeEventListener("abort",f),x()},m);s.unref&&((b=v.unref)==null||b.call(v)),(_=s.signal)==null||_.addEventListener("abort",f,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function b3(t,e={}){var i,a,o;if(e={...e},y3(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Xu("factor",e.factor,{min:0,allowInfinity:!1}),Xu("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Xu("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Xu("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(i=e.signal)==null||i.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(a=e.signal)==null||a.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await w3({error:l,attemptNumber:n,retriesConsumed:r,startTime:s,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var sI={},iI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,h||l,m),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,y=new Array(p);m<p;m++)y[m]=h[m].fn;return y},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,p,y){var w=n?n+u:u;if(!this._events[w])return!1;var x=this._events[w],g=arguments.length,f,v;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),g){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,m),!0;case 5:return x.fn.call(x.context,d,h,m,p),!0;case 6:return x.fn.call(x.context,d,h,m,p,y),!0}for(v=1,f=new Array(g-1);v<g;v++)f[v-1]=arguments[v];x.fn.apply(x.context,f)}else{var b=x.length,_;for(v=0;v<b;v++)switch(x[v].once&&this.removeListener(u,x[v].fn,void 0,!0),g){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,d);break;case 3:x[v].fn.call(x[v].context,d,h);break;case 4:x[v].fn.call(x[v].context,d,h,m);break;default:if(!f)for(_=1,f=new Array(g-1);_<g;_++)f[_-1]=arguments[_];x[v].fn.apply(x[v].context,f)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!m||y.once)&&(!h||y.context===h)&&a(this,p);else{for(var w=0,x=[],g=y.length;w<g;w++)(y[w].fn!==d||m&&!y[w].once||h&&y[w].context!==h)&&x.push(y[w]);x.length?this._events[p]=x.length===1?x[0]:x:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(iI);var _3=iI.exports,Pm={exports:{}},S3=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const k3=S3;class aI extends Error{constructor(e){super(e),this.name="TimeoutError"}}const oI=(t,e,n)=>new Promise((r,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const i=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){s(l)}return}const a=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new aI(a);typeof t.cancel=="function"&&t.cancel(),s(o)},e);k3(t.then(r,s),()=>{clearTimeout(i)})});Pm.exports=oI;Pm.exports.default=oI;Pm.exports.TimeoutError=aI;var T3=Pm.exports,lx={},cx={};Object.defineProperty(cx,"__esModule",{value:!0});function A3(t,e,n){let r=0,s=t.length;for(;s>0;){const i=s/2|0;let a=r+i;n(t[a],e)<=0?(r=++a,s-=i+1):s=i}return r}cx.default=A3;Object.defineProperty(lx,"__esModule",{value:!0});const E3=cx;class C3{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const s=E3.default(this._queue,r,(i,a)=>a.priority-i.priority);this._queue.splice(s,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}lx.default=C3;Object.defineProperty(sI,"__esModule",{value:!0});const N3=_3,lI=T3,I3=lx,Qu=()=>{},R3=new lI.TimeoutError;class O3 extends N3{constructor(e){var n,r,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Qu,this._resolveIdle=Qu,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:I3.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Qu,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Qu,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,s)=>{const i=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&n.timeout===void 0?e():lI.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&s(R3)});r(await a)}catch(a){s(a)}this._next()};this._queue.enqueue(i,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var ks=sI.default=O3;const P3=[408,425,429,500,502,503,504];let gS=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,"default"in ks?this.queue=new ks.default({concurrency:this.maxConcurrency}):this.queue=new ks({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...r){const s=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&s>0&&this.queueSizeBytes+s>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${s} bytes.`));s>0&&(this.queueSizeBytes+=s);const i=this.onFailedResponseHook;let a=this.queue.add(()=>b3(()=>n(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(o.message.startsWith("Cancel")||o.message.startsWith("TimeoutError")||o.name==="TimeoutError"||o.message.startsWith("AbortError")||(o==null?void 0:o.code)==="ECONNABORTED")throw o;const l=o==null?void 0:o.response;if(i&&await i(l))return;const u=(l==null?void 0:l.status)??(o==null?void 0:o.status);if(u&&!P3.includes(+u))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return s>0&&(a=a.finally(()=>{this.queueSizeBytes-=s})),e.signal?Promise.race([a,new Promise((o,l)=>{var u;(u=e.signal)==null||u.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):a}};function yS(t){return typeof(t==null?void 0:t._getType)=="function"}function vS(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var by={exports:{}};const j3="2.0.0",cI=256,$3=Number.MAX_SAFE_INTEGER||9007199254740991,D3=16,L3=cI-6,M3=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var jm={MAX_LENGTH:cI,MAX_SAFE_COMPONENT_LENGTH:D3,MAX_SAFE_BUILD_LENGTH:L3,MAX_SAFE_INTEGER:$3,RELEASE_TYPES:M3,SEMVER_SPEC_VERSION:j3,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},wf={};const F3=typeof process=="object"&&wf&&wf.NODE_DEBUG&&/\bsemver\b/i.test(wf.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var $m=F3;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=jm,i=$m;e=t.exports={};const a=e.re=[],o=e.safeRe=[],l=e.src=[],u=e.safeSrc=[],d=e.t={};let h=0;const m="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",s],[m,r]],y=x=>{for(const[g,f]of p)x=x.split(`${g}*`).join(`${g}{0,${f}}`).split(`${g}+`).join(`${g}{1,${f}}`);return x},w=(x,g,f)=>{const v=y(g),b=h++;i(x,b,g),d[x]=b,l[b]=g,u[b]=v,a[b]=new RegExp(g,f?"g":void 0),o[b]=new RegExp(v,f?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),w("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${m}+`),w("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),w("FULL",`^${l[d.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),w("LOOSE",`^${l[d.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),w("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",l[d.COERCE],!0),w("COERCERTLFULL",l[d.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(by,by.exports);var ru=by.exports;const U3=Object.freeze({loose:!0}),z3=Object.freeze({}),G3=t=>t?typeof t!="object"?U3:t:z3;var ux=G3;const xS=/^[0-9]+$/,uI=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;const n=xS.test(t),r=xS.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},B3=(t,e)=>uI(e,t);var dI={compareIdentifiers:uI,rcompareIdentifiers:B3};const ed=$m,{MAX_LENGTH:wS,MAX_SAFE_INTEGER:td}=jm,{safeRe:nd,t:rd}=ru,V3=ux,{compareIdentifiers:bf}=dI;let H3=class Gr{constructor(e,n){if(n=V3(n),e instanceof Gr){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>wS)throw new TypeError(`version is longer than ${wS} characters`);ed("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?nd[rd.LOOSE]:nd[rd.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>td||this.major<0)throw new TypeError("Invalid major version");if(this.minor>td||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>td||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<td)return i}return s}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ed("SemVer.compare",this.version,this.options,e),!(e instanceof Gr)){if(typeof e=="string"&&e===this.version)return 0;e=new Gr(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Gr||(e=new Gr(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof Gr||(e=new Gr(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],s=e.prerelease[n];if(ed("prerelease compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return bf(r,s)}while(++n)}compareBuild(e){e instanceof Gr||(e=new Gr(e,this.options));let n=0;do{const r=this.build[n],s=e.build[n];if(ed("build compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return bf(r,s)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const s=`-${n}`.match(this.options.loose?nd[rd.PRERELEASELOOSE]:nd[rd.PRERELEASE]);if(!s||s[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];r===!1&&(i=[n]),bf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var fn=H3;const bS=fn,W3=(t,e,n=!1)=>{if(t instanceof bS)return t;try{return new bS(t,e)}catch(r){if(!n)return null;throw r}};var Vo=W3;const q3=Vo,K3=(t,e)=>{const n=q3(t,e);return n?n.version:null};var Y3=K3;const Z3=Vo,J3=(t,e)=>{const n=Z3(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var X3=J3;const _S=fn,Q3=(t,e,n,r,s)=>{typeof n=="string"&&(s=r,r=n,n=void 0);try{return new _S(t instanceof _S?t.version:t,n).inc(e,r,s).version}catch{return null}};var eU=Q3;const SS=Vo,tU=(t,e)=>{const n=SS(t,null,!0),r=SS(e,null,!0),s=n.compare(r);if(s===0)return null;const i=s>0,a=i?n:r,o=i?r:n,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}const d=l?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"};var nU=tU;const rU=fn,sU=(t,e)=>new rU(t,e).major;var iU=sU;const aU=fn,oU=(t,e)=>new aU(t,e).minor;var lU=oU;const cU=fn,uU=(t,e)=>new cU(t,e).patch;var dU=uU;const hU=Vo,mU=(t,e)=>{const n=hU(t,e);return n&&n.prerelease.length?n.prerelease:null};var pU=mU;const kS=fn,fU=(t,e,n)=>new kS(t,n).compare(new kS(e,n));var Or=fU;const gU=Or,yU=(t,e,n)=>gU(e,t,n);var vU=yU;const xU=Or,wU=(t,e)=>xU(t,e,!0);var bU=wU;const TS=fn,_U=(t,e,n)=>{const r=new TS(t,n),s=new TS(e,n);return r.compare(s)||r.compareBuild(s)};var dx=_U;const SU=dx,kU=(t,e)=>t.sort((n,r)=>SU(n,r,e));var TU=kU;const AU=dx,EU=(t,e)=>t.sort((n,r)=>AU(r,n,e));var CU=EU;const NU=Or,IU=(t,e,n)=>NU(t,e,n)>0;var Dm=IU;const RU=Or,OU=(t,e,n)=>RU(t,e,n)<0;var hx=OU;const PU=Or,jU=(t,e,n)=>PU(t,e,n)===0;var hI=jU;const $U=Or,DU=(t,e,n)=>$U(t,e,n)!==0;var mI=DU;const LU=Or,MU=(t,e,n)=>LU(t,e,n)>=0;var mx=MU;const FU=Or,UU=(t,e,n)=>FU(t,e,n)<=0;var px=UU;const zU=hI,GU=mI,BU=Dm,VU=mx,HU=hx,WU=px,qU=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return zU(t,n,r);case"!=":return GU(t,n,r);case">":return BU(t,n,r);case">=":return VU(t,n,r);case"<":return HU(t,n,r);case"<=":return WU(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var pI=qU;const KU=fn,YU=Vo,{safeRe:sd,t:id}=ru,ZU=(t,e)=>{if(t instanceof KU)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?sd[id.COERCEFULL]:sd[id.COERCE]);else{const l=e.includePrerelease?sd[id.COERCERTLFULL]:sd[id.COERCERTL];let u;for(;(u=l.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],s=n[3]||"0",i=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",o=e.includePrerelease&&n[6]?`+${n[6]}`:"";return YU(`${r}.${s}.${i}${a}${o}`,e)};var JU=ZU;class XU{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(e,n)}return this}}var QU=XU,_f,AS;function Pr(){if(AS)return _f;AS=1;const t=/\s+/g;class e{constructor(B,q){if(q=s(q),B instanceof e)return B.loose===!!q.loose&&B.includePrerelease===!!q.includePrerelease?B:new e(B.raw,q);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=B.trim().replace(t," "),this.set=this.raw.split("||").map(z=>this.parseRange(z.trim())).filter(z=>z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const z=this.set[0];if(this.set=this.set.filter(P=>!w(P[0])),this.set.length===0)this.set=[z];else if(this.set.length>1){for(const P of this.set)if(P.length===1&&x(P[0])){this.set=[P];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let B=0;B<this.set.length;B++){B>0&&(this.formatted+="||");const q=this.set[B];for(let z=0;z<q.length;z++)z>0&&(this.formatted+=" "),this.formatted+=q[z].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(B){const z=((this.options.includePrerelease&&p)|(this.options.loose&&y))+":"+B,P=r.get(z);if(P)return P;const L=this.options.loose,G=L?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];B=B.replace(G,Y(this.options.includePrerelease)),a("hyphen replace",B),B=B.replace(l[u.COMPARATORTRIM],d),a("comparator trim",B),B=B.replace(l[u.TILDETRIM],h),a("tilde trim",B),B=B.replace(l[u.CARETTRIM],m),a("caret trim",B);let X=B.split(" ").map(ke=>f(ke,this.options)).join(" ").split(/\s+/).map(ke=>F(ke,this.options));L&&(X=X.filter(ke=>(a("loose invalid filter",ke,this.options),!!ke.match(l[u.COMPARATORLOOSE])))),a("range list",X);const ie=new Map,Oe=X.map(ke=>new i(ke,this.options));for(const ke of Oe){if(w(ke))return[ke];ie.set(ke.value,ke)}ie.size>1&&ie.has("")&&ie.delete("");const Fe=[...ie.values()];return r.set(z,Fe),Fe}intersects(B,q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(z=>g(z,q)&&B.set.some(P=>g(P,q)&&z.every(L=>P.every(G=>L.intersects(G,q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(de(this.set[q],B,this.options))return!0;return!1}}_f=e;const n=QU,r=new n,s=ux,i=Lm(),a=$m,o=fn,{safeRe:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:m}=ru,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:y}=jm,w=H=>H.value==="<0.0.0-0",x=H=>H.value==="",g=(H,B)=>{let q=!0;const z=H.slice();let P=z.pop();for(;q&&z.length;)q=z.every(L=>P.intersects(L,B)),P=z.pop();return q},f=(H,B)=>(H=H.replace(l[u.BUILD],""),a("comp",H,B),H=E(H,B),a("caret",H),H=b(H,B),a("tildes",H),H=S(H,B),a("xrange",H),H=D(H,B),a("stars",H),H),v=H=>!H||H.toLowerCase()==="x"||H==="*",b=(H,B)=>H.trim().split(/\s+/).map(q=>_(q,B)).join(" "),_=(H,B)=>{const q=B.loose?l[u.TILDELOOSE]:l[u.TILDE];return H.replace(q,(z,P,L,G,X)=>{a("tilde",H,z,P,L,G,X);let ie;return v(P)?ie="":v(L)?ie=`>=${P}.0.0 <${+P+1}.0.0-0`:v(G)?ie=`>=${P}.${L}.0 <${P}.${+L+1}.0-0`:X?(a("replaceTilde pr",X),ie=`>=${P}.${L}.${G}-${X} <${P}.${+L+1}.0-0`):ie=`>=${P}.${L}.${G} <${P}.${+L+1}.0-0`,a("tilde return",ie),ie})},E=(H,B)=>H.trim().split(/\s+/).map(q=>C(q,B)).join(" "),C=(H,B)=>{a("caret",H,B);const q=B.loose?l[u.CARETLOOSE]:l[u.CARET],z=B.includePrerelease?"-0":"";return H.replace(q,(P,L,G,X,ie)=>{a("caret",H,P,L,G,X,ie);let Oe;return v(L)?Oe="":v(G)?Oe=`>=${L}.0.0${z} <${+L+1}.0.0-0`:v(X)?L==="0"?Oe=`>=${L}.${G}.0${z} <${L}.${+G+1}.0-0`:Oe=`>=${L}.${G}.0${z} <${+L+1}.0.0-0`:ie?(a("replaceCaret pr",ie),L==="0"?G==="0"?Oe=`>=${L}.${G}.${X}-${ie} <${L}.${G}.${+X+1}-0`:Oe=`>=${L}.${G}.${X}-${ie} <${L}.${+G+1}.0-0`:Oe=`>=${L}.${G}.${X}-${ie} <${+L+1}.0.0-0`):(a("no pr"),L==="0"?G==="0"?Oe=`>=${L}.${G}.${X}${z} <${L}.${G}.${+X+1}-0`:Oe=`>=${L}.${G}.${X}${z} <${L}.${+G+1}.0-0`:Oe=`>=${L}.${G}.${X} <${+L+1}.0.0-0`),a("caret return",Oe),Oe})},S=(H,B)=>(a("replaceXRanges",H,B),H.split(/\s+/).map(q=>N(q,B)).join(" ")),N=(H,B)=>{H=H.trim();const q=B.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return H.replace(q,(z,P,L,G,X,ie)=>{a("xRange",H,z,P,L,G,X,ie);const Oe=v(L),Fe=Oe||v(G),ke=Fe||v(X),A=ke;return P==="="&&A&&(P=""),ie=B.includePrerelease?"-0":"",Oe?P===">"||P==="<"?z="<0.0.0-0":z="*":P&&A?(Fe&&(G=0),X=0,P===">"?(P=">=",Fe?(L=+L+1,G=0,X=0):(G=+G+1,X=0)):P==="<="&&(P="<",Fe?L=+L+1:G=+G+1),P==="<"&&(ie="-0"),z=`${P+L}.${G}.${X}${ie}`):Fe?z=`>=${L}.0.0${ie} <${+L+1}.0.0-0`:ke&&(z=`>=${L}.${G}.0${ie} <${L}.${+G+1}.0-0`),a("xRange return",z),z})},D=(H,B)=>(a("replaceStars",H,B),H.trim().replace(l[u.STAR],"")),F=(H,B)=>(a("replaceGTE0",H,B),H.trim().replace(l[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),Y=H=>(B,q,z,P,L,G,X,ie,Oe,Fe,ke,A)=>(v(z)?q="":v(P)?q=`>=${z}.0.0${H?"-0":""}`:v(L)?q=`>=${z}.${P}.0${H?"-0":""}`:G?q=`>=${q}`:q=`>=${q}${H?"-0":""}`,v(Oe)?ie="":v(Fe)?ie=`<${+Oe+1}.0.0-0`:v(ke)?ie=`<${Oe}.${+Fe+1}.0-0`:A?ie=`<=${Oe}.${Fe}.${ke}-${A}`:H?ie=`<${Oe}.${Fe}.${+ke+1}-0`:ie=`<=${ie}`,`${q} ${ie}`.trim()),de=(H,B,q)=>{for(let z=0;z<H.length;z++)if(!H[z].test(B))return!1;if(B.prerelease.length&&!q.includePrerelease){for(let z=0;z<H.length;z++)if(a(H[z].semver),H[z].semver!==i.ANY&&H[z].semver.prerelease.length>0){const P=H[z].semver;if(P.major===B.major&&P.minor===B.minor&&P.patch===B.patch)return!0}return!1}return!0};return _f}var Sf,ES;function Lm(){if(ES)return Sf;ES=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,h){if(h=n(h),d instanceof e){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),a("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(d){const h=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],m=d.match(h);if(!m)throw new TypeError(`Invalid comparator: ${d}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new o(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(a("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return i(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||i(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||i(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Sf=e;const n=ux,{safeRe:r,t:s}=ru,i=pI,a=$m,o=fn,l=Pr();return Sf}const ez=Pr(),tz=(t,e,n)=>{try{e=new ez(e,n)}catch{return!1}return e.test(t)};var Mm=tz;const nz=Pr(),rz=(t,e)=>new nz(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var sz=rz;const iz=fn,az=Pr(),oz=(t,e,n)=>{let r=null,s=null,i=null;try{i=new az(e,n)}catch{return null}return t.forEach(a=>{i.test(a)&&(!r||s.compare(a)===-1)&&(r=a,s=new iz(r,n))}),r};var lz=oz;const cz=fn,uz=Pr(),dz=(t,e,n)=>{let r=null,s=null,i=null;try{i=new uz(e,n)}catch{return null}return t.forEach(a=>{i.test(a)&&(!r||s.compare(a)===1)&&(r=a,s=new cz(r,n))}),r};var hz=dz;const kf=fn,mz=Pr(),CS=Dm,pz=(t,e)=>{t=new mz(t,e);let n=new kf("0.0.0");if(t.test(n)||(n=new kf("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const s=t.set[r];let i=null;s.forEach(a=>{const o=new kf(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||CS(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!n||CS(n,i))&&(n=i)}return n&&t.test(n)?n:null};var fz=pz;const gz=Pr(),yz=(t,e)=>{try{return new gz(t,e).range||"*"}catch{return null}};var vz=yz;const xz=fn,fI=Lm(),{ANY:wz}=fI,bz=Pr(),_z=Mm,NS=Dm,IS=hx,Sz=px,kz=mx,Tz=(t,e,n,r)=>{t=new xz(t,r),e=new bz(e,r);let s,i,a,o,l;switch(n){case">":s=NS,i=Sz,a=IS,o=">",l=">=";break;case"<":s=IS,i=kz,a=NS,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_z(t,e,r))return!1;for(let u=0;u<e.set.length;++u){const d=e.set[u];let h=null,m=null;if(d.forEach(p=>{p.semver===wz&&(p=new fI(">=0.0.0")),h=h||p,m=m||p,s(p.semver,h.semver,r)?h=p:a(p.semver,m.semver,r)&&(m=p)}),h.operator===o||h.operator===l||(!m.operator||m.operator===o)&&i(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0};var fx=Tz;const Az=fx,Ez=(t,e,n)=>Az(t,e,">",n);var Cz=Ez;const Nz=fx,Iz=(t,e,n)=>Nz(t,e,"<",n);var Rz=Iz;const RS=Pr(),Oz=(t,e,n)=>(t=new RS(t,n),e=new RS(e,n),t.intersects(e,n));var Pz=Oz;const jz=Mm,$z=Or;var Dz=(t,e,n)=>{const r=[];let s=null,i=null;const a=t.sort((d,h)=>$z(d,h,n));for(const d of a)jz(d,e,n)?(i=d,s||(s=d)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const o=[];for(const[d,h]of r)d===h?o.push(d):!h&&d===a[0]?o.push("*"):h?d===a[0]?o.push(`<=${h}`):o.push(`${d} - ${h}`):o.push(`>=${d}`);const l=o.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e};const OS=Pr(),gx=Lm(),{ANY:Tf}=gx,dl=Mm,yx=Or,Lz=(t,e,n={})=>{if(t===e)return!0;t=new OS(t,n),e=new OS(e,n);let r=!1;e:for(const s of t.set){for(const i of e.set){const a=Fz(s,i,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},Mz=[new gx(">=0.0.0-0")],PS=[new gx(">=0.0.0")],Fz=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Tf){if(e.length===1&&e[0].semver===Tf)return!0;n.includePrerelease?t=Mz:t=PS}if(e.length===1&&e[0].semver===Tf){if(n.includePrerelease)return!0;e=PS}const r=new Set;let s,i;for(const p of t)p.operator===">"||p.operator===">="?s=jS(s,p,n):p.operator==="<"||p.operator==="<="?i=$S(i,p,n):r.add(p.semver);if(r.size>1)return null;let a;if(s&&i){if(a=yx(s.semver,i.semver,n),a>0)return null;if(a===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const p of r){if(s&&!dl(p,String(s),n)||i&&!dl(p,String(i),n))return null;for(const y of e)if(!dl(p,String(y),n))return!1;return!0}let o,l,u,d,h=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const p of e){if(d=d||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",s){if(m&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===m.major&&p.semver.minor===m.minor&&p.semver.patch===m.patch&&(m=!1),p.operator===">"||p.operator===">="){if(o=jS(s,p,n),o===p&&o!==s)return!1}else if(s.operator===">="&&!dl(s.semver,String(p),n))return!1}if(i){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator==="<"||p.operator==="<="){if(l=$S(i,p,n),l===p&&l!==i)return!1}else if(i.operator==="<="&&!dl(i.semver,String(p),n))return!1}if(!p.operator&&(i||s)&&a!==0)return!1}return!(s&&u&&!i&&a!==0||i&&d&&!s&&a!==0||m||h)},jS=(t,e,n)=>{if(!t)return e;const r=yx(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},$S=(t,e,n)=>{if(!t)return e;const r=yx(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Uz=Lz;const Af=ru,DS=jm,zz=fn,LS=dI,Gz=Vo,Bz=Y3,Vz=X3,Hz=eU,Wz=nU,qz=iU,Kz=lU,Yz=dU,Zz=pU,Jz=Or,Xz=vU,Qz=bU,e6=dx,t6=TU,n6=CU,r6=Dm,s6=hx,i6=hI,a6=mI,o6=mx,l6=px,c6=pI,u6=JU,d6=Lm(),h6=Pr(),m6=Mm,p6=sz,f6=lz,g6=hz,y6=fz,v6=vz,x6=fx,w6=Cz,b6=Rz,_6=Pz,S6=Dz,k6=Uz;Af.re,Af.src,Af.t,DS.SEMVER_SPEC_VERSION,DS.RELEASE_TYPES,LS.compareIdentifiers,LS.rcompareIdentifiers;function Js(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[s,i]=e.split("/",2);if(!s||!i)throw new Error(`Invalid identifier format: ${t}`);return[s,i,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class T6 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function ue(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}if(t.status===403)try{const a=await t.json();(a==null?void 0:a.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${t.status} ${t.statusText}`);throw o.status=t==null?void 0:t.status,o}if(r===void 0)try{r=await t.text()}catch{r=""}const s=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${r}`;if(t.status===409)throw new T6(s);const i=new Error(s);throw i.status=t.status,i}const gI="ERR_CONFLICTING_ENDPOINTS";class A6 extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:gI}),this.name="ConflictingEndpointsError"}}function E6(t){return typeof t=="object"&&t!==null&&t.code===gI}var MS="[...]",C6={result:"[Circular]"},Oh=[],ro=[];const N6=new TextEncoder;function I6(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function ad(t){return N6.encode(t)}function yI(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function R6(t){return function(e,n){return yI(n)}}function $n(t,e,n,r,s){var i;try{const a=JSON.stringify(t,R6(n),r);return ad(a)}catch(a){if(!((i=a.message)!=null&&i.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),ad("[Unserializable]");bn("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof s>"u"&&(s=I6()),_y(t,"",0,[],void 0,0,s);let o;try{ro.length===0?o=JSON.stringify(t,n,r):o=JSON.stringify(t,O6(n),r)}catch{return ad("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Oh.length!==0;){const l=Oh.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return ad(o)}}function Ef(t,e,n,r){var s=Object.getOwnPropertyDescriptor(r,n);s.get!==void 0?s.configurable?(Object.defineProperty(r,n,{value:t}),Oh.push([r,n,e,s])):ro.push([e,n,t]):(r[n]=t,Oh.push([r,n,e]))}function _y(t,e,n,r,s,i,a){i+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){Ef(C6,t,e,s);return}if(typeof a.depthLimit<"u"&&i>a.depthLimit){Ef(MS,t,e,s);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){Ef(MS,t,e,s);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)_y(t[o],o,o,r,t,i,a);else{t=yI(t);var l=Object.keys(t);for(o=0;o<l.length;o++){var u=l[o];_y(t[u],u,o,r,t,i,a)}}r.pop()}}function O6(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(ro.length>0)for(var r=0;r<ro.length;r++){var s=ro[r];if(s[1]===e&&s[0]===n){n=s[2],ro.splice(r,1);break}}return t.call(this,e,n)}}function FS(t,e){const n=eI(),r=e??tI(),s=t.extra??{},i=s.metadata;return t.extra={...s,runtime:{...n,...s==null?void 0:s.runtime},metadata:{...r,...r.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??r.revision_id}:{},...i}},t}const P6=t=>{const e=(t==null?void 0:t.toString())??bn("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},j6=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function $6(t){const e=[];for await(const n of t)e.push(n);return e}function od(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const D6=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function US(t){return typeof t=="number"?Number(t.toFixed(4)):t}const L6=24*1024*1024,vI=1024*1024*1024,M6=1e4,F6=100,zS="https://api.smith.langchain.com";class U6{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??vI}peek(){return this.items[0]}push(e){let n;const r=new Promise(i=>{n=i}),s=$n(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+s>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${s} bytes.`),n(),r):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:r,size:s}),this.sizeBytes+=s,r)}pop({upToSizeBytes:e,upToSize:n}){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let s=0;for(;s+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0&&r.length<n;){const a=this.items.shift();a&&(r.push(a),s+=a.size,this.sizeBytes-=a.size)}if(r.length===0&&this.items.length>0){const a=this.items.shift();r.push(a),s+=a.size,this.sizeBytes-=a.size}return[r.map(a=>({action:a.action,item:a.payload,otelContext:a.otelContext,apiKey:a.apiKey,apiUrl:a.apiUrl,size:a.size})),()=>r.forEach(a=>a.itemPromiseResolve())]}}class Rc{get _fetch(){return this.fetchImplementation||qF(this.debug)}constructor(e={}){var s;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:os("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:os("LANGSMITH_DEBUG")==="true"});const n=Rc.getDefaultClientConfig();if(this.tracingSampleRate=P6(e.tracingSamplingRate),this.apiUrl=od(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=od(e.apiKey??n.apiKey),this.webUrl=od(e.webUrl??n.webUrl),(s=this.webUrl)!=null&&s.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=od(e.workspaceId??bn("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new gS({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const r=e.maxIngestMemoryBytes??vI;this.batchIngestCaller=new gS({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...e.callerOptions??{},onFailedResponseHook:D6,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new U6(r),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,nI()&&(this.langSmithToOTELTranslator=new h3),this.cachedLSEnvVarsForMetadata=tI()}static getDefaultClientConfig(){const e=bn("API_KEY"),n=bn("ENDPOINT")??zS,r=bn("HIDE_INPUTS")==="true",s=bn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:j6(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${JN}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",s=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const a=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(a,`fetch ${e}`),a})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let s=Number(n.get("offset"))||0;const i=Number(n.get("limit"))||100;for(;;){n.set("offset",String(s)),n.set("limit",String(i));const a=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(async()=>{const u=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(u,`fetch ${e}`),u}),l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<i))break;s+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",s="runs"){const i=n?{...n}:{};for(;;){const a=JSON.stringify(i),l=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(d,`fetch ${e}`),d})).json();if(!l||!l[s])break;yield l[s];const u=l.cursors;if(!u||!u.next)break;i.cursor=u.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const s of e)this.filteredPostUuids.has(s.trace_id)?s.id===s.trace_id&&this.filteredPostUuids.delete(s.trace_id):r.push(s);return r}else{const r=[];for(const s of e){const i=s.trace_id??s.id;this.filteredPostUuids.has(i)||(s.id===i?this._shouldSample()?r.push(s):this.filteredPostUuids.add(i):r.push(s))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??L6}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit)??F6}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[s,i]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!s.length){i();break}const a=s.reduce((u,d)=>{const h=d.apiUrl??this.apiUrl,m=d.apiKey??this.apiKey,y=d.apiKey===this.apiKey&&d.apiUrl===this.apiUrl?"default":`${h}|${m}`;return u[y]||(u[y]=[]),u[y].push(d),u},{}),o=[];for(const[u,d]of Object.entries(a)){const h=this._processBatch(d,{apiUrl:u==="default"?void 0:u.split("|")[0],apiKey:u==="default"?void 0:u.split("|")[1]});o.push(h)}const l=Promise.all(o).finally(i);r.push(l)}return Promise.all(r)}async _processBatch(e,n){var s,i;if(!e.length)return;const r=e.reduce((a,o)=>a+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const a={runCreates:e.filter(l=>l.action==="create").map(l=>l.item),runUpdates:e.filter(l=>l.action==="update").map(l=>l.item)},o=await this._ensureServerInfo();if((s=o==null?void 0:o.batch_ingest_config)!=null&&s.use_multipart_endpoint){const l=(i=o==null?void 0:o.instance_flags)==null?void 0:i.gzip_body_enabled;await this.multipartIngestRuns(a,{...n,useGzip:l,sizeBytes:r})}else await this.batchIngestRuns(a,{...n,sizeBytes:r})}}catch(a){console.error("Error exporting batch:",a)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const s of e)s.item.id&&s.otelContext&&(n.set(s.item.id,s.otelContext),s.action==="create"?r.push({operation:"post",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}):r.push({operation:"patch",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=FS(e.item,this.cachedLSEnvVarsForMetadata);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),s=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>s)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(M6),...this.fetchOptions});return await ue(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=rI(),n=l3();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(n.active(),r)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},s=e.project_name;delete e.project_name;const i=await this.prepareRunCreateOrUpdateInputs({session_name:s,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:i,otelContext:l,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const a=FS(i,this.cachedLSEnvVarsForMetadata);(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=$n(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await ue(l,"create run",!0),l})}async batchIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;let s=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),i=await Promise.all((n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(s.length>0&&i.length>0){const l=s.reduce((d,h)=>(h.id&&(d[h.id]=h),d),{}),u=[];for(const d of i)d.id!==void 0&&l[d.id]?l[d.id]={...l[d.id],...d}:u.push(d);s=Object.values(l),i=u}const a={post:s,patch:i};if(!a.post.length&&!a.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const u=l,d=a[u].reverse();let h=d.pop();for(;h!==void 0;)o[u].push(h),h=d.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(u=>u.id).concat(o.patch.map(u=>u.id)).join(",");await this._postBatchIngestRuns($n(o,`Ingesting runs with ids: ${l}`),r)}}async _postBatchIngestRuns(e,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const s=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await ue(s,"batch create run",!0),s})}async multipartIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;const s={};let i=[];for(const h of e??[]){const m=await this.prepareRunCreateOrUpdateInputs(h);m.id!==void 0&&m.attachments!==void 0&&(s[m.id]=m.attachments),delete m.attachments,i.push(m)}let a=[];for(const h of n??[])a.push(await this.prepareRunCreateOrUpdateInputs(h));if(i.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&a.length>0){const h=i.reduce((p,y)=>(y.id&&(p[y.id]=y),p),{}),m=[];for(const p of a)p.id!==void 0&&h[p.id]?h[p.id]={...h[p.id],...p}:m.push(p);i=Object.values(h),a=m}if(i.length===0&&a.length===0)return;const u=[],d=[];for(const[h,m]of[["post",i],["patch",a]])for(const p of m){const{inputs:y,outputs:w,events:x,extra:g,error:f,serialized:v,attachments:b,..._}=p,E={inputs:y,outputs:w,events:x,extra:g,error:f,serialized:v},C=$n(_,`Serializing for multipart ingestion of run with id: ${_.id}`);d.push({name:`${h}.${_.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[S,N]of Object.entries(E)){if(N===void 0)continue;const D=$n(N,`Serializing ${S} for multipart ingestion of run with id: ${_.id}`);d.push({name:`${h}.${_.id}.${S}`,payload:new Blob([D],{type:`application/json; length=${D.length}`})})}if(_.id!==void 0){const S=s[_.id];if(S){delete s[_.id];for(const[N,D]of Object.entries(S)){let F,Y;if(Array.isArray(D)?[F,Y]=D:(F=D.mimeType,Y=D.data),N.includes(".")){console.warn(`Skipping attachment '${N}' for run ${_.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}d.push({name:`attachment.${_.id}.${N}`,payload:new Blob([Y],{type:`${F}; length=${Y.byteLength}`})})}}}u.push(`trace=${_.trace_id},id=${_.id}`)}await this._sendMultipartRequest(d,u.join("; "),r)}async _createNodeFetchBody(e,n){const r=[];for(const a of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${a.name}"\r
`,`Content-Type: ${a.payload.type}\r
\r
`])),r.push(a.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(i){const a=async o=>{typeof o=="string"?i.enqueue(r.encode(o)):i.enqueue(o)};for(const o of e){await a(`--${n}\r
`),await a(`Content-Disposition: form-data; name="${o.name}"\r
`),await a(`Content-Type: ${o.payload.type}\r
\r
`);const u=o.payload.stream().getReader();try{let d;for(;!(d=await u.read()).done;)i.enqueue(d.value)}finally{u.releaseLock()}await a(`\r
`)}await a(`--${n}--\r
`),i.close()}})}async _sendMultipartRequest(e,n,r){const s="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=WF(),a=()=>this._createNodeFetchBody(e,s),o=()=>this._createMultipartStream(e,s),l=async u=>this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{const d=await u(),h={...this.headers,"Content-Type":`multipart/form-data; boundary=${s}`};(r==null?void 0:r.apiKey)!==void 0&&(h["x-api-key"]=r.apiKey);let m=d;r!=null&&r.useGzip&&typeof d=="object"&&"pipeThrough"in d&&(m=d.pipeThrough(new CompressionStream("gzip")),h["Content-Encoding"]="gzip");const p=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:h,body:m,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(p,"Failed to send multipart request",!0),p});try{let u,d=!1;!i&&!this.multipartStreamingDisabled&&QN()!=="bun"?(d=!0,u=await l(o)):u=await l(a),(!this.multipartStreamingDisabled||d)&&u.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==zS&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,u=await l(a))}catch(u){console.warn(`${u.message.trim()}

Context: ${n}`)}}async updateRun(e,n,r){Ee(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const s={...n,id:e};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&s.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(i["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(i["x-tenant-id"]=r.workspaceId);const a=$n(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const o=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(o,"update run",!0),o})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Ee(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let s;n.session_id?s=n.session_id:r!=null&&r.projectName?s=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?s=r==null?void 0:r.projectId:s=(await this.readProject({projectName:bn("PROJECT")||"default"})).id;const i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${s}/r/${n.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var i;const n=await $6(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},s={};n.sort((a,o)=>((a==null?void 0:a.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const a of n){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);(i=a.dotted_order)!=null&&i.startsWith(e.dotted_order??"")&&a.id!==e.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),s[a.id]=a)}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(s[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:s,traceId:i,referenceExampleId:a,startTime:o,executionOrder:l,isRoot:u,runType:d,error:h,id:m,query:p,filter:y,traceFilter:w,treeFilter:x,limit:g,select:f,order:v}=e;let b=[];if(n&&(b=Array.isArray(n)?n:[n]),r){const S=Array.isArray(r)?r:[r],N=await Promise.all(S.map(D=>this.readProject({projectName:D}).then(F=>F.id)));b.push(...N)}const _=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],E={session:b.length?b:null,run_type:d,reference_example:a,query:p,filter:y,trace_filter:w,tree_filter:x,execution_order:l,parent_run:s,start_time:o?o.toISOString():null,error:h,id:m,limit:g,trace:i,select:f||_,is_root:u,order:v};E.select.includes("child_run_ids")&&wy("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let C=0;for await(const S of this._getCursorPaginatedList("/runs/query",E))if(g){if(C>=g)break;if(S.length+C>g){yield*S.slice(0,g-C);break}C+=S.length,yield*S}else yield*S}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:s,filter:i,startTime:a,endTime:o,limit:l,offset:u}=e,h={session_id:n||(await this.readProject({projectName:r})).id,group_by:s,filter:i,start_time:a?a.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let m=Number(u)||0;const p="/runs/group",y=`${this.apiUrl}${p}`;for(;;){const w={...h,offset:m},x=Object.fromEntries(Object.entries(w).filter(([E,C])=>C!==void 0)),g=JSON.stringify(x),v=await(await this.caller.call(async()=>{const E=await this._fetch(y,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:g});return await ue(E,`Failed to fetch ${p}`),E})).json(),{groups:b,total:_}=v;if(b.length===0)break;for(const E of b)yield E;if(m+=b.length,m>=_)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:s,projectNames:i,projectIds:a,referenceExampleIds:o,startTime:l,endTime:u,error:d,query:h,filter:m,traceFilter:p,treeFilter:y,isRoot:w,dataSourceType:x}){let g=a||[];i&&(g=[...a||[],...await Promise.all(i.map(C=>this.readProject({projectName:C}).then(S=>S.id)))]);const v=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:s,session:g,reference_example:o,start_time:l,end_time:u,error:d,query:h,filter:m,trace_filter:p,tree_filter:y,is_root:w,data_source_type:x}).filter(([C,S])=>S!==void 0)),b=JSON.stringify(v);return await(await this.caller.call(async()=>{const C=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:b});return await ue(C,"get run stats"),C})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||wn()};Ee(e);const s=JSON.stringify(r),a=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ue(o,"share run"),o})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){Ee(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(n,"unshare run",!0),n})}async readRunSharedLink(e){Ee(e);const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(s,"read run shared link"),s})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const a of n)r.append("id",a);return Ee(e),await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(a,"list shared runs"),a})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Ee(e);const s=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(i,"read dataset shared schema"),i})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};Ee(e);const s=JSON.stringify(r),a=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await ue(o,"share dataset"),o})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){Ee(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(n,"unshare dataset",!0),n})}async readSharedDataset(e){return Ee(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(s,"read shared dataset"),s})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const s=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(u=>s.append(o,u)):s.append(o,l)});const i=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(o,"list shared examples"),o}),a=await i.json();if(!i.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${i.status}
Message: ${Array.isArray(a.detail)?a.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${i.status} ${i.statusText}`);return a.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:s=!1,projectExtra:i=null,referenceDatasetId:a=null}){const o=s?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,u=i||{};r&&(u.metadata=r);const d={name:e,extra:u,description:n};a!==null&&(d.reference_dataset_id=a);const h=JSON.stringify(d);return await(await this.caller.call(async()=>{const y=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await ue(y,"create project"),y})).json()}async updateProject(e,{name:n=null,description:r=null,metadata:s=null,projectExtra:i=null,endTime:a=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=i;s&&(l={...l||{},metadata:s});const u=JSON.stringify({name:n,extra:l,description:r,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{const m=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ue(m,"update project"),m})).json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Ee(e),r+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");const i=await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(a,"has project"),a});try{const a=await i.json();return i.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let s="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Ee(e),s+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&i.append("include_stats",r.toString());const a=await this._get(s,i);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=a[0]}else o=a;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:s,referenceDatasetName:i,includeStats:a,datasetVersion:o,referenceFree:l,metadata:u}={}){const d=new URLSearchParams;if(e!==void 0)for(const h of e)d.append("id",h);if(n!==void 0&&d.append("name",n),r!==void 0&&d.append("name_contains",r),s!==void 0)d.append("reference_dataset",s);else if(i!==void 0){const h=await this.readDataset({datasetName:i});d.append("reference_dataset",h.id)}a!==void 0&&d.append("include_stats",a.toString()),o!==void 0&&d.append("dataset_version",o),l!==void 0&&d.append("reference_free",l.toString()),u!==void 0&&d.append("metadata",JSON.stringify(u));for await(const h of this._getPaginated("/sessions",d))yield*h}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,Ee(r),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(s,`delete session ${r} (${n})`,!0),s})}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:s,description:i,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,u=new FormData;return u.append("file",e,n),r.forEach(m=>{u.append("input_keys",m)}),s.forEach(m=>{u.append("output_keys",m)}),i&&u.append("description",i),a&&u.append("data_type",a),o&&u.append("name",o),await(await this.caller.call(async()=>{const m=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ue(m,"upload CSV"),m})).json()}async createDataset(e,{description:n,dataType:r,inputsSchema:s,outputsSchema:i,metadata:a}={}){const o={name:e,description:n,extra:a?{metadata:a}:void 0};r&&(o.data_type=r),s&&(o.inputs_schema_definition=s),i&&(o.outputs_schema_definition=i);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await ue(h,"create dataset"),h})).json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const s=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Ee(e),r+=`/${e}`;else if(n)s.append("name",n);else throw new Error("Must provide datasetName or datasetId");const i=await this._get(r,s);let a;if(Array.isArray(i)){if(i.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);a=i[0]}else a=i;return a}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:s}){let i=e;if(i===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:n})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${i}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:s,datasetNameContains:i,metadata:a}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const u of r)l.append("id",u);s!==void 0&&l.append("name",s),i!==void 0&&l.append("name_contains",i),a!==void 0&&l.append("metadata",JSON.stringify(a));for await(const u of this._getPaginated(o,l))yield*u}async updateDataset(e){const{datasetId:n,datasetName:r,...s}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const i=n??(await this.readDataset({datasetName:r})).id;Ee(i);const a=JSON.stringify(s);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(l,"update dataset"),l})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:s,tag:i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;Ee(a);const o=JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:i});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await ue(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",s=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(s=(await this.readDataset({datasetName:n})).id),s!==void 0)Ee(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const i=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(i,`delete ${r}`,!0),i})}async indexDataset({datasetId:e,datasetName:n,tag:r}){let s=e;if(!s&&!n)throw new Error("Must provide either datasetName or datasetId");if(s&&n)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:n})).id),Ee(s);const a=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(l,"index dataset"),l})).json()}async similarExamples(e,n,r,{filter:s}={}){const i={limit:r,inputs:e};s!==void 0&&(i.filter=s),Ee(n);const a=JSON.stringify(i);return(await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await ue(u,"fetch similar examples"),u})).json()).examples}async createExample(e,n,r){var d;if(GS(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=n?r==null?void 0:r.datasetId:e.dataset_id;const i=n?r==null?void 0:r.datasetName:e.dataset_name;if(s===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:i})).id);const a=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let o;GS(e)?o=e:o={inputs:e,outputs:n,created_at:a==null?void 0:a.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const l=await this._uploadExamplesMultipart(s,[o]);return await this.readExample(((d=l.example_ids)==null?void 0:d[0])??wn())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const f=e;let v=f[0].dataset_id;const b=f[0].dataset_name;if(v===void 0&&b===void 0)throw new Error("Must provide either datasetName or datasetId");if(v!==void 0&&b!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");v===void 0&&(v=(await this.readDataset({datasetName:b})).id);const _=await this._uploadExamplesMultipart(v,f);return await Promise.all(_.example_ids.map(C=>this.readExample(C)))}const{inputs:n,outputs:r,metadata:s,splits:i,sourceRunIds:a,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:u,exampleIds:d,datasetId:h,datasetName:m}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let p=h;const y=m;if(p===void 0&&y===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&y!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(await this.readDataset({datasetName:y})).id);const w=n.map((f,v)=>({dataset_id:p,inputs:f,outputs:r==null?void 0:r[v],metadata:s==null?void 0:s[v],split:i==null?void 0:i[v],id:d==null?void 0:d[v],attachments:u==null?void 0:u[v],source_run_id:a==null?void 0:a[v],use_source_run_io:o==null?void 0:o[v],use_source_run_attachments:l==null?void 0:l[v]})),x=await this._uploadExamplesMultipart(p,w);return await Promise.all(x.example_ids.map(f=>this.readExample(f)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const s=e.map(a=>yS(a)?vS(a):a),i=yS(n)?vS(n):n;return this.createExample({input:s},{output:i},r)}async readExample(e){Ee(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:s,...i}=r,a=i;return s&&(a.attachments=Object.entries(s).reduce((o,[l,u])=>(o[l.slice(11)]={presigned_url:u.presigned_url,mime_type:u.mime_type},o),{})),a}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:s,splits:i,inlineS3Urls:a,metadata:o,limit:l,offset:u,filter:d,includeAttachments:h}={}){let m;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)m=e;else if(n!==void 0)m=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const p=new URLSearchParams({dataset:m}),y=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;y&&p.append("as_of",y);const w=a??!0;if(p.append("inline_s3_urls",w.toString()),r!==void 0)for(const g of r)p.append("id",g);if(i!==void 0)for(const g of i)p.append("splits",g);if(o!==void 0){const g=JSON.stringify(o);p.append("metadata",g)}l!==void 0&&p.append("limit",l.toString()),u!==void 0&&p.append("offset",u.toString()),d!==void 0&&p.append("filter",d),h===!0&&["attachment_urls","outputs","metadata"].forEach(g=>p.append("select",g));let x=0;for await(const g of this._getPaginated("/examples",p)){for(const f of g){const{attachment_urls:v,...b}=f,_=b;v&&(_.attachments=Object.entries(v).reduce((E,[C,S])=>(E[C.slice(11)]={presigned_url:S.presigned_url,mime_type:S.mime_type||void 0},E),{})),yield _,x++}if(l!==void 0&&x>=l)break}}async deleteExample(e){Ee(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(r,`delete ${n}`,!0),r})}async updateExample(e,n){let r;n?r=e:r=e.id,Ee(r);let s;n?s={id:r,...n}:s=e;let i;return s.dataset_id!==void 0?i=s.dataset_id:i=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(i,[s])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:s}){let i;if(e?i=e:i=(await this.readDataset({datasetName:n})).id,Ee(i),r&&s||!r&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const a=new URLSearchParams;return r!==void 0&&a.append("as_of",typeof r=="string"?r:r.toISOString()),s!==void 0&&a.append("tag",s),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Ee(s);const i=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&i.append("as_of",a),await this._get(`/datasets/${s}/splits`,i)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:s,remove:i=!1}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:n})).id:a=e,Ee(a);const o={split_name:r,examples:s.map(u=>(Ee(u),u)),remove:i},l=JSON.stringify(o);await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await ue(u,"update dataset splits",!0),u})}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:s,referenceExample:i}={loadChildRuns:!1}){wy("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:s});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(i=await this.readExample(a.reference_example_id));const o=await n.evaluateRun(a,i),[l,u]=await this._logEvaluationFeedback(o,a,r);return u[0]}async createFeedback(e,n,{score:r,value:s,correction:i,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:d,feedbackConfig:h,projectId:m,comparativeExperimentId:p}){var f;if(!e&&!m)throw new Error("One of runId or projectId must be provided");if(e&&m)throw new Error("Only one of runId or projectId can be provided");const y={type:l??"api",metadata:o??{}};u!==void 0&&(y==null?void 0:y.metadata)!==void 0&&!y.metadata.__run&&(y.metadata.__run={run_id:u}),(y==null?void 0:y.metadata)!==void 0&&((f=y.metadata.__run)==null?void 0:f.run_id)!==void 0&&Ee(y.metadata.__run.run_id);const w={id:d??wn(),run_id:e,key:n,score:US(r),value:s,correction:i,comment:a,feedback_source:y,comparative_experiment_id:p,feedbackConfig:h,session_id:m},x=JSON.stringify(w),g=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const v=await this._fetch(g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await ue(v,"create feedback",!0),v}),w}async updateFeedback(e,{score:n,value:r,correction:s,comment:i}){const a={};n!=null&&(a.score=US(n)),r!=null&&(a.value=r),s!=null&&(a.correction=s),i!=null&&(a.comment=i),Ee(e);const o=JSON.stringify(a);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await ue(l,"update feedback",!0),l})}async readFeedback(e){Ee(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Ee(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const s=new URLSearchParams;if(e)for(const i of e)Ee(i),s.append("run",i);if(n)for(const i of n)s.append("key",i);if(r)for(const i of r)s.append("source",i);for await(const i of this._getPaginated("/feedback",s))yield*i}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:s}={}){const i={run_id:e,feedback_key:n,feedback_config:s};r?typeof r=="string"?i.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(i.expires_in=r):i.expires_in={hours:3};const a=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:s,description:i,metadata:a,id:o}){var h;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:i,created_at:(h=s??new Date)==null?void 0:h.toISOString(),extra:{}};a&&(l.extra.metadata=a);const u=JSON.stringify(l);return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ue(m,"create comparative experiment"),m})).json()}async*listPresignedFeedbackTokens(e){Ee(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const s=this._selectEvalResults(e),i=[];for(const a of s){let o=r||{};a.evaluatorInfo&&(o={...a.evaluatorInfo,...o});let l=null;a.targetRunId?l=a.targetRunId:n&&(l=n.id),i.push(await this.createFeedback(l,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:o,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[s,i]}async logEvaluationFeedback(e,n,r){const[s]=await this._logEvaluationFeedback(e,n,r);return s}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:s,limit:i}=e,a=new URLSearchParams;n&&n.forEach((l,u)=>{Ee(l,`queueIds[${u}]`),a.append("ids",l)}),r&&a.append("name",r),s&&a.append("name_contains",s),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",a))if(yield*l,o++,i!==void 0&&o>=i)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:s,rubricInstructions:i}=e,a={name:n,description:r,id:s||wn(),rubric_instructions:i},o=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([u,d])=>d!==void 0)));return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await ue(u,"create annotation queue"),u})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,n){const{name:r,description:s,rubricInstructions:i}=n,a=JSON.stringify({name:r,description:s,rubric_instructions:i});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(o,"update annotation queue",!0),o})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const r=JSON.stringify(n.map((s,i)=>Ee(s,`runIds[${i}]`).toString()));await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await ue(s,"add runs to annotation queue",!0),s})}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${Ee(e,"queueId")}/run`;return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(i,"get run from annotation queue"),i})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}/runs/${Ee(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Ee(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(s,"get latest commit hash"),s})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,s,i]=Js(e),a=JSON.stringify({like:n});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${r}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(l,`${n?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(e){const[n,r,s]=Js(e);if(await this._currentTenantIsOwner(n)){const i=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${r}/${s.substring(0,8)}?organizationId=${i.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${i.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,s=>s.repos))yield*r}async getPrompt(e){const[n,r,s]=Js(e),i=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await ue(o,"get prompt"),o)}),a=await(i==null?void 0:i.json());return a!=null&&a.repo?a.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,i,a]=Js(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const o={repo_handle:i,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=JSON.stringify(o),u=await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await ue(h,"create prompt"),h}),{repo:d}=await u.json();return d}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,i,a]=Js(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${s}/${i}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},u=JSON.stringify(l),h=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/commits/${s}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await ue(m,"create commit"),m})).json();return this._getPromptUrl(`${s}/${i}${h.commit_hash?`:${h.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var a;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of n){const l=o.id,u={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},d=$n(u,`Serializing body for example with id: ${l}`),h=new Blob([d],{type:"application/json"});if(r.append(l,h),o.inputs){const m=$n(o.inputs,`Serializing inputs for example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.inputs`,p)}if(o.outputs){const m=$n(o.outputs,`Serializing outputs whle updating example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.outputs`,p)}if(o.attachments)for(const[m,p]of Object.entries(o.attachments)){let y,w;Array.isArray(p)?[y,w]=p:(y=p.mimeType,w=p.data);const x=new Blob([w],{type:`${y}; length=${w.byteLength}`});r.append(`${l}.attachment.${m}`,x)}if(o.attachments_operations){const m=$n(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),p=new Blob([m],{type:"application/json"});r.append(`${l}.attachments_operations`,p)}}const s=e??((a=n[0])==null?void 0:a.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${s}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await ue(o,"update examples"),o})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of n){const a=(i.id??wn()).toString(),o={created_at:i.created_at,...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split},...i.source_run_id&&{source_run_id:i.source_run_id},...i.use_source_run_io&&{use_source_run_io:i.use_source_run_io},...i.use_source_run_attachments&&{use_source_run_attachments:i.use_source_run_attachments}},l=$n(o,`Serializing body for uploaded example with id: ${a}`),u=new Blob([l],{type:"application/json"});if(r.append(a,u),i.inputs){const d=$n(i.inputs,`Serializing inputs for uploaded example with id: ${a}`),h=new Blob([d],{type:"application/json"});r.append(`${a}.inputs`,h)}if(i.outputs){const d=$n(i.outputs,`Serializing outputs for uploaded example with id: ${a}`),h=new Blob([d],{type:"application/json"});r.append(`${a}.outputs`,h)}if(i.attachments)for(const[d,h]of Object.entries(i.attachments)){let m,p;Array.isArray(h)?[m,p]=h:(m=h.mimeType,p=h.data);const y=new Blob([p],{type:`${m}; length=${p.byteLength}`});r.append(`${a}.attachment.${d}`,y)}}return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await ue(i,"upload examples"),i})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,s]=Js(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const i={};if((n==null?void 0:n.description)!==void 0&&(i.description=n.description),(n==null?void 0:n.readme)!==void 0&&(i.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(i.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(i.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(i.is_archived=n.isArchived),Object.keys(i).length===0)throw new Error("No valid update options provided");const a=JSON.stringify(i);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await ue(l,"update prompt"),l})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,s]=Js(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(a,"delete prompt"),a})).json()}async pullPromptCommit(e,n){const[r,s,i]=Js(e),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${r}/${s}/${i}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ue(l,"pull prompt commit"),l})).json();return{owner:r,repo:s,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(s=>s!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:s}=n,[i,a]=this.parseTokenOrUrl(e,r),o=new Rc({apiUrl:i,apiKey:"placeholder"}),l=await o.readSharedDataset(a),u=s||l.name;try{if(await this.hasDataset({datasetId:u})){console.log(`Dataset ${u} already exists in your tenant. Skipping.`);return}}catch{}const d=await o.listSharedExamples(a),h=await this.createDataset(u,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:d.map(m=>m.inputs),outputs:d.flatMap(m=>m.outputs?[m.outputs]:[]),datasetId:h.id})}catch(m){throw console.error(`An error occurred while creating dataset ${u}. You should delete it manually.`),m}}parseTokenOrUrl(e,n,r=2,s="dataset"){try{return Ee(e),[n,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(o=>o!=="");if(a.length>=r){const o=a[a.length-r];return[n,o]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=c3())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function GS(t){return"dataset_id"in t||"dataset_name"in t}const z6=t=>!!["TRACING_V2","TRACING"].find(n=>bn(n)==="true"),vi=Symbol.for("lc:context_variables"),Cf=Symbol.for("langsmith:replica_trace_roots");function BS(t,e){if(vi in t)return t[vi][e]}function G6(t,e,n){const r=vi in t?t[vi]:{};r[e]=n,t[vi]=r}const hl=36,Cl="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function VS(t){const n=Object.keys(t).sort().map(r=>`${r}:${t[r]??""}`).join("|");return El(n,Cl)}function B6(t){return t.replace(/[-:.]/g,"")}function xI(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function wI(t,e,n=1){const r=xI(t,n);return{dottedOrder:B6(r)+e,microsecondPrecisionDatestring:r}}class Ph{constructor(e,n,r,s){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r,this.replicas=s}static fromHeader(e){const n=e.split(",");let r={},s=[],i,a;for(const o of n){const[l,u]=o.split("="),d=decodeURIComponent(u);l==="langsmith-metadata"?r=JSON.parse(d):l==="langsmith-tags"?s=d.split(","):l==="langsmith-project"?i=d:l==="langsmith-replicas"&&(a=JSON.parse(d))}return new Ph(r,s,i,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class yn{constructor(e){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),V6(e)){Object.assign(this,{...e});return}const n=yn.getDefaultConfig(),{metadata:r,...s}=e,i=s.client??yn.getSharedClient(),a={...r,...(o=s==null?void 0:s.extra)==null?void 0:o.metadata};if(s.extra={...s.extra,metadata:a},"id"in s&&s.id==null&&delete s.id,Object.assign(this,{...n,...s,client:i}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=xI(this.start_time,this.execution_order)),this.id||(this.id=YF(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=K6(this.replicas),!this.dotted_order){const{dottedOrder:l}=wI(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:ZN(),child_runs:[],api_url:os("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:os("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return yn.sharedClient||(yn.sharedClient=new Rc),yn.sharedClient}createChild(e){var d,h,m,p,y,w,x;const n=this.child_execution_order+1,r=(d=this.replicas)==null?void 0:d.map(g=>{const{reroot:f,...v}=g;return v}),s=e.replicas??r,i=new yn({...e,parent_run:this,project_name:this.project_name,replicas:s,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});vi in this&&(i[vi]=this[vi]);const a=Symbol.for("lc:child_config"),o=((h=e.extra)==null?void 0:h[a])??this.extra[a];if(W6(o)){const g={...o},f=H6(g.callbacks)?(p=(m=g.callbacks).copy)==null?void 0:p.call(m):void 0;f&&(Object.assign(f,{_parentRunId:i.id}),(x=(w=(y=f.handlers)==null?void 0:y.find(bI))==null?void 0:w.updateFromRunTree)==null||x.call(w,i),g.callbacks=f),i.extra[a]=g}const l=new Set;let u=this;for(;u!=null&&!l.has(u.id);)l.add(u.id),u.child_execution_order=Math.max(u.child_execution_order,n),u=u.parent_run;return this.child_runs.push(i),i}async end(e,n,r=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,n,r=!0){var o,l;const s=e.extra??{};if(((o=s==null?void 0:s.runtime)==null?void 0:o.library)===void 0&&(s.runtime||(s.runtime={}),n))for(const[u,d]of Object.entries(n))s.runtime[u]||(s.runtime[u]=d);let i,a;return r?(a=((l=e.parent_run)==null?void 0:l.id)??e.parent_run_id,i=[]):(i=e.child_runs.map(u=>this._convertToCreate(u,n,r)),a=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:i,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const r=n.dotted_order.split(".");let s=null;for(let i=0;i<r.length;i++)if(r[i].slice(-hl)===e){s=i;break}if(s!==null){const i=r.slice(s+1);n.dotted_order=i.join("."),i.length>0?n.trace_id=i[0].slice(-hl):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const r=BS(this,Cf)??{};r[e]=n,G6(this,Cf,r);for(const s of this.child_runs)s._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:r,excludeChildRuns:s=!0,reroot:i=!1,distributedParentId:a,apiUrl:o,apiKey:l,workspaceId:u}=e,d=this._convertToCreate(this,r,s);if(n===this.project_name)return{...d,session_name:n};if(i){if(a)this._sliceParentId(a,d);else if(d.parent_run_id=void 0,d.dotted_order){const f=d.dotted_order.split(".");f.length>0&&(d.dotted_order=f[f.length-1],d.trace_id=d.id)}const g=VS({projectName:n,apiUrl:o,apiKey:l,workspaceId:u});this._setReplicaTraceRoot(g,d.id)}let h;if(!i){const g=BS(this,Cf)??{},f=VS({projectName:n,apiUrl:o,apiKey:l,workspaceId:u});if(h=g[f],h&&(d.trace_id=h,d.dotted_order)){const v=d.dotted_order.split(".");let b=null;for(let _=0;_<v.length;_++)if(v[_].slice(-hl)===h){b=_;break}if(b!==null){const _=v.slice(b);d.dotted_order=_.join(".")}}}const m=d.id,p=El(`${m}:${n}`,Cl);let y;d.trace_id?y=El(`${d.trace_id}:${n}`,Cl):y=p;let w;d.parent_run_id&&(w=El(`${d.parent_run_id}:${n}`,Cl));let x;return d.dotted_order&&(x=d.dotted_order.split(".").map(v=>{const b=v.slice(-hl),_=El(`${b}:${n}`,Cl);return v.slice(0,-hl)+_}).join(".")),{...d,id:p,trace_id:y,parent_run_id:w,dotted_order:x,session_name:n}}async postRun(e=!0){try{const n=eI();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:s,apiUrl:i,workspaceId:a,reroot:o}of this.replicas){const l=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:i,apiKey:s,workspaceId:a});await this.client.createRun(l,{apiKey:s,apiUrl:i,workspaceId:a})}else{const r=this._convertToCreate(this,n,e);await this.client.createRun(r)}if(!e){wy("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:s,apiUrl:i,workspaceId:a,updates:o,reroot:l}of this.replicas){const u=this._remapForProject({projectName:r??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:i,apiKey:s,workspaceId:a}),d={id:u.id,name:u.name,run_type:u.run_type,start_time:u.start_time,outputs:u.outputs,error:u.error,parent_run_id:u.parent_run_id,session_name:u.session_name,reference_example_id:u.reference_example_id,end_time:u.end_time,dotted_order:u.dotted_order,trace_id:u.trace_id,events:u.events,tags:u.tags,extra:u.extra,attachments:this.attachments,...o};e!=null&&e.excludeInputs||(d.inputs=u.inputs),await this.client.updateRun(u.id,d,{apiKey:s,apiUrl:i,workspaceId:a})}else try{const r={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var u,d,h,m;const r=e==null?void 0:e.callbacks;let s,i,a,o=z6();if(r){const p=((u=r==null?void 0:r.getParentRunId)==null?void 0:u.call(r))??"",y=(d=r==null?void 0:r.handlers)==null?void 0:d.find(w=>(w==null?void 0:w.name)=="langchain_tracer");s=(h=y==null?void 0:y.getRun)==null?void 0:h.call(y,p),i=y==null?void 0:y.projectName,a=y==null?void 0:y.client,o=o||!!y}return s?new yn({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:a,tracingEnabled:o,project_name:i,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(m=s==null?void 0:s.extra)==null?void 0:m.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new yn({...n,client:a,tracingEnabled:o,project_name:i})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var d;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=r["langsmith-trace"];if(!s||typeof s!="string")return;const i=s.trim(),a=i.split(".").map(h=>{const[m,p]=h.split("Z");return{strTime:m,time:Date.parse(m+"Z"),uuid:p}}),o=a[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(d=a.at(-1))==null?void 0:d.uuid,trace_id:o,dotted_order:i};if(r.baggage&&typeof r.baggage=="string"){const h=Ph.fromHeader(r.baggage);l.metadata=h.metadata,l.tags=h.tags,l.project_name=h.project_name,l.replicas=h.replicas}const u=new yn(l);return u.distributedParentId=u.id,u}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new Ph((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[s,i]of Object.entries(n))e.set(s,i);return n}}Object.defineProperty(yn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function V6(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function bI(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function HS(t){return Array.isArray(t)&&t.some(e=>bI(e))}function H6(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function W6(t){var e;return t!=null&&typeof t.callbacks=="object"&&(HS((e=t.callbacks)==null?void 0:e.handlers)||HS(t.callbacks))}function q6(){const t=os("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof e=="object"&&e!==null){Y6(e);const n=[];for(const[r,s]of Object.entries(e)){const i=r.replace(/\/$/,"");if(typeof s=="string")n.push({apiUrl:i,apiKey:s});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof s}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(E6(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function K6(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):q6()}function Y6(t){if(Object.keys(t).length>0&&bn("ENDPOINT"))throw new A6}var Z6={};De(Z6,{BaseTracer:()=>Ho,isBaseTracer:()=>Da});const J6=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function Sy(t,e){if(t)return new yn({...t,start_time:t._serialized_start_time??t.start_time,parent_run:Sy(e),child_runs:t.child_runs.map(n=>Sy(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:WN()},tracingEnabled:!1})}function Nf(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Da(t){return typeof t._addRunToRunMap=="function"}var Ho=class extends nu{constructor(e){super(...arguments);T(this,"runMap",new Map);T(this,"runTreeMap",new Map);T(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?J6(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:r}=wI(new Date(e.start_time).getTime(),e.id,e.execution_order),s={...e},i=this.getRunById(s.parent_run_id);if(s.parent_run_id!==void 0?i&&(this._addChildRun(i,s),i.child_execution_order=Math.max(i.child_execution_order,s.child_execution_order),s.trace_id=i.trace_id,i.dotted_order!==void 0&&(s.dotted_order=[i.dotted_order,n].join("."),s._serialized_start_time=r)):(s.trace_id=s.id,s.dotted_order=n,s._serialized_start_time=r),this.usesRunTreeMap){const a=Sy(s,i);a!==void 0&&this.runTreeMap.set(s.id,a)}else this.runMap.set(s.id,s);return s}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,s,i,a,o,l){const u=this._getExecutionOrder(s),d=Date.now(),h=o?{...i,metadata:o}:i,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{prompts:n},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:h??{},tags:a||[]};return this._addRunToRunMap(m)}async handleLLMStart(e,n,r,s,i,a,o,l){var d,h;const u=this.getRunById(r)??this._createRunForLLMStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((h=this.onLLMStart)==null?void 0:h.call(this,u)),u}_createRunForChatModelStart(e,n,r,s,i,a,o,l){const u=this._getExecutionOrder(s),d=Date.now(),h=o?{...i,metadata:o}:i,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{messages:n},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:h??{},tags:a||[]};return this._addRunToRunMap(m)}async handleChatModelStart(e,n,r,s,i,a,o,l){var d,h;const u=this.getRunById(r)??this._createRunForChatModelStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((h=this.onLLMStart)==null?void 0:h.call(this,u)),u}async handleLLMEnd(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await((o=this.onLLMEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleLLMError(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await((o=this.onLLMError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForChainStart(e,n,r,s,i,a,o,l){const u=this._getExecutionOrder(s),d=Date.now(),h={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:n,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(h)}async handleChainStart(e,n,r,s,i,a,o,l){var d,h;const u=this.getRunById(r)??this._createRunForChainStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,u)),await((h=this.onChainStart)==null?void 0:h.call(this,u)),u}async handleChainEnd(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Nf(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(i==null?void 0:i.inputs)!==void 0&&(a.inputs=Nf(i.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(i==null?void 0:i.inputs)!==void 0&&(a.inputs=Nf(i.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,n,r,s,i,a,o){const l=this._getExecutionOrder(s),u=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:s,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(d)}async handleToolStart(e,n,r,s,i,a,o){var u,d;const l=this.getRunById(r)??this._createRunForToolStart(e,n,r,s,i,a,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((d=this.onToolStart)==null?void 0:d.call(this,l)),l}async handleToolEnd(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const s=r;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentAction)==null?void 0:i.call(this,r))}async handleAgentEnd(e,n){var s;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,r)))}_createRunForRetrieverStart(e,n,r,s,i,a,o){const l=this._getExecutionOrder(s),u=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:s,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(d)}async handleRetrieverStart(e,n,r,s,i,a,o){var u,d;const l=this.getRunById(r)??this._createRunForRetrieverStart(e,n,r,s,i,a,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((d=this.onRetrieverStart)==null?void 0:d.call(this,l)),l}async handleRetrieverEnd(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var s;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,r)))}async handleLLMNewToken(e,n,r,s,i,a){var l;const o=this.getRunById(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:a==null?void 0:a.chunk})),o}},vx={exports:{}};vx.exports;(function(t){const n=(i=0)=>a=>`\x1B[${38+i};5;${a}m`,r=(i=0)=>(a,o,l)=>`\x1B[${38+i};2;${a};${o};${l}m`;function s(){const i=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[u,d]of Object.entries(l))a[u]={open:`\x1B[${d[0]}m`,close:`\x1B[${d[1]}m`},l[u]=a[u],i.set(d[0],d[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:i,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=n(),a.color.ansi16m=r(),a.bgColor.ansi256=n(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,u)=>o===l&&l===u?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(u/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:u}=l.groups;u.length===3&&(u=u.split("").map(h=>h+h).join(""));const d=Number.parseInt(u,16);return[d>>16&255,d>>8&255,d&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:s})})(vx);var X6=vx.exports;const _I=Gk(X6);var Q6={};De(Q6,{ConsoleCallbackHandler:()=>ky});function sn(t,e){return`${t.open}${e}${t.close}`}function Yn(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function WS(t){return typeof t=="string"?t.trim():t==null?t:Yn(t,t.toString())}function Xs(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:gn}=_I;var ky=class extends Ho{constructor(){super(...arguments);T(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const s=this.runMap.get(r.parent_run_id);if(s)n.push(s),r=s;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((s,i,a)=>{const o=`${s.execution_order}:${s.run_type}:${s.name}`;return i===a.length-1?sn(_I.bold,o):o}).join(" > ");return sn(gn.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.green,"[chain/start]")} [${n}] Entering Chain run with input: ${Yn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.cyan,"[chain/end]")} [${n}] [${Xs(e)}] Exiting Chain run with output: ${Yn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.red,"[chain/error]")} [${n}] [${Xs(e)}] Chain run errored with error: ${Yn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${sn(gn.green,"[llm/start]")} [${n}] Entering LLM run with input: ${Yn(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.cyan,"[llm/end]")} [${n}] [${Xs(e)}] Exiting LLM run with output: ${Yn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.red,"[llm/error]")} [${n}] [${Xs(e)}] LLM run errored with error: ${Yn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.green,"[tool/start]")} [${n}] Entering Tool run with input: "${WS(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${sn(gn.cyan,"[tool/end]")} [${n}] [${Xs(e)}] Exiting Tool run with output: "${WS((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.red,"[tool/error]")} [${n}] [${Xs(e)}] Tool run errored with error: ${Yn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${Yn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.cyan,"[retriever/end]")} [${n}] [${Xs(e)}] Exiting Retriever run with output: ${Yn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${sn(gn.red,"[retriever/error]")} [${n}] [${Xs(e)}] Retriever run errored with error: ${Yn(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${sn(gn.blue,"[agent/action]")} [${r}] Agent selected action: ${Yn(n.actions[n.actions.length-1],"[action]")}`)}};let If;const SI=()=>{if(If===void 0){const t=ns("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};If=new Rc(t)}return If};let e9=class{getStore(){}run(e,n){return n()}};const Rf=Symbol.for("ls:tracing_async_local_storage"),t9=new e9;let n9=class{getInstance(){return globalThis[Rf]??t9}initializeGlobalInstance(e){globalThis[Rf]===void 0&&(globalThis[Rf]=e)}};const r9=new n9;function s9(t=!1){const e=r9.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function xx(t){return typeof t=="function"&&"langsmith:traceable"in t}var i9={};De(i9,{LangChainTracer:()=>Gd});var Gd=class kI extends Ho{constructor(n={}){super(n);T(this,"name","langchain_tracer");T(this,"projectName");T(this,"exampleId");T(this,"client");T(this,"replicas");T(this,"usesRunTreeMap",!0);const{exampleId:r,projectName:s,client:i,replicas:a}=n;this.projectName=s??ZN(),this.replicas=a,this.exampleId=r,this.client=i??SI();const o=kI.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(n){}async onRunCreate(n){const r=this.getRunTreeWithTracingConfig(n.id);await(r==null?void 0:r.postRun())}async onRunUpdate(n){const r=this.getRunTreeWithTracingConfig(n.id);await(r==null?void 0:r.patchRun())}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let r=n;const s=new Set;for(;r.parent_run&&!(s.has(r.id)||(s.add(r.id),!r.parent_run));)r=r.parent_run;s.clear();const i=[r];for(;i.length>0;){const a=i.shift();!a||s.has(a.id)||(s.add(a.id),this.runTreeMap.set(a.id,a),a.child_runs&&i.push(...a.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const r=this.runTreeMap.get(n);if(r)return new yn({...r,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return s9(!0)}catch{return}}};let sa;function a9(){const t="default"in ks?ks.default:ks;return new t({autoStart:!0,concurrency:1})}function o9(){return typeof sa>"u"&&(sa=a9()),sa}async function St(t,e){if(e===!0){const n=Ic();n!==void 0?await n.run(void 0,async()=>t()):await t()}else sa=o9(),sa.add(async()=>{const n=Ic();n!==void 0?await n.run(void 0,async()=>t()):await t()})}async function l9(){const t=SI();await Promise.allSettled([typeof sa<"u"?sa.onIdle():Promise.resolve(),t.awaitPendingTraceBatches()])}var c9={};De(c9,{awaitAllCallbacks:()=>l9,consumeCallback:()=>St});const u9=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>ns(n)==="true");function TI(t){var r;const e=Ic();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[Ql])==null?void 0:r[t]}const d9=Symbol("lc:configure_hooks"),h9=()=>TI(d9)||[];var m9={};De(m9,{BaseCallbackManager:()=>AI,BaseRunManager:()=>su,CallbackManager:()=>Cn,CallbackManagerForChainRun:()=>CI,CallbackManagerForLLMRun:()=>Ty,CallbackManagerForRetrieverRun:()=>EI,CallbackManagerForToolRun:()=>NI,ensureHandler:()=>Oc,parseCallbackConfigArg:()=>Fm});function Fm(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}var AI=class{setHandler(t){return this.setHandlers([t])}},su=class{constructor(t,e,n,r,s,i,a,o){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=s,this.metadata=i,this.inheritableMetadata=a,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,r,s){await Promise.all(this.handlers.map(i=>St(async()=>{var a;try{await((a=i.handleCustomEvent)==null?void 0:a.call(i,t,e,this.runId,this.tags,this.metadata))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleCustomEvent: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}},EI=class extends su{getChild(t){const e=new Cn(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw r}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${r}`),e.raiseError)throw t}},e.awaitHandlers)))}},Ty=class extends su{async handleLLMNewToken(t,e,n,r,s,i){await Promise.all(this.handlers.map(a=>St(async()=>{var o;if(!a.ignoreLLM)try{await((o=a.handleLLMNewToken)==null?void 0:o.call(a,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMNewToken: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleLLMError(t,e,n,r,s){await Promise.all(this.handlers.map(i=>St(async()=>{var a;if(!i.ignoreLLM)try{await((a=i.handleLLMError)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMError: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleLLMEnd(t,e,n,r,s){await Promise.all(this.handlers.map(i=>St(async()=>{var a;if(!i.ignoreLLM)try{await((a=i.handleLLMEnd)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMEnd: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}},CI=class extends su{getChild(t){const e=new Cn(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,r,s){await Promise.all(this.handlers.map(i=>St(async()=>{var a;if(!i.ignoreChain)try{await((a=i.handleChainError)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainError: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleChainEnd(t,e,n,r,s){await Promise.all(this.handlers.map(i=>St(async()=>{var a;if(!i.ignoreChain)try{await((a=i.handleChainEnd)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainEnd: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},NI=class extends su{getChild(t){const e=new Cn(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>St(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},Cn=class Nl extends AI{constructor(n,r){super();T(this,"handlers",[]);T(this,"inheritableHandlers",[]);T(this,"tags",[]);T(this,"inheritableTags",[]);T(this,"metadata",{});T(this,"inheritableMetadata",{});T(this,"name","callback_manager");T(this,"_parentRunId");this.handlers=(r==null?void 0:r.handlers)??this.handlers,this.inheritableHandlers=(r==null?void 0:r.inheritableHandlers)??this.inheritableHandlers,this.tags=(r==null?void 0:r.tags)??this.tags,this.inheritableTags=(r==null?void 0:r.inheritableTags)??this.inheritableTags,this.metadata=(r==null?void 0:r.metadata)??this.metadata,this.inheritableMetadata=(r==null?void 0:r.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,r,s=void 0,i=void 0,a=void 0,o=void 0,l=void 0,u=void 0){return Promise.all(r.map(async(d,h)=>{const m=h===0&&s?s:wn();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return Da(p)&&p._createRunForLLMStart(n,[d],m,this._parentRunId,a,this.tags,this.metadata,u),St(async()=>{var y;try{await((y=p.handleLLMStart)==null?void 0:y.call(p,n,[d],m,this._parentRunId,a,this.tags,this.metadata,u))}catch(w){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${w}`),p.raiseError)throw w}},p.awaitHandlers)})),new Ty(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,r,s=void 0,i=void 0,a=void 0,o=void 0,l=void 0,u=void 0){return Promise.all(r.map(async(d,h)=>{const m=h===0&&s?s:wn();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return Da(p)&&p._createRunForChatModelStart(n,[d],m,this._parentRunId,a,this.tags,this.metadata,u),St(async()=>{var y,w;try{if(p.handleChatModelStart)await((y=p.handleChatModelStart)==null?void 0:y.call(p,n,[d],m,this._parentRunId,a,this.tags,this.metadata,u));else if(p.handleLLMStart){const x=nx(d);await((w=p.handleLLMStart)==null?void 0:w.call(p,n,[x],m,this._parentRunId,a,this.tags,this.metadata,u))}}catch(x){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${x}`),p.raiseError)throw x}},p.awaitHandlers)})),new Ty(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return Da(u)&&u._createRunForChainStart(n,r,s,this._parentRunId,this.tags,this.metadata,i,l),St(async()=>{var d;try{await((d=u.handleChainStart)==null?void 0:d.call(u,n,r,s,this._parentRunId,this.tags,this.metadata,i,l))}catch(h){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${h}`),u.raiseError)throw h}},u.awaitHandlers)})),new CI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return Da(u)&&u._createRunForToolStart(n,r,s,this._parentRunId,this.tags,this.metadata,l),St(async()=>{var d;try{await((d=u.handleToolStart)==null?void 0:d.call(u,n,r,s,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${h}`),u.raiseError)throw h}},u.awaitHandlers)})),new NI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return Da(u)&&u._createRunForRetrieverStart(n,r,s,this._parentRunId,this.tags,this.metadata,l),St(async()=>{var d;try{await((d=u.handleRetrieverStart)==null?void 0:d.call(u,n,r,s,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${h}`),u.raiseError)throw h}},u.awaitHandlers)})),new EI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,r,s,i,a){await Promise.all(this.handlers.map(o=>St(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,n,r,s,this.tags,this.metadata))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}addHandler(n,r=!0){this.handlers.push(n),r&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(r=>r!==n),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==n)}setHandlers(n,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const s of n)this.addHandler(s,r)}addTags(n,r=!0){this.removeTags(n),this.tags.push(...n),r&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(r=>!n.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!n.includes(r))}addMetadata(n,r=!0){this.metadata={...this.metadata,...n},r&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const r of Object.keys(n))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(n=[],r=!0){const s=new Nl(this._parentRunId);for(const i of this.handlers){const a=this.inheritableHandlers.includes(i);s.addHandler(i,a)}for(const i of this.tags){const a=this.inheritableTags.includes(i);s.addTags([i],a)}for(const i of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(i);s.addMetadata({[i]:this.metadata[i]},a)}for(const i of n)s.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||s.addHandler(i,r);return s}static fromHandlers(n){class r extends nu{constructor(){super();T(this,"name",wn());Object.assign(this,n)}}const s=new this;return s.addHandler(new r),s}static configure(n,r,s,i,a,o,l){return this._configureSync(n,r,s,i,a,o,l)}static _configureSync(n,r,s,i,a,o,l){var p;let u;(n||r)&&(Array.isArray(n)||!n?(u=new Nl,u.setHandlers((n==null?void 0:n.map(Oc))??[],!0)):u=n,u=u.copy(Array.isArray(r)?r.map(Oc):r==null?void 0:r.handlers,!1));const d=ns("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),h=((p=Gd.getTraceableRunTree())==null?void 0:p.tracingEnabled)||u9(),m=h||(ns("LANGCHAIN_TRACING")??!1);if(d||m){if(u||(u=new Nl),d&&!u.handlers.some(y=>y.name===ky.prototype.name)){const y=new ky;u.addHandler(y,!0)}if(m&&!u.handlers.some(y=>y.name==="langchain_tracer")&&h){const y=new Gd;u.addHandler(y,!0)}if(h){const y=Gd.getTraceableRunTree();if(y&&u._parentRunId===void 0){u._parentRunId=y.id;const w=u.handlers.find(x=>x.name==="langchain_tracer");w==null||w.updateFromRunTree(y)}}}for(const{contextVar:y,inheritable:w=!0,handlerClass:x,envVar:g}of h9()){const f=g&&ns(g)==="true"&&x;let v;const b=y!==void 0?TI(y):void 0;b&&KN(b)?v=b:f&&(v=new x({})),v!==void 0&&(u||(u=new Nl),u.handlers.some(_=>_.name===v.name)||u.addHandler(v,w))}return(s||i)&&u&&(u.addTags(s??[]),u.addTags(i??[],!1)),(a||o)&&u&&(u.addMetadata(a??{}),u.addMetadata(o??{},!1)),u}};function Oc(t){return"name"in t?t:nu.fromMethods(t)}var II=class{getStore(){}run(t,e){return e()}enterWith(t){}};const p9=new II,qS=Symbol.for("lc:child_config");var f9=class{getInstance(){return Ic()??p9}getRunnableConfig(){var e,n;return(n=(e=this.getInstance().getStore())==null?void 0:e.extra)==null?void 0:n[qS]}runWithConfig(t,e,n){var u;const r=Cn._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),s=this.getInstance(),i=s.getStore(),a=r==null?void 0:r.getParentRunId(),o=(u=r==null?void 0:r.handlers)==null?void 0:u.find(d=>(d==null?void 0:d.name)==="langchain_tracer");let l;return o&&a?l=o.getRunTreeWithTracingConfig(a):n||(l=new yn({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[qS]:t}),i!==void 0&&i[Ql]!==void 0&&(l===void 0&&(l={}),l[Ql]=i[Ql]),s.run(l,e)}initializeGlobalInstance(t){Ic()===void 0&&nF(t)}};const Nr=new f9;var g9={};De(g9,{AsyncLocalStorageProviderSingleton:()=>Nr,MockAsyncLocalStorage:()=>II,_CONTEXT_VARIABLES_KEY:()=>Ql});const Of=25;async function zn(t){return Cn._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function jh(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const s=e[r]??[];e[r]=[...new Set(s.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const s=e.callbacks,i=n.callbacks;if(Array.isArray(i))if(!s)e.callbacks=i;else if(Array.isArray(s))e.callbacks=s.concat(i);else{const a=s.copy();for(const o of i)a.addHandler(Oc(o),!0);e.callbacks=a}else if(i)if(!s)e.callbacks=i;else if(Array.isArray(s)){const a=i.copy();for(const o of s)a.addHandler(Oc(o),!0);e.callbacks=a}else e.callbacks=new Cn(i._parentRunId,{handlers:s.handlers.concat(i.handlers),inheritableHandlers:s.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(i.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(i.inheritableTags))),metadata:{...s.metadata,...i.metadata}})}else{const s=r;e[s]=n[s]??e[s]}return e}const y9=new Set(["string","number","boolean"]);function Be(t){var r;const e=Nr.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:i,...a}=e;n=Object.entries(a).reduce((o,[l,u])=>(u!==void 0&&(o[l]=u),o),n)}if(t&&(n=Object.entries(t).reduce((s,[i,a])=>(a!==void 0&&(s[i]=a),s),n)),n!=null&&n.configurable)for(const s of Object.keys(n.configurable))y9.has(typeof n.configurable[s])&&!((r=n.metadata)!=null&&r[s])&&(n.metadata||(n.metadata={}),n.metadata[s]=n.configurable[s]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const s=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,s])):n.signal=s,delete n.timeout}return n}function tt(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:s,configurable:i,runId:a}={}){const o=Be(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),s!==void 0&&(o.runName=s),i!==void 0&&(o.configurable={...o.configurable,...i}),a!==void 0&&delete o.runId,o}function js(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function $s(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,s)=>{n=()=>{s(Pc(e))},e.addEventListener("abort",n),e.aborted&&s(Pc(e))})]).finally(()=>e.removeEventListener("abort",n))}function Pc(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var v9={};De(v9,{AsyncGeneratorWithSetup:()=>xa,IterableReadableStream:()=>Ir,atee:()=>wx,concat:()=>Ti,pipeGeneratorWithSetup:()=>RI});var Ir=class Ay extends ReadableStream{constructor(){super(...arguments);T(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const r=n.getReader();return new Ay({start(s){return i();function i(){return r.read().then(({done:a,value:o})=>{if(a){s.close();return}return s.enqueue(o),i()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(n){return new Ay({async pull(r){const{value:s,done:i}=await n.next();i&&r.close(),r.enqueue(s)},async cancel(r){await n.return(r)}})}};function wx(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(s){for(;;)if(s.length===0){const i=await t.next();for(const a of n)a.push(i)}else{if(s[0].done)return;yield s.shift().value}})}function Ti(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,s]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=Ti(n[r],s):n[r]=s;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var xa=class{constructor(t){T(this,"generator");T(this,"setup");T(this,"config");T(this,"signal");T(this,"firstResult");T(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,r)=>{Nr.runWithConfig(js(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,r):this.firstResult.then(s=>n(void 0),r)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?Nr.runWithConfig(js(this.config),this.signal?async()=>$s(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function RI(t,e,n,r,...s){const i=new xa({generator:e,startSetup:n,signal:r}),a=await i.setup;return{output:t(i,a,...s),setup:a}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const x9=Object.prototype.hasOwnProperty;function Ey(t,e){return x9.call(t,e)}function Cy(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)Ey(t,n)&&e.push(n);return e}function rr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Ny(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function zi(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function OI(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Iy(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Iy(t[n]))return!0}else if(typeof t=="object"){const n=Cy(t),r=n.length;for(var e=0;e<r;e++)if(Iy(t[n[e]]))return!0}}return!1}function KS(t,e){const n=[t];for(const r in e){const s=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof s<"u"&&n.push(`${r}: ${s}`)}return n.join(`
`)}var PI=class extends Error{constructor(t,e,n,r,s){super(KS(t,{name:e,index:n,operation:r,tree:s})),this.name=e,this.index=n,this.operation=r,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=KS(t,{name:e,index:n,operation:r,tree:s})}},jI={};De(jI,{JsonPatchError:()=>ht,_areEquals:()=>jc,applyOperation:()=>ia,applyPatch:()=>To,applyReducer:()=>_9,deepClone:()=>w9,getValueByPointer:()=>$h,validate:()=>$I,validator:()=>Dh});const ht=PI,w9=rr,so={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=$h(n,this.path);r&&(r=rr(r));const s=ia(n,{op:"remove",path:this.from}).removed;return ia(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=$h(n,this.from);return ia(n,{op:"add",path:this.path,value:rr(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:jc(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var b9={add:function(t,e,n){return Ny(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:so.move,copy:so.copy,test:so.test,_get:so._get};function $h(t,e){if(e=="")return t;var n={op:"_get",path:e};return ia(t,n),n.value}function ia(t,e,n=!1,r=!0,s=!0,i=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):Dh(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=$h(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=jc(t,e.value),a.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new ht("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return a}}else{r||(t=rr(t));const o=(e.path||"").split("/");let l=t,u=1,d=o.length,h,m,p;for(typeof n=="function"?p=n:p=Dh;;){if(m=o[u],m&&m.indexOf("~")!=-1&&(m=OI(m)),s&&(m=="__proto__"||m=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(l[m]===void 0?h=o.slice(0,u).join("/"):u==d-1&&(h=e.path),h!==void 0&&p(e,0,t,h)),u++,Array.isArray(l)){if(m==="-")m=l.length;else{if(n&&!Ny(m))throw new ht("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);Ny(m)&&(m=~~m)}if(u>=d){if(n&&e.op==="add"&&m>l.length)throw new ht("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);const y=b9[e.op].call(e,l,m,t);if(y.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return y}}else if(u>=d){const y=so[e.op].call(e,l,m,t);if(y.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return y}if(l=l[m],n&&u<d&&(!l||typeof l!="object"))throw new ht("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function To(t,e,n,r=!0,s=!0){if(n&&!Array.isArray(e))throw new ht("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=rr(t));const i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=ia(t,e[a],n,!0,s,a),t=i[a].newDocument;return i.newDocument=t,i}function _9(t,e,n){const r=ia(t,e);if(r.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Dh(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new ht("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(so[t.op]){if(typeof t.path!="string")throw new ht("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ht('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ht("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ht("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Iy(t.value))throw new ht("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,i=r.split("/").length;if(s!==i+1&&s!==i)throw new ht("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new ht("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=$I([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new ht("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new ht("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function $I(t,e,n){try{if(!Array.isArray(t))throw new ht("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)To(rr(e),rr(t),n||!0);else{n=n||Dh;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(s){if(s instanceof ht)return s;throw s}}function jc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),s,i,a;if(n&&r){if(i=t.length,i!=e.length)return!1;for(s=i;s--!==0;)if(!jc(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(i=o.length,i!==Object.keys(e).length)return!1;for(s=i;s--!==0;)if(!e.hasOwnProperty(o[s]))return!1;for(s=i;s--!==0;)if(a=o[s],!jc(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}function DI(t,e,n,r,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=Cy(e),a=Cy(t),o=!1,l=a.length-1;l>=0;l--){var u=a[l],d=t[u];if(Ey(e,u)&&!(e[u]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var h=e[u];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?DI(d,h,n,r+"/"+zi(u),s):d!==h&&(s&&n.push({op:"test",path:r+"/"+zi(u),value:rr(d)}),n.push({op:"replace",path:r+"/"+zi(u),value:rr(h)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:r+"/"+zi(u),value:rr(d)}),n.push({op:"remove",path:r+"/"+zi(u)}),o=!0):(s&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&i.length==a.length))for(var l=0;l<i.length;l++){var u=i[l];!Ey(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+zi(u),value:rr(e[u])})}}}function bx(t,e,n=!1){var r=[];return DI(t,e,r,"",n),r}({...jI});var S9={};De(S9,{LogStreamCallbackHandler:()=>Oy,RunLog:()=>_x,RunLogPatch:()=>ys,isLogStreamHandler:()=>LI});var ys=class{constructor(t){T(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=To({},e);return new _x({ops:e,state:n[n.length-1].newDocument})}},_x=class Ry extends ys{constructor(n){super(n);T(this,"state");this.state=n.state}concat(n){const r=this.ops.concat(n.ops),s=To(this.state,n.ops);return new Ry({ops:r,state:s[s.length-1].newDocument})}static fromRunLogPatch(n){const r=To({},n.ops);return new Ry({ops:n.ops,state:r[r.length-1].newDocument})}};const LI=t=>t.name==="log_stream_tracer";async function YS(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function ZS(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function k9(t){return t!==void 0&&t.message!==void 0}var Oy=class extends Ho{constructor(e){super({_awaitHandler:!0,...e});T(this,"autoClose",!0);T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");T(this,"_schemaFormat","original");T(this,"rootId");T(this,"keyMapByRunId",{});T(this,"counterMapByRunName",{});T(this,"transformStream");T(this,"writer");T(this,"receiveStream");T(this,"name","log_stream_tracer");T(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ir.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new ys({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new ys({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await YS(e,this._schemaFormat)),await this.writer.write(new ys({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await YS(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await ZS(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const s=new ys({ops:r});await this.writer.write(s)}finally{if(e.id===this.rootId){const n=new ys({ops:[{op:"replace",path:"/final_output",value:await ZS(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const i=e.inputs.messages!==void 0;let a;i?k9(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new cs({id:`run-${e.id}`,content:n}):a=n;const o=new ys({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${s}/streamed_output/-`,value:a}]});await this.writer.write(o)}},T9={};De(T9,{ChatGenerationChunk:()=>Eo,GenerationChunk:()=>Ao,RUN_KEY:()=>$c});const $c="__run";var Ao=class MI{constructor(e){T(this,"text");T(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new MI({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Eo=class FI extends Ao{constructor(n){super(n);T(this,"message");this.message=n.message}concat(n){return new FI({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function ld({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const A9=t=>t.name==="event_stream_tracer";var E9=class extends Ho{constructor(e){super({_awaitHandler:!0,...e});T(this,"autoClose",!0);T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");T(this,"runInfoMap",new Map);T(this,"tappedPromises",new Map);T(this,"transformStream");T(this,"writer");T(this,"receiveStream");T(this,"name","event_stream_tracer");T(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ir.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield r.value;return}function i(o,l){return o==="llm"&&typeof l=="string"?new Ao({text:l}):l}let a=this.tappedPromises.get(e);if(a===void 0){let o;a=new Promise(l=>{o=l}),this.tappedPromises.set(e,a);try{const l={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...l,data:{chunk:i(s.runType,r.value)}},s),yield r.value;for await(const u of n)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...l,data:{chunk:i(s.runType,u)}},s),yield u}finally{o==null||o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var a,o;const n=ld(e),r=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,s);const i=`on_${r}_start`;await this.send({event:i,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},s)}async onLLMNewToken(e,n,r){const s=this.runInfoMap.get(e.id);let i,a;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?i=new cs({content:n,id:`run-${e.id}`}):i=r.chunk.message;else if(s.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?i=new Ao({text:n}):i=r.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:a,data:{chunk:i},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var a,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(a=e.outputs)==null?void 0:a.generations;let i;if(n.runType==="chat_model"){for(const u of s??[]){if(i!==void 0)break;i=(o=u[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")i={generations:s==null?void 0:s.map(u=>u.map(d=>({text:d.text,generationInfo:d.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:i,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var a,o;const n=ld(e),r=e.run_type??"chain",s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:e.run_type};let i={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(i={},s.inputs={}):e.inputs.input!==void 0?(i.input=e.inputs.input,s.inputs=e.inputs.input):(i.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${r}_start`,data:i,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},s)}async onChainEnd(e){var o;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,s=e.inputs??n.inputs??{},a={output:((o=e.outputs)==null?void 0:o.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(a.input=s.input,n.inputs=s.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var s,i;const n=ld(e),r={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{}},r)}async onToolEnd(e){var s;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var i,a;const n=ld(e),s={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,s),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},s)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const s=this.runInfoMap.get(r);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:s.tags,metadata:s.metadata,data:n},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const C9=Object.prototype.toString,N9=t=>C9.call(t)==="[object Error]",I9=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function R9(t){if(!(t&&N9(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:I9.has(n)}function O9(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function cd(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class P9 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function j9(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let s=Math.round(r*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function JS(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function $9({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:s}){var p,y,w;const i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof P9)throw i.originalError;const a=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:i,attemptNumber:e,retriesLeft:a,retriesConsumed:n});if(await s.onFailedAttempt(l),JS(r,o)<=0)throw i;const u=await s.shouldConsumeRetry(l),d=JS(r,o);if(d<=0||a<=0)throw i;if(i instanceof TypeError&&!R9(i)){if(u)throw i;return(p=s.signal)==null||p.throwIfAborted(),!1}if(!await s.shouldRetry(l))throw i;if(!u)return(y=s.signal)==null||y.throwIfAborted(),!1;const h=j9(n,s),m=Math.min(h,d);return m>0&&await new Promise((x,g)=>{var b,_;const f=()=>{var E;clearTimeout(v),(E=s.signal)==null||E.removeEventListener("abort",f),g(s.signal.reason)},v=setTimeout(()=>{var E;(E=s.signal)==null||E.removeEventListener("abort",f),x()},m);s.unref&&((b=v.unref)==null||b.call(v)),(_=s.signal)==null||_.addEventListener("abort",f,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function Py(t,e={}){var i,a,o;if(e={...e},O9(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),cd("factor",e.factor,{min:0,allowInfinity:!1}),cd("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),cd("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),cd("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(i=e.signal)==null||i.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(a=e.signal)==null||a.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await $9({error:l,attemptNumber:n,retriesConsumed:r,startTime:s,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var D9={};De(D9,{AsyncCaller:()=>iu});const L9=[400,401,402,403,404,405,406,407,409],M9=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&L9.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const s=new Error(t==null?void 0:t.message);throw s.name="InsufficientQuotaError",s}};var iu=class{constructor(t){T(this,"maxConcurrency");T(this,"maxRetries");T(this,"onFailedAttempt");T(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??M9;const e="default"in ks?ks.default:ks;this.queue=new e({concurrency:this.maxConcurrency})}call(t,...e){return this.queue.add(()=>Py(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var r;return(r=this.onFailedAttempt)==null?void 0:r.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let r;return Promise.race([this.call(e,...n),new Promise((s,i)=>{var a;r=()=>{i(Pc(t.signal))},(a=t.signal)==null||a.addEventListener("abort",r)})]).finally(()=>{t.signal&&r&&t.signal.removeEventListener("abort",r)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},UI=class extends Ho{constructor({config:e,onStart:n,onEnd:r,onError:s}){super({_awaitHandler:!0});T(this,"name","RootListenersTracer");T(this,"rootId");T(this,"config");T(this,"argOnStart");T(this,"argOnEnd");T(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Sx(t){return t?t.lc_runnable:!1}var F9=class{constructor(t){T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const r=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||r.some(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),n}};function Wo(t,e,n){function r(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,l);const u=a.prototype,d=Object.keys(u);for(let h=0;h<d.length;h++){const m=d[h];m in o||(o[m]=u[m].bind(o))}}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function a(o){var l;const u=n!=null&&n.Parent?new i:this;r(u,o),(l=u._zod).deferred??(l.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>{var l,u;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(u=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:u.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class nc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const U9={};function Um(t){return U9}function z9(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function G9(t,e){return typeof e=="bigint"?e.toString():e}function B9(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const XS=Symbol("evaluating");function QS(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==XS)return r===void 0&&(r=XS,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function zI(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function GI(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}const BI="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ek(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function V9(t){if(ek(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(ek(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Ds(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function H9(t){return{}}function W9(t,e){if(!V9(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=GI(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return zI(this,"shape",i),i},checks:[]});return Ds(t,s)}function q9(t,e,n){const r=GI(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};for(const a in s)i[a]=t?new t({type:"optional",innerType:s[a]}):s[a];return zI(this,"shape",i),i},checks:[]});return Ds(e,r)}function ud(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function dd(t){return typeof t=="string"?t:t==null?void 0:t.message}function zm(t,e,n){var s,i,a,o,l,u;const r={...t,path:t.path??[]};if(!t.message){const d=dd((a=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,t))??dd((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??dd((l=n.customError)==null?void 0:l.call(n,t))??dd((u=n.localeError)==null?void 0:u.call(n,t))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const VI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,G9,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},K9=Wo("$ZodError",VI),Gm=Wo("$ZodError",VI,{Parent:Error});function Y9(t){const e=[],n=t.map(r=>typeof r=="object"?r.key:r);for(const r of n)typeof r=="number"?e.push(`[${r}]`):typeof r=="symbol"?e.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?e.push(`[${JSON.stringify(r)}]`):(e.length&&e.push("."),e.push(r));return e.join("")}function Z9(t){var r;const e=[],n=[...t.issues].sort((s,i)=>(s.path??[]).length-(i.path??[]).length);for(const s of n)e.push(` ${s.message}`),(r=s.path)!=null&&r.length&&e.push(`   at ${Y9(s.path)}`);return e.join(`
`)}const J9=t=>(e,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new nc;if(a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>zm(l,i,Um())));throw BI(o,s==null?void 0:s.callee),o}return a.value},Bm=J9(Gm),X9=t=>async(e,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>zm(l,i,Um())));throw BI(o,s==null?void 0:s.callee),o}return a.value},HI=X9(Gm),Q9=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new nc;return i.issues.length?{success:!1,error:new(t??K9)(i.issues.map(a=>zm(a,s,Um())))}:{success:!0,data:i.value}},eG=Q9(Gm),tG=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>zm(a,s,Um())))}:{success:!0,data:i.value}},nG=tG(Gm),rG={major:4,minor:1,patch:13},kx=Wo("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=rG;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const a of i._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,l,u)=>{let d=ud(o),h;for(const m of l){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(d)continue;const p=o.issues.length,y=m._zod.check(o);if(y instanceof Promise&&(u==null?void 0:u.async)===!1)throw new nc;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,o.issues.length!==p&&(d||(d=ud(o,p)))});else{if(o.issues.length===p)continue;d||(d=ud(o,p))}}return h?h.then(()=>o):o},a=(o,l,u)=>{if(ud(o))return o.aborted=!0,o;const d=i(l,r,u);if(d instanceof Promise){if(u.async===!1)throw new nc;return d.then(h=>t._zod.parse(h,u))}return t._zod.parse(d,u)};t._zod.run=(o,l)=>{if(l.skipChecks)return t._zod.parse(o,l);if(l.direction==="backward"){const d=t._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return d instanceof Promise?d.then(h=>a(h,o,l)):a(d,o,l)}const u=t._zod.parse(o,l);if(u instanceof Promise){if(l.async===!1)throw new nc;return u.then(d=>i(d,r,l))}return i(u,r,l)}}t["~standard"]={validate:i=>{var a;try{const o=eG(t,i);return o.success?{value:o.data}:{issues:(a=o.error)==null?void 0:a.issues}}catch{return nG(t,i).then(l=>{var u;return l.success?{value:l.data}:{issues:(u=l.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),sG=Wo("$ZodUnknown",(t,e)=>{kx.init(t,e),t._zod.parse=n=>n}),iG=Wo("$ZodNever",(t,e)=>{kx.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function tk(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const WI=Wo("$ZodOptional",(t,e)=>{kx.init(t,e),t._zod.optin="optional",t._zod.optout="optional",QS(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),QS(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${B9(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>tk(i,n.value)):tk(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}});var nk;class qI{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function aG(){return new qI}(nk=globalThis).__zod_globalRegistry??(nk.__zod_globalRegistry=aG());const kn=globalThis.__zod_globalRegistry;function oG(t){return new t({type:"unknown"})}function lG(t,e){return new t({type:"never",...H9()})}class rk{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??kn,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var h,m,p;var r;const s=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,n.schemaPath.includes(e)&&(a.cycle=n.path),a.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,o);const l=(m=(h=e._zod).toJSONSchema)==null?void 0:m.call(h);if(l)o.schema=l;else{const y={...n,schemaPath:[...n.schemaPath,e],path:n.path},w=e._zod.parent;if(w)o.ref=w,this.process(w,y),this.seen.get(w).isParent=!0;else{const x=o.schema;switch(s.type){case"string":{const g=x;g.type="string";const{minimum:f,maximum:v,format:b,patterns:_,contentEncoding:E}=e._zod.bag;if(typeof f=="number"&&(g.minLength=f),typeof v=="number"&&(g.maxLength=v),b&&(g.format=i[b]??b,g.format===""&&delete g.format),E&&(g.contentEncoding=E),_&&_.size>0){const C=[..._];C.length===1?g.pattern=C[0].source:C.length>1&&(o.schema.allOf=[...C.map(S=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:S.source}))])}break}case"number":{const g=x,{minimum:f,maximum:v,format:b,multipleOf:_,exclusiveMaximum:E,exclusiveMinimum:C}=e._zod.bag;typeof b=="string"&&b.includes("int")?g.type="integer":g.type="number",typeof C=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.minimum=C,g.exclusiveMinimum=!0):g.exclusiveMinimum=C),typeof f=="number"&&(g.minimum=f,typeof C=="number"&&this.target!=="draft-4"&&(C>=f?delete g.minimum:delete g.exclusiveMinimum)),typeof E=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(g.maximum=E,g.exclusiveMaximum=!0):g.exclusiveMaximum=E),typeof v=="number"&&(g.maximum=v,typeof E=="number"&&this.target!=="draft-4"&&(E<=v?delete g.maximum:delete g.exclusiveMaximum)),typeof _=="number"&&(g.multipleOf=_);break}case"boolean":{const g=x;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(x.type="string",x.nullable=!0,x.enum=[null]):x.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{x.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const g=x,{minimum:f,maximum:v}=e._zod.bag;typeof f=="number"&&(g.minItems=f),typeof v=="number"&&(g.maxItems=v),g.type="array",g.items=this.process(s.element,{...y,path:[...y.path,"items"]});break}case"object":{const g=x;g.type="object",g.properties={};const f=s.shape;for(const _ in f)g.properties[_]=this.process(f[_],{...y,path:[...y.path,"properties",_]});const v=new Set(Object.keys(f)),b=new Set([...v].filter(_=>{const E=s.shape[_]._zod;return this.io==="input"?E.optin===void 0:E.optout===void 0}));b.size>0&&(g.required=Array.from(b)),((p=s.catchall)==null?void 0:p._zod.def.type)==="never"?g.additionalProperties=!1:s.catchall?s.catchall&&(g.additionalProperties=this.process(s.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{const g=x,f=s.discriminator!==void 0,v=s.options.map((b,_)=>this.process(b,{...y,path:[...y.path,f?"oneOf":"anyOf",_]}));f?g.oneOf=v:g.anyOf=v;break}case"intersection":{const g=x,f=this.process(s.left,{...y,path:[...y.path,"allOf",0]}),v=this.process(s.right,{...y,path:[...y.path,"allOf",1]}),b=E=>"allOf"in E&&Object.keys(E).length===1,_=[...b(f)?f.allOf:[f],...b(v)?v.allOf:[v]];g.allOf=_;break}case"tuple":{const g=x;g.type="array";const f=this.target==="draft-2020-12"?"prefixItems":"items",v=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",b=s.items.map((S,N)=>this.process(S,{...y,path:[...y.path,f,N]})),_=s.rest?this.process(s.rest,{...y,path:[...y.path,v,...this.target==="openapi-3.0"?[s.items.length]:[]]}):null;this.target==="draft-2020-12"?(g.prefixItems=b,_&&(g.items=_)):this.target==="openapi-3.0"?(g.items={anyOf:b},_&&g.items.anyOf.push(_),g.minItems=b.length,_||(g.maxItems=b.length)):(g.items=b,_&&(g.additionalItems=_));const{minimum:E,maximum:C}=e._zod.bag;typeof E=="number"&&(g.minItems=E),typeof C=="number"&&(g.maxItems=C);break}case"record":{const g=x;g.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(g.propertyNames=this.process(s.keyType,{...y,path:[...y.path,"propertyNames"]})),g.additionalProperties=this.process(s.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const g=x,f=z9(s.entries);f.every(v=>typeof v=="number")&&(g.type="number"),f.every(v=>typeof v=="string")&&(g.type="string"),g.enum=f;break}case"literal":{const g=x,f=[];for(const v of s.values)if(v===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof v=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");f.push(Number(v))}else f.push(v);if(f.length!==0)if(f.length===1){const v=f[0];g.type=v===null?"null":typeof v,this.target==="draft-4"||this.target==="openapi-3.0"?g.enum=[v]:g.const=v}else f.every(v=>typeof v=="number")&&(g.type="number"),f.every(v=>typeof v=="string")&&(g.type="string"),f.every(v=>typeof v=="boolean")&&(g.type="string"),f.every(v=>v===null)&&(g.type="null"),g.enum=f;break}case"file":{const g=x,f={type:"string",format:"binary",contentEncoding:"binary"},{minimum:v,maximum:b,mime:_}=e._zod.bag;v!==void 0&&(f.minLength=v),b!==void 0&&(f.maxLength=b),_?_.length===1?(f.contentMediaType=_[0],Object.assign(g,f)):g.anyOf=_.map(E=>({...f,contentMediaType:E})):Object.assign(g,f);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const g=this.process(s.innerType,y);this.target==="openapi-3.0"?(o.ref=s.innerType,x.nullable=!0):x.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,y),o.ref=s.innerType;break}case"success":{const g=x;g.type="boolean";break}case"default":{this.process(s.innerType,y),o.ref=s.innerType,x.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,y),o.ref=s.innerType,this.io==="input"&&(x._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,y),o.ref=s.innerType;let g;try{g=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}x.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const g=x,f=e._zod.pattern;if(!f)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=f.source;break}case"pipe":{const g=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(g,y),o.ref=g;break}case"readonly":{this.process(s.innerType,y),o.ref=s.innerType,x.readOnly=!0;break}case"promise":{this.process(s.innerType,y),o.ref=s.innerType;break}case"optional":{this.process(s.innerType,y),o.ref=s.innerType;break}case"lazy":{const g=e._zod.innerType;this.process(g,y),o.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const u=this.metadataRegistry.get(e);return u&&Object.assign(o.schema,u),this.io==="input"&&on(e)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(e).schema}emit(e,n){var d,h,m,p,y,w;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=x=>{var _;const g=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const E=(_=r.external.registry.get(x[0]))==null?void 0:_.id,C=r.external.uri??(N=>N);if(E)return{ref:C(E)};const S=x[1].defId??x[1].schema.id??`schema${this.counter++}`;return x[1].defId=S,{defId:S,ref:`${C("__shared")}#/${g}/${S}`}}if(x[1]===s)return{ref:"#"};const v=`#/${g}/`,b=x[1].schema.id??`__schema${this.counter++}`;return{defId:b,ref:v+b}},a=x=>{if(x[1].schema.$ref)return;const g=x[1],{ref:f,defId:v}=i(x);g.def={...g.schema},v&&(g.defId=v);const b=g.schema;for(const _ in b)delete b[_];b.$ref=f};if(r.cycles==="throw")for(const x of this.seen.entries()){const g=x[1];if(g.cycle)throw new Error(`Cycle detected: #/${(d=g.cycle)==null?void 0:d.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of this.seen.entries()){const g=x[1];if(e===x[0]){a(x);continue}if(r.external){const v=(h=r.external.registry.get(x[0]))==null?void 0:h.id;if(e!==x[0]&&v){a(x);continue}}if((m=this.metadataRegistry.get(x[0]))==null?void 0:m.id){a(x);continue}if(g.cycle){a(x);continue}if(g.count>1&&r.reused==="ref"){a(x);continue}}const o=(x,g)=>{const f=this.seen.get(x),v=f.def??f.schema,b={...v};if(f.ref===null)return;const _=f.ref;if(f.ref=null,_){o(_,g);const E=this.seen.get(_).schema;E.$ref&&(g.target==="draft-7"||g.target==="draft-4"||g.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(E)):(Object.assign(v,E),Object.assign(v,b))}f.isParent||this.override({zodSchema:x,jsonSchema:v,path:f.path??[]})};for(const x of[...this.seen.entries()].reverse())o(x[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),(p=r.external)!=null&&p.uri){const x=(y=r.external.registry.get(e))==null?void 0:y.id;if(!x)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(x)}Object.assign(l,s.def);const u=((w=r.external)==null?void 0:w.defs)??{};for(const x of this.seen.entries()){const g=x[1];g.def&&g.defId&&(u[g.defId]=g.def)}r.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?l.$defs=u:l.definitions=u);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function Lh(t,e){if(t instanceof qI){const r=new rk(e),s={};for(const o of t._idmap.entries()){const[l,u]=o;r.process(u)}const i={},a={registry:t,uri:e==null?void 0:e.uri,defs:s};for(const o of t._idmap.entries()){const[l,u]=o;i[l]=r.emit(u,{...e,external:a})}if(Object.keys(s).length>0){const o=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[o]:s}}return{schemas:i}}const n=new rk(e);return n.process(t),n.emit(t,e)}function on(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return on(r.element,n);if(r.type==="set")return on(r.valueType,n);if(r.type==="lazy")return on(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return on(r.innerType,n);if(r.type==="intersection")return on(r.left,n)||on(r.right,n);if(r.type==="record"||r.type==="map")return on(r.keyType,n)||on(r.valueType,n);if(r.type==="pipe")return on(r.in,n)||on(r.out,n);if(r.type==="object"){for(const s in r.shape)if(on(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(on(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(on(s,n))return!0;return!!(r.rest&&on(r.rest,n))}return!1}function ft(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function At(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function cG(t){return ft(t)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),At(t)}function Yr(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(ft(t)||At(t))}function KI(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodLiteral"}function YI(t){return ft(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="literal":!1}function uG(t){return!!(KI(t)||YI(t))}async function ZI(t,e){if(ft(t))try{return{success:!0,data:await HI(t,e)}}catch(n){return{success:!1,error:n}}if(At(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Vm(t,e){if(ft(t))return await HI(t,e);if(At(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function dG(t,e){if(ft(t))try{return{success:!0,data:Bm(t,e)}}catch(n){return{success:!1,error:n}}if(At(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function hG(t,e){if(ft(t))return Bm(t,e);if(At(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Hm(t){var e;if(ft(t))return(e=kn.get(t))==null?void 0:e.description;if(At(t)||"description"in t&&typeof t.description=="string")return t.description}function mG(t){if(!Yr(t))return!1;if(At(t)){const e=t._def;if(e.typeName==="ZodObject"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.typeName==="ZodRecord")return!0}if(ft(t)){const e=t._zod.def;if(e.type==="object"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.type==="record")return!0}return typeof t=="object"&&t!==null&&!("shape"in t)}function Tx(t){return Yr(t)?At(t)?t._def.typeName==="ZodString":ft(t)?t._zod.def.type==="string":!1:!1}function Ax(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodObject"}function rs(t){return ft(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Wm(t){return ft(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function pG(t){return!!(Ax(t)||rs(t))}function jy(t){if(At(t))return t.shape;if(ft(t))return t._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function fG(t,e){if(At(t))return t.extend(e);if(ft(t))return W9(t,e);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function gG(t){if(At(t))return t.partial();if(ft(t))return q9(WI,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Mh(t,e=!1){if(At(t))return t.strict();if(rs(t)){const n=t._zod.def.shape;if(e)for(const[i,a]of Object.entries(t._zod.def.shape)){if(rs(a)){const l=Mh(a,e);n[i]=l}else if(Wm(a)){let l=a._zod.def.element;rs(l)&&(l=Mh(l,e)),n[i]=Ds(a,{...a._zod.def,element:l})}else n[i]=a;const o=kn.get(a);o&&kn.add(n[i],o)}const r=Ds(t,{...t._zod.def,shape:n,catchall:lG(iG)}),s=kn.get(t);return s&&kn.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function $y(t,e=!1){if(Ax(t))return t.passthrough();if(rs(t)){const n=t._zod.def.shape;if(e)for(const[i,a]of Object.entries(t._zod.def.shape)){if(rs(a)){const l=$y(a,e);n[i]=l}else if(Wm(a)){let l=a._zod.def.element;rs(l)&&(l=$y(l,e)),n[i]=Ds(a,{...a._zod.def,element:l})}else n[i]=a;const o=kn.get(a);o&&kn.add(n[i],o)}const r=Ds(t,{...t._zod.def,shape:n,catchall:oG(sG)}),s=kn.get(t);return s&&kn.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function yG(t){if(At(t))try{const e=t.parse(void 0);return()=>e}catch{return}if(ft(t))try{const e=Bm(t,void 0);return()=>e}catch{return}}function vG(t){return At(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function xG(t){return ft(t)&&t._zod.def.type==="pipe"}function Il(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(At(t))return vG(t)?Il(t._def.schema,e,n):t;if(ft(t)){let s=t;if(xG(t)&&(s=Il(t._zod.def.in,e,n)),e){if(rs(s)){const a=s._zod.def.shape;for(const[o,l]of Object.entries(s._zod.def.shape))a[o]=Il(l,e,n);s=Ds(s,{...s._zod.def,shape:a})}else if(Wm(s)){const a=Il(s._zod.def.element,e,n);s=Ds(s,{...s._zod.def,element:a})}}const i=kn.get(t);return i&&kn.add(s,i),n.set(t,s),s}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function JI(t,e=!1){return Il(t,e,new WeakMap)}function wG(t,e){if(At(t)){const n=jy(t),r={};for(const[s,i]of Object.entries(n))e(s,i)?r[s]=i.optional():r[s]=i;return t.extend(r)}if(ft(t)){const n=jy(t),r={...t._zod.def.shape};for(const[a,o]of Object.entries(n))e(a,o)&&(r[a]=new WI({type:"optional",innerType:o}));const s=Ds(t,{...t._zod.def,shape:r}),i=kn.get(t);return i&&kn.add(s,i),s}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function XI(t){return t instanceof Error&&(t.constructor.name==="ZodError"||t.constructor.name==="$ZodError")}function Pf(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const bG=["*","_","`"];function _G(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function SG(t,e,n){const{firstNode:r,lastNode:s,nodeColors:i,withStyles:a=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let u=a?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const p="default",y={[p]:"{0}({1})"};r!==void 0&&(y[r]="{0}([{1}]):::first"),s!==void 0&&(y[s]="{0}([{1}]):::last");for(const[w,x]of Object.entries(t)){const g=x.name.split(":").pop()??"";let v=bG.some(_=>g.startsWith(_)&&g.endsWith(_))?`<p>${g}</p>`:g;Object.keys(x.metadata??{}).length&&(v+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([_,E])=>`${_} = ${E}`).join(`
`)}</em></small>`);const b=(y[w]??y[p]).replace("{0}",Pf(w)).replace("{1}",v);u+=`	${b}
`}}const d={};for(const p of e){const y=p.source.split(":"),w=p.target.split(":"),x=y.filter((g,f)=>g===w[f]).join(":");d[x]||(d[x]=[]),d[x].push(p)}const h=new Set;function m(p,y){const w=p.length===1&&p[0].source===p[0].target;if(y&&!w){const x=y.split(":").pop();if(h.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);h.add(x),u+=`	subgraph ${x}
`}for(const x of p){const{source:g,target:f,data:v,conditional:b}=x;let _="";if(v!==void 0){let E=v;const C=E.split(" ");C.length>l&&(E=Array.from({length:Math.ceil(C.length/l)},(S,N)=>C.slice(N*l,(N+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),_=b?` -. &nbsp;${E}&nbsp; .-> `:` -- &nbsp;${E}&nbsp; --> `}else _=b?" -.-> ":" --> ";u+=`	${Pf(g)}${_}${Pf(f)};
`}for(const x in d)x.startsWith(`${y}:`)&&x!==y&&m(d[x],x);y&&!w&&(u+=`	end
`)}m(d[""]??[],"");for(const p in d)!p.includes(":")&&p!==""&&m(d[p],p);return a&&(u+=_G(i??{})),u}async function kG(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const r=(e==null?void 0:e.imageType)??"png",s=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${s}?bgColor=${n}&type=${r}`,a=await fetch(i);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}const TG=Symbol("Let zodToJsonSchema decide on which parser to use"),AG={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},EG=t=>({...AG,...t}),CG=t=>{const e=EG(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}},QI=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function Vn(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?QI(e,t.currentPath):e.join("/")}}function eR(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Ye(t,e,n,r,s){t[e]=n,eR(t,e,r,s)}var Ve;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ve||(Ve={}));var sk;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(sk||(sk={}));const ae=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ni=t=>{switch(typeof t){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(t)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(t)?ae.array:t===null?ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ae.promise:typeof Map<"u"&&t instanceof Map?ae.map:typeof Set<"u"&&t instanceof Set?ae.set:typeof Date<"u"&&t instanceof Date?ae.date:ae.object;default:return ae.unknown}},K=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ls extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(this),r}static assert(e){if(!(e instanceof Ls))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n=Object.create(null),r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ls.create=t=>new Ls(t);const Dy=(t,e)=>{let n;switch(t.code){case K.invalid_type:t.received===ae.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case K.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case K.invalid_union:n="Invalid input";break;case K.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case K.invalid_enum_value:n=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case K.invalid_arguments:n="Invalid function arguments";break;case K.invalid_return_type:n="Invalid function return type";break;case K.invalid_date:n="Invalid date";break;case K.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case K.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case K.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case K.custom:n="Invalid input";break;case K.invalid_intersection_types:n="Intersection results could not be merged";break;case K.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case K.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ve.assertNever(t)}return{message:n}};let NG=Dy;function IG(){return NG}const RG=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}};function Q(t,e){const n=IG(),r=RG({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Dy?void 0:Dy].filter(s=>!!s)});t.common.issues.push(r)}class Hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ae;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Hn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return Ae;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const Ae=Object.freeze({status:"aborted"}),Rl=t=>({status:"dirty",value:t}),lr=t=>({status:"valid",value:t}),ik=t=>t.status==="aborted",ak=t=>t.status==="dirty",Co=t=>t.status==="valid",Fh=t=>typeof Promise<"u"&&t instanceof Promise;var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));class Ai{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ok=(t,e)=>{if(Co(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ls(t.common.issues);return this._error=n,this._error}}};function Ie(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{const{message:l}=t;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:s}}class Me{get description(){return this._def.description}_getType(e){return ni(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Hn,ctx:{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},s=this._parseSync({data:e,path:r.path,parent:r});return ok(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Co(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Co(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Fh(s)?s:Promise.resolve(s));return ok(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:K.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Io({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return xi.create(this,this._def)}nullable(){return Ro.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ss.create(this)}promise(){return Bh.create(this,this._def)}or(e){return zh.create([this,e],this._def)}and(e){return Gh.create(this,e,this._def)}transform(e){return new Io({...Ie(this._def),schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Fy({...Ie(this._def),innerType:this,defaultValue:n,typeName:M.ZodDefault})}brand(){return new eB({typeName:M.ZodBranded,type:this,...Ie(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Uy({...Ie(this._def),innerType:this,catchValue:n,typeName:M.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ex.create(this,e)}readonly(){return zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OG=/^c[^\s-]{8,}$/i,PG=/^[0-9a-z]+$/,jG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$G=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,DG=/^[a-z0-9_-]{21}$/i,LG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,FG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jf;const zG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,BG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",qG=new RegExp(`^${tR}$`);function nR(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function KG(t){return new RegExp(`^${nR(t)}$`)}function YG(t){let e=`${tR}T${nR(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function ZG(t,e){return!!((e==="v4"||!e)&&zG.test(t)||(e==="v6"||!e)&&BG.test(t))}function JG(t,e){if(!LG.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function XG(t,e){return!!((e==="v4"||!e)&&GG.test(t)||(e==="v6"||!e)&&VG.test(t))}class li extends Me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return Q(i,{code:K.invalid_type,expected:ae.string,received:i.parsedType}),Ae}const r=new Hn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?Q(s,{code:K.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Q(s,{code:K.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")FG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"email",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")jf||(jf=new RegExp(UG,"u")),jf.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"emoji",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")$G.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"uuid",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")DG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"nanoid",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")OG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")PG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid2",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")jG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ulid",code:K.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Q(s,{validation:"url",code:K.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"regex",code:K.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?YG(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?qG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?KG(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?MG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"duration",code:K.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?ZG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ip",code:K.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?JG(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"jwt",code:K.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?XG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cidr",code:K.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?HG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64",code:K.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?WG.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64url",code:K.invalid_string,message:i.message}),r.dirty()):Ve.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:K.invalid_string,...le.errToObj(r)})}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...le.errToObj(n)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}li.create=t=>new li({checks:[],typeName:M.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ie(t)});function QG(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class Dc extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return Q(i,{code:K.invalid_type,expected:ae.number,received:i.parsedType}),Ae}let r;const s=new Hn;for(const i of this._def.checks)i.kind==="int"?Ve.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:K.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?QG(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_finite,message:i.message}),s.dirty()):Ve.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Dc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Dc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Dc.create=t=>new Dc({checks:[],typeName:M.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Lc extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let r;const s=new Hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ve.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Q(n,{code:K.invalid_type,expected:ae.bigint,received:n.parsedType}),Ae}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Lc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Lc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Lc.create=t=>new Lc({checks:[],typeName:M.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ie(t)});class lk extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.boolean,received:r.parsedType}),Ae}return lr(e.data)}}lk.create=t=>new lk({typeName:M.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Uh extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return Q(i,{code:K.invalid_type,expected:ae.date,received:i.parsedType}),Ae}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Q(i,{code:K.invalid_date}),Ae}const r=new Hn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ve.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Uh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Uh.create=t=>new Uh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:M.ZodDate,...Ie(t)});class ck extends Me{_parse(e){if(this._getType(e)!==ae.symbol){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.symbol,received:r.parsedType}),Ae}return lr(e.data)}}ck.create=t=>new ck({typeName:M.ZodSymbol,...Ie(t)});class uk extends Me{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.undefined,received:r.parsedType}),Ae}return lr(e.data)}}uk.create=t=>new uk({typeName:M.ZodUndefined,...Ie(t)});class dk extends Me{_parse(e){if(this._getType(e)!==ae.null){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.null,received:r.parsedType}),Ae}return lr(e.data)}}dk.create=t=>new dk({typeName:M.ZodNull,...Ie(t)});class Ly extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return lr(e.data)}}Ly.create=t=>new Ly({typeName:M.ZodAny,...Ie(t)});class hk extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lr(e.data)}}hk.create=t=>new hk({typeName:M.ZodUnknown,...Ie(t)});class Ei extends Me{_parse(e){const n=this._getOrReturnCtx(e);return Q(n,{code:K.invalid_type,expected:ae.never,received:n.parsedType}),Ae}}Ei.create=t=>new Ei({typeName:M.ZodNever,...Ie(t)});class mk extends Me{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.void,received:r.parsedType}),Ae}return lr(e.data)}}mk.create=t=>new mk({typeName:M.ZodVoid,...Ie(t)});class ss extends Me{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ae.array)return Q(n,{code:K.invalid_type,expected:ae.array,received:n.parsedType}),Ae;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(Q(n,{code:a?K.too_big:K.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Q(n,{code:K.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Q(n,{code:K.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new Ai(n,a,n.path,o)))).then(a=>Hn.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new Ai(n,a,n.path,o)));return Hn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ss({...this._def,minLength:{value:e,message:le.toString(n)}})}max(e,n){return new ss({...this._def,maxLength:{value:e,message:le.toString(n)}})}length(e,n){return new ss({...this._def,exactLength:{value:e,message:le.toString(n)}})}nonempty(e){return this.min(1,e)}}ss.create=(t,e)=>new ss({type:t,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray,...Ie(e)});function La(t){if(t instanceof mt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=xi.create(La(r))}return new mt({...t._def,shape:()=>e})}else return t instanceof ss?new ss({...t._def,type:La(t.element)}):t instanceof xi?xi.create(La(t.unwrap())):t instanceof Ro?Ro.create(La(t.unwrap())):t instanceof pa?pa.create(t.items.map(e=>La(e))):t}class mt extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ve.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ae.object){const u=this._getOrReturnCtx(e);return Q(u,{code:K.invalid_type,expected:ae.object,received:u.parsedType}),Ae}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ei&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const d=i[u],h=s.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Ai(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Ei){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")o.length>0&&(Q(s,{code:K.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=s.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Ai(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Hn.mergeObjectSync(r,u)):Hn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new mt({...this._def,unknownKeys:"strip"})}passthrough(){return new mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:M.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new mt({...this._def,catchall:e})}pick(e){const n={};for(const r of Ve.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new mt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Ve.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new mt({...this._def,shape:()=>n})}deepPartial(){return La(this)}partial(e){const n={};for(const r of Ve.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new mt({...this._def,shape:()=>n})}required(e){const n={};for(const r of Ve.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof xi;)i=i._def.innerType;n[r]=i}return new mt({...this._def,shape:()=>n})}keyof(){return rR(Ve.objectKeys(this.shape))}}mt.create=(t,e)=>new mt({shape:()=>t,unknownKeys:"strip",catchall:Ei.create(),typeName:M.ZodObject,...Ie(e)});mt.strictCreate=(t,e)=>new mt({shape:()=>t,unknownKeys:"strict",catchall:Ei.create(),typeName:M.ZodObject,...Ie(e)});mt.lazycreate=(t,e)=>new mt({shape:t,unknownKeys:"strip",catchall:Ei.create(),typeName:M.ZodObject,...Ie(e)});class zh extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Ls(o.ctx.common.issues));return Q(n,{code:K.invalid_union,unionErrors:a}),Ae}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new Ls(l));return Q(n,{code:K.invalid_union,unionErrors:o}),Ae}}get options(){return this._def.options}}zh.create=(t,e)=>new zh({options:t,typeName:M.ZodUnion,...Ie(e)});function My(t,e){const n=ni(t),r=ni(e);if(t===e)return{valid:!0,data:t};if(n===ae.object&&r===ae.object){const s=Ve.objectKeys(e),i=Ve.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const l=My(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===ae.array&&r===ae.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],l=My(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===ae.date&&r===ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gh extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(ik(i)||ik(a))return Ae;const o=My(i.value,a.value);return o.valid?((ak(i)||ak(a))&&n.dirty(),{status:n.value,value:o.data}):(Q(r,{code:K.invalid_intersection_types}),Ae)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Gh.create=(t,e,n)=>new Gh({left:t,right:e,typeName:M.ZodIntersection,...Ie(n)});class pa extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.array)return Q(r,{code:K.invalid_type,expected:ae.array,received:r.parsedType}),Ae;if(r.data.length<this._def.items.length)return Q(r,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ae;!this._def.rest&&r.data.length>this._def.items.length&&(Q(r,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Ai(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Hn.mergeArray(n,a)):Hn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new pa({...this._def,rest:e})}}pa.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pa({items:t,typeName:M.ZodTuple,rest:null,...Ie(e)})};class pk extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.map)return Q(r,{code:K.invalid_type,expected:ae.map,received:r.parsedType}),Ae;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],u)=>({key:s._parse(new Ai(r,o,r.path,[u,"key"])),value:i._parse(new Ai(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Ae;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Ae;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}pk.create=(t,e,n)=>new pk({valueType:e,keyType:t,typeName:M.ZodMap,...Ie(n)});class Mc extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.set)return Q(r,{code:K.invalid_type,expected:ae.set,received:r.parsedType}),Ae;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Q(r,{code:K.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Q(r,{code:K.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Ae;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new Ai(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new Mc({...this._def,minSize:{value:e,message:le.toString(n)}})}max(e,n){return new Mc({...this._def,maxSize:{value:e,message:le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Mc.create=(t,e)=>new Mc({valueType:t,minSize:null,maxSize:null,typeName:M.ZodSet,...Ie(e)});class fk extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}fk.create=(t,e)=>new fk({getter:t,typeName:M.ZodLazy,...Ie(e)});class gk extends Me{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Q(n,{received:n.data,code:K.invalid_literal,expected:this._def.value}),Ae}return{status:"valid",value:e.data}}get value(){return this._def.value}}gk.create=(t,e)=>new gk({value:t,typeName:M.ZodLiteral,...Ie(e)});function rR(t,e){return new No({values:t,typeName:M.ZodEnum,...Ie(e)})}class No extends Me{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Q(n,{expected:Ve.joinValues(r),received:n.parsedType,code:K.invalid_type}),Ae}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Q(n,{received:n.data,code:K.invalid_enum_value,options:r}),Ae}return lr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return No.create(e,{...this._def,...n})}exclude(e,n=this._def){return No.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}No.create=rR;class yk extends Me{_parse(e){const n=Ve.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const s=Ve.objectValues(n);return Q(r,{expected:Ve.joinValues(s),received:r.parsedType,code:K.invalid_type}),Ae}if(this._cache||(this._cache=new Set(Ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Ve.objectValues(n);return Q(r,{received:r.data,code:K.invalid_enum_value,options:s}),Ae}return lr(e.data)}get enum(){return this._def.values}}yk.create=(t,e)=>new yk({values:t,typeName:M.ZodNativeEnum,...Ie(e)});class Bh extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.promise&&n.common.async===!1)return Q(n,{code:K.invalid_type,expected:ae.promise,received:n.parsedType}),Ae;const r=n.parsedType===ae.promise?n.data:Promise.resolve(n.data);return lr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bh.create=(t,e)=>new Bh({type:t,typeName:M.ZodPromise,...Ie(e)});class Io extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{Q(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return Ae;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ae:l.status==="dirty"||n.value==="dirty"?Rl(l.value):l});{if(n.value==="aborted")return Ae;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?Ae:o.status==="dirty"||n.value==="dirty"?Rl(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Ae:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Ae:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Co(a))return Ae;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Co(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):Ae);Ve.assertNever(s)}}Io.create=(t,e,n)=>new Io({schema:t,typeName:M.ZodEffects,effect:e,...Ie(n)});Io.createWithPreprocess=(t,e,n)=>new Io({schema:e,effect:{type:"preprocess",transform:t},typeName:M.ZodEffects,...Ie(n)});class xi extends Me{_parse(e){return this._getType(e)===ae.undefined?lr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xi.create=(t,e)=>new xi({innerType:t,typeName:M.ZodOptional,...Ie(e)});class Ro extends Me{_parse(e){return this._getType(e)===ae.null?lr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ro.create=(t,e)=>new Ro({innerType:t,typeName:M.ZodNullable,...Ie(e)});class Fy extends Me{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Fy.create=(t,e)=>new Fy({innerType:t,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ie(e)});class Uy extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Fh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ls(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ls(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Uy.create=(t,e)=>new Uy({innerType:t,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ie(e)});class vk extends Me{_parse(e){if(this._getType(e)!==ae.nan){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ae.nan,received:r.parsedType}),Ae}return{status:"valid",value:e.data}}}vk.create=t=>new vk({typeName:M.ZodNaN,...Ie(t)});class eB extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ex extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ae:i.status==="dirty"?(n.dirty(),Rl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ae:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Ex({in:e,out:n,typeName:M.ZodPipeline})}}class zy extends Me{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Co(s)&&(s.value=Object.freeze(s.value)),s);return Fh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zy.create=(t,e)=>new zy({innerType:t,typeName:M.ZodReadonly,...Ie(e)});mt.lazycreate;var M;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(M||(M={}));const qm=li.create,xk=Ly.create;Ei.create;ss.create;const Km=mt.create;mt.strictCreate;zh.create;Gh.create;pa.create;No.create;Bh.create;xi.create;Ro.create;function tB(t,e){var r,s,i;const n={type:"array"};return(r=t.type)!=null&&r._def&&((i=(s=t.type)==null?void 0:s._def)==null?void 0:i.typeName)!==M.ZodAny&&(n.items=Ke(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Ye(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Ye(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Ye(n,"minItems",t.exactLength.value,t.exactLength.message,e),Ye(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function nB(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ye(n,"minimum",r.value,r.message,e):Ye(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ye(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ye(n,"maximum",r.value,r.message,e):Ye(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ye(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ye(n,"multipleOf",r.value,r.message,e);break}return n}function rB(){return{type:"boolean"}}function sR(t,e){return Ke(t.type._def,e)}const sB=(t,e)=>Ke(t.innerType._def,e);function iR(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(s=>iR(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return iB(t,e)}}const iB=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Ye(n,"minimum",r.value,r.message,e);break;case"max":Ye(n,"maximum",r.value,r.message,e);break}return n};function aB(t,e){return{...Ke(t.innerType._def,e),default:t.defaultValue()}}function oB(t,e){return e.effectStrategy==="input"?Ke(t.schema._def,e):Vn(e)}function lB(t){return{type:"string",enum:Array.from(t.values)}}const cB=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function uB(t,e){const n=[Ke(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ke(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(cB(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else r=void 0;s.push(a)}}),s.length?{allOf:s,...r}:void 0}function dB(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let $f;const mr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>($f===void 0&&($f=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$f),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function aR(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Ye(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Ye(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":pr(n,"email",r.message,e);break;case"format:idn-email":pr(n,"idn-email",r.message,e);break;case"pattern:zod":an(n,mr.email,r.message,e);break}break;case"url":pr(n,"uri",r.message,e);break;case"uuid":pr(n,"uuid",r.message,e);break;case"regex":an(n,r.regex,r.message,e);break;case"cuid":an(n,mr.cuid,r.message,e);break;case"cuid2":an(n,mr.cuid2,r.message,e);break;case"startsWith":an(n,RegExp(`^${Df(r.value,e)}`),r.message,e);break;case"endsWith":an(n,RegExp(`${Df(r.value,e)}$`),r.message,e);break;case"datetime":pr(n,"date-time",r.message,e);break;case"date":pr(n,"date",r.message,e);break;case"time":pr(n,"time",r.message,e);break;case"duration":pr(n,"duration",r.message,e);break;case"length":Ye(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Ye(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":an(n,RegExp(Df(r.value,e)),r.message,e);break;case"ip":r.version!=="v6"&&pr(n,"ipv4",r.message,e),r.version!=="v4"&&pr(n,"ipv6",r.message,e);break;case"base64url":an(n,mr.base64url,r.message,e);break;case"jwt":an(n,mr.jwt,r.message,e);break;case"cidr":r.version!=="v6"&&an(n,mr.ipv4Cidr,r.message,e),r.version!=="v4"&&an(n,mr.ipv6Cidr,r.message,e);break;case"emoji":an(n,mr.emoji(),r.message,e);break;case"ulid":an(n,mr.ulid,r.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":pr(n,"binary",r.message,e);break;case"contentEncoding:base64":Ye(n,"contentEncoding","base64",r.message,e);break;case"pattern:zod":an(n,mr.base64,r.message,e);break}break;case"nanoid":an(n,mr.nanoid,r.message,e);break}return n}function Df(t,e){return e.patternStrategy==="escape"?mB(t):t}const hB=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function mB(t){let e="";for(let n=0;n<t.length;n++)hB.has(t[n])||(e+="\\"),e+=t[n];return e}function pr(t,e,n,r){var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ye(t,"format",e,n,r)}function an(t,e,n,r){var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:wk(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ye(t,"pattern",wk(e,r),n,r)}function wk(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,a=!1,o=!1;for(let u=0;u<r.length;u++){if(i){s+=r[u],i=!1;continue}if(n.i){if(a){if(r[u].match(/[a-z]/)){o?(s+=r[u],s+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(s+=r[u],o=!0):s+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){s+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){s+=a?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}s+=r[u],r[u]==="\\"?i=!0:a&&r[u]==="]"?a=!1:!a&&r[u]==="["&&(a=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function oR(t,e){var r,s,i,a,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===M.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,d)=>({...u,[d]:Ke(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??Vn(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:Ke(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===M.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=aR(t.keyType._def,e);return{...n,propertyNames:d}}else{if(((a=t.keyType)==null?void 0:a._def.typeName)===M.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===M.ZodBranded&&t.keyType._def.type._def.typeName===M.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=sR(t.keyType._def,e);return{...n,propertyNames:d}}}return n}function pB(t,e){if(e.mapStrategy==="record")return oR(t,e);const n=Ke(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Vn(e),r=Ke(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Vn(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function fB(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function gB(t){return t.target==="openAi"?void 0:{not:Vn({...t,currentPath:[...t.currentPath,"not"]})}}function yB(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Vh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function vB(t,e){if(e.target==="openApi3")return bk(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Vh&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=Vh[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":return i._def.value===null?[...s,"null"]:s;case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return bk(t,e)}const bk=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>Ke(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function xB(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Vh[t.innerType._def.typeName],nullable:!0}:{type:[Vh[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Ke(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Ke(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function wB(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",eR(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ye(n,"minimum",r.value,r.message,e):Ye(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ye(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ye(n,"maximum",r.value,r.message,e):Ye(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ye(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ye(n,"multipleOf",r.value,r.message,e);break}return n}function bB(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},s=[],i=t.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=SB(l);u&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=Ke(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||s.push(o))}s.length&&(r.required=s);const a=_B(t,e);return a!==void 0&&(r.additionalProperties=a),r}function _B(t,e){if(t.catchall._def.typeName!=="ZodNever")return Ke(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function SB(t){try{return t.isOptional()}catch{return!0}}const kB=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ke(t.innerType._def,e);const n=Ke(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Vn(e)},n]}:Vn(e)},TB=(t,e)=>{if(e.pipeStrategy==="input")return Ke(t.in._def,e);if(e.pipeStrategy==="output")return Ke(t.out._def,e);const n=Ke(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Ke(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function AB(t,e){return Ke(t.type._def,e)}function EB(t,e){const r={type:"array",uniqueItems:!0,items:Ke(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Ye(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Ye(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function CB(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Ke(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Ke(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Ke(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function NB(t){return{not:Vn(t)}}function IB(t){return Vn(t)}const RB=(t,e)=>Ke(t.innerType._def,e),OB=(t,e,n)=>{switch(e){case M.ZodString:return aR(t,n);case M.ZodNumber:return wB(t,n);case M.ZodObject:return bB(t,n);case M.ZodBigInt:return nB(t,n);case M.ZodBoolean:return rB();case M.ZodDate:return iR(t,n);case M.ZodUndefined:return NB(n);case M.ZodNull:return yB(n);case M.ZodArray:return tB(t,n);case M.ZodUnion:case M.ZodDiscriminatedUnion:return vB(t,n);case M.ZodIntersection:return uB(t,n);case M.ZodTuple:return CB(t,n);case M.ZodRecord:return oR(t,n);case M.ZodLiteral:return dB(t,n);case M.ZodEnum:return lB(t);case M.ZodNativeEnum:return fB(t);case M.ZodNullable:return xB(t,n);case M.ZodOptional:return kB(t,n);case M.ZodMap:return pB(t,n);case M.ZodSet:return EB(t,n);case M.ZodLazy:return()=>t.getter()._def;case M.ZodPromise:return AB(t,n);case M.ZodNaN:case M.ZodNever:return gB(n);case M.ZodEffects:return oB(t,n);case M.ZodAny:return Vn(n);case M.ZodUnknown:return IB(n);case M.ZodDefault:return aB(t,n);case M.ZodBranded:return sR(t,n);case M.ZodReadonly:return RB(t,n);case M.ZodCatch:return sB(t,n);case M.ZodPipeline:return TB(t,n);case M.ZodFunction:case M.ZodVoid:case M.ZodSymbol:return;default:return(r=>{})()}};function Ke(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(l!==TG)return l}if(r&&!n){const l=PB(r,e);if(l!==void 0)return l}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=OB(t,t.typeName,e),a=typeof i=="function"?Ke(i(),e):i;if(a&&jB(t,e,a),e.postProcess){const l=e.postProcess(a,t,e);return s.jsonSchema=a,l}return s.jsonSchema=a,a}const PB=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:QI(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Vn(e)):e.$refStrategy==="seen"?Vn(e):void 0}},jB=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),$B=(t,e)=>{const n=CG(e);let r;const s=e==null?void 0:e.name,i=Ke(t._def,n,!1)??Vn(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function aa(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(!aa(t[s],e[s]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const a of r)if(!aa(t[a],e[a]))return!1;return!0}return t===e}function xr(t){return encodeURI(DB(t))}function DB(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}const LB={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},MB={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},FB={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let UB=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function ci(t,e=Object.create(null),n=UB,r=""){if(t&&typeof t=="object"&&!Array.isArray(t)){const i=t.$id||t.id;if(i){const a=new URL(i,n.href);a.hash.length>1?e[a.href]=t:(a.hash="",r===""?n=a:ci(t,e,n))}}else if(t!==!0&&t!==!1)return e;const s=n.href+(r?"#"+r:"");if(e[s]!==void 0)throw new Error(`Duplicate schema URI "${s}".`);if(e[s]=t,t===!0||t===!1)return e;if(t.__absolute_uri__===void 0&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:s}),t.$ref&&t.__absolute_ref__===void 0){const i=new URL(t.$ref,n.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:i.href})}if(t.$recursiveRef&&t.__absolute_recursive_ref__===void 0){const i=new URL(t.$recursiveRef,n.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:i.href})}if(t.$anchor){const i=new URL("#"+t.$anchor,n.href);e[i.href]=t}for(let i in t){if(FB[i])continue;const a=`${r}/${xr(i)}`,o=t[i];if(Array.isArray(o)){if(LB[i]){const l=o.length;for(let u=0;u<l;u++)ci(o[u],e,n,`${a}/${u}`)}}else if(MB[i])for(let l in o)ci(o[l],e,n,`${a}/${xr(l)}`);else ci(o,e,n,a)}return e}const zB=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,GB=[0,31,28,31,30,31,30,31,31,30,31,30,31],BB=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,VB=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,HB=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,WB=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,qB=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,KB=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,YB=/^(?:\/(?:[^~/]|~0|~1)*)*$/,ZB=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,JB=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,XB=t=>{if(t[0]==='"')return!1;const[e,n,...r]=t.split("@");return!e||!n||r.length!==0||e.length>64||n.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},QB=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,eV=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,tV=t=>t.length>1&&t.length<80&&(/^P\d+([.,]\d+)?W$/.test(t)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(t)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(t));function Ur(t){return t.test.bind(t)}const _k={date:lR,time:cR.bind(void 0,!1),"date-time":sV,duration:tV,uri:oV,"uri-reference":Ur(HB),"uri-template":Ur(WB),url:Ur(qB),email:XB,hostname:Ur(VB),ipv4:Ur(QB),ipv6:Ur(eV),regex:cV,uuid:Ur(KB),"json-pointer":Ur(YB),"json-pointer-uri-fragment":Ur(ZB),"relative-json-pointer":Ur(JB)};function nV(t){return t%4===0&&(t%100!==0||t%400===0)}function lR(t){const e=t.match(zB);if(!e)return!1;const n=+e[1],r=+e[2],s=+e[3];return r>=1&&r<=12&&s>=1&&s<=(r==2&&nV(n)?29:GB[r])}function cR(t,e){const n=e.match(BB);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3],a=!!n[5];return(r<=23&&s<=59&&i<=59||r==23&&s==59&&i==60)&&(!t||a)}const rV=/t|\s/i;function sV(t){const e=t.split(rV);return e.length==2&&lR(e[0])&&cR(!0,e[1])}const iV=/\/|:/,aV=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function oV(t){return iV.test(t)&&aV.test(t)}const lV=/[^\\]\\Z/;function cV(t){if(lV.test(t))return!1;try{return new RegExp(t,"u"),!0}catch{return!1}}function uV(t){let e=0,n=t.length,r=0,s;for(;r<n;)e++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=t.charCodeAt(r),(s&64512)==56320&&r++);return e}function rt(t,e,n="2019-09",r=ci(e),s=!0,i=null,a="#",o="#",l=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:a,keyword:"false",keywordLocation:a,error:"False boolean schema."}]};const u=typeof t;let d;switch(u){case"boolean":case"number":case"string":d=u;break;case"object":t===null?d="null":Array.isArray(t)?d="array":d="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}const{$ref:h,$recursiveRef:m,$recursiveAnchor:p,type:y,const:w,enum:x,required:g,not:f,anyOf:v,allOf:b,oneOf:_,if:E,then:C,else:S,format:N,properties:D,patternProperties:F,additionalProperties:Y,unevaluatedProperties:de,minProperties:H,maxProperties:B,propertyNames:q,dependentRequired:z,dependentSchemas:P,dependencies:L,prefixItems:G,items:X,additionalItems:ie,unevaluatedItems:Oe,contains:Fe,minContains:ke,maxContains:A,minItems:k,maxItems:U,uniqueItems:O,minimum:Ce,maximum:We,exclusiveMinimum:Ue,exclusiveMaximum:at,multipleOf:gt,minLength:In,maxLength:Qe,pattern:tn,__absolute_ref__:jr,__absolute_recursive_ref__:qt}=e,Z=[];if(p===!0&&i===null&&(i=e),m==="#"){const fe=i===null?r[qt]:i,oe=`${o}/$recursiveRef`,_e=rt(t,i===null?e:i,n,r,s,fe,a,oe,l);_e.valid||Z.push({instanceLocation:a,keyword:"$recursiveRef",keywordLocation:oe,error:"A subschema had errors."},..._e.errors)}if(h!==void 0){const oe=r[jr||h];if(oe===void 0){let J=`Unresolved $ref "${h}".`;throw jr&&jr!==h&&(J+=`  Absolute URI "${jr}".`),J+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(J)}const _e=`${o}/$ref`,ee=rt(t,oe,n,r,s,i,a,_e,l);if(ee.valid||Z.push({instanceLocation:a,keyword:"$ref",keywordLocation:_e,error:"A subschema had errors."},...ee.errors),n==="4"||n==="7")return{valid:Z.length===0,errors:Z}}if(Array.isArray(y)){let fe=y.length,oe=!1;for(let _e=0;_e<fe;_e++)if(d===y[_e]||y[_e]==="integer"&&d==="number"&&t%1===0&&t===t){oe=!0;break}oe||Z.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y.join('", "')}".`})}else y==="integer"?(d!=="number"||t%1||t!==t)&&Z.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y}".`}):y!==void 0&&d!==y&&Z.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y}".`});if(w!==void 0&&(d==="object"||d==="array"?aa(t,w)||Z.push({instanceLocation:a,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(w)}.`}):t!==w&&Z.push({instanceLocation:a,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(w)}.`})),x!==void 0&&(d==="object"||d==="array"?x.some(fe=>aa(t,fe))||Z.push({instanceLocation:a,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(x)}.`}):x.some(fe=>t===fe)||Z.push({instanceLocation:a,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(x)}.`})),f!==void 0){const fe=`${o}/not`;rt(t,f,n,r,s,i,a,fe).valid&&Z.push({instanceLocation:a,keyword:"not",keywordLocation:fe,error:'Instance matched "not" schema.'})}let nn=[];if(v!==void 0){const fe=`${o}/anyOf`,oe=Z.length;let _e=!1;for(let ee=0;ee<v.length;ee++){const J=v[ee],ge=Object.create(l),ye=rt(t,J,n,r,s,p===!0?i:null,a,`${fe}/${ee}`,ge);Z.push(...ye.errors),_e=_e||ye.valid,ye.valid&&nn.push(ge)}_e?Z.length=oe:Z.splice(oe,0,{instanceLocation:a,keyword:"anyOf",keywordLocation:fe,error:"Instance does not match any subschemas."})}if(b!==void 0){const fe=`${o}/allOf`,oe=Z.length;let _e=!0;for(let ee=0;ee<b.length;ee++){const J=b[ee],ge=Object.create(l),ye=rt(t,J,n,r,s,p===!0?i:null,a,`${fe}/${ee}`,ge);Z.push(...ye.errors),_e=_e&&ye.valid,ye.valid&&nn.push(ge)}_e?Z.length=oe:Z.splice(oe,0,{instanceLocation:a,keyword:"allOf",keywordLocation:fe,error:"Instance does not match every subschema."})}if(_!==void 0){const fe=`${o}/oneOf`,oe=Z.length,_e=_.filter((ee,J)=>{const ge=Object.create(l),ye=rt(t,ee,n,r,s,p===!0?i:null,a,`${fe}/${J}`,ge);return Z.push(...ye.errors),ye.valid&&nn.push(ge),ye.valid}).length;_e===1?Z.length=oe:Z.splice(oe,0,{instanceLocation:a,keyword:"oneOf",keywordLocation:fe,error:`Instance does not match exactly one subschema (${_e} matches).`})}if((d==="object"||d==="array")&&Object.assign(l,...nn),E!==void 0){const fe=`${o}/if`;if(rt(t,E,n,r,s,i,a,fe,l).valid){if(C!==void 0){const _e=rt(t,C,n,r,s,i,a,`${o}/then`,l);_e.valid||Z.push({instanceLocation:a,keyword:"if",keywordLocation:fe,error:'Instance does not match "then" schema.'},..._e.errors)}}else if(S!==void 0){const _e=rt(t,S,n,r,s,i,a,`${o}/else`,l);_e.valid||Z.push({instanceLocation:a,keyword:"if",keywordLocation:fe,error:'Instance does not match "else" schema.'},..._e.errors)}}if(d==="object"){if(g!==void 0)for(const ee of g)ee in t||Z.push({instanceLocation:a,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${ee}".`});const fe=Object.keys(t);if(H!==void 0&&fe.length<H&&Z.push({instanceLocation:a,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${H} properties.`}),B!==void 0&&fe.length>B&&Z.push({instanceLocation:a,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${B} properties.`}),q!==void 0){const ee=`${o}/propertyNames`;for(const J in t){const ge=`${a}/${xr(J)}`,ye=rt(J,q,n,r,s,i,ge,ee);ye.valid||Z.push({instanceLocation:a,keyword:"propertyNames",keywordLocation:ee,error:`Property name "${J}" does not match schema.`},...ye.errors)}}if(z!==void 0){const ee=`${o}/dependantRequired`;for(const J in z)if(J in t){const ge=z[J];for(const ye of ge)ye in t||Z.push({instanceLocation:a,keyword:"dependentRequired",keywordLocation:ee,error:`Instance has "${J}" but does not have "${ye}".`})}}if(P!==void 0)for(const ee in P){const J=`${o}/dependentSchemas`;if(ee in t){const ge=rt(t,P[ee],n,r,s,i,a,`${J}/${xr(ee)}`,l);ge.valid||Z.push({instanceLocation:a,keyword:"dependentSchemas",keywordLocation:J,error:`Instance has "${ee}" but does not match dependant schema.`},...ge.errors)}}if(L!==void 0){const ee=`${o}/dependencies`;for(const J in L)if(J in t){const ge=L[J];if(Array.isArray(ge))for(const ye of ge)ye in t||Z.push({instanceLocation:a,keyword:"dependencies",keywordLocation:ee,error:`Instance has "${J}" but does not have "${ye}".`});else{const ye=rt(t,ge,n,r,s,i,a,`${ee}/${xr(J)}`);ye.valid||Z.push({instanceLocation:a,keyword:"dependencies",keywordLocation:ee,error:`Instance has "${J}" but does not match dependant schema.`},...ye.errors)}}}const oe=Object.create(null);let _e=!1;if(D!==void 0){const ee=`${o}/properties`;for(const J in D){if(!(J in t))continue;const ge=`${a}/${xr(J)}`,ye=rt(t[J],D[J],n,r,s,i,ge,`${ee}/${xr(J)}`);if(ye.valid)l[J]=oe[J]=!0;else if(_e=s,Z.push({instanceLocation:a,keyword:"properties",keywordLocation:ee,error:`Property "${J}" does not match schema.`},...ye.errors),_e)break}}if(!_e&&F!==void 0){const ee=`${o}/patternProperties`;for(const J in F){const ge=new RegExp(J,"u"),ye=F[J];for(const Kt in t){if(!ge.test(Kt))continue;const du=`${a}/${xr(Kt)}`,wa=rt(t[Kt],ye,n,r,s,i,du,`${ee}/${xr(J)}`);wa.valid?l[Kt]=oe[Kt]=!0:(_e=s,Z.push({instanceLocation:a,keyword:"patternProperties",keywordLocation:ee,error:`Property "${Kt}" matches pattern "${J}" but does not match associated schema.`},...wa.errors))}}}if(!_e&&Y!==void 0){const ee=`${o}/additionalProperties`;for(const J in t){if(oe[J])continue;const ge=`${a}/${xr(J)}`,ye=rt(t[J],Y,n,r,s,i,ge,ee);ye.valid?l[J]=!0:(_e=s,Z.push({instanceLocation:a,keyword:"additionalProperties",keywordLocation:ee,error:`Property "${J}" does not match additional properties schema.`},...ye.errors))}}else if(!_e&&de!==void 0){const ee=`${o}/unevaluatedProperties`;for(const J in t)if(!l[J]){const ge=`${a}/${xr(J)}`,ye=rt(t[J],de,n,r,s,i,ge,ee);ye.valid?l[J]=!0:Z.push({instanceLocation:a,keyword:"unevaluatedProperties",keywordLocation:ee,error:`Property "${J}" does not match unevaluated properties schema.`},...ye.errors)}}}else if(d==="array"){U!==void 0&&t.length>U&&Z.push({instanceLocation:a,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${t.length} > ${U}).`}),k!==void 0&&t.length<k&&Z.push({instanceLocation:a,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${t.length} < ${k}).`});const fe=t.length;let oe=0,_e=!1;if(G!==void 0){const ee=`${o}/prefixItems`,J=Math.min(G.length,fe);for(;oe<J;oe++){const ge=rt(t[oe],G[oe],n,r,s,i,`${a}/${oe}`,`${ee}/${oe}`);if(l[oe]=!0,!ge.valid&&(_e=s,Z.push({instanceLocation:a,keyword:"prefixItems",keywordLocation:ee,error:"Items did not match schema."},...ge.errors),_e))break}}if(X!==void 0){const ee=`${o}/items`;if(Array.isArray(X)){const J=Math.min(X.length,fe);for(;oe<J;oe++){const ge=rt(t[oe],X[oe],n,r,s,i,`${a}/${oe}`,`${ee}/${oe}`);if(l[oe]=!0,!ge.valid&&(_e=s,Z.push({instanceLocation:a,keyword:"items",keywordLocation:ee,error:"Items did not match schema."},...ge.errors),_e))break}}else for(;oe<fe;oe++){const J=rt(t[oe],X,n,r,s,i,`${a}/${oe}`,ee);if(l[oe]=!0,!J.valid&&(_e=s,Z.push({instanceLocation:a,keyword:"items",keywordLocation:ee,error:"Items did not match schema."},...J.errors),_e))break}if(!_e&&ie!==void 0){const J=`${o}/additionalItems`;for(;oe<fe;oe++){const ge=rt(t[oe],ie,n,r,s,i,`${a}/${oe}`,J);l[oe]=!0,ge.valid||(_e=s,Z.push({instanceLocation:a,keyword:"additionalItems",keywordLocation:J,error:"Items did not match additional items schema."},...ge.errors))}}}if(Fe!==void 0)if(fe===0&&ke===void 0)Z.push({instanceLocation:a,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(ke!==void 0&&fe<ke)Z.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${fe}) than minContains (${ke}).`});else{const ee=`${o}/contains`,J=Z.length;let ge=0;for(let ye=0;ye<fe;ye++){const Kt=rt(t[ye],Fe,n,r,s,i,`${a}/${ye}`,ee);Kt.valid?(l[ye]=!0,ge++):Z.push(...Kt.errors)}ge>=(ke||0)&&(Z.length=J),ke===void 0&&A===void 0&&ge===0?Z.splice(J,0,{instanceLocation:a,keyword:"contains",keywordLocation:ee,error:"Array does not contain item matching schema."}):ke!==void 0&&ge<ke?Z.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${ke} items matching schema. Only ${ge} items were found.`}):A!==void 0&&ge>A&&Z.push({instanceLocation:a,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${A} items matching schema. ${ge} items were found.`})}if(!_e&&Oe!==void 0){const ee=`${o}/unevaluatedItems`;for(oe;oe<fe;oe++){if(l[oe])continue;const J=rt(t[oe],Oe,n,r,s,i,`${a}/${oe}`,ee);l[oe]=!0,J.valid||Z.push({instanceLocation:a,keyword:"unevaluatedItems",keywordLocation:ee,error:"Items did not match unevaluated items schema."},...J.errors)}}if(O)for(let ee=0;ee<fe;ee++){const J=t[ee],ge=typeof J=="object"&&J!==null;for(let ye=0;ye<fe;ye++){if(ee===ye)continue;const Kt=t[ye];(J===Kt||ge&&(typeof Kt=="object"&&Kt!==null)&&aa(J,Kt))&&(Z.push({instanceLocation:a,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${ee} and ${ye}.`}),ee=Number.MAX_SAFE_INTEGER,ye=Number.MAX_SAFE_INTEGER)}}}else if(d==="number"){if(n==="4"?(Ce!==void 0&&(Ue===!0&&t<=Ce||t<Ce)&&Z.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${Ue?"or equal to ":""} ${Ce}.`}),We!==void 0&&(at===!0&&t>=We||t>We)&&Z.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${at?"or equal to ":""} ${We}.`})):(Ce!==void 0&&t<Ce&&Z.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${Ce}.`}),We!==void 0&&t>We&&Z.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${We}.`}),Ue!==void 0&&t<=Ue&&Z.push({instanceLocation:a,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${t} is less than ${Ue}.`}),at!==void 0&&t>=at&&Z.push({instanceLocation:a,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${t} is greater than or equal to ${at}.`})),gt!==void 0){const fe=t%gt;Math.abs(0-fe)>=11920929e-14&&Math.abs(gt-fe)>=11920929e-14&&Z.push({instanceLocation:a,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${t} is not a multiple of ${gt}.`})}}else if(d==="string"){const fe=In===void 0&&Qe===void 0?0:uV(t);In!==void 0&&fe<In&&Z.push({instanceLocation:a,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${fe} < ${In}).`}),Qe!==void 0&&fe>Qe&&Z.push({instanceLocation:a,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${fe} > ${Qe}).`}),tn!==void 0&&!new RegExp(tn,"u").test(t)&&Z.push({instanceLocation:a,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),N!==void 0&&_k[N]&&!_k[N](t)&&Z.push({instanceLocation:a,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${N}".`})}return{valid:Z.length===0,errors:Z}}class dV{constructor(e,n="2019-09",r=!0){T(this,"schema");T(this,"draft");T(this,"shortCircuit");T(this,"lookup");this.schema=e,this.draft=n,this.shortCircuit=r,this.lookup=ci(e)}validate(e){return rt(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,n){n&&(e={...e,$id:n}),ci(e,this.lookup)}}var hV={};De(hV,{Validator:()=>dV,deepCompareStrict:()=>aa,toJsonSchema:()=>Zr,validatesOnlyStrings:()=>rc});function Zr(t){if(ft(t)){const e=JI(t,!0);if(rs(e)){const n=Mh(e,!0);return Lh(n)}else return Lh(t)}return At(t)?$B(t):t}function rc(t){if(!t||typeof t!="object"||Object.keys(t).length===0||Array.isArray(t))return!1;if("type"in t)return typeof t.type=="string"?t.type==="string":Array.isArray(t.type)?t.type.every(e=>e==="string"):!1;if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>typeof e=="string");if("const"in t)return typeof t.const=="string";if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(e=>rc(e));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){const e="anyOf"in t?t.anyOf:t.oneOf;return e.length>0&&e.every(n=>rc(n))}if("not"in t)return!1;if("$ref"in t&&typeof t.$ref=="string"){const e=t.$ref,n=ci(t);return n[e]?rc(n[e]):!1}return!1}var mV={};De(mV,{Graph:()=>Cx});function pV(t,e){if(t!==void 0&&!ec(t))return t;if(Sx(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function fV(t){return Sx(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Zr(t.data.schema),title:t.data.name}}}var Cx=class uR{constructor(e){T(this,"nodes",{});T(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=ec(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...fV(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const s=n??wn(),i={id:s,data:e,name:pV(n,e),metadata:r};return this.nodes[s]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const i={source:e.id,target:n.id,data:r,conditional:s};return this.edges.push(i),i}firstNode(){return Sk(this)}lastNode(){return kk(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(u=>u.id).every(ec)&&(r="");const i=u=>r?`${r}:${u}`:u;Object.entries(e.nodes).forEach(([u,d])=>{this.nodes[i(u)]={...d,id:i(u)}});const a=e.edges.map(u=>({...u,source:i(u.source),target:i(u.target)}));this.edges=[...this.edges,...a];const o=e.firstNode(),l=e.lastNode();return[o?{id:i(o.id),data:o.data}:void 0,l?{id:i(l.id),data:l.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&Sk(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&kk(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),n=new Map;Object.values(e).forEach(s=>{n.set(s,(n.get(s)||0)+1)});const r=s=>{const i=e[s];return ec(s)&&n.get(i)===1?i:s};return new uR({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,i])=>[r(s),{...i,id:r(s)}])),edges:this.edges.map(s=>({...s,source:r(s.source),target:r(s.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:i}=e??{},a=this.reid(),o=a.firstNode(),l=a.lastNode();return SG(a.nodes,a.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:s,wrapLabelNWords:i})}async drawMermaidPng(e){const n=this.drawMermaid(e);return kG(n,{backgroundColor:e==null?void 0:e.backgroundColor})}};function Sk(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),r=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function kk(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),r=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function gV(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const s of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Ir.fromReadableStream(n)}function Tk(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const yV=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function Gy(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*Ak(t,e){for(;;){const{value:n,done:r}=Nr.runWithConfig(js(t),e.next.bind(e),!0);if(r)break;yield n}}async function*By(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:s}=await Nr.runWithConfig(js(t),n.next.bind(e),!0);if(s)break;yield r}}function Rt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var xt=class extends ko{constructor(){super(...arguments);T(this,"lc_runnable",!0);T(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new Nx({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Oo({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new gR({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Be);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:n},(s,i)=>Be(i===0?e:r))}return Array.from({length:n},()=>Be(e))}async batch(e,n,r){var l;const s=this._getOptionsList(n??{},e.length),i=((l=s[0])==null?void 0:l.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new iu({maxConcurrency:i,onFailedAttempt:u=>{throw u}}),o=e.map((u,d)=>a.call(async()=>{try{return await this.invoke(u,s[d])}catch(h){if(r!=null&&r.returnExceptions)return h;throw h}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Be(n),s=new xa({generator:this._streamIterator(e,r),config:r});return await s.setup,Ir.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Be(e):n=Be({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const s=Be(r),i=await zn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),Rt(n,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let o;try{const l=e.call(this,n,s,a);o=await $s(l,r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(Rt(o,"output"))),o}async _batchWithConfig(e,n,r,s){var u;const i=this._getOptionsList(r??{},n.length),a=await Promise.all(i.map(zn)),o=await Promise.all(a.map(async(d,h)=>{const m=await(d==null?void 0:d.handleChainStart(this.toJSON(),Rt(n[h],"input"),i[h].runId,i[h].runType,void 0,void 0,i[h].runName??this.getName()));return delete i[h].runId,m}));let l;try{const d=e.call(this,n,i,o,s);l=await $s(d,(u=i==null?void 0:i[0])==null?void 0:u.signal)}catch(d){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(d))),d}return await Promise.all(o.map(d=>d==null?void 0:d.handleChainEnd(Rt(l,"output")))),l}_concatOutputChunks(e,n){return Ti(e,n)}async*_transformStreamWithConfig(e,n,r){let s,i=!0,a,o=!0;const l=Be(r),u=await zn(l),d=this;async function*h(){for await(const p of e){if(i)if(s===void 0)s=p;else try{s=d._concatOutputChunks(s,p)}catch{s=void 0,i=!1}yield p}}let m;try{const p=await RI(n.bind(this),h(),async()=>u==null?void 0:u.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),r==null?void 0:r.signal,l);delete l.runId,m=p.setup;const y=m==null?void 0:m.handlers.find(A9);let w=p.output;y!==void 0&&m!==void 0&&(w=y.tapOutputIterable(m.runId,w));const x=m==null?void 0:m.handlers.find(LI);x!==void 0&&m!==void 0&&(w=x.tapOutputIterable(m.runId,w));for await(const g of w)if(yield g,o)if(a===void 0)a=g;else try{a=this._concatOutputChunks(a,g)}catch{a=void 0,o=!1}}catch(p){throw await(m==null?void 0:m.handleChainError(p,void 0,void 0,void 0,{inputs:Rt(s,"input")})),p}await(m==null?void 0:m.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:Rt(s,"input")}))}getGraph(e){const n=new Cx,r=n.addNode({name:`${this.getName()}Input`,schema:xk()}),s=n.addNode(this),i=n.addNode({name:`${this.getName()}Output`,schema:xk()});return n.addEdge(r,s),n.addEdge(s,i),n}pipe(e){return new qo({first:this,last:Tr(e)})}pick(e){return this.pipe(new yR(e))}assign(e){return this.pipe(new Ix(new Ko({steps:e})))}async*transform(e,n){let r;for await(const s of e)r===void 0?r=s:r=this._concatOutputChunks(r,s);yield*this._streamIterator(r,Be(n))}async*streamLog(e,n,r){const s=new Oy({...r,autoClose:!1,_schemaFormat:"original"}),i=Be(n);yield*this._streamLog(e,s,i)}async*_streamLog(e,n,r){const{callbacks:s}=r;if(s===void 0)r.callbacks=[n];else if(Array.isArray(s))r.callbacks=s.concat([n]);else{const l=s.copy();l.addHandler(n,!0),r.callbacks=l}const i=this.stream(e,r);async function a(){try{const l=await i;for await(const u of l){const d=new ys({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await n.writer.write(d)}}finally{await n.writer.close()}}const o=a();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let s;if(n.version==="v1")s=this._streamEventsV1(e,n,r);else if(n.version==="v2")s=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?gV(s):Ir.fromAsyncGenerator(s)}async*_streamEventsV2(e,n,r){var y;const s=new E9({...r,autoClose:!1}),i=Be(n),a=i.runId??wn();i.runId=a;const o=i.callbacks;if(o===void 0)i.callbacks=[s];else if(Array.isArray(o))i.callbacks=o.concat(s);else{const w=o.copy();w.addHandler(s,!0),i.callbacks=w}const l=new AbortController,u=this;async function d(){let w,x=null;try{n!=null&&n.signal?"any"in AbortSignal?w=AbortSignal.any([l.signal,n.signal]):(w=n.signal,x=()=>{l.abort()},n.signal.addEventListener("abort",x,{once:!0})):w=l.signal;const g=await u.stream(e,{...i,signal:w}),f=s.tapOutputIterable(a,g);for await(const v of f)if(l.signal.aborted)break}finally{await s.finish(),w&&x&&w.removeEventListener("abort",x)}}const h=d();let m=!1,p;try{for await(const w of s){if(!m){w.data.input=e,m=!0,p=w.run_id,yield w;continue}w.run_id===p&&w.event.endsWith("_end")&&(y=w.data)!=null&&y.input&&delete w.data.input,yield w}}finally{l.abort(),await h}}async*_streamEventsV1(e,n,r){let s,i=!1;const a=Be(n),o=a.tags??[],l=a.metadata??{},u=a.runName??this.getName(),d=new Oy({...r,autoClose:!1,_schemaFormat:"streaming_events"}),h=new F9({...r}),m=this._streamLog(e,d,a);for await(const y of m){if(s?s=s.concat(y):s=_x.fromRunLogPatch(y),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;const f={...s.state},v={run_id:f.id,event:`on_${f.type}_start`,name:u,tags:o,metadata:l,data:{input:e}};h.includeEvent(v,f.type)&&(yield v)}const w=y.ops.filter(f=>f.path.startsWith("/logs/")).map(f=>f.path.split("/")[2]),x=[...new Set(w)];for(const f of x){let v,b={};const _=s.state.logs[f];if(_.end_time===void 0?_.streamed_output.length>0?v="stream":v="start":v="end",v==="start")_.inputs!==void 0&&(b.input=_.inputs);else if(v==="end")_.inputs!==void 0&&(b.input=_.inputs),b.output=_.final_output;else if(v==="stream"){const E=_.streamed_output.length;if(E!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${E} instead. Encountered in: "${_.name}"`);b={chunk:_.streamed_output[0]},_.streamed_output=[]}yield{event:`on_${_.type}_${v}`,name:_.name,run_id:_.id,tags:_.tags,metadata:_.metadata,data:b}}const{state:g}=s;if(g.streamed_output.length>0){const f=g.streamed_output.length;if(f!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${f} instead. Encountered in: "${g.name}"`);const v={chunk:g.streamed_output[0]};g.streamed_output=[];const b={event:`on_${g.type}_stream`,run_id:g.id,tags:o,metadata:l,name:u,data:v};h.includeEvent(b,g.type)&&(yield b)}}const p=s==null?void 0:s.state;if(p!==void 0){const y={event:`on_${p.type}_end`,name:u,run_id:p.id,tags:o,metadata:l,data:{output:p.final_output}};h.includeEvent(y,p.type)&&(yield y)}}static isRunnable(e){return Sx(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Oo({bound:this,config:{},configFactories:[s=>({callbacks:[new UI({config:s,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return _V(this,e)}},Oo=class dR extends xt{constructor(n){super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"bound");T(this,"config");T(this,"kwargs");T(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const r=jh(this.config,...n);return jh(r,...this.configFactories?await Promise.all(this.configFactories.map(async s=>await s(r))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new Nx({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,r){return this.bound.invoke(n,await this._mergeConfig(r,this.kwargs))}async batch(n,r,s){const i=Array.isArray(r)?await Promise.all(r.map(async a=>this._mergeConfig(Be(a),this.kwargs))):await this._mergeConfig(Be(r),this.kwargs);return this.bound.batch(n,i,s)}_concatOutputChunks(n,r){return this.bound._concatOutputChunks(n,r)}async*_streamIterator(n,r){yield*this.bound._streamIterator(n,await this._mergeConfig(Be(r),this.kwargs))}async stream(n,r){return this.bound.stream(n,await this._mergeConfig(Be(r),this.kwargs))}async*transform(n,r){yield*this.bound.transform(n,await this._mergeConfig(Be(r),this.kwargs))}streamEvents(n,r,s){const i=this,a=async function*(){yield*i.bound.streamEvents(n,{...await i._mergeConfig(Be(r),i.kwargs),version:r.version},s)};return Ir.fromAsyncGenerator(a())}static isRunnableBinding(n){return n.bound&&xt.isRunnable(n.bound)}withListeners({onStart:n,onEnd:r,onError:s}){return new dR({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new UI({config:i,onStart:n,onEnd:r,onError:s})]})]})}},vV=class hR extends xt{constructor(n){super(n);T(this,"lc_serializable",!0);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"bound");this.bound=n.bound}static lc_name(){return"RunnableEach"}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async _invoke(n,r,s){return this.bound.batch(n,tt(r,{callbacks:s==null?void 0:s.getChild()}))}withListeners({onStart:n,onEnd:r,onError:s}){return new hR({bound:this.bound.withListeners({onStart:n,onEnd:r,onError:s})})}},Nx=class extends Oo{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"maxAttemptNumber",3);T(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,r){const s=e>1?`retry:attempt:${e}`:void 0;return tt(n,{callbacks:r==null?void 0:r.getChild(s)})}async _invoke(e,n,r){return Py(s=>super.invoke(e,this._patchConfigForRetry(s,n,r)),{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,s){const i={};try{await Py(async a=>{const o=e.map((m,p)=>p).filter(m=>i[m.toString()]===void 0||i[m.toString()]instanceof Error),l=o.map(m=>e[m]),u=o.map(m=>this._patchConfigForRetry(a,n==null?void 0:n[m],r==null?void 0:r[m])),d=await super.batch(l,u,{...s,returnExceptions:!0});let h;for(let m=0;m<d.length;m+=1){const p=d[m],y=o[m];p instanceof Error&&h===void 0&&(h=p,h.input=l[m]),i[y.toString()]=p}if(h)throw h;return d},{onFailedAttempt:({error:a})=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((s==null?void 0:s.returnExceptions)!==!0)throw a}return Object.keys(i).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>i[parseInt(a,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}},qo=class Ol extends xt{constructor(n){super(n);T(this,"first");T(this,"middle",[]);T(this,"last");T(this,"omitSequenceTags",!1);T(this,"lc_serializable",!0);T(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,r){var u;const s=Be(r),i=await zn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),Rt(n,"input"),s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;let o=n,l;try{const d=[this.first,...this.middle];for(let h=0;h<d.length;h+=1){const p=d[h].invoke(o,tt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));o=await $s(p,r==null?void 0:r.signal)}if((u=r==null?void 0:r.signal)!=null&&u.aborted)throw Pc(r.signal);l=await this.last.invoke(o,tt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(d){throw await(a==null?void 0:a.handleChainError(d)),d}return await(a==null?void 0:a.handleChainEnd(Rt(l,"output"))),l}async batch(n,r,s){var u;const i=this._getOptionsList(r??{},n.length),a=await Promise.all(i.map(zn)),o=await Promise.all(a.map(async(d,h)=>{const m=await(d==null?void 0:d.handleChainStart(this.toJSON(),Rt(n[h],"input"),i[h].runId,void 0,void 0,void 0,i[h].runName));return delete i[h].runId,m}));let l=n;try{for(let d=0;d<this.steps.length;d+=1){const m=this.steps[d].batch(l,o.map((p,y)=>{const w=p==null?void 0:p.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`);return tt(i[y],{callbacks:w})}),s);l=await $s(m,(u=i[0])==null?void 0:u.signal)}}catch(d){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(d))),d}return await Promise.all(o.map(d=>d==null?void 0:d.handleChainEnd(Rt(l,"output")))),l}_concatOutputChunks(n,r){return this.last._concatOutputChunks(n,r)}async*_streamIterator(n,r){var m;const s=await zn(r),{runId:i,...a}=r??{},o=await(s==null?void 0:s.handleChainStart(this.toJSON(),Rt(n,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),l=[this.first,...this.middle,this.last];let u=!0,d;async function*h(){yield n}try{let p=l[0].transform(h(),tt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let y=1;y<l.length;y+=1)p=await l[y].transform(p,tt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)}));for await(const y of p)if((m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield y,u)if(d===void 0)d=y;else try{d=this._concatOutputChunks(d,y)}catch{d=void 0,u=!1}}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}await(o==null?void 0:o.handleChainEnd(Rt(d,"output")))}getGraph(n){const r=new Cx;let s=null;return this.steps.forEach((i,a)=>{const o=i.getGraph(n);a!==0&&o.trimFirstNode(),a!==this.steps.length-1&&o.trimLastNode(),r.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${i} has no first node`);s&&r.addEdge(s,l),s=o.lastNode()}),r}pipe(n){return Ol.isRunnableSequence(n)?new Ol({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new Ol({first:this.first,middle:[...this.middle,this.last],last:Tr(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&xt.isRunnable(n)}static from([n,...r],s){let i={};return typeof s=="string"?i.name=s:s!==void 0&&(i=s),new Ol({...i,first:Tr(n),middle:r.slice(0,-1).map(Tr),last:Tr(r[r.length-1])})}},Ko=class mR extends xt{constructor(n){super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"steps");this.steps={};for(const[r,s]of Object.entries(n.steps))this.steps[r]=Tr(s)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new mR({steps:n})}async invoke(n,r){const s=Be(r),i=await zn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:n},s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;const o={};try{const l=Object.entries(this.steps).map(async([u,d])=>{o[u]=await d.invoke(n,tt(s,{callbacks:a==null?void 0:a.getChild(`map:key:${u}`)}))});await $s(Promise.all(l),r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(o)),o}async*_transform(n,r,s){const i={...this.steps},a=wx(n,Object.keys(i).length),o=new Map(Object.entries(i).map(([l,u],d)=>{const h=u.transform(a[d],tt(s,{callbacks:r==null?void 0:r.getChild(`map:key:${l}`)}));return[l,h.next().then(m=>({key:l,gen:h,result:m}))]}));for(;o.size;){const l=Promise.race(o.values()),{key:u,result:d,gen:h}=await $s(l,s==null?void 0:s.signal);o.delete(u),d.done||(yield{[u]:d.value},o.set(u,h.next().then(m=>({key:u,gen:h,result:m}))))}}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*s(){yield n}const i=Be(r),a=new xa({generator:this.transform(s(),i),config:i});return await a.setup,Ir.fromAsyncGenerator(a)}},xV=class pR extends xt{constructor(n){super(n);T(this,"lc_serializable",!1);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"func");if(!xx(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,r){const[s]=this._getOptionsList(r??{},1),i=await zn(s),a=this.func(tt(s,{callbacks:i}),n);return $s(a,s==null?void 0:s.signal)}async*_streamIterator(n,r){var a,o;const[s]=this._getOptionsList(r??{},1),i=await this.invoke(n,r);if(Gy(i)){for await(const l of i)(a=s==null?void 0:s.signal)==null||a.throwIfAborted(),yield l;return}if(yV(i)){for(;;){(o=s==null?void 0:s.signal)==null||o.throwIfAborted();const l=i.next();if(l.done)break;yield l.value}return}yield i}static from(n){return new pR({func:n})}};function wV(t){if(xx(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var zs=class fR extends xt{constructor(n){if(xx(n.func))return xV.from(n.func);super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"func");wV(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new fR({func:n})}async _invoke(n,r,s){return new Promise((i,a)=>{const o=tt(r,{callbacks:s==null?void 0:s.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Of)-1});Nr.runWithConfig(js(o),async()=>{var l,u;try{let d=await this.func(n,{...o});if(d&&xt.isRunnable(d)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");d=await d.invoke(n,{...o,recursionLimit:(o.recursionLimit??Of)-1})}else if(Gy(d)){let h;for await(const m of By(o,d))if((l=r==null?void 0:r.signal)==null||l.throwIfAborted(),h===void 0)h=m;else try{h=this._concatOutputChunks(h,m)}catch{h=m}d=h}else if(Tk(d)){let h;for(const m of Ak(o,d))if((u=r==null?void 0:r.signal)==null||u.throwIfAborted(),h===void 0)h=m;else try{h=this._concatOutputChunks(h,m)}catch{h=m}d=h}i(d)}catch(d){a(d)}})})}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async*_transform(n,r,s){var l,u;let i;for await(const d of n)if(i===void 0)i=d;else try{i=this._concatOutputChunks(i,d)}catch{i=d}const a=tt(s,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((s==null?void 0:s.recursionLimit)??Of)-1}),o=await new Promise((d,h)=>{Nr.runWithConfig(js(a),async()=>{try{const m=await this.func(i,{...a,config:a});d(m)}catch(m){h(m)}})});if(o&&xt.isRunnable(o)){if((s==null?void 0:s.recursionLimit)===0)throw new Error("Recursion limit reached.");const d=await o.stream(i,a);for await(const h of d)yield h}else if(Gy(o))for await(const d of By(a,o))(l=s==null?void 0:s.signal)==null||l.throwIfAborted(),yield d;else if(Tk(o))for(const d of Ak(a,o))(u=s==null?void 0:s.signal)==null||u.throwIfAborted(),yield d;else yield o}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*s(){yield n}const i=Be(r),a=new xa({generator:this.transform(s(),i),config:i});return await a.setup,Ir.fromAsyncGenerator(a)}},bV=class extends Ko{},gR=class extends xt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"runnable");T(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Be(n),s=await zn(r),{runId:i,...a}=r,o=await(s==null?void 0:s.handleChainStart(this.toJSON(),Rt(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),l=tt(a,{callbacks:o==null?void 0:o.getChild()});return await Nr.runWithConfig(l,async()=>{var h;let d;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();try{const p=await m.invoke(e,l);return await(o==null?void 0:o.handleChainEnd(Rt(p,"output"))),p}catch(p){d===void 0&&(d=p)}}throw d===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(d)),d)})}async*_streamIterator(e,n){var h;const r=Be(n),s=await zn(r),{runId:i,...a}=r,o=await(s==null?void 0:s.handleChainStart(this.toJSON(),Rt(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName));let l,u;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();const p=tt(a,{callbacks:o==null?void 0:o.getChild()});try{const y=await m.stream(e,p);u=By(p,y);break}catch(y){l===void 0&&(l=y)}}if(u===void 0){const m=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(m)),m}let d;try{for await(const m of u){yield m;try{d=d===void 0?d:this._concatOutputChunks(d,m)}catch{d=void 0}}}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}await(o==null?void 0:o.handleChainEnd(Rt(d,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(n??{},e.length),i=await Promise.all(s.map(u=>zn(u))),a=await Promise.all(i.map(async(u,d)=>{const h=await(u==null?void 0:u.handleChainStart(this.toJSON(),Rt(e[d],"input"),s[d].runId,void 0,void 0,void 0,s[d].runName));return delete s[d].runId,h}));let o;for(const u of this.runnables()){(l=s[0].signal)==null||l.throwIfAborted();try{const d=await u.batch(e,a.map((h,m)=>tt(s[m],{callbacks:h==null?void 0:h.getChild()})),r);return await Promise.all(a.map((h,m)=>h==null?void 0:h.handleChainEnd(Rt(d[m],"output")))),d}catch(d){o===void 0&&(o=d)}}throw o?(await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function Tr(t){if(typeof t=="function")return new zs({func:t});if(xt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Tr(r);return new Ko({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Ix=class extends xt{constructor(e){e instanceof Ko&&(e={mapper:e});super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const s=this.mapper.getStepsKeys(),[i,a]=wx(e),o=this.mapper.transform(a,tt(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const u of i){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);const d=Object.fromEntries(Object.entries(u).filter(([h])=>!s.includes(h)));Object.keys(d).length>0&&(yield d)}yield(await l).value;for await(const u of o)yield u}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const s=Be(n),i=new xa({generator:this.transform(r(),s),config:s});return await i.setup,Ir.fromAsyncGenerator(i)}},yR=class extends xt{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const s=Be(n),i=new xa({generator:this.transform(r(),s),config:s});return await i.setup,Ir.fromAsyncGenerator(i)}},Vy=class extends Oo{constructor(e){const n=qo.from([zs.from(async r=>{let s;if(Jl(r))try{s=await Vm(this.schema,r.args)}catch{throw new Ih("Received tool input did not match expected schema",JSON.stringify(r.args))}else s=r;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});T(this,"name");T(this,"description");T(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function _V(t,e){const n=e.name??t.getName(),r=e.description??Hm(e.schema);return Tx(e.schema)?new Vy({name:n,description:r,schema:Km({input:qm()}).transform(s=>s.input),bound:t}):new Vy({name:n,description:r,schema:e.schema,bound:t})}const Hh=(t,e)=>{const n=[...new Set(e==null?void 0:e.map(s=>{if(typeof s=="string")return s;const i=new s({});if(!("getType"in i)||typeof i.getType!="function")throw new Error("Invalid type provided.");return i.getType()}))],r=t.getType();return n.some(s=>s===r)};function SV(t,e){return Array.isArray(t)?Ek(t,e):zs.from(n=>Ek(n,t))}function Ek(t,e={}){const{includeNames:n,excludeNames:r,includeTypes:s,excludeTypes:i,includeIds:a,excludeIds:o}=e,l=[];for(const u of t)if(!(r&&u.name&&r.includes(u.name))){{if(i&&Hh(u,i))continue;if(o&&u.id&&o.includes(u.id))continue}s||a||n?(n&&u.name&&n.some(d=>d===u.name)||s&&Hh(u,s)||a&&u.id&&a.some(d=>d===u.id))&&l.push(u):l.push(u)}return l}function kV(t){return Array.isArray(t)?Ck(t):zs.from(Ck)}function Ck(t){if(!t.length)return[];const e=[];for(const n of t){const r=n,s=e.pop();if(!s)e.push(r);else if(r.getType()==="tool"||r.getType()!==s.getType())e.push(s,r);else{const i=Rh(s),a=Rh(r),o=i.concat(a);typeof i.content=="string"&&typeof a.content=="string"&&(o.content=`${i.content}
${a.content}`),e.push(EV(o))}}return e}function TV(t,e){if(Array.isArray(t)){const n=t;if(!e)throw new Error("Options parameter is required when providing messages.");return Nk(n,e)}else{const n=t;return zs.from(r=>Nk(r,n)).withConfig({runName:"trim_messages"})}}async function Nk(t,e){const{maxTokens:n,tokenCounter:r,strategy:s="last",allowPartial:i=!1,endOn:a,startOn:o,includeSystem:l=!1,textSplitter:u}=e;if(o&&s==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&s==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let d;"getNumTokens"in r?d=async m=>(await Promise.all(m.map(y=>r.getNumTokens(y.content)))).reduce((y,w)=>y+w,0):d=async m=>r(m);let h=xR;if(u&&("splitText"in u?h=u.splitText:h=async m=>u(m)),s==="first")return vR(t,{maxTokens:n,tokenCounter:d,textSplitter:h,partialStrategy:i?"first":void 0,endOn:a});if(s==="last")return AV(t,{maxTokens:n,tokenCounter:d,textSplitter:h,allowPartial:i,includeSystem:l,startOn:o,endOn:a});throw new Error(`Unrecognized strategy: '${s}'. Must be one of 'first' or 'last'.`)}async function vR(t,e){const{maxTokens:n,tokenCounter:r,textSplitter:s,partialStrategy:i,endOn:a}=e;let o=[...t],l=0;for(let u=0;u<o.length;u+=1){const d=u>0?o.slice(0,-u):o;if(await r(d)<=n){l=o.length-u;break}}if(l<o.length&&i){let u=!1;if(Array.isArray(o[l].content)){const d=o[l];if(typeof d.content=="string")throw new Error("Expected content to be an array.");const h=d.content.length,m=i==="last"?[...d.content].reverse():d.content;for(let p=1;p<=h;p+=1){const y=i==="first"?m.slice(0,p):m.slice(-p),w=Object.fromEntries(Object.entries(d).filter(([f])=>f!=="type"&&!f.startsWith("lc_"))),x=Rx(d.getType(),{...w,content:y}),g=[...o.slice(0,l),x];if(await r(g)<=n)o=g,l+=1,u=!0;else break}u&&i==="last"&&(d.content=[...m].reverse())}if(!u){const d=o[l];let h;if(Array.isArray(d.content)&&d.content.some(m=>typeof m=="string"||m.type==="text")){const m=d.content.find(p=>p.type==="text"&&p.text);h=m==null?void 0:m.text}else typeof d.content=="string"&&(h=d.content);if(h){const m=await s(h),p=m.length;i==="last"&&m.reverse();for(let y=0;y<p-1;y+=1)if(m.pop(),d.content=m.join(""),await r([...o.slice(0,l),d])<=n){i==="last"&&(d.content=[...m].reverse().join("")),o=[...o.slice(0,l),d],l+=1;break}}}}if(a){const u=Array.isArray(a)?a:[a];for(;l>0&&!Hh(o[l-1],u);)l-=1}return o.slice(0,l)}async function AV(t,e){var d;const{allowPartial:n=!1,includeSystem:r=!1,endOn:s,startOn:i,...a}=e;let o=t.map(h=>{const m=Object.fromEntries(Object.entries(h).filter(([p])=>p!=="type"&&!p.startsWith("lc_")));return Rx(h.getType(),m,Xv(h))});if(s){const h=Array.isArray(s)?s:[s];for(;o.length>0&&!Hh(o[o.length-1],h);)o=o.slice(0,-1)}const l=r&&((d=o[0])==null?void 0:d.getType())==="system";let u=l?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return u=await vR(u,{...a,partialStrategy:n?"last":void 0,endOn:i}),l?[u[0],...u.slice(1).reverse()]:u.reverse()}const Ik={human:{message:us,messageChunk:tu},ai:{message:Nn,messageChunk:cs},system:{message:Ps,messageChunk:ki},developer:{message:Ps,messageChunk:ki},tool:{message:as,messageChunk:Xc},function:{message:Rm,messageChunk:eu},generic:{message:va,messageChunk:Qc},remove:{message:Nh,messageChunk:Nh}};function Rx(t,e,n){var i;let r,s;switch(t){case"human":n?r=new tu(e):s=new us(e);break;case"ai":if(n){let a={...e};"tool_calls"in a&&(a={...a,tool_call_chunks:(i=a.tool_calls)==null?void 0:i.map(o=>({...o,type:"tool_call_chunk",index:void 0,args:JSON.stringify(o.args)}))}),r=new cs(a)}else s=new Nn(e);break;case"system":n?r=new ki(e):s=new Ps(e);break;case"developer":n?r=new ki({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}}):s=new Ps({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in e)n?r=new Xc(e):s=new as(e);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(n)r=new eu(e);else{if(!e.name)throw new Error("FunctionMessage must have a 'name' field");s=new Rm(e)}break;case"generic":if("role"in e)n?r=new Qc(e):s=new va(e);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${t}`)}if(n&&r)return r;if(s)return s;throw new Error(`Unrecognized message type ${t}`)}function EV(t){const e=t.getType();let n;const r=Object.fromEntries(Object.entries(t).filter(([s])=>!["type","tool_call_chunks"].includes(s)&&!s.startsWith("lc_")));if(e in Ik&&(n=Rx(e,r)),!n)throw new Error(`Unrecognized message chunk class ${e}. Supported classes are ${Object.keys(Ik)}`);return n}function xR(t){const e=t.split(`
`);return Promise.resolve([...e.slice(0,-1).map(n=>`${n}
`),e[e.length-1]])}const CV=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],NV=["image","video","audio","text-plain","file"],IV=["text","reasoning",...CV,...NV];var RV={};De(RV,{AIMessage:()=>Nn,AIMessageChunk:()=>cs,BaseMessage:()=>Us,BaseMessageChunk:()=>Oi,ChatMessage:()=>va,ChatMessageChunk:()=>Qc,FunctionMessage:()=>Rm,FunctionMessageChunk:()=>eu,HumanMessage:()=>us,HumanMessageChunk:()=>tu,KNOWN_BLOCK_TYPES:()=>IV,RemoveMessage:()=>Nh,SystemMessage:()=>Ps,SystemMessageChunk:()=>ki,ToolMessage:()=>as,ToolMessageChunk:()=>Xc,_isMessageFieldWithRole:()=>RN,_mergeDicts:()=>en,_mergeLists:()=>Jc,_mergeObj:()=>NN,_mergeStatus:()=>CN,coerceMessageLikeToMessage:()=>Xl,convertToChunk:()=>Rh,convertToOpenAIImageBlock:()=>xN,convertToProviderContentBlock:()=>Kv,defaultTextSplitter:()=>xR,defaultToolCallParser:()=>ex,filterMessages:()=>SV,getBufferString:()=>nx,iife:()=>UN,isAIMessage:()=>Im,isAIMessageChunk:()=>xy,isBase64ContentBlock:()=>qv,isBaseMessage:()=>oi,isBaseMessageChunk:()=>Xv,isChatMessage:()=>G4,isChatMessageChunk:()=>B4,isDataContentBlock:()=>is,isDirectToolOutput:()=>Qv,isFunctionMessage:()=>V4,isFunctionMessageChunk:()=>H4,isHumanMessage:()=>W4,isHumanMessageChunk:()=>q4,isIDContentBlock:()=>vN,isMessage:()=>wN,isOpenAIToolCallArray:()=>O4,isPlainTextContentBlock:()=>r4,isSystemMessage:()=>K4,isSystemMessageChunk:()=>Y4,isToolMessage:()=>$N,isToolMessageChunk:()=>DN,isURLContentBlock:()=>Wv,mapChatMessagesToStoredMessages:()=>tF,mapStoredMessageToChatMessage:()=>rx,mapStoredMessagesToChatMessages:()=>eF,mergeContent:()=>Os,mergeMessageRuns:()=>kV,mergeResponseMetadata:()=>ON,mergeUsageMetadata:()=>jN,parseBase64DataUrl:()=>Cc,parseMimeType:()=>yy,trimMessages:()=>TV});const oa=t=>t();function au(t){return t?!!(/^o\d/.test(t??"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function OV(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function ou(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!va.isInstance(t))throw new Error("Invalid generic chat message");return OV(t);default:throw new Error(`Unknown message type: ${e}`)}}function PV(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:s,baseURL:i,azureADTokenProvider:a,azureOpenAIEndpoint:o}=t;if((r||a)&&s&&e)return`${s}/${e}`;if((r||a)&&o&&e)return`${o}/openai/deployments/${e}`;if(r||a){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return i}function Rk(t){return typeof Headers<"u"&&t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Headers]"}function jV(t){const e=oa(()=>{if(Rk(t))return t;if(Array.isArray(t))return new Headers(t);if(typeof t=="object"&&t!==null&&"values"in t&&Rk(t.values))return t.values;if(typeof t=="object"&&t!==null){const n=Object.entries(t).filter(([,r])=>typeof r=="string").map(([r,s])=>[r,s]);return new Headers(n)}return new Headers});return Object.fromEntries(e.entries())}function $V(){let t=sx();return(t==="node"||t==="deno")&&(t=`(${t}/${process.version}; ${process.platform}; ${process.arch})`),t}function DV(t,e=!1,n="1.0.0"){const r=jV(t),s=$V(),i=`langchainjs${e?"-azure":""}-openai`;return{...r,"User-Agent":r["User-Agent"]?`${i}/${n} (${s})${r["User-Agent"]}`:`${i}/${n} (${s})`}}function Ox(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function Px(t){return t!==void 0&&xt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function jx(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(Yr(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function Ym(t){return jx(t)||Px(t)||Ox(t)}var LV={};De(LV,{convertToOpenAIFunction:()=>wR,convertToOpenAITool:()=>bR,isLangChainTool:()=>Ym,isRunnableToolLike:()=>Px,isStructuredTool:()=>Ox,isStructuredToolParams:()=>jx});function wR(t,e){const n=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:Zr(t.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function bR(t,e){const n=typeof e=="number"?void 0:e;let r;return Ym(t)?r={type:"function",function:wR(t)}:r=t,(n==null?void 0:n.strict)!==void 0&&(r.function.strict=n.strict),r}var MV={};De(MV,{extendInteropZodObject:()=>fG,getInteropZodDefaultGetter:()=>yG,getInteropZodObjectShape:()=>jy,getSchemaDescription:()=>Hm,interopParse:()=>hG,interopParseAsync:()=>Vm,interopSafeParse:()=>dG,interopSafeParseAsync:()=>ZI,interopZodObjectMakeFieldsOptional:()=>wG,interopZodObjectPartial:()=>gG,interopZodObjectPassthrough:()=>$y,interopZodObjectStrict:()=>Mh,interopZodTransformInputSchema:()=>JI,isInteropZodError:()=>XI,isInteropZodLiteral:()=>uG,isInteropZodObject:()=>pG,isInteropZodSchema:()=>Yr,isShapelessZodSchema:()=>mG,isSimpleStringZodSchema:()=>Tx,isZodArrayV4:()=>Wm,isZodLiteralV3:()=>KI,isZodLiteralV4:()=>YI,isZodObjectV3:()=>Ax,isZodObjectV4:()=>rs,isZodSchema:()=>cG,isZodSchemaV3:()=>At,isZodSchemaV4:()=>ft});function FV(t,e){let n;return Ym(t)?n=bR(t):n=t,(e==null?void 0:e.strict)!==void 0&&(n.function.strict=e.strict),n}function UV(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function zV(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(_R(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function _R(t,e){var r;const n=[];for(const[s,i]of Object.entries(t.properties??{}))i.description&&e<2&&n.push(`// ${i.description}`),(r=t.required)!=null&&r.includes(s)?n.push(`${s}: ${Wh(i,e)},`):n.push(`${s}?: ${Wh(i,e)},`);return n.map(s=>" ".repeat(e)+s).join(`
`)}function Wh(t,e){if(UV(t))return t.anyOf.map(n=>Wh(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",_R(t,e+2),"}"].join(`
`);case"array":return t.items?`${Wh(t.items,e)}[]`:"any[]";default:return""}}function SR(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function $x(t){return"type"in t&&t.type!=="function"}function GV(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function qh(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function kR(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function BV(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function VV(t){return t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function HV(t){const e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function WV(t){const e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}const qV=Symbol("Let zodToJsonSchema decide on which parser to use"),Ok={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},KV=t=>typeof t=="string"?{...Ok,basePath:["#"],definitions:{},name:t}:{...Ok,basePath:["#"],definitions:{},...t},Hy=t=>"_def"in t?t._def:t;function YV(t){if(!t)return!0;for(const e in t)return!1;return!0}const ZV=t=>{const e=KV(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[Hy(s),{def:Hy(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function TR(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Ze(t,e,n,r,s){t[e]=n,TR(t,e,r,s)}function JV(){return{}}function XV(t,e){var r,s;const n={type:"array"};return((s=(r=t.type)==null?void 0:r._def)==null?void 0:s.typeName)!==M.ZodAny&&(n.items=He(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Ze(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Ze(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Ze(n,"minItems",t.exactLength.value,t.exactLength.message,e),Ze(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function QV(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ze(n,"minimum",r.value,r.message,e):Ze(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ze(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(n,"maximum",r.value,r.message,e):Ze(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ze(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(n,"multipleOf",r.value,r.message,e);break}return n}function eH(){return{type:"boolean"}}function tH(t,e){return He(t.type._def,e)}const nH=(t,e)=>He(t.innerType._def,e);function AR(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>AR(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rH(t,e)}}const rH=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Ze(n,"minimum",r.value,r.message,e);break;case"max":Ze(n,"maximum",r.value,r.message,e);break}return n};function sH(t,e){return{...He(t.innerType._def,e),default:t.defaultValue()}}function iH(t,e,n){return e.effectStrategy==="input"?He(t.schema._def,e,n):{}}function aH(t){return{type:"string",enum:[...t.values]}}const oH=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function lH(t,e){const n=[He(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),He(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(oH(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else r=void 0;s.push(a)}}),s.length?{allOf:s,...r}:void 0}function cH(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let Lf;const Di={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Lf===void 0&&(Lf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Lf),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function ER(t,e){const n={type:"string"};function r(s){return e.patternStrategy==="escape"?uH(s):s}if(t.checks)for(const s of t.checks)switch(s.kind){case"min":Ze(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,e);break;case"max":Ze(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":fr(n,"email",s.message,e);break;case"format:idn-email":fr(n,"idn-email",s.message,e);break;case"pattern:zod":gr(n,Di.email,s.message,e);break}break;case"url":fr(n,"uri",s.message,e);break;case"uuid":fr(n,"uuid",s.message,e);break;case"regex":gr(n,s.regex,s.message,e);break;case"cuid":gr(n,Di.cuid,s.message,e);break;case"cuid2":gr(n,Di.cuid2,s.message,e);break;case"startsWith":gr(n,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":gr(n,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":fr(n,"date-time",s.message,e);break;case"date":fr(n,"date",s.message,e);break;case"time":fr(n,"time",s.message,e);break;case"duration":fr(n,"duration",s.message,e);break;case"length":Ze(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,e),Ze(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,e);break;case"includes":{gr(n,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&fr(n,"ipv4",s.message,e),s.version!=="v4"&&fr(n,"ipv6",s.message,e);break}case"emoji":gr(n,Di.emoji,s.message,e);break;case"ulid":{gr(n,Di.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{fr(n,"binary",s.message,e);break}case"contentEncoding:base64":{Ze(n,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{gr(n,Di.base64,s.message,e);break}}break}case"nanoid":gr(n,Di.nanoid,s.message,e)}return n}const uH=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),fr=(t,e,n,r)=>{var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ze(t,"format",e,n,r)},gr=(t,e,n,r)=>{var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Pk(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ze(t,"pattern",Pk(e,r),n,r)},Pk=(t,e)=>{var u;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},s=r.i?n.source.toLowerCase():n.source;let i="",a=!1,o=!1,l=!1;for(let d=0;d<s.length;d++){if(a){i+=s[d],a=!1;continue}if(r.i){if(o){if(s[d].match(/[a-z]/)){l?(i+=s[d],i+=`${s[d-2]}-${s[d]}`.toUpperCase(),l=!1):s[d+1]==="-"&&((u=s[d+2])!=null&&u.match(/[a-z]/))?(i+=s[d],l=!0):i+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){i+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(r.m){if(s[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&s[d]==="."){i+=o?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}i+=s[d],s[d]==="\\"?a=!0:o&&s[d]==="]"?o=!1:!o&&s[d]==="["&&(o=!0)}try{const d=new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i};function CR(t,e){var r,s,i,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===M.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((o,l)=>({...o,[l]:He(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:He(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===M.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const o=Object.entries(ER(t.keyType._def,e)).reduce((l,[u,d])=>u==="type"?l:{...l,[u]:d},{});return{...n,propertyNames:o}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===M.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function dH(t,e){if(e.mapStrategy==="record")return CR(t,e);const n=He(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=He(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function hH(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function mH(){return{not:{}}}function pH(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Kh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function fH(t,e){if(e.target==="openApi3")return jk(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Kh&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=Kh[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return jk(t,e)}const jk=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>He(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function gH(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Kh[t.innerType._def.typeName],nullable:!0}:{type:[Kh[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=He(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=He(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function yH(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",TR(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ze(n,"minimum",r.value,r.message,e):Ze(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ze(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(n,"maximum",r.value,r.message,e):Ze(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ze(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(n,"multipleOf",r.value,r.message,e);break}return n}function vH(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":He(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":He(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function xH(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[s,i])=>{var l;if(i===void 0||i._def===void 0)return r;const a=[...e.currentPath,"properties",s],o=He(i._def,{...e,currentPath:a,propertyPath:a});if(o===void 0)return r;if(e.openaiStrictMode&&i.isOptional()&&!i.isNullable()&&typeof((l=i._def)==null?void 0:l.defaultValue)>"u")throw new Error(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:i.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:vH(t,e)};return n.required.length||delete n.required,n}const wH=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return He(t.innerType._def,{...e,currentPath:e.currentPath});const n=He(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},bH=(t,e)=>{if(e.pipeStrategy==="input")return He(t.in._def,e);if(e.pipeStrategy==="output")return He(t.out._def,e);const n=He(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=He(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function _H(t,e){return He(t.type._def,e)}function SH(t,e){const r={type:"array",uniqueItems:!0,items:He(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Ze(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Ze(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function kH(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>He(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:He(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>He(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function TH(){return{not:{}}}function AH(){return{}}const EH=(t,e)=>He(t.innerType._def,e);function He(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const o=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(o!==qV)return o}if(r&&!n){const o=CH(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=IH(t,t.typeName,e,n);return i&&RH(t,e,i),s.jsonSchema=i,i}const CH=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const n=t.path.slice(e.basePath.length+1).join("_");return n!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[n]=t.def),{$ref:[...e.basePath,e.definitionPath,n].join("/")};case"relative":return{$ref:NH(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},NH=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},IH=(t,e,n,r)=>{switch(e){case M.ZodString:return ER(t,n);case M.ZodNumber:return yH(t,n);case M.ZodObject:return xH(t,n);case M.ZodBigInt:return QV(t,n);case M.ZodBoolean:return eH();case M.ZodDate:return AR(t,n);case M.ZodUndefined:return TH();case M.ZodNull:return pH(n);case M.ZodArray:return XV(t,n);case M.ZodUnion:case M.ZodDiscriminatedUnion:return fH(t,n);case M.ZodIntersection:return lH(t,n);case M.ZodTuple:return kH(t,n);case M.ZodRecord:return CR(t,n);case M.ZodLiteral:return cH(t,n);case M.ZodEnum:return aH(t);case M.ZodNativeEnum:return hH(t);case M.ZodNullable:return gH(t,n);case M.ZodOptional:return wH(t,n);case M.ZodMap:return dH(t,n);case M.ZodSet:return SH(t,n);case M.ZodLazy:return He(t.getter()._def,n);case M.ZodPromise:return _H(t,n);case M.ZodNaN:case M.ZodNever:return mH();case M.ZodEffects:return iH(t,n,r);case M.ZodAny:return JV();case M.ZodUnknown:return AH();case M.ZodDefault:return sH(t,n);case M.ZodBranded:return tH(t,n);case M.ZodReadonly:return EH(t,n);case M.ZodCatch:return nH(t,n);case M.ZodPipeline:return bH(t,n);case M.ZodFunction:case M.ZodVoid:case M.ZodSymbol:return;default:return(s=>{})()}},RH=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),OH=(t,e)=>{const n=ZV(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=He(t._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},i=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;i!==void 0&&(s.title=i);const a=(()=>{if(YV(n.definitions))return;const l={},u=new Set;for(let d=0;d<500;d++){const h=Object.entries(n.definitions).filter(([m])=>!u.has(m));if(h.length===0)break;for(const[m,p]of h)l[m]=He(Hy(p),{...n,currentPath:[...n.basePath,n.definitionPath,m]},!0)??{},u.add(m)}return l})(),o=r===void 0?a?{...s,[n.definitionPath]:a}:s:n.nameStrategy==="duplicate-ref"?{...s,...a||n.seenRefs.size?{[n.definitionPath]:{...a,...n.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...a,[r]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function PH(t){if(t.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${t.type?`'${t.type}'`:"undefined"}`);const e=structuredClone(t);return ps(e,[],e)}function Wy(t){if(typeof t=="boolean")return!1;if(t.type==="null")return!0;for(const e of t.oneOf??[])if(Wy(e))return!0;for(const e of t.anyOf??[])if(Wy(e))return!0;return!1}function ps(t,e,n){if(typeof t=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);if(!Gi(t))throw new TypeError(`Expected ${JSON.stringify(t)} to be an object; path=${e.join("/")}`);const r=t.$defs;if(Gi(r))for(const[m,p]of Object.entries(r))ps(p,[...e,"$defs",m],n);const s=t.definitions;if(Gi(s))for(const[m,p]of Object.entries(s))ps(p,[...e,"definitions",m],n);t.type==="object"&&!("additionalProperties"in t)&&(t.additionalProperties=!1);const a=t.required??[],o=t.properties;if(Gi(o)){for(const[m,p]of Object.entries(o))if(!Wy(p)&&!a.includes(m))throw new Error(`Zod field at \`${[...e,"properties",m].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);t.required=Object.keys(o),t.properties=Object.fromEntries(Object.entries(o).map(([m,p])=>[m,ps(p,[...e,"properties",m],n)]))}const l=t.items;Gi(l)&&(t.items=ps(l,[...e,"items"],n));const u=t.anyOf;Array.isArray(u)&&(t.anyOf=u.map((m,p)=>ps(m,[...e,"anyOf",String(p)],n)));const d=t.allOf;if(Array.isArray(d))if(d.length===1){const m=ps(d[0],[...e,"allOf","0"],n);Object.assign(t,m),delete t.allOf}else t.allOf=d.map((m,p)=>ps(m,[...e,"allOf",String(p)],n));t.default===null&&delete t.default;const h=t.$ref;if(h&&$H(t,1)){if(typeof h!="string")throw new TypeError(`Received non-string $ref - ${h}; path=${e.join("/")}`);const m=jH(n,h);if(typeof m=="boolean")throw new Error(`Expected \`$ref: ${h}\` to resolve to an object schema but got boolean`);if(!Gi(m))throw new Error(`Expected \`$ref: ${h}\` to resolve to an object but got ${JSON.stringify(m)}`);return Object.assign(t,{...m,...t}),delete t.$ref,ps(t,e,n)}return t}function jH(t,e){if(!e.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);const n=e.slice(2).split("/");let r=t;for(const s of n){if(!Gi(r))throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);const i=r[s];if(i===void 0)throw new Error(`Key ${s} not found while resolving ${e}`);r=i}return r}function Gi(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function $H(t,e){let n=0;for(const r in t)if(n++,n>e)return!0;return!1}function DH(t,e){return OH(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function LH(t){return PH(Lh(t,{target:"draft-7"}))}function MH(t){return"_zod"in t}function FH(t,e,n){return O5({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:MH(t)?LH(t):DH(t,{name:e})}},r=>t.parse(JSON.parse(r)))}const $k=["jsonSchema","functionCalling","jsonMode"];function UH(t,e){if(typeof e<"u"&&!$k.includes(e))throw new Error(`Invalid method: ${e}. Supported methods are: ${$k.join(", ")}`);const n=!t.startsWith("gpt-3")&&!t.startsWith("gpt-4-")&&t!=="gpt-4";if(n&&!e)return"jsonSchema";if(!n&&e==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${t}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return e??"functionCalling"}function zH(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function GH(t,e,n){if(At(t))return FH(t,e,n);if(ft(t))return zH({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:Lh(t,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>Bm(t,JSON.parse(r)));throw new Error("Unsupported schema response format")}function BH(t,e){if(e&&typeof e=="object"&&"images"in e&&Array.isArray(e.images)){const n=e.images.filter(r=>{var s;return typeof((s=r==null?void 0:r.image_url)==null?void 0:s.url)=="string"}).map(r=>({type:"image",url:r.image_url.url}));return[{type:"text",text:t},...n]}return t}const VH={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}};var HH=VH,WH={};De(WH,{BasePromptValue:()=>Zm,ChatPromptValue:()=>IR,ImagePromptValue:()=>qH,StringPromptValue:()=>NR});var Zm=class extends ko{},NR=class extends Zm{constructor(e){super({value:e});T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new us(this.value)]}},IR=class extends Zm{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return nx(this.messages)}toChatMessages(){return this.messages}},qH=class extends Zm{constructor(e){"imageUrl"in e||(e={imageUrl:e});super(e);T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"imageUrl");T(this,"value");this.imageUrl=e.imageUrl}static lc_name(){return"ImagePromptValue"}toString(){return this.imageUrl.url}toChatMessages(){return[new us({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},se="0123456789abcdef".split(""),KH=[-2147483648,8388608,32768,128],yr=[24,16,8,0],hd=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Pt=[];function Rr(t,e){e?(Pt[0]=Pt[16]=Pt[1]=Pt[2]=Pt[3]=Pt[4]=Pt[5]=Pt[6]=Pt[7]=Pt[8]=Pt[9]=Pt[10]=Pt[11]=Pt[12]=Pt[13]=Pt[14]=Pt[15]=0,this.blocks=Pt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Rr.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var r,s=0,i,a=t.length,o=this.blocks;s<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(i=this.start;s<a&&i<64;++s)o[i>>>2]|=t[s]<<yr[i++&3];else for(i=this.start;s<a&&i<64;++s)r=t.charCodeAt(s),r<128?o[i>>>2]|=r<<yr[i++&3]:r<2048?(o[i>>>2]|=(192|r>>>6)<<yr[i++&3],o[i>>>2]|=(128|r&63)<<yr[i++&3]):r<55296||r>=57344?(o[i>>>2]|=(224|r>>>12)<<yr[i++&3],o[i>>>2]|=(128|r>>>6&63)<<yr[i++&3],o[i>>>2]|=(128|r&63)<<yr[i++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++s)&1023),o[i>>>2]|=(240|r>>>18)<<yr[i++&3],o[i>>>2]|=(128|r>>>12&63)<<yr[i++&3],o[i>>>2]|=(128|r>>>6&63)<<yr[i++&3],o[i>>>2]|=(128|r&63)<<yr[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Rr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=KH[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Rr.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=this.blocks,u,d,h,m,p,y,w,x,g,f,v;for(u=16;u<64;++u)p=l[u-15],d=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=l[u-2],h=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,l[u]=l[u-16]+d+l[u-7]+h<<0;for(v=e&n,u=0;u<64;u+=4)this.first?(this.is224?(x=300032,p=l[0]-1413257819,o=p-150054599<<0,r=p+24177077<<0):(x=704751109,p=l[0]-210244248,o=p-1521486534<<0,r=p+143694565<<0),this.first=!1):(d=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),h=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),x=t&e,m=x^t&n^v,w=s&i^~s&a,p=o+h+w+hd[u]+l[u],y=d+m,o=r+p<<0,r=p+y<<0),d=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),h=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),g=r&t,m=g^r&e^x,w=a&o^~a&s,p=i+h+w+hd[u+1]+l[u+1],y=d+m,a=n+p<<0,n=p+y<<0,d=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),h=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),f=n&r,m=f^n&t^g,w=i&a^~i&o,p=s+h+w+hd[u+2]+l[u+2],y=d+m,i=e+p<<0,e=p+y<<0,d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),h=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),v=e&n,m=v^e&r^f,w=i&a^~i&o,p=s+h+w+hd[u+3]+l[u+3],y=d+m,s=t+p<<0,t=p+y<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0,this.h5=this.h5+i<<0,this.h6=this.h6+a<<0,this.h7=this.h7+o<<0};Rr.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=se[t>>>28&15]+se[t>>>24&15]+se[t>>>20&15]+se[t>>>16&15]+se[t>>>12&15]+se[t>>>8&15]+se[t>>>4&15]+se[t&15]+se[e>>>28&15]+se[e>>>24&15]+se[e>>>20&15]+se[e>>>16&15]+se[e>>>12&15]+se[e>>>8&15]+se[e>>>4&15]+se[e&15]+se[n>>>28&15]+se[n>>>24&15]+se[n>>>20&15]+se[n>>>16&15]+se[n>>>12&15]+se[n>>>8&15]+se[n>>>4&15]+se[n&15]+se[r>>>28&15]+se[r>>>24&15]+se[r>>>20&15]+se[r>>>16&15]+se[r>>>12&15]+se[r>>>8&15]+se[r>>>4&15]+se[r&15]+se[s>>>28&15]+se[s>>>24&15]+se[s>>>20&15]+se[s>>>16&15]+se[s>>>12&15]+se[s>>>8&15]+se[s>>>4&15]+se[s&15]+se[i>>>28&15]+se[i>>>24&15]+se[i>>>20&15]+se[i>>>16&15]+se[i>>>12&15]+se[i>>>8&15]+se[i>>>4&15]+se[i&15]+se[a>>>28&15]+se[a>>>24&15]+se[a>>>20&15]+se[a>>>16&15]+se[a>>>12&15]+se[a>>>8&15]+se[a>>>4&15]+se[a&15];return this.is224||(l+=se[o>>>28&15]+se[o>>>24&15]+se[o>>>20&15]+se[o>>>16&15]+se[o>>>12&15]+se[o>>>8&15]+se[o>>>4&15]+se[o&15]),l};Rr.prototype.toString=Rr.prototype.hex;Rr.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),l};Rr.prototype.array=Rr.prototype.digest;Rr.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const RR=(...t)=>new Rr(!1,!0).update(t.join("")).hex();var YH={};De(YH,{sha256:()=>RR});var ZH={};De(ZH,{BaseCache:()=>PR,InMemoryCache:()=>jR,defaultHashKeyEncoder:()=>OR,deserializeStoredGeneration:()=>JH,serializeGeneration:()=>XH});const OR=(...t)=>RR(t.join("_"));function JH(t){return t.message!==void 0?{text:t.text,message:rx(t.message)}:{text:t.text}}function XH(t){const e={text:t.text};return t.message!==void 0&&(e.message=t.message.toDict()),e}var PR=class{constructor(){T(this,"keyEncoder",OR)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const QH=new Map;var jR=class $R extends PR{constructor(n){super();T(this,"cache");this.cache=n??new Map}lookup(n,r){return Promise.resolve(this.cache.get(this.keyEncoder(n,r))??null)}async update(n,r,s){this.cache.set(this.keyEncoder(n,r),s)}static global(){return new $R(QH)}},Jm={};Jm.byteLength=nW;Jm.toByteArray=sW;Jm.fromByteArray=oW;var Wr=[],Xn=[],eW=typeof Uint8Array<"u"?Uint8Array:Array,Mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Oa=0,tW=Mf.length;Oa<tW;++Oa)Wr[Oa]=Mf[Oa],Xn[Mf.charCodeAt(Oa)]=Oa;Xn[45]=62;Xn[95]=63;function DR(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function nW(t){var e=DR(t),n=e[0],r=e[1];return(n+r)*3/4-r}function rW(t,e,n){return(e+n)*3/4-n}function sW(t){var e,n=DR(t),r=n[0],s=n[1],i=new eW(rW(t,r,s)),a=0,o=s>0?r-4:r,l;for(l=0;l<o;l+=4)e=Xn[t.charCodeAt(l)]<<18|Xn[t.charCodeAt(l+1)]<<12|Xn[t.charCodeAt(l+2)]<<6|Xn[t.charCodeAt(l+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=Xn[t.charCodeAt(l)]<<2|Xn[t.charCodeAt(l+1)]>>4,i[a++]=e&255),s===1&&(e=Xn[t.charCodeAt(l)]<<10|Xn[t.charCodeAt(l+1)]<<4|Xn[t.charCodeAt(l+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function iW(t){return Wr[t>>18&63]+Wr[t>>12&63]+Wr[t>>6&63]+Wr[t&63]}function aW(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(iW(r));return s.join("")}function oW(t){for(var e,n=t.length,r=n%3,s=[],i=16383,a=0,o=n-r;a<o;a+=i)s.push(aW(t,a,a+i>o?o:a+i));return r===1?(e=t[n-1],s.push(Wr[e>>2]+Wr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Wr[e>>10]+Wr[e>>4&63]+Wr[e<<2&63]+"=")),s.join("")}var lW=Object.defineProperty,cW=(t,e,n)=>e in t?lW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uW=(t,e,n)=>(cW(t,e+"",n),n);function dW(t,e){let n=Array.from({length:t.length},(r,s)=>({start:s,end:s+1}));for(;n.length>1;){let r=null;for(let s=0;s<n.length-1;s++){const i=t.slice(n[s].start,n[s+1].end),a=e.get(i.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,s])}if(r!=null){const s=r[1];n[s]={start:n[s].start,end:n[s+1].end},n.splice(s+1,1)}else break}return n}function hW(t,e){return t.length===1?[e.get(t.join(","))]:dW(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function mW(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var qy=class{constructor(t,e){T(this,"specialTokens");T(this,"inverseSpecialTokens");T(this,"patStr");T(this,"textEncoder",new TextEncoder);T(this,"textDecoder",new TextDecoder("utf-8"));T(this,"rankMap",new Map);T(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,s)=>{const[i,a,...o]=s.split(" "),l=Number.parseInt(a,10);return o.forEach((u,d)=>r[u]=l+d),r},{});for(const[r,s]of Object.entries(n)){const i=Jm.toByteArray(r);this.rankMap.set(i.join(","),s),this.textMap.set(s,i)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[s,i])=>(r[i]=this.textEncoder.encode(s),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),s=qy.specialTokenRegex(Object.keys(this.specialTokens)),i=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):n);if(o.size>0){const u=qy.specialTokenRegex([...o]),d=t.match(u);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let l=0;for(;;){let u=null,d=l;for(;s.lastIndex=d,u=s.exec(t),!(u==null||a.has(u[0]));)d=u.index+1;const h=(u==null?void 0:u.index)??t.length;for(const p of t.substring(l,h).matchAll(r)){const y=this.textEncoder.encode(p[0]),w=this.rankMap.get(y.join(","));if(w!=null){i.push(w);continue}i.push(...hW(y,this.rankMap))}if(u==null)break;let m=this.specialTokens[u[0]];i.push(m),l=u.index+u[0].length}return i}decode(t){const e=[];let n=0;for(let i=0;i<t.length;++i){const a=t[i],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let s=0;for(const i of e)r.set(i,s),s+=i.length;return this.textDecoder.decode(r)}},LR=qy;uW(LR,"specialTokenRegex",t=>new RegExp(t.map(e=>mW(e)).join("|"),"g"));function pW(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var fW={};De(fW,{encodingForModel:()=>Dx,getEncoding:()=>MR});const md={},gW=new iu({});async function MR(t){return t in md||(md[t]=gW.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new LR(e)).catch(e=>{throw delete md[t],e})),await md[t]}async function Dx(t){return MR(pW(t))}var yW={};De(yW,{BaseLangChain:()=>Mx,BaseLanguageModel:()=>Fx,calculateMaxTokens:()=>xW,getEmbeddingContextSize:()=>vW,getModelContextSize:()=>FR,getModelNameForTiktoken:()=>Xm,isOpenAITool:()=>Lx});const Xm=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t,vW=t=>{switch(t){case"text-embedding-ada-002":return 8191;default:return 2046}},FR=t=>{switch(Xm(t)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function Lx(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const xW=async({prompt:t,modelName:e})=>{let n;try{n=(await Dx(Xm(e))).encode(t).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(t.length/4)}return FR(e)-n},wW=()=>!1;var Mx=class extends xt{constructor(e){super(e);T(this,"verbose");T(this,"callbacks");T(this,"tags");T(this,"metadata");this.verbose=e.verbose??wW(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},Fx=class extends Mx{constructor({callbacks:e,callbackManager:n,...r}){const{cache:s,...i}=r;super({callbacks:e??n,...i});T(this,"caller");T(this,"cache");T(this,"_encoding");typeof s=="object"?this.cache=s:s?this.cache=jR.global():this.cache=void 0,this.caller=new iu(r??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(s=>typeof s=="string"?s:s.type==="text"&&"text"in s?s.text:"").join("");let r=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await Dx("modelName"in this?Xm(this.modelName):"gpt2")}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}if(this._encoding)try{r=this._encoding.encode(n).length}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new NR(e):Array.isArray(e)?new IR(e.map(Xl)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,o])=>o!==void 0).map(([a,o])=>`${a}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}},Po=class extends xt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const r=Be(n);return this.func&&await this.func(e,r),this._callWithConfig(s=>Promise.resolve(s),e,r)}async*transform(e,n){const r=Be(n);let s,i=!0;for await(const a of this._transformStreamWithConfig(e,o=>o,r))if(yield a,i)if(s===void 0)s=a;else try{s=Ti(s,a)}catch{s=void 0,i=!1}this.func&&s!==void 0&&await this.func(s,r)}static assign(e){return new Ix(new Ko({steps:e}))}};const bW=t=>t();function Ff(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}var _W={};De(_W,{BaseChatModel:()=>Ux,SimpleChatModel:()=>SW});function Uf(t){const e=[];for(const n of t){let r=n;if(Array.isArray(n.content))for(let s=0;s<n.content.length;s++){const i=n.content[s];(Wv(i)||qv(i))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,s),xN(i),...n.content.slice(s+1)]}))}e.push(r)}return e}var Ux=class Bi extends Fx{constructor(n){super(n);T(this,"lc_namespace",["langchain","chat_models",this._llmType()]);T(this,"disableStreaming",!1);T(this,"outputVersion");this.outputVersion=bW(()=>{const r=n.outputVersion??ns("LC_OUTPUT_VERSION");return r&&["v0","v1"].includes(r)?r:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[r,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=r.signal,[r,s]}async invoke(n,r){const s=Bi._convertInputToPromptValue(n);return(await this.generatePrompt([s],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,r,s){throw new Error("Not implemented.")}async*_streamIterator(n,r){var s;if(this._streamResponseChunks===Bi.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,r);else{const a=Bi._convertInputToPromptValue(n).toChatMessages(),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(r),u={...o.metadata,...this.getLsParams(l)},d=await Cn.configure(o.callbacks,this.callbacks,o.tags,this.tags,u,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},m=l.outputVersion??this.outputVersion,p=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[Uf(a)],o.runId,void 0,h,void 0,void 0,o.runName));let y,w;try{for await(const x of this._streamResponseChunks(a,l,p==null?void 0:p[0])){if(x.message.id==null){const g=(s=p==null?void 0:p.at(0))==null?void 0:s.runId;g!=null&&x.message._updateId(`run-${g}`)}x.message.response_metadata={...x.generationInfo,...x.message.response_metadata},m==="v1"?yield Ff(x.message):yield x.message,y?y=y.concat(x):y=x,xy(x.message)&&x.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}}catch(x){throw await Promise.all((p??[]).map(g=>g==null?void 0:g.handleLLMError(x))),x}await Promise.all((p??[]).map(x=>x==null?void 0:x.handleLLMEnd({generations:[[y]],llmOutput:w})))}}getLsParams(n){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:r}}async _generateUncached(n,r,s,i){var p,y;const a=n.map(w=>w.map(Xl));let o;if(i!==void 0&&i.length===a.length)o=i;else{const w={...s.metadata,...this.getLsParams(r)},x=await Cn.configure(s.callbacks,this.callbacks,s.tags,this.tags,w,this.metadata,{verbose:this.verbose}),g={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1};o=await(x==null?void 0:x.handleChatModelStart(this.toJSON(),a.map(Uf),s.runId,void 0,g,void 0,void 0,s.runName))}const l=r.outputVersion??this.outputVersion,u=[],d=[];if(!!(o!=null&&o[0].handlers.find(ax))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==Bi.prototype._streamResponseChunks)try{const w=await this._streamResponseChunks(a[0],r,o==null?void 0:o[0]);let x,g;for await(const f of w){if(f.message.id==null){const v=(p=o==null?void 0:o.at(0))==null?void 0:p.runId;v!=null&&f.message._updateId(`run-${v}`)}x===void 0?x=f:x=Ti(x,f),xy(f.message)&&f.message.usage_metadata!==void 0&&(g={tokenUsage:{promptTokens:f.message.usage_metadata.input_tokens,completionTokens:f.message.usage_metadata.output_tokens,totalTokens:f.message.usage_metadata.total_tokens}})}if(x===void 0)throw new Error("Received empty response from chat model call.");u.push([x]),await(o==null?void 0:o[0].handleLLMEnd({generations:u,llmOutput:g}))}catch(w){throw await(o==null?void 0:o[0].handleLLMError(w)),w}else{const w=await Promise.allSettled(a.map(async(x,g)=>{const f=await this._generate(x,{...r,promptIndex:g},o==null?void 0:o[g]);if(l==="v1")for(const v of f.generations)v.message=Ff(v.message);return f}));await Promise.all(w.map(async(x,g)=>{var f,v,b;if(x.status==="fulfilled"){const _=x.value;for(const E of _.generations){if(E.message.id==null){const C=(f=o==null?void 0:o.at(0))==null?void 0:f.runId;C!=null&&E.message._updateId(`run-${C}`)}E.message.response_metadata={...E.generationInfo,...E.message.response_metadata}}return _.generations.length===1&&(_.generations[0].message.response_metadata={..._.llmOutput,..._.generations[0].message.response_metadata}),u[g]=_.generations,d[g]=_.llmOutput,(v=o==null?void 0:o[g])==null?void 0:v.handleLLMEnd({generations:[_.generations],llmOutput:_.llmOutput})}else return await((b=o==null?void 0:o[g])==null?void 0:b.handleLLMError(x.reason)),Promise.reject(x.reason)}))}const m={generations:u,llmOutput:d.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...d):void 0};return Object.defineProperty(m,$c,{value:o?{runIds:o==null?void 0:o.map(w=>w.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:n,cache:r,llmStringKey:s,parsedOptions:i,handledOptions:a}){const o=n.map(f=>f.map(Xl)),l={...a.metadata,...this.getLsParams(i)},u=await Cn.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),d={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},h=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),o.map(Uf),a.runId,void 0,d,void 0,void 0,a.runName)),m=[],y=(await Promise.allSettled(o.map(async(f,v)=>{const b=Bi._convertInputToPromptValue(f).toString(),_=await r.lookup(b,s);return _==null&&m.push(v),_}))).map((f,v)=>({result:f,runManager:h==null?void 0:h[v]})).filter(({result:f})=>f.status==="fulfilled"&&f.value!=null||f.status==="rejected"),w=i.outputVersion??this.outputVersion,x=[];await Promise.all(y.map(async({result:f,runManager:v},b)=>{if(f.status==="fulfilled"){const _=f.value;return x[b]=_.map(E=>("message"in E&&oi(E.message)&&Im(E.message)&&(E.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},w==="v1"&&(E.message=Ff(E.message))),E.generationInfo={...E.generationInfo,tokenUsage:{}},E)),_.length&&await(v==null?void 0:v.handleLLMNewToken(_[0].text)),v==null?void 0:v.handleLLMEnd({generations:[_]},void 0,void 0,void 0,{cached:!0})}else return await(v==null?void 0:v.handleLLMError(f.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(f.reason)}));const g={generations:x,missingPromptIndices:m,startedRunManagers:h};return Object.defineProperty(g,$c,{value:h?{runIds:h==null?void 0:h.map(f=>f.runId)}:void 0,configurable:!0}),g}async generate(n,r,s){let i;Array.isArray(r)?i={stop:r}:i=r;const a=n.map(w=>w.map(Xl)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??s,!this.cache)return this._generateUncached(a,l,o);const{cache:u}=this,d=this._getSerializedCacheKeyParametersForCall(l),{generations:h,missingPromptIndices:m,startedRunManagers:p}=await this._generateCached({messages:a,cache:u,llmStringKey:d,parsedOptions:l,handledOptions:o});let y={};if(m.length>0){const w=await this._generateUncached(m.map(x=>a[x]),l,o,p!==void 0?m.map(x=>p==null?void 0:p[x]):void 0);await Promise.all(w.generations.map(async(x,g)=>{const f=m[g];h[f]=x;const v=Bi._convertInputToPromptValue(a[f]).toString();return u.update(v,d,x)})),y=w.llmOutput??{}}return{generations:h,llmOutput:y}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,r,s){const i=n.map(a=>a.toChatMessages());return this.generate(i,r,s)}withStructuredOutput(n,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r!=null&&r.strict)throw new Error('"strict" mode is not supported for this model by default.');const s=n,i=r==null?void 0:r.name,a=Hm(s)??"A function available to call.",o=r==null?void 0:r.method,l=r==null?void 0:r.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=i??"extract",d;Yr(s)?d=[{type:"function",function:{name:u,description:a,parameters:Zr(s)}}]:("name"in s&&(u=s.name),d=[{type:"function",function:{name:u,description:a,parameters:s}}]);const h=this.bindTools(d),m=zs.from(x=>{if(!cs.isInstance(x))throw new Error("Input is not an AIMessageChunk.");if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");const g=x.tool_calls.find(f=>f.name===u);if(!g)throw new Error(`No tool call found with name ${u}.`);return g.args});if(!l)return h.pipe(m).withConfig({runName:"StructuredOutput"});const p=Po.assign({parsed:(x,g)=>m.invoke(x.raw,g)}),y=Po.assign({parsed:()=>null}),w=p.withFallbacks({fallbacks:[y]});return qo.from([{raw:h},w]).withConfig({runName:"StructuredOutputRunnable"})}},SW=class extends Ux{async _generate(t,e,n){const r=await this._call(t,e,n),s=new Nn(r);if(typeof s.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:s.content,message:s}]}}},kW=class extends xt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"runnables");this.runnables=e.runnables}static lc_name(){return"RouterRunnable"}async invoke(e,n){const{key:r,input:s}=e,i=this.runnables[r];if(i===void 0)throw new Error(`No runnable associated with key "${r}".`);return i.invoke(s,Be(n))}async batch(e,n,r){var m;const s=e.map(p=>p.key),i=e.map(p=>p.input);if(s.find(p=>this.runnables[p]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const o=s.map(p=>this.runnables[p]),l=this._getOptionsList(n??{},e.length),u=((m=l[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),d=u&&u>0?u:e.length,h=[];for(let p=0;p<i.length;p+=d){const y=i.slice(p,p+d).map((x,g)=>o[g].invoke(x,l[g])),w=await Promise.all(y);h.push(w)}return h.flat()}async stream(e,n){const{key:r,input:s}=e,i=this.runnables[r];if(i===void 0)throw new Error(`No runnable associated with key "${r}".`);return i.stream(s,n)}},TW=class extends xt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"default");T(this,"branches");this.branches=e.branches,this.default=e.default}static lc_name(){return"RunnableBranch"}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");const r=e.slice(0,-1).map(([i,a])=>[Tr(i),Tr(a)]),s=Tr(e[e.length-1]);return new this({branches:r,default:s})}async _invoke(e,n,r){let s;for(let i=0;i<this.branches.length;i+=1){const[a,o]=this.branches[i];if(await a.invoke(e,tt(n,{callbacks:r==null?void 0:r.getChild(`condition:${i+1}`)}))){s=await o.invoke(e,tt(n,{callbacks:r==null?void 0:r.getChild(`branch:${i+1}`)}));break}}return s||(s=await this.default.invoke(e,tt(n,{callbacks:r==null?void 0:r.getChild("branch:default")}))),s}async invoke(e,n={}){return this._callWithConfig(this._invoke,e,n)}async*_streamIterator(e,n){const r=await zn(n),s=await(r==null?void 0:r.handleChainStart(this.toJSON(),Rt(e,"input"),n==null?void 0:n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));let i,a=!0,o;try{for(let l=0;l<this.branches.length;l+=1){const[u,d]=this.branches[l];if(await u.invoke(e,tt(n,{callbacks:s==null?void 0:s.getChild(`condition:${l+1}`)}))){o=await d.stream(e,tt(n,{callbacks:s==null?void 0:s.getChild(`branch:${l+1}`)}));for await(const m of o)if(yield m,a)if(i===void 0)i=m;else try{i=Ti(i,m)}catch{i=void 0,a=!1}break}}if(o===void 0){o=await this.default.stream(e,tt(n,{callbacks:s==null?void 0:s.getChild("branch:default")}));for await(const l of o)if(yield l,a)if(i===void 0)i=l;else try{i=Ti(i,l)}catch{i=void 0,a=!1}}}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}await(s==null?void 0:s.handleChainEnd(i??{}))}},AW=class extends Oo{constructor(e){let n=zs.from((a,o)=>this._enterHistory(a,o??{})).withConfig({runName:"loadHistory"});const r=e.historyMessagesKey??e.inputMessagesKey;r&&(n=Po.assign({[r]:n}).withConfig({runName:"insertHistory"}));const s=n.pipe(e.runnable.withListeners({onEnd:(a,o)=>this._exitHistory(a,o??{})})).withConfig({runName:"RunnableWithMessageHistory"}),i=e.config??{};super({...e,config:i,bound:s});T(this,"runnable");T(this,"inputMessagesKey");T(this,"outputMessagesKey");T(this,"historyMessagesKey");T(this,"getMessageHistory");this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let n;if(typeof e=="object"&&!Array.isArray(e)&&!oi(e)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="input",Array.isArray(e[r])&&Array.isArray(e[r][0])?n=e[r][0]:n=e[r]}else n=e;if(typeof n=="string")return[new us(n)];if(Array.isArray(n))return n;if(oi(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(n,null,2)}`)}_getOutputMessages(e){let n;if(!Array.isArray(e)&&!oi(e)&&typeof e!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="output",e.generations!==void 0?n=e.generations[0][0].message:n=e[r]}else n=e;if(typeof n=="string")return[new Nn(n)];if(Array.isArray(n))return n;if(oi(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(n,null,2)}`)}async _enterHistory(e,n){var i;const s=await((i=n==null?void 0:n.configurable)==null?void 0:i.messageHistory).getMessages();return this.historyMessagesKey===void 0?s.concat(this._getInputMessages(e)):s}async _exitHistory(e,n){var l;const r=(l=n.configurable)==null?void 0:l.messageHistory;let s;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?s=e.inputs[0]:s=e.inputs;let i=this._getInputMessages(s);if(this.historyMessagesKey===void 0){const u=await r.getMessages();i=i.slice(u.length)}const a=e.outputs;if(!a)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const o=this._getOutputMessages(a);await r.addMessages([...i,...o])}async _mergeConfig(...e){const n=await super._mergeConfig(...e);if(!n.configurable||!n.configurable.sessionId){const s={[this.inputMessagesKey??"input"]:"foo"},i={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(s)}, ${JSON.stringify(i)})`)}const{sessionId:r}=n.configurable;return n.configurable.messageHistory=await this.getMessageHistory(r),n}},EW={};De(EW,{RouterRunnable:()=>kW,Runnable:()=>xt,RunnableAssign:()=>Ix,RunnableBinding:()=>Oo,RunnableBranch:()=>TW,RunnableEach:()=>vV,RunnableLambda:()=>zs,RunnableMap:()=>Ko,RunnableParallel:()=>bV,RunnablePassthrough:()=>Po,RunnablePick:()=>yR,RunnableRetry:()=>Nx,RunnableSequence:()=>qo,RunnableToolLike:()=>Vy,RunnableWithFallbacks:()=>gR,RunnableWithMessageHistory:()=>AW,_coerceToRunnable:()=>Tr,ensureConfig:()=>Be,getCallbackManagerForConfig:()=>zn,mergeConfigs:()=>jh,patchConfig:()=>tt,pickRunnableConfigKeys:()=>js,raceWithSignal:()=>$s});var UR=class extends xt{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,r)=>this.parseResult([{text:n}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,r)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"})}},Qm=class extends UR{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},Ts=class extends Error{constructor(e,n,r,s=!1){super(e);T(this,"llmOutput");T(this,"observation");T(this,"sendToLLM");if(this.llmOutput=n,this.observation=r,this.sendToLLM=s,s&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");FN(this,"OUTPUT_PARSING_FAILURE")}},lu=class extends Qm{async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},ep=class extends lu{constructor(e){super(e);T(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let i;if(Xv(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");i=new Eo({message:s,text:s.content})}else if(oi(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");i=new Eo({message:Rh(s),text:s.content})}else i=new Ao({text:s});r===void 0?r=i:r=r.concat(i);const a=await this.parsePartialResult([r]);a!=null&&!aa(a,n)&&(this.diff?yield this._diff(n,a):yield a,n=a)}}getFormatInstructions(){return""}},CW={};De(CW,{applyPatch:()=>To,compare:()=>bx});var Ky=class extends ep{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers"]);T(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?bx(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return vy(e[0].text)}async parse(e){return vy(e,JSON.parse)}getFormatInstructions(){return""}},NW=class extends lu{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","bytes"]);T(this,"lc_serializable",!0);T(this,"textEncoder",new TextEncoder)}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},cu=class extends lu{constructor(){super(...arguments);T(this,"re")}async*_transform(e){let n="";for await(const r of e)if(typeof r=="string"?n+=r:n+=r.content,this.re){const s=[...n.matchAll(this.re)];if(s.length>1){let i=0;for(const a of s.slice(0,-1))yield[a[1]],i+=(a.index??0)+a[0].length;n=n.slice(i)}}else{const s=await this.parse(n);if(s.length>1){for(const i of s.slice(0,-1))yield[i];n=s[s.length-1]}}for(const r of await this.parse(n))yield[r]}},IW=class extends cu{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0)}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(n=>n.trim())}catch{throw new Ts(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},RW=class extends cu{constructor({length:e,separator:n}){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"length");T(this,"separator");this.length=e,this.separator=n||","}async parse(e){try{const n=e.trim().split(this.separator).map(r=>r.trim());if(this.length!==void 0&&n.length!==this.length)throw new Ts(`Incorrect number of items. Expected ${this.length}, got ${n.length}.`);return n}catch(n){throw Object.getPrototypeOf(n)===Ts.prototype?n:new Ts(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},OW=class extends cu{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0);T(this,"re",/\d+\.\s([^\n]+)/g)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},PW=class extends cu{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0);T(this,"re",/^\s*[-*]\s([^\n]+)$/gm)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},zR=class extends lu{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","string"]);T(this,"lc_serializable",!0)}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((n,r)=>n+this._messageContentToString(r),"")}},Yh=class extends Qm{constructor(e){super(e);T(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=e}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Km(Object.fromEntries(Object.entries(e).map(([r,s])=>[r,qm().describe(s)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Zr(this.schema))}
\`\`\`
`}async parse(e){var n,r;try{const s=e.trim(),a=(((n=s.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:n[1])||((r=s.match(/```json\s*([\s\S]*?)```/))==null?void 0:r[1])||s).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,l)=>`"${l.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Vm(this.schema,JSON.parse(a))}catch(s){throw new Ts(`Failed to parse. Text: "${e}". Error: ${s}`,e)}}},GR=class extends Yh{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(t){const e=(t==null?void 0:t.interpolationDepth)??1;if(e<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Zr(this.schema)).replaceAll("{","{".repeat(e)).replaceAll("}","}".repeat(e))}
\`\`\``}_schemaToInstruction(t,e=2){const n=t;if("type"in n){let r=!1,s;if(Array.isArray(n.type)){const o=n.type.findIndex(l=>l==="null");o!==-1&&(r=!0,n.type.splice(o,1)),s=n.type.join(" | ")}else s=n.type;if(n.type==="object"&&n.properties){const o=n.description?` // ${n.description}`:"";return`{
${Object.entries(n.properties).map(([u,d])=>{var m;const h=(m=n.required)!=null&&m.includes(u)?"":" (optional)";return`${" ".repeat(e)}"${u}": ${this._schemaToInstruction(d,e+2)}${h}`}).join(`
`)}
${" ".repeat(e-2)}}${o}`}if(n.type==="array"&&n.items){const o=n.description?` // ${n.description}`:"";return`array[
${" ".repeat(e)}${this._schemaToInstruction(n.items,e+2)}
${" ".repeat(e-2)}] ${o}`}const i=r?" (nullable)":"",a=n.description?` // ${n.description}`:"";return`${s}${a}${i}`}if("anyOf"in n)return n.anyOf.map(r=>this._schemaToInstruction(r,e)).join(`
${" ".repeat(e-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){const e=Km(Object.fromEntries(Object.entries(t).map(([n,r])=>[n,qm().describe(r)])));return new this(e)}},jW=class extends Qm{constructor({inputSchema:e}){super(...arguments);T(this,"structuredInputParser");this.structuredInputParser=new GR(e)}async parse(e){let n;try{n=await this.structuredInputParser.parse(e)}catch(r){throw new Ts(`Failed to parse. Text: "${e}". Error: ${r}`,e)}return this.outputProcessor(n)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};const $W=function(){const t={};t.parser=function(A,k){return new n(A,k)},t.SAXParser=n,t.SAXStream=u,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(A,k){if(!(this instanceof n))return new n(A,k);var U=this;s(U),U.q=U.c="",U.bufferCheckPosition=t.MAX_BUFFER_LENGTH,U.opt=k||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!A,U.noscript=!!(A||U.opt.noscript),U.state=S.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=U.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create(y)),U.trackPosition=U.opt.position!==!1,U.trackPosition&&(U.position=U.line=U.column=0),D(U,"onready")}Object.create||(Object.create=function(A){function k(){}k.prototype=A;var U=new k;return U}),Object.keys||(Object.keys=function(A){var k=[];for(var U in A)A.hasOwnProperty(U)&&k.push(U);return k});function r(A){for(var k=Math.max(t.MAX_BUFFER_LENGTH,10),U=0,O=0,Ce=e.length;O<Ce;O++){var We=A[e[O]].length;if(We>k)switch(e[O]){case"textNode":Y(A);break;case"cdata":F(A,"oncdata",A.cdata),A.cdata="";break;case"script":F(A,"onscript",A.script),A.script="";break;default:H(A,"Max buffer length exceeded: "+e[O])}U=Math.max(U,We)}var Ue=t.MAX_BUFFER_LENGTH-U;A.bufferCheckPosition=Ue+A.position}function s(A){for(var k=0,U=e.length;k<U;k++)A[e[k]]=""}function i(A){Y(A),A.cdata!==""&&(F(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(F(A,"onscript",A.script),A.script="")}n.prototype={end:function(){B(this)},write:ke,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){i(this)}};var a=ReadableStream;a||(a=function(){});var o=t.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function l(A,k){return new u(A,k)}function u(A,k){if(!(this instanceof u))return new u(A,k);a.apply(this),this._parser=new n(A,k),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function(O){U.emit("error",O),U._parser.error=null},this._decoder=null,o.forEach(function(O){Object.defineProperty(U,"on"+O,{get:function(){return U._parser["on"+O]},set:function(Ce){if(!Ce)return U.removeAllListeners(O),U._parser["on"+O]=Ce,Ce;U.on(O,Ce)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(a.prototype,{constructor:{value:u}}),u.prototype.write=function(A){return this._parser.write(A.toString()),this.emit("data",A),!0},u.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},u.prototype.on=function(A,k){var U=this;return!U._parser["on"+A]&&o.indexOf(A)!==-1&&(U._parser["on"+A]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,A),U.emit.apply(U,O)}),a.prototype.on.call(U,A,k)};var d="[CDATA[",h="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:p},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(A){return A===" "||A===`
`||A==="\r"||A==="	"}function b(A){return A==='"'||A==="'"}function _(A){return A===">"||v(A)}function E(A,k){return A.test(k)}function C(A,k){return!E(A,k)}var S=0;t.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(A){var k=t.ENTITIES[A],U=typeof k=="number"?String.fromCharCode(k):k;t.ENTITIES[A]=U});for(var N in t.STATE)t.STATE[t.STATE[N]]=N;S=t.STATE;function D(A,k,U){A[k]&&A[k](U)}function F(A,k,U){A.textNode&&Y(A),D(A,k,U)}function Y(A){A.textNode=de(A.opt,A.textNode),A.textNode&&D(A,"ontext",A.textNode),A.textNode=""}function de(A,k){return A.trim&&(k=k.trim()),A.normalize&&(k=k.replace(/\s+/g," ")),k}function H(A,k){return Y(A),A.trackPosition&&(k+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),k=new Error(k),A.error=k,D(A,"onerror",k),A}function B(A){return A.sawRoot&&!A.closedRoot&&q(A,"Unclosed root tag"),A.state!==S.BEGIN&&A.state!==S.BEGIN_WHITESPACE&&A.state!==S.TEXT&&H(A,"Unexpected end"),Y(A),A.c="",A.closed=!0,D(A,"onend"),n.call(A,A.strict,A.opt),A}function q(A,k){if(typeof A!="object"||!(A instanceof n))throw new Error("bad call to strictFail");A.strict&&H(A,k)}function z(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var k=A.tags[A.tags.length-1]||A,U=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(U.ns=k.ns),A.attribList.length=0,F(A,"onopentagstart",U)}function P(A,k){var U=A.indexOf(":"),O=U<0?["",A]:A.split(":"),Ce=O[0],We=O[1];return k&&A==="xmlns"&&(Ce="xmlns",We=""),{prefix:Ce,local:We}}function L(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var k=P(A.attribName,!0),U=k.prefix,O=k.local;if(U==="xmlns")if(O==="xml"&&A.attribValue!==m)q(A,"xml: prefix must be bound to "+m+`
Actual: `+A.attribValue);else if(O==="xmlns"&&A.attribValue!==p)q(A,"xmlns: prefix must be bound to "+p+`
Actual: `+A.attribValue);else{var Ce=A.tag,We=A.tags[A.tags.length-1]||A;Ce.ns===We.ns&&(Ce.ns=Object.create(We.ns)),Ce.ns[O]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,F(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function G(A,k){if(A.opt.xmlns){var U=A.tag,O=P(A.tagName);U.prefix=O.prefix,U.local=O.local,U.uri=U.ns[O.prefix]||"",U.prefix&&!U.uri&&(q(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),U.uri=O.prefix);var Ce=A.tags[A.tags.length-1]||A;U.ns&&Ce.ns!==U.ns&&Object.keys(U.ns).forEach(function(nn){F(A,"onopennamespace",{prefix:nn,uri:U.ns[nn]})});for(var We=0,Ue=A.attribList.length;We<Ue;We++){var at=A.attribList[We],gt=at[0],In=at[1],Qe=P(gt,!0),tn=Qe.prefix,jr=Qe.local,qt=tn===""?"":U.ns[tn]||"",Z={name:gt,value:In,prefix:tn,local:jr,uri:qt};tn&&tn!=="xmlns"&&!qt&&(q(A,"Unbound namespace prefix: "+JSON.stringify(tn)),Z.uri=tn),A.tag.attributes[gt]=Z,F(A,"onattribute",Z)}A.attribList.length=0}A.tag.isSelfClosing=!!k,A.sawRoot=!0,A.tags.push(A.tag),F(A,"onopentag",A.tag),k||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=S.SCRIPT:A.state=S.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function X(A){if(!A.tagName){q(A,"Weird empty close tag."),A.textNode+="</>",A.state=S.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=S.SCRIPT;return}F(A,"onscript",A.script),A.script=""}var k=A.tags.length,U=A.tagName;A.strict||(U=U[A.looseCase]());for(var O=U;k--;){var Ce=A.tags[k];if(Ce.name!==O)q(A,"Unexpected close tag");else break}if(k<0){q(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=S.TEXT;return}A.tagName=U;for(var We=A.tags.length;We-- >k;){var Ue=A.tag=A.tags.pop();A.tagName=A.tag.name,F(A,"onclosetag",A.tagName);var at={};for(var gt in Ue.ns)at[gt]=Ue.ns[gt];var In=A.tags[A.tags.length-1]||A;A.opt.xmlns&&Ue.ns!==In.ns&&Object.keys(Ue.ns).forEach(function(Qe){var tn=Ue.ns[Qe];F(A,"onclosenamespace",{prefix:Qe,uri:tn})})}k===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=S.TEXT}function ie(A){var k=A.entity,U=k.toLowerCase(),O,Ce="";return A.ENTITIES[k]?A.ENTITIES[k]:A.ENTITIES[U]?A.ENTITIES[U]:(k=U,k.charAt(0)==="#"&&(k.charAt(1)==="x"?(k=k.slice(2),O=parseInt(k,16),Ce=O.toString(16)):(k=k.slice(1),O=parseInt(k,10),Ce=O.toString(10))),k=k.replace(/^0+/,""),isNaN(O)||Ce.toLowerCase()!==k?(q(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(O))}function Oe(A,k){k==="<"?(A.state=S.OPEN_WAKA,A.startTagPosition=A.position):v(k)||(q(A,"Non-whitespace before first tag."),A.textNode=k,A.state=S.TEXT)}function Fe(A,k){var U="";return k<A.length&&(U=A.charAt(k)),U}function ke(A){var k=this;if(this.error)throw this.error;if(k.closed)return H(k,"Cannot write after close. Assign an onready handler.");if(A===null)return B(k);typeof A=="object"&&(A=A.toString());for(var U=0,O="";O=Fe(A,U++),k.c=O,!!O;)switch(k.trackPosition&&(k.position++,O===`
`?(k.line++,k.column=0):k.column++),k.state){case S.BEGIN:if(k.state=S.BEGIN_WHITESPACE,O==="\uFEFF")continue;Oe(k,O);continue;case S.BEGIN_WHITESPACE:Oe(k,O);continue;case S.TEXT:if(k.sawRoot&&!k.closedRoot){for(var Ce=U-1;O&&O!=="<"&&O!=="&";)O=Fe(A,U++),O&&k.trackPosition&&(k.position++,O===`
`?(k.line++,k.column=0):k.column++);k.textNode+=A.substring(Ce,U-1)}O==="<"&&!(k.sawRoot&&k.closedRoot&&!k.strict)?(k.state=S.OPEN_WAKA,k.startTagPosition=k.position):(!v(O)&&(!k.sawRoot||k.closedRoot)&&q(k,"Text data outside of root node."),O==="&"?k.state=S.TEXT_ENTITY:k.textNode+=O);continue;case S.SCRIPT:O==="<"?k.state=S.SCRIPT_ENDING:k.script+=O;continue;case S.SCRIPT_ENDING:O==="/"?k.state=S.CLOSE_TAG:(k.script+="<"+O,k.state=S.SCRIPT);continue;case S.OPEN_WAKA:if(O==="!")k.state=S.SGML_DECL,k.sgmlDecl="";else if(!v(O))if(E(w,O))k.state=S.OPEN_TAG,k.tagName=O;else if(O==="/")k.state=S.CLOSE_TAG,k.tagName="";else if(O==="?")k.state=S.PROC_INST,k.procInstName=k.procInstBody="";else{if(q(k,"Unencoded <"),k.startTagPosition+1<k.position){var We=k.position-k.startTagPosition;O=new Array(We).join(" ")+O}k.textNode+="<"+O,k.state=S.TEXT}continue;case S.SGML_DECL:(k.sgmlDecl+O).toUpperCase()===d?(F(k,"onopencdata"),k.state=S.CDATA,k.sgmlDecl="",k.cdata=""):k.sgmlDecl+O==="--"?(k.state=S.COMMENT,k.comment="",k.sgmlDecl=""):(k.sgmlDecl+O).toUpperCase()===h?(k.state=S.DOCTYPE,(k.doctype||k.sawRoot)&&q(k,"Inappropriately located doctype declaration"),k.doctype="",k.sgmlDecl=""):O===">"?(F(k,"onsgmldeclaration",k.sgmlDecl),k.sgmlDecl="",k.state=S.TEXT):(b(O)&&(k.state=S.SGML_DECL_QUOTED),k.sgmlDecl+=O);continue;case S.SGML_DECL_QUOTED:O===k.q&&(k.state=S.SGML_DECL,k.q=""),k.sgmlDecl+=O;continue;case S.DOCTYPE:O===">"?(k.state=S.TEXT,F(k,"ondoctype",k.doctype),k.doctype=!0):(k.doctype+=O,O==="["?k.state=S.DOCTYPE_DTD:b(O)&&(k.state=S.DOCTYPE_QUOTED,k.q=O));continue;case S.DOCTYPE_QUOTED:k.doctype+=O,O===k.q&&(k.q="",k.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:k.doctype+=O,O==="]"?k.state=S.DOCTYPE:b(O)&&(k.state=S.DOCTYPE_DTD_QUOTED,k.q=O);continue;case S.DOCTYPE_DTD_QUOTED:k.doctype+=O,O===k.q&&(k.state=S.DOCTYPE_DTD,k.q="");continue;case S.COMMENT:O==="-"?k.state=S.COMMENT_ENDING:k.comment+=O;continue;case S.COMMENT_ENDING:O==="-"?(k.state=S.COMMENT_ENDED,k.comment=de(k.opt,k.comment),k.comment&&F(k,"oncomment",k.comment),k.comment=""):(k.comment+="-"+O,k.state=S.COMMENT);continue;case S.COMMENT_ENDED:O!==">"?(q(k,"Malformed comment"),k.comment+="--"+O,k.state=S.COMMENT):k.state=S.TEXT;continue;case S.CDATA:O==="]"?k.state=S.CDATA_ENDING:k.cdata+=O;continue;case S.CDATA_ENDING:O==="]"?k.state=S.CDATA_ENDING_2:(k.cdata+="]"+O,k.state=S.CDATA);continue;case S.CDATA_ENDING_2:O===">"?(k.cdata&&F(k,"oncdata",k.cdata),F(k,"onclosecdata"),k.cdata="",k.state=S.TEXT):O==="]"?k.cdata+="]":(k.cdata+="]]"+O,k.state=S.CDATA);continue;case S.PROC_INST:O==="?"?k.state=S.PROC_INST_ENDING:v(O)?k.state=S.PROC_INST_BODY:k.procInstName+=O;continue;case S.PROC_INST_BODY:if(!k.procInstBody&&v(O))continue;O==="?"?k.state=S.PROC_INST_ENDING:k.procInstBody+=O;continue;case S.PROC_INST_ENDING:O===">"?(F(k,"onprocessinginstruction",{name:k.procInstName,body:k.procInstBody}),k.procInstName=k.procInstBody="",k.state=S.TEXT):(k.procInstBody+="?"+O,k.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:E(x,O)?k.tagName+=O:(z(k),O===">"?G(k):O==="/"?k.state=S.OPEN_TAG_SLASH:(v(O)||q(k,"Invalid character in tag name"),k.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:O===">"?(G(k,!0),X(k)):(q(k,"Forward-slash in opening tag not followed by >"),k.state=S.ATTRIB);continue;case S.ATTRIB:if(v(O))continue;O===">"?G(k):O==="/"?k.state=S.OPEN_TAG_SLASH:E(w,O)?(k.attribName=O,k.attribValue="",k.state=S.ATTRIB_NAME):q(k,"Invalid attribute name");continue;case S.ATTRIB_NAME:O==="="?k.state=S.ATTRIB_VALUE:O===">"?(q(k,"Attribute without value"),k.attribValue=k.attribName,L(k),G(k)):v(O)?k.state=S.ATTRIB_NAME_SAW_WHITE:E(x,O)?k.attribName+=O:q(k,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if(O==="=")k.state=S.ATTRIB_VALUE;else{if(v(O))continue;q(k,"Attribute without value"),k.tag.attributes[k.attribName]="",k.attribValue="",F(k,"onattribute",{name:k.attribName,value:""}),k.attribName="",O===">"?G(k):E(w,O)?(k.attribName=O,k.state=S.ATTRIB_NAME):(q(k,"Invalid attribute name"),k.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(v(O))continue;b(O)?(k.q=O,k.state=S.ATTRIB_VALUE_QUOTED):(q(k,"Unquoted attribute value"),k.state=S.ATTRIB_VALUE_UNQUOTED,k.attribValue=O);continue;case S.ATTRIB_VALUE_QUOTED:if(O!==k.q){O==="&"?k.state=S.ATTRIB_VALUE_ENTITY_Q:k.attribValue+=O;continue}L(k),k.q="",k.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:v(O)?k.state=S.ATTRIB:O===">"?G(k):O==="/"?k.state=S.OPEN_TAG_SLASH:E(w,O)?(q(k,"No whitespace between attributes"),k.attribName=O,k.attribValue="",k.state=S.ATTRIB_NAME):q(k,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!_(O)){O==="&"?k.state=S.ATTRIB_VALUE_ENTITY_U:k.attribValue+=O;continue}L(k),O===">"?G(k):k.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(k.tagName)O===">"?X(k):E(x,O)?k.tagName+=O:k.script?(k.script+="</"+k.tagName,k.tagName="",k.state=S.SCRIPT):(v(O)||q(k,"Invalid tagname in closing tag"),k.state=S.CLOSE_TAG_SAW_WHITE);else{if(v(O))continue;C(w,O)?k.script?(k.script+="</"+O,k.state=S.SCRIPT):q(k,"Invalid tagname in closing tag."):k.tagName=O}continue;case S.CLOSE_TAG_SAW_WHITE:if(v(O))continue;O===">"?X(k):q(k,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var Ue,at;switch(k.state){case S.TEXT_ENTITY:Ue=S.TEXT,at="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:Ue=S.ATTRIB_VALUE_QUOTED,at="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:Ue=S.ATTRIB_VALUE_UNQUOTED,at="attribValue";break}if(O===";")if(k.opt.unparsedEntities){var gt=ie(k);k.entity="",k.state=Ue,k.write(gt)}else k[at]+=ie(k),k.entity="",k.state=Ue;else E(k.entity.length?f:g,O)?k.entity+=O:(q(k,"Invalid character in entity name"),k[at]+="&"+k.entity+O,k.entity="",k.state=Ue);continue;default:throw new Error(k,"Unknown state: "+k.state)}return k.position>=k.bufferCheckPosition&&r(k),k}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||function(){var A=String.fromCharCode,k=Math.floor,U=function(){var O=16384,Ce=[],We,Ue,at=-1,gt=arguments.length;if(!gt)return"";for(var In="";++at<gt;){var Qe=Number(arguments[at]);if(!isFinite(Qe)||Qe<0||Qe>1114111||k(Qe)!==Qe)throw RangeError("Invalid code point: "+Qe);Qe<=65535?Ce.push(Qe):(Qe-=65536,We=(Qe>>10)+55296,Ue=Qe%1024+56320,Ce.push(We,Ue)),(at+1===gt||Ce.length>O)&&(In+=A.apply(null,Ce),Ce.length=0)}return In};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U}(),t},DW=$W(),Yy=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var LW=class extends ep{constructor(e){super(e);T(this,"tags");T(this,"lc_namespace",["langchain_core","output_parsers"]);T(this,"lc_serializable",!0);this.tags=e==null?void 0:e.tags}static lc_name(){return"XMLOutputParser"}_diff(e,n){if(n)return e?bx(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return Zy(e[0].text)}async parse(e){return Zy(e)}getFormatInstructions(){var n;return!!(this.tags&&this.tags.length>0)?Yy.replace("{tags}",((n=this.tags)==null?void 0:n.join(", "))??""):Yy}};const MW=t=>t.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),BR=t=>{if(Object.keys(t).length===0)return{};const e={};return t.children.length>0?(e[t.name]=t.children.map(BR),e):(e[t.name]=t.text??void 0,e)};function Zy(t){const e=MW(t),n=DW.parser(!0);let r={};const s=[];n.onopentag=o=>{const l={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};s.length>0?s[s.length-1].children.push(l):r=l,o.isSelfClosing||s.push(l)},n.onclosetag=()=>{if(s.length>0){const o=s.pop();s.length===0&&o&&(r=o)}},n.ontext=o=>{if(s.length>0){const l=s[s.length-1];l.text+=o}},n.onattribute=o=>{if(s.length>0){const l=s[s.length-1];l.attributes[o.name]=o.value}};const i=/```(xml)?(.*)```/s.exec(e),a=i?i[2]:e;return n.write(a).close(),r&&r.name==="?xml"&&(r=r.children[0]),BR(r)}var FW={};De(FW,{AsymmetricStructuredOutputParser:()=>jW,BaseCumulativeTransformOutputParser:()=>ep,BaseLLMOutputParser:()=>UR,BaseOutputParser:()=>Qm,BaseTransformOutputParser:()=>lu,BytesOutputParser:()=>NW,CommaSeparatedListOutputParser:()=>IW,CustomListOutputParser:()=>RW,JsonMarkdownStructuredOutputParser:()=>GR,JsonOutputParser:()=>Ky,ListOutputParser:()=>cu,MarkdownListOutputParser:()=>PW,NumberedListOutputParser:()=>OW,OutputParserException:()=>Ts,StringOutputParser:()=>zR,StructuredOutputParser:()=>Yh,XMLOutputParser:()=>LW,XML_FORMAT_INSTRUCTIONS:()=>Yy,parseJsonMarkdown:()=>vy,parsePartialJson:()=>Nm,parseXMLMarkdown:()=>Zy});function tp(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=Nm(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(s){throw new Ts([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${s.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function VR(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Zh(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var HR=class extends ep{constructor(e){super(e);T(this,"returnId",!1);T(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);T(this,"lc_serializable",!0);this.returnId=(e==null?void 0:e.returnId)??this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var a;const r=e[0].message;let s;if(Im(r)&&((a=r.tool_calls)!=null&&a.length)?s=r.tool_calls.map(o=>{const{id:l,...u}=o;return this.returnId?{id:l,...u}:u}):r.additional_kwargs.tool_calls!==void 0&&(s=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>tp(l,{returnId:this.returnId,partial:n}))),!s)return[];const i=[];for(const o of s)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};i.push(l)}return i}},Jy=class extends HR{constructor(e){super(e);T(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);T(this,"lc_serializable",!0);T(this,"returnId",!1);T(this,"keyName");T(this,"returnSingle",!1);T(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const n=await ZI(this.zodSchema,e);if(n.success)return n.data;throw new Ts(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=n.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(i=>i.type===this.keyName);let s=r;if(r.length)return this.returnId||(s=r.map(i=>i.args)),this.returnSingle?s[0]:s}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let s=r;return r.length?(this.returnId||(s=r.map(a=>a.args)),this.returnSingle?this._validateResult(s[0]):await Promise.all(s.map(a=>this._validateResult(a)))):void 0}},UW={};De(UW,{JsonOutputKeyToolsParser:()=>Jy,JsonOutputToolsParser:()=>HR,convertLangChainToolCallToOpenAI:()=>VR,makeInvalidToolCall:()=>Zh,parseToolCall:()=>tp});var zx=class extends Ux{constructor(e){var r,s,i,a;super(e??{});T(this,"temperature");T(this,"topP");T(this,"frequencyPenalty");T(this,"presencePenalty");T(this,"n");T(this,"logitBias");T(this,"model","gpt-3.5-turbo");T(this,"modelKwargs");T(this,"stop");T(this,"stopSequences");T(this,"user");T(this,"timeout");T(this,"streaming",!1);T(this,"streamUsage",!0);T(this,"maxTokens");T(this,"logprobs");T(this,"topLogprobs");T(this,"apiKey");T(this,"organization");T(this,"__includeRawResponse");T(this,"client");T(this,"clientConfig");T(this,"supportsStrictToolCalling");T(this,"audio");T(this,"modalities");T(this,"reasoning");T(this,"zdrEnabled");T(this,"service_tier");T(this,"promptCacheKey");T(this,"verbosity");T(this,"defaultOptions");T(this,"lc_serializable",!0);const n=typeof((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)=="string"||typeof((s=e==null?void 0:e.configuration)==null?void 0:s.apiKey)=="function"?(i=e==null?void 0:e.configuration)==null?void 0:i.apiKey:void 0;this.apiKey=(e==null?void 0:e.apiKey)??n??ns("OPENAI_API_KEY"),this.organization=((a=e==null?void 0:e.configuration)==null?void 0:a.organization)??ns("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=e==null?void 0:e.reasoning,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.disableStreaming=(e==null?void 0:e.disableStreaming)===!0,this.streaming=(e==null?void 0:e.streaming)===!0,this.disableStreaming&&(this.streaming=!1),(e==null?void 0:e.streaming)===!1&&(this.disableStreaming=!0),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","verbosity"]}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}_getReasoningParams(e){if(!au(this.model))return;let n;return this.reasoning!==void 0&&(n={...n,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(n={...n,...e.reasoning}),n}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&Yr(e.json_schema.schema)?GH(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},s=PV(r),i={...this.clientConfig,baseURL:s,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,i.defaultHeaders=DV(i.defaultHeaders),this.client=new Ne(i)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,n){return qh(e)?WV(e.metadata.customTool):Lx(e)?(n==null?void 0:n.strict)!==void 0?{...e,function:{...e.function,strict:n.strict}}:e:FV(e,n)}bindTools(e,n){let r;return(n==null?void 0:n.strict)!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(s=>$x(s)||qh(s)?s:this._convertChatOpenAIToolToCompletionsTool(s,{strict:r})),...n})}async stream(e,n){return super.stream(e,this._combineCallOptions(n))}async invoke(e,n){return super.invoke(e,this._combineCallOptions(n))}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let n=0,r=0,s=0;this.model==="gpt-3.5-turbo-0301"?(r=4,s=-1):(r=3,s=1);const i=await Promise.all(e.map(async a=>{var m,p,y,w,x,g;const o=await this.getNumTokens(a.content),l=await this.getNumTokens(ou(a)),u=a.name!==void 0?s+await this.getNumTokens(a.name):0;let d=o+r+l+u;const h=a;if(h._getType()==="function"&&(d-=2),(m=h.additional_kwargs)!=null&&m.function_call&&(d+=3),(p=h==null?void 0:h.additional_kwargs.function_call)!=null&&p.name&&(d+=await this.getNumTokens((y=h.additional_kwargs.function_call)==null?void 0:y.name)),(w=h.additional_kwargs.function_call)!=null&&w.arguments)try{d+=await this.getNumTokens(JSON.stringify(JSON.parse((x=h.additional_kwargs.function_call)==null?void 0:x.arguments)))}catch(f){console.error("Error parsing function arguments",f,JSON.stringify(h.additional_kwargs.function_call)),d+=await this.getNumTokens((g=h.additional_kwargs.function_call)==null?void 0:g.arguments)}return n+=d,d}));return n+=3,{totalCount:n,countPerMessage:i}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var s;return(s=r.message.additional_kwargs)!=null&&s.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,s)=>r+s,0)}async _getEstimatedTokenCountFromPrompt(e,n,r){let s=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const i=zV(n);s+=await this.getNumTokens(i),s+=9}return n&&e.find(i=>i._getType()==="system")&&(s-=4),r==="none"?s+=1:typeof r=="object"&&(s+=await this.getNumTokens(r.name)+4),s}get profile(){return HH[this.model]??{}}_getStructuredOutputMethod(e){const n={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((n==null?void 0:n.method)===void 0)return"jsonSchema"}else n.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return n.method}withStructuredOutput(e,n){let r,s;const{schema:i,name:a,includeRaw:o}={...n,schema:e};if((n==null?void 0:n.strict)!==void 0&&n.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");const l=UH(this.model,n==null?void 0:n.method);if(l==="jsonMode"){Yr(i)?s=Yh.fromZodSchema(i):s=new Ky;const m=Zr(i);r=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:a??"extract",...m}}})}else if(l==="jsonSchema"){const m={name:a??"extract",description:Hm(i),schema:i,strict:n==null?void 0:n.strict},p=Zr(m.schema);if(r=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:m},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:m.name,description:m.description,...p}}}),Yr(i)){const y=Yh.fromZodSchema(i);s=zs.from(w=>"parsed"in w.additional_kwargs?w.additional_kwargs.parsed:y)}else s=new Ky}else{let m=a??"extract";if(Yr(i)){const p=Zr(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:m,description:p.description,parameters:p}}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...p}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),s=new Jy({returnSingle:!0,keyName:m,zodSchema:i})}else{let p;typeof i.name=="string"&&typeof i.parameters=="object"&&i.parameters!=null?(p=i,m=i.name):(m=i.title??m,p={name:m,description:i.description??"",parameters:i});const y=Zr(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:p}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...y}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),s=new Jy({returnSingle:!0,keyName:m})}}if(!o)return r.pipe(s);const u=Po.assign({parsed:(m,p)=>s.invoke(m.raw,p)}),d=Po.assign({parsed:()=>null}),h=u.withFallbacks({fallbacks:[d]});return qo.from([{raw:r},h])}};const WR={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,n;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(n=t.metadata)!=null&&n.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=Cc({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const n=e.mime_type||t.mime_type||"";let r;try{r=yy(n)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=yy(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,n,r,s,i,a,o,l,u,d;if(t.source_type==="url"){if(!Cc({dataUrl:t.url}))throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(n=t.metadata)!=null&&n.name?{filename:((r=t.metadata)==null?void 0:r.filename)||((s=t.metadata)==null?void 0:s.name)}:{}}}}if(t.source_type==="base64")return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(i=t.metadata)!=null&&i.filename||(a=t.metadata)!=null&&a.name||(o=t.metadata)!=null&&o.title?{filename:((l=t.metadata)==null?void 0:l.filename)||((u=t.metadata)==null?void 0:u.name)||((d=t.metadata)==null?void 0:d.title)}:{}}};if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}},zW=({message:t,rawResponse:e,includeRawResponse:n})=>{var s,i;const r=t.tool_calls;switch(t.role){case"assistant":{const a=[],o=[];for(const h of r??[])try{a.push(tp(h,{returnId:!0}))}catch(m){o.push(Zh(h,m.message))}const l={function_call:t.function_call,tool_calls:r};n!==void 0&&(l.__raw_response=e);const u={model_provider:"openai",model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};t.audio&&(l.audio=t.audio);const d=BH(t.content||"",(i=(s=e.choices)==null?void 0:s[0])==null?void 0:i.message);return new Nn({content:d,tool_calls:a,invalid_tool_calls:o,additional_kwargs:l,response_metadata:u,id:e.id})}default:return new va(t.content||"",t.role??"unknown")}},GW=({delta:t,rawResponse:e,includeRawResponse:n,defaultRole:r})=>{var l,u;const s=t.role??r,i=t.content??"";let a;t.function_call?a={function_call:t.function_call}:t.tool_calls?a={tool_calls:t.tool_calls}:a={},n&&(a.__raw_response=e),t.audio&&(a.audio={...t.audio,index:e.choices[0].index});const o={model_provider:"openai",usage:{...e.usage}};if(s==="user")return new tu({content:i,response_metadata:o});if(s==="assistant"){const d=[];if(Array.isArray(t.tool_calls))for(const h of t.tool_calls)d.push({name:(l=h.function)==null?void 0:l.name,args:(u=h.function)==null?void 0:u.arguments,id:h.id,index:h.index,type:"tool_call_chunk"});return new cs({content:i,tool_call_chunks:d,additional_kwargs:a,id:e.id,response_metadata:o})}else return s==="system"?new ki({content:i,response_metadata:o}):s==="developer"?new ki({content:i,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new eu({content:i,additional_kwargs:a,name:t.name,response_metadata:o}):s==="tool"?new Xc({content:i,additional_kwargs:a,tool_call_id:t.tool_call_id,response_metadata:o}):new Qc({content:i,role:s,response_metadata:o})},BW=t=>{if(t.type==="image"){if(t.url)return{type:"image_url",image_url:{url:t.url}};if(t.data)return{type:"image_url",image_url:{url:`data:${t.mimeType};base64,${t.data}`}}}if(t.type==="audio"&&t.data){const e=UN(()=>{const[,n]=t.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:t.data.toString(),format:e}}}if(t.type==="file"){if(t.data)return{type:"file",file:{file_data:t.data.toString()}};if(t.fileId)return{type:"file",file:{file_id:t.fileId}}}},VW=({message:t,model:e})=>{let n=ou(t);if(n==="system"&&au(e)&&(n="developer"),n==="developer")return{role:"developer",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="system")return{role:"system",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="assistant")return{role:"assistant",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="tool"&&as.isInstance(t))return{role:"tool",tool_call_id:t.tool_call_id,content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="function")return{role:"function",name:t.name??"",content:t.contentBlocks.filter(s=>s.type==="text").join("")};function*r(s){for(const i of s){i.type==="text"&&(yield{type:"text",text:i.text});const a=BW(i);a&&(yield a)}}return{role:"user",content:Array.from(r(t.contentBlocks))}},Dk=({messages:t,model:e})=>t.flatMap(n=>{var a,o;if("output_version"in n.response_metadata&&((a=n.response_metadata)==null?void 0:a.output_version)==="v1")return VW({message:n});let r=ou(n);r==="system"&&au(e)&&(r="developer");const s=typeof n.content=="string"?n.content:n.content.map(l=>is(l)?Kv(l,WR):l),i={role:r,content:s};if(n.name!=null&&(i.name=n.name),n.additional_kwargs.function_call!=null&&(i.function_call=n.additional_kwargs.function_call,i.content=""),Nn.isInstance(n)&&((o=n.tool_calls)!=null&&o.length)?(i.tool_calls=n.tool_calls.map(VR),i.content=""):(n.additional_kwargs.tool_calls!=null&&(i.tool_calls=n.additional_kwargs.tool_calls),as.isInstance(n)&&n.tool_call_id!=null&&(i.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){const l={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[i,l]}return i});var HW=class extends zx{invocationParams(t,e){var a;let n;(t==null?void 0:t.strict)!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let r={};(t==null?void 0:t.stream_options)!==void 0?r={stream_options:t.stream_options}:this.streamUsage&&(this.streaming||e!=null&&e.streaming)&&(r={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(t==null?void 0:t.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:t==null?void 0:t.functions,function_call:t==null?void 0:t.function_call,tools:(a=t==null?void 0:t.tools)!=null&&a.length?t.tools.map(o=>this._convertChatOpenAIToolToCompletionsTool(o,{strict:n})):void 0,tool_choice:SR(t==null?void 0:t.tool_choice),response_format:this._getResponseFormat(t==null?void 0:t.response_format),seed:t==null?void 0:t.seed,...r,parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,...this.audio||t!=null&&t.audio?{audio:this.audio||(t==null?void 0:t.audio)}:{},...this.modalities||t!=null&&t.modalities?{modalities:this.modalities||(t==null?void 0:t.modalities)}:{},...this.modelKwargs,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,verbosity:(t==null?void 0:t.verbosity)??this.verbosity};(t==null?void 0:t.prediction)!==void 0&&(s.prediction=t.prediction),this.service_tier!==void 0&&(s.service_tier=this.service_tier),(t==null?void 0:t.service_tier)!==void 0&&(s.service_tier=t.service_tier);const i=this._getReasoningParams(t);return i!==void 0&&i.effort!==void 0&&(s.reasoning_effort=i.effort),au(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}async _generate(t,e,n){var a,o;const r={},s=this.invocationParams(e),i=Dk({messages:t,model:this.model});if(s.stream){const l=this._streamResponseChunks(t,e,n),u={};for await(const w of l){w.message.response_metadata={...w.generationInfo,...w.message.response_metadata};const x=((a=w.generationInfo)==null?void 0:a.completion)??0;u[x]===void 0?u[x]=w:u[x]=u[x].concat(w)}const d=Object.entries(u).sort(([w],[x])=>parseInt(w,10)-parseInt(x,10)).map(([w,x])=>x),{functions:h,function_call:m}=this.invocationParams(e),p=await this._getEstimatedTokenCountFromPrompt(t,h,m),y=await this._getNumTokensFromGenerations(d);return r.input_tokens=p,r.output_tokens=y,r.total_tokens=p+y,{generations:d,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{const l=await this.completionWithRetry({...s,stream:!1,messages:i},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options}),{completion_tokens:u,prompt_tokens:d,total_tokens:h,prompt_tokens_details:m,completion_tokens_details:p}=(l==null?void 0:l.usage)??{};u&&(r.output_tokens=(r.output_tokens??0)+u),d&&(r.input_tokens=(r.input_tokens??0)+d),h&&(r.total_tokens=(r.total_tokens??0)+h),((m==null?void 0:m.audio_tokens)!==null||(m==null?void 0:m.cached_tokens)!==null)&&(r.input_token_details={...(m==null?void 0:m.audio_tokens)!==null&&{audio:m==null?void 0:m.audio_tokens},...(m==null?void 0:m.cached_tokens)!==null&&{cache_read:m==null?void 0:m.cached_tokens}}),((p==null?void 0:p.audio_tokens)!==null||(p==null?void 0:p.reasoning_tokens)!==null)&&(r.output_token_details={...(p==null?void 0:p.audio_tokens)!==null&&{audio:p==null?void 0:p.audio_tokens},...(p==null?void 0:p.reasoning_tokens)!==null&&{reasoning:p==null?void 0:p.reasoning_tokens}});const y=[];for(const w of(l==null?void 0:l.choices)??[]){const g={text:((o=w.message)==null?void 0:o.content)??"",message:this._convertCompletionsMessageToBaseMessage(w.message??{role:"assistant"},l)};g.generationInfo={...w.finish_reason?{finish_reason:w.finish_reason}:{},...w.logprobs?{logprobs:w.logprobs}:{}},Im(g.message)&&(g.message.usage_metadata=r),g.message=new Nn(Object.fromEntries(Object.entries(g.message).filter(([f])=>!f.startsWith("lc_")))),y.push(g)}return{generations:y,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}}async*_streamResponseChunks(t,e,n){var l,u,d,h,m,p,y,w,x,g;const r=Dk({messages:t,model:this.model}),s={...this.invocationParams(e,{streaming:!0}),messages:r,stream:!0};let i;const a=await this.completionWithRetry(s,e);let o;for await(const f of a){const v=(l=f==null?void 0:f.choices)==null?void 0:l[0];if(f.usage&&(o=f.usage),!v)continue;const{delta:b}=v;if(!b)continue;const _=this._convertCompletionsDeltaToBaseMessageChunk(b,f,i);i=b.role??i;const E={prompt:e.promptIndex??0,completion:v.index??0};if(typeof _.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const C={...E};v.finish_reason!=null&&(C.finish_reason=v.finish_reason,C.system_fingerprint=f.system_fingerprint,C.model_name=f.model,C.service_tier=f.service_tier),this.logprobs&&(C.logprobs=v.logprobs);const S=new Eo({message:_,text:_.content,generationInfo:C});yield S,await(n==null?void 0:n.handleLLMNewToken(S.text??"",E,void 0,void 0,void 0,{chunk:S}))}if(o){const f={...((u=o.prompt_tokens_details)==null?void 0:u.audio_tokens)!==null&&{audio:(d=o.prompt_tokens_details)==null?void 0:d.audio_tokens},...((h=o.prompt_tokens_details)==null?void 0:h.cached_tokens)!==null&&{cache_read:(m=o.prompt_tokens_details)==null?void 0:m.cached_tokens}},v={...((p=o.completion_tokens_details)==null?void 0:p.audio_tokens)!==null&&{audio:(y=o.completion_tokens_details)==null?void 0:y.audio_tokens},...((w=o.completion_tokens_details)==null?void 0:w.reasoning_tokens)!==null&&{reasoning:(x=o.completion_tokens_details)==null?void 0:x.reasoning_tokens}};yield new Eo({message:new cs({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(f).length>0&&{input_token_details:f},...Object.keys(v).length>0&&{output_token_details:v}}}),text:""})}if((g=e.signal)!=null&&g.aborted)throw new Error("AbortError")}async completionWithRetry(t,e){const n=this._getClientOptions(e),r=t.response_format&&t.response_format.type==="json_schema";return this.caller.call(async()=>{try{return r&&!t.stream?await this.client.chat.completions.parse(t,n):await this.client.chat.completions.create(t,n)}catch(s){throw yN(s)}})}_convertCompletionsDeltaToBaseMessageChunk(t,e,n){return GW({delta:t,rawResponse:e,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(t,e){return zW({message:t,rawResponse:e,includeRawResponse:this.__includeRawResponse})}};const io="__openai_function_call_ids__",qR=t=>{var r,s,i,a;const e={...((r=t==null?void 0:t.input_tokens_details)==null?void 0:r.cached_tokens)!=null&&{cache_read:(s=t==null?void 0:t.input_tokens_details)==null?void 0:s.cached_tokens}},n={...((i=t==null?void 0:t.output_tokens_details)==null?void 0:i.reasoning_tokens)!=null&&{reasoning:(a=t==null?void 0:t.output_tokens_details)==null?void 0:a.reasoning_tokens}};return{input_tokens:(t==null?void 0:t.input_tokens)??0,output_tokens:(t==null?void 0:t.output_tokens)??0,total_tokens:(t==null?void 0:t.total_tokens)??0,input_token_details:e,output_token_details:n}},KR=t=>{if(t.error){const o=new Error(t.error.message);throw o.name=t.error.code,o}let e;const n=[],r=[],s=[],i={model_provider:"openai",model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,service_tier:t.service_tier,model_name:t.model},a={};for(const o of t.output)if(o.type==="message")e=o.id,n.push(...o.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(a.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(a.refusal=l.refusal,[]):l));else if(o.type==="function_call"){const l={function:{name:o.name,arguments:o.arguments},id:o.call_id};try{r.push(tp(l,{returnId:!0}))}catch(u){let d;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(d=u.message),s.push(Zh(l,d))}a[io]??(a[io]={}),o.id&&(a[io][o.call_id]=o.id)}else if(o.type==="reasoning")a.reasoning=o;else if(o.type==="custom_tool_call"){const l=BV(o);l?r.push(l):s.push(Zh(o,"Malformed custom tool call"))}else a.tool_outputs??(a.tool_outputs=[]),a.tool_outputs.push(o);return new Nn({id:e,content:n,tool_calls:r,invalid_tool_calls:s,usage_metadata:qR(t.usage),additional_kwargs:a,response_metadata:i})},WW=t=>{const e=(t.summary.length>1?t.summary.reduce((n,r)=>{const s=n[n.length-1];return s.index===r.index?s.text+=r.text:n.push(r),n},[{...t.summary[0]}]):t.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([r])=>r!=="index")));return{...t,summary:e}},qW=t=>{var l,u;const e=[];let n={},r;const s=[],i={model_provider:"openai"},a={};let o;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")o=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")s.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.call_id,index:t.output_index}),a[io]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(t.item.type))a.tool_outputs=[t.item];else if(t.type==="response.created")i.id=t.response.id,i.model_name=t.response.model,i.model=t.response.model;else if(t.type==="response.completed"){const d=KR(t.response);r=qR(t.response.usage),((u=(l=t.response.text)==null?void 0:l.format)==null?void 0:u.type)==="json_schema"&&(a.parsed??(a.parsed=JSON.parse(d.text)));for(const[h,m]of Object.entries(t.response))h!=="id"&&(i[h]=m)}else if(t.type==="response.function_call_arguments.delta"||t.type==="response.custom_tool_call_input.delta")s.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")n={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else if(t.type==="response.output_item.added"&&"item"in t&&t.item.type==="reasoning"){const d=t.item.summary?t.item.summary.map((h,m)=>({...h,index:m})):void 0;a.reasoning={id:t.item.id,type:t.item.type,...d?{summary:d}:{}}}else if(t.type==="response.reasoning_summary_part.added")a.reasoning={type:"reasoning",summary:[{...t.part,index:t.summary_index}]};else if(t.type==="response.reasoning_summary_text.delta")a.reasoning={type:"reasoning",summary:[{text:t.delta,type:"summary_text",index:t.summary_index}]};else return t.type==="response.image_generation_call.partial_image",null;return new Eo({text:e.map(d=>d.text).join(""),message:new cs({id:o,content:e,tool_call_chunks:s,usage_metadata:r,additional_kwargs:a,response_metadata:i}),generationInfo:n})},KW=t=>{var r;const e=Nn.isInstance(t)&&((r=t.response_metadata)==null?void 0:r.model_provider)==="openai";function*n(){const s=oa(()=>{try{const f=ou(t);return f==="system"||f==="developer"||f==="assistant"||f==="user"?f:"assistant"}catch{return"assistant"}});let i;const a=new Set,o=new Set,l=new Map,u=new Map;function*d(){if(!i)return;const f=i.content;(typeof f=="string"&&f.length>0||Array.isArray(f)&&f.length>0)&&(yield i),i=void 0}const h=f=>{i||(i={type:"message",role:s,content:[]}),typeof i.content=="string"?i.content=i.content.length>0?[{type:"input_text",text:i.content},...f]:[...f]:i.content.push(...f)},m=f=>{if(typeof f=="string")return f;try{return JSON.stringify(f??{})}catch{return"{}"}},p=f=>{const v=oa(()=>{var _;const b=(_=f.metadata)==null?void 0:_.detail;return b==="low"||b==="high"||b==="auto"?b:"auto"});if(f.fileId)return{type:"input_image",detail:v,file_id:f.fileId};if(f.url)return{type:"input_image",detail:v,image_url:f.url};if(f.data){const b=typeof f.data=="string"?f.data:Buffer.from(f.data).toString("base64"),_=f.mimeType??"image/png";return{type:"input_image",detail:v,image_url:`data:${_};base64,${b}`}}},y=f=>{var b,_,E;const v=((b=f.metadata)==null?void 0:b.filename)??((_=f.metadata)==null?void 0:_.name)??((E=f.metadata)==null?void 0:E.title);if(f.fileId&&typeof v=="string")return{type:"input_file",file_id:f.fileId,...v?{filename:v}:{}};if(f.url&&typeof v=="string")return{type:"input_file",file_url:f.url,...v?{filename:v}:{}};if(f.data&&typeof v=="string"){const C=typeof f.data=="string"?f.data:Buffer.from(f.data).toString("base64");return{type:"input_file",file_data:`data:${f.mimeType??"application/octet-stream"};base64,${C}`,...v?{filename:v}:{}}}},w=f=>{const v=oa(()=>{if(Array.isArray(f.summary)){const E=f.summary,C=(E==null?void 0:E.map(S=>S==null?void 0:S.text).filter(S=>typeof S=="string"))??[];if(C.length>0)return C}return f.reasoning?[f.reasoning]:[]}),b=v.length>0?v.map(E=>({type:"summary_text",text:E})):[{type:"summary_text",text:""}],_={type:"reasoning",id:f.id??"",summary:b};return f.reasoning&&(_.content=[{type:"reasoning_text",text:f.reasoning}]),_},x=f=>({type:"function_call",name:f.name??"",call_id:f.id??"",arguments:m(f.args)}),g=f=>{const v=m(f.output),b=f.status==="success"?"completed":f.status==="error"?"incomplete":void 0;return{type:"function_call_output",call_id:f.toolCallId??"",output:v,...b?{status:b}:{}}};for(const f of t.contentBlocks)if(f.type==="text")h([{type:"input_text",text:f.text}]);else if(f.type!=="invalid_tool_call"){if(f.type==="reasoning")yield*d(),yield w(f);else if(f.type==="tool_call"){yield*d();const v=f.id??"";v&&(a.add(v),l.delete(v)),yield x(f)}else if(f.type==="tool_call_chunk"){if(f.id){const v=l.get(f.id)??{name:f.name,args:[]};f.name&&(v.name=f.name),f.args&&v.args.push(f.args),l.set(f.id,v)}}else if(f.type==="server_tool_call"){yield*d();const v=f.id??"";v&&(o.add(v),u.delete(v)),yield x(f)}else if(f.type==="server_tool_call_chunk"){if(f.id){const v=u.get(f.id)??{name:f.name,args:[]};f.name&&(v.name=f.name),f.args&&v.args.push(f.args),u.set(f.id,v)}}else if(f.type==="server_tool_call_result")yield*d(),yield g(f);else if(f.type!=="audio")if(f.type==="file"){const v=y(f);v&&h([v])}else if(f.type==="image"){const v=p(f);v&&h([v])}else if(f.type==="video"){const v=y(f);v&&h([v])}else f.type==="text-plain"?f.text&&h([{type:"input_text",text:f.text}]):f.type==="non_standard"&&e&&(yield*d(),yield f.value)}yield*d();for(const[f,v]of l){if(!f||a.has(f))continue;const b=v.args.join("");!v.name&&!b||(yield{type:"function_call",call_id:f,name:v.name??"",arguments:b})}for(const[f,v]of u){if(!f||o.has(f))continue;const b=v.args.join("");!v.name&&!b||(yield{type:"function_call",call_id:f,name:v.name??"",arguments:b})}}return Array.from(n())},Lk=({messages:t,zdrEnabled:e,model:n})=>t.flatMap(r=>{var o,l,u,d;const s=r.response_metadata;if((s==null?void 0:s.output_version)==="v1")return KW(r);const i=r.additional_kwargs;let a=ou(r);if(a==="system"&&au(n)&&(a="developer"),a==="function")throw new Error("Function messages are not supported in Responses API");if(a==="tool"){const h=r;return(i==null?void 0:i.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof h.content=="string")return{type:"computer_screenshot",image_url:h.content};if(Array.isArray(h.content)){const p=h.content.find(w=>w.type==="computer_screenshot");if(p)return p;const y=h.content.find(w=>w.type==="image_url");if(y)return{type:"computer_screenshot",image_url:typeof y.image_url=="string"?y.image_url:y.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:h.tool_call_id}:(o=h.additional_kwargs)!=null&&o.customTool?{type:"custom_tool_call_output",call_id:h.tool_call_id,output:h.content}:{type:"function_call_output",call_id:h.tool_call_id,id:(l=h.id)!=null&&l.startsWith("fc_")?h.id:void 0,output:typeof h.content!="string"?JSON.stringify(h.content):h.content}}if(a==="assistant"){if(!e&&(s==null?void 0:s.output)!=null&&Array.isArray(s==null?void 0:s.output)&&(s==null?void 0:s.output.length)>0&&(s!=null&&s.output.every(x=>"type"in x)))return s==null?void 0:s.output;const h=[];if(i!=null&&i.reasoning&&!e){const x=WW(i.reasoning);h.push(x)}let{content:m}=r;i!=null&&i.refusal&&(typeof m=="string"&&(m=[{type:"output_text",text:m,annotations:[]}]),m=[...m,{type:"refusal",refusal:i.refusal}]),(typeof m=="string"||m.length>0)&&h.push({type:"message",role:"assistant",...r.id&&!e&&r.id.startsWith("msg_")?{id:r.id}:{},content:oa(()=>typeof m=="string"?m:m.flatMap(x=>x.type==="text"?{type:"output_text",text:x.text,annotations:x.annotations??[]}:x.type==="output_text"||x.type==="refusal"?x:[]))});const p=i==null?void 0:i[io];Nn.isInstance(r)&&((u=r.tool_calls)!=null&&u.length)?h.push(...r.tool_calls.map(x=>VV(x)?{type:"custom_tool_call",id:x.call_id,call_id:x.id??"",input:x.args.input,name:x.name}:{type:"function_call",name:x.name,arguments:JSON.stringify(x.args),call_id:x.id,...e?{}:{id:p==null?void 0:p[x.id]}})):i!=null&&i.tool_calls&&h.push(...i.tool_calls.map(x=>({type:"function_call",name:x.function.name,call_id:x.id,arguments:x.function.arguments,...e?{}:{id:p==null?void 0:p[x.id]}})));const y=(d=s==null?void 0:s.output)!=null&&d.length?s==null?void 0:s.output:i.tool_outputs,w=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(y!=null){const x=y,g=x==null?void 0:x.filter(f=>w.includes(f.type));g.length>0&&h.push(...g)}return h}if(a==="user"||a==="system"||a==="developer"){if(typeof r.content=="string")return{type:"message",role:a,content:r.content};const h=[],m=r.content.flatMap(p=>{if(p.type==="mcp_approval_response"&&h.push({type:"mcp_approval_response",approval_request_id:p.approval_request_id,approve:p.approve}),is(p))return Kv(p,WR);if(p.type==="text")return{type:"input_text",text:p.text};if(p.type==="image_url"){const y=oa(()=>{if(typeof p.image_url=="string")return p.image_url;if(typeof p.image_url=="object"&&p.image_url!==null&&"url"in p.image_url)return p.image_url.url}),w=oa(()=>{if(typeof p.image_url=="string")return"auto";if(typeof p.image_url=="object"&&p.image_url!==null&&"detail"in p.image_url)return p.image_url.detail});return{type:"input_image",image_url:y,detail:w}}return p.type==="input_text"||p.type==="input_image"||p.type==="input_file"?p:[]});return m.length>0&&h.push({type:"message",role:a,content:m}),h}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${a}`),[]});var YW=class extends zx{invocationParams(t){var s;let e;(t==null?void 0:t.strict)!==void 0?e=t.strict:this.supportsStrictToolCalling!==void 0&&(e=this.supportsStrictToolCalling);const n={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:t==null?void 0:t.previous_response_id,truncation:t==null?void 0:t.truncation,include:t==null?void 0:t.include,tools:(s=t==null?void 0:t.tools)!=null&&s.length?this._reduceChatOpenAITools(t.tools,{stream:this.streaming,strict:e}):void 0,tool_choice:GV(t==null?void 0:t.tool_choice)?t==null?void 0:t.tool_choice:(()=>{const i=SR(t==null?void 0:t.tool_choice);if(typeof i=="object"&&"type"in i){if(i.type==="function")return{type:"function",name:i.function.name};if(i.type==="allowed_tools")return{type:"allowed_tools",mode:i.allowed_tools.mode,tools:i.allowed_tools.tools};if(i.type==="custom")return{type:"custom",name:i.custom.name}}})(),text:(()=>{if(t!=null&&t.text)return t.text;const i=this._getResponseFormat(t==null?void 0:t.response_format);return(i==null?void 0:i.type)==="json_schema"?i.json_schema.schema!=null?{format:{type:"json_schema",schema:i.json_schema.schema,description:i.json_schema.description,name:i.json_schema.name,strict:i.json_schema.strict},verbosity:t==null?void 0:t.verbosity}:void 0:{format:i,verbosity:t==null?void 0:t.verbosity}})(),parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},r=this._getReasoningParams(t);return r!==void 0&&(n.reasoning=r),n}async _generate(t,e){var r;const n=this.invocationParams(e);if(n.stream){const s=this._streamResponseChunks(t,e);let i;for await(const a of s)a.message.response_metadata={...a.generationInfo,...a.message.response_metadata},i=(i==null?void 0:i.concat(a))??a;return{generations:i?[i]:[],llmOutput:{estimatedTokenUsage:(r=i==null?void 0:i.message)==null?void 0:r.usage_metadata}}}else{const s=await this.completionWithRetry({input:Lk({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),...n,stream:!1},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options});return{generations:[{text:s.output_text,message:KR(s)}],llmOutput:{id:s.id,estimatedTokenUsage:s.usage?{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens,totalTokens:s.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(t,e,n){const r=await this.completionWithRetry({...this.invocationParams(e),input:Lk({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0},e);for await(const s of r){const i=qW(s);i!=null&&(yield i,await(n==null?void 0:n.handleLLMNewToken(i.text||"",{prompt:e.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:i})))}}async completionWithRetry(t,e){return this.caller.call(async()=>{var r,s;const n=this._getClientOptions(e);try{return((s=(r=t.text)==null?void 0:r.format)==null?void 0:s.type)==="json_schema"&&!t.stream?await this.client.responses.parse(t,n):await this.client.responses.create(t,n)}catch(i){throw yN(i)}})}_reduceChatOpenAITools(t,e){const n=[];for(const r of t)if($x(r))r.type==="image_generation"&&(e!=null&&e.stream)&&(r.partial_images=1),n.push(r);else if(qh(r)){const s=r.metadata.customTool;n.push({type:"custom",name:s.name,description:s.description,format:s.format})}else Lx(r)?n.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:(e==null?void 0:e.strict)??null}):kR(r)&&n.push(HV(r));return n}},ZW=class YR extends zx{constructor(n){super(n);T(this,"useResponsesApi",!1);T(this,"responses");T(this,"completions");this.fields=n,this.useResponsesApi=(n==null?void 0:n.useResponsesApi)??!1,this.responses=(n==null?void 0:n.responses)??new YW(n),this.completions=(n==null?void 0:n.completions)??new HW(n)}get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}_useResponsesApi(n){var a,o,l,u,d;const r=(a=n==null?void 0:n.tools)==null?void 0:a.some($x),s=(n==null?void 0:n.previous_response_id)!=null||(n==null?void 0:n.text)!=null||(n==null?void 0:n.truncation)!=null||(n==null?void 0:n.include)!=null||((o=n==null?void 0:n.reasoning)==null?void 0:o.summary)!=null||((l=this.reasoning)==null?void 0:l.summary)!=null,i=((u=n==null?void 0:n.tools)==null?void 0:u.some(kR))||((d=n==null?void 0:n.tools)==null?void 0:d.some(qh));return this.useResponsesApi||r||s||i}getLsParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.getLsParams(r):this.completions.getLsParams(r)}invocationParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.invocationParams(r):this.completions.invocationParams(r)}async _generate(n,r,s){return this._useResponsesApi(r)?this.responses._generate(n,r):this.completions._generate(n,r,s)}async*_streamResponseChunks(n,r,s){if(this._useResponsesApi(r)){yield*this.responses._streamResponseChunks(n,this._combineCallOptions(r),s);return}yield*this.completions._streamResponseChunks(n,this._combineCallOptions(r),s)}withConfig(n){const r=new YR(this.fields);return r.defaultOptions={...this.defaultOptions,...n},r}},JW={};De(JW,{BaseLLM:()=>ZR,LLM:()=>XW});var ZR=class Pl extends Fx{constructor(){super(...arguments);T(this,"lc_namespace",["langchain","llms",this._llmType()])}async invoke(n,r){const s=Pl._convertInputToPromptValue(n);return(await this.generatePrompt([s],r,r==null?void 0:r.callbacks)).generations[0][0].text}async*_streamResponseChunks(n,r,s){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(n){const[r,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=r.signal,[r,s]}async*_streamIterator(n,r){if(this._streamResponseChunks===Pl.prototype._streamResponseChunks)yield this.invoke(n,r);else{const s=Pl._convertInputToPromptValue(n),[i,a]=this._separateRunnableConfigFromCallOptionsCompat(r),o=await Cn.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},u=await(o==null?void 0:o.handleLLMStart(this.toJSON(),[s.toString()],i.runId,void 0,l,void 0,void 0,i.runName));let d=new Ao({text:""});try{for await(const h of this._streamResponseChunks(s.toString(),a,u==null?void 0:u[0]))d?d=d.concat(h):d=h,typeof h.text=="string"&&(yield h.text)}catch(h){throw await Promise.all((u??[]).map(m=>m==null?void 0:m.handleLLMError(h))),h}await Promise.all((u??[]).map(h=>h==null?void 0:h.handleLLMEnd({generations:[[d]]})))}}async generatePrompt(n,r,s){const i=n.map(a=>a.toString());return this.generate(i,r,s)}invocationParams(n){return{}}_flattenLLMResult(n){const r=[];for(let s=0;s<n.generations.length;s+=1){const i=n.generations[s];if(s===0)r.push({generations:[i],llmOutput:n.llmOutput});else{const a=n.llmOutput?{...n.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[i],llmOutput:a})}}return r}async _generateUncached(n,r,s,i){let a;if(i!==void 0&&i.length===n.length)a=i;else{const d=await Cn.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),h={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:n.length};a=await(d==null?void 0:d.handleLLMStart(this.toJSON(),n,s.runId,void 0,h,void 0,void 0,s==null?void 0:s.runName))}const o=!!(a!=null&&a[0].handlers.find(ax));let l;if(o&&n.length===1&&this._streamResponseChunks!==Pl.prototype._streamResponseChunks)try{const d=await this._streamResponseChunks(n[0],r,a==null?void 0:a[0]);let h;for await(const m of d)h===void 0?h=m:h=Ti(h,m);if(h===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[h]],llmOutput:{}},await(a==null?void 0:a[0].handleLLMEnd(l))}catch(d){throw await(a==null?void 0:a[0].handleLLMError(d)),d}else{try{l=await this._generate(n,r,a==null?void 0:a[0])}catch(h){throw await Promise.all((a??[]).map(m=>m==null?void 0:m.handleLLMError(h))),h}const d=this._flattenLLMResult(l);await Promise.all((a??[]).map((h,m)=>h==null?void 0:h.handleLLMEnd(d[m])))}const u=(a==null?void 0:a.map(d=>d.runId))||void 0;return Object.defineProperty(l,$c,{value:u?{runIds:u}:void 0,configurable:!0}),l}async _generateCached({prompts:n,cache:r,llmStringKey:s,parsedOptions:i,handledOptions:a,runId:o}){const l=await Cn.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:n.length},d=await(l==null?void 0:l.handleLLMStart(this.toJSON(),n,o,void 0,u,void 0,void 0,a==null?void 0:a.runName)),h=[],p=(await Promise.allSettled(n.map(async(x,g)=>{const f=await r.lookup(x,s);return f==null&&h.push(g),f}))).map((x,g)=>({result:x,runManager:d==null?void 0:d[g]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),y=[];await Promise.all(p.map(async({result:x,runManager:g},f)=>{if(x.status==="fulfilled"){const v=x.value;return y[f]=v.map(b=>(b.generationInfo={...b.generationInfo,tokenUsage:{}},b)),v.length&&await(g==null?void 0:g.handleLLMNewToken(v[0].text)),g==null?void 0:g.handleLLMEnd({generations:[v]},void 0,void 0,void 0,{cached:!0})}else return await(g==null?void 0:g.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const w={generations:y,missingPromptIndices:h,startedRunManagers:d};return Object.defineProperty(w,$c,{value:d?{runIds:d==null?void 0:d.map(x=>x.runId)}:void 0,configurable:!0}),w}async generate(n,r,s){if(!Array.isArray(n))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;const[a,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=a.callbacks??s,!this.cache)return this._generateUncached(n,o,a);const{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),{generations:d,missingPromptIndices:h,startedRunManagers:m}=await this._generateCached({prompts:n,cache:l,llmStringKey:u,parsedOptions:o,handledOptions:a,runId:a.runId});let p={};if(h.length>0){const y=await this._generateUncached(h.map(w=>n[w]),o,a,m!==void 0?h.map(w=>m==null?void 0:m[w]):void 0);await Promise.all(y.generations.map(async(w,x)=>{const g=h[x];return d[g]=w,l.update(n[g],u,w)})),p=y.llmOutput??{}}return{generations:d,llmOutput:p}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},XW=class extends ZR{async _generate(t,e,n){return{generations:await Promise.all(t.map((s,i)=>this._call(s,{...e,promptIndex:i},n).then(a=>[{text:a}])))}}},QW={};De(QW,{chunkArray:()=>e8});const e8=(t,e)=>t.reduce((n,r,s)=>{const i=Math.floor(s/e),a=n[i]||[];return n[i]=a.concat([r]),n},[]);var t8={};De(t8,{Embeddings:()=>n8});var n8=class{constructor(t){T(this,"caller");this.caller=new iu(t??{})}},r8={};De(r8,{BaseToolkit:()=>s8,DynamicStructuredTool:()=>QR,DynamicTool:()=>XR,StructuredTool:()=>Gx,Tool:()=>JR,ToolInputParsingException:()=>Ih,isLangChainTool:()=>Ym,isRunnableToolLike:()=>Px,isStructuredTool:()=>Ox,isStructuredToolParams:()=>jx,tool:()=>i8});var Gx=class extends Mx{constructor(e){super(e??{});T(this,"returnDirect",!1);T(this,"verboseParsingErrors",!1);T(this,"responseFormat","content");T(this,"defaultConfig");this.verboseParsingErrors=(e==null?void 0:e.verboseParsingErrors)??this.verboseParsingErrors,this.responseFormat=(e==null?void 0:e.responseFormat)??this.responseFormat,this.defaultConfig=(e==null?void 0:e.defaultConfig)??this.defaultConfig,this.metadata=(e==null?void 0:e.metadata)??this.metadata}get lc_namespace(){return["langchain","tools"]}async invoke(e,n){let r,s=Be(jh(this.defaultConfig,n));return Jl(e)?(r=e.args,s={...s,toolCall:e}):r=e,this.call(r,s)}async call(e,n,r){const s=Jl(e)?e.args:e;let i;if(Yr(this.schema))try{i=await Vm(this.schema,s)}catch(y){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${y.message}`),XI(y)&&(w=`${w}

${Z9(y)}`),new Ih(w,JSON.stringify(e))}else{const y=rt(s,this.schema);if(!y.valid){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${y.errors.map(x=>`${x.keywordLocation}: ${x.error}`).join(`
`)}`),new Ih(w,JSON.stringify(e))}i=s}const a=Fm(n),o=Cn.configure(a.callbacks,this.callbacks,a.tags||r,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l=await(o==null?void 0:o.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),a.runId,void 0,void 0,void 0,a.runName));delete a.runId;let u;try{u=await this._call(i,l,a)}catch(y){throw await(l==null?void 0:l.handleToolError(y)),y}let d,h;if(this.responseFormat==="content_and_artifact")if(Array.isArray(u)&&u.length===2)[d,h]=u;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(u)}`);else d=u;let m;Jl(e)&&(m=e.id),!m&&Z4(a)&&(m=a.toolCall.id);const p=a8({content:d,artifact:h,toolCallId:m,name:this.name,metadata:this.metadata});return await(l==null?void 0:l.handleToolEnd(p)),p}},JR=class extends Gx{constructor(e){super(e);T(this,"schema",Km({input:qm().optional()}).transform(e=>e.input))}call(e,n){const r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,n)}},XR=class extends JR{constructor(e){super(e);T(this,"name");T(this,"description");T(this,"func");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}static lc_name(){return"DynamicTool"}async call(e,n){const r=Fm(n);return r.runName===void 0&&(r.runName=this.name),super.call(e,r)}async _call(e,n,r){return this.func(e,n,r)}},QR=class extends Gx{constructor(e){super(e);T(this,"name");T(this,"description");T(this,"func");T(this,"schema");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}static lc_name(){return"DynamicStructuredTool"}async call(e,n,r){const s=Fm(n);return s.runName===void 0&&(s.runName=this.name),super.call(e,s,r)}_call(e,n,r){return this.func(e,n,r)}},s8=class{getTools(){return this.tools}};function i8(t,e){var a;const n=Tx(e.schema),r=rc(e.schema);if(!e.schema||n||r)return new XR({...e,description:e.description??((a=e.schema)==null?void 0:a.description)??`${e.name} tool`,func:async(o,l,u)=>new Promise((d,h)=>{const m=tt(u,{callbacks:l==null?void 0:l.getChild()});Nr.runWithConfig(js(m),async()=>{try{d(t(o,m))}catch(p){h(p)}})})});const s=e.schema,i=e.description??e.schema.description??`${e.name} tool`;return new QR({...e,description:i,schema:s,func:async(o,l,u)=>new Promise((d,h)=>{let m;const p=()=>{u!=null&&u.signal&&m&&u.signal.removeEventListener("abort",m)};u!=null&&u.signal&&(m=()=>{p(),h(Pc(u.signal))},u.signal.addEventListener("abort",m));const y=tt(u,{callbacks:l==null?void 0:l.getChild()});Nr.runWithConfig(js(y),async()=>{var w;try{const x=await t(o,y);if((w=u==null?void 0:u.signal)!=null&&w.aborted){p();return}p(),d(x)}catch(x){p(),h(x)}})})})}function a8(t){const{content:e,artifact:n,toolCallId:r,metadata:s}=t;return r&&!Qv(e)?typeof e=="string"||Array.isArray(e)&&e.every(i=>typeof i=="object")?new as({status:"success",content:e,artifact:n,tool_call_id:r,name:t.name,metadata:s}):new as({status:"success",content:o8(e),artifact:n,tool_call_id:r,name:t.name,metadata:s}):e}function o8(t){try{return JSON.stringify(t,null,2)??""}catch{return`${t}`}}const l8=1e3,c8=200;function u8(t,e,n){const r=n.split(`
`),s=d8(t,e,n,r);return s.length>0?s:h8(t,e,n,r)}function d8(t,e,n,r){var h;const s=[],i=((h=e.split(".").pop())==null?void 0:h.toLowerCase())||"",a=m8(i);if(!a)return[];let o=[],l=1,u=0,d=!1;for(let m=0;m<r.length;m++){const p=r[m],y=m+1;if(p.match(a.start)&&!d){o.length>0&&s.push(sc(t,e,o.join(`
`),l,y-1)),o=[p],l=y,d=!0,u=Mk(p);continue}if(d&&(o.push(p),u+=Mk(p),u===0&&o.length>1)){const x=o.join(`
`);x.length>50&&s.push(sc(t,e,x,l,y)),o=[],d=!1}}return o.length>0&&s.push(sc(t,e,o.join(`
`),l,r.length)),s.length>0?s:[]}function h8(t,e,n,r){const s=[];let i=[],a=0,o=1;for(let l=0;l<r.length;l++){const u=r[l],d=u.length+1;if(a+d>l8&&i.length>0){s.push(sc(t,e,i.join(`
`),o,l));const h=i.slice(-Math.floor(c8/50));i=h,a=h.join(`
`).length,o=l-h.length+1}i.push(u),a+=d}return i.length>0&&s.push(sc(t,e,i.join(`
`),o,r.length)),s}function m8(t){return{js:{start:/^(export\s+)?(async\s+)?(function|class|const|let|var)\s+\w+/},ts:{start:/^(export\s+)?(async\s+)?(function|class|const|let|var|interface|type|enum)\s+\w+/},jsx:{start:/^(export\s+)?(function|const|class)\s+\w+|^const\s+\w+\s*=\s*(\(|async\s*\()/},tsx:{start:/^(export\s+)?(function|const|class|interface|type)\s+\w+|^const\s+\w+\s*[:=]\s*(\(|async\s*\()/},py:{start:/^(def|class|async\s+def)\s+\w+/},java:{start:/^(public|private|protected)?\s*(static\s+)?(class|interface|enum)\s+\w+/},go:{start:/^(func|type|const|var)\s+\w+/},rs:{start:/^(pub\s+)?(fn|struct|enum|impl|trait|mod)\s+\w+/},cpp:{start:/^(class|struct|namespace|template)\s+\w+|^\w+\s*::\s*\w+\s*\(/},c:{start:/^(struct|typedef|enum)\s+\w+|^\w+\s+\w+\s*\(/}}[t]||null}function Mk(t){const e=(t.match(/\{/g)||[]).length,n=(t.match(/\}/g)||[]).length;return e-n}function sc(t,e,n,r,s){return{id:`${t}:${e}:${r}:${s}`,repoName:t,path:e,content:n.trim(),startLine:r,endLine:s}}const eO="text-embedding-3-small";async function p8(t){const e=jo();if(!e)throw new Error("OpenAI API key is required for embeddings");const n=100,r=[];for(let s=0;s<t.length;s+=n){const i=t.slice(s,s+n),a=await f8(i,e);r.push(...a)}return r}async function f8(t,e){var n;try{const r=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:eO,input:t.map(i=>i.content)})});if(!r.ok){const i=await r.json().catch(()=>({error:{message:r.statusText}}));throw new Error(`Embedding API error: ${((n=i.error)==null?void 0:n.message)||r.statusText}`)}const s=await r.json();return t.map((i,a)=>({id:i.id,values:s.data[a].embedding,metadata:{repoName:i.repoName,path:i.path,startLine:i.startLine,endLine:i.endLine}}))}catch(r){throw console.error("Error generating embeddings:",r),new Error(`Failed to generate embeddings: ${r.message}`)}}async function g8(t){var n;const e=jo();if(!e)throw new Error("OpenAI API key is required for embeddings");try{const r=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:eO,input:t})});if(!r.ok){const i=await r.json().catch(()=>({error:{message:r.statusText}}));throw new Error(`Embedding API error: ${((n=i.error)==null?void 0:n.message)||r.statusText}`)}return(await r.json()).data[0].embedding}catch(r){throw console.error("Error generating query embedding:",r),new Error(`Failed to generate query embedding: ${r.message}`)}}const y8="gitscribe-rag",v8=1,ls="vectors";let Gn=null;async function uu(){return new Promise((t,e)=>{const n=indexedDB.open(y8,v8);n.onerror=()=>e(new Error("Failed to open IndexedDB")),n.onsuccess=()=>{Gn=n.result,t()},n.onupgradeneeded=r=>{const s=r.target.result;if(!s.objectStoreNames.contains(ls)){const i=s.createObjectStore(ls,{keyPath:"id"});i.createIndex("repoName","metadata.repoName",{unique:!1}),i.createIndex("path","metadata.path",{unique:!1})}}})}async function x8(t,e){return Gn||await uu(),new Promise((n,r)=>{if(!Gn){r(new Error("Database not initialized"));return}const i=Gn.transaction([ls],"readwrite").objectStore(ls);let a=0,o=!1;const l=new Map(e.map(u=>[u.id,u.content]));t.forEach(u=>{const d={...u,content:l.get(u.id)||""},h=i.put(d);h.onsuccess=()=>{a++,a===t.length&&!o&&n()},h.onerror=()=>{o||(o=!0,r(new Error("Failed to store vector")))}}),t.length===0&&n()})}async function w8(t){return Gn||await uu(),new Promise((e,n)=>{if(!Gn){n(new Error("Database not initialized"));return}const a=Gn.transaction([ls],"readonly").objectStore(ls).index("repoName").getAll(t);a.onsuccess=()=>{e(a.result||[])},a.onerror=()=>{n(new Error("Failed to retrieve vectors"))}})}async function b8(){return Gn||await uu(),new Promise((t,e)=>{if(!Gn){e(new Error("Database not initialized"));return}const s=Gn.transaction([ls],"readonly").objectStore(ls).getAll();s.onsuccess=()=>{t(s.result||[])},s.onerror=()=>{e(new Error("Failed to retrieve vectors"))}})}async function _8(t){return Gn||await uu(),new Promise((e,n)=>{if(!Gn){n(new Error("Database not initialized"));return}const a=Gn.transaction([ls],"readwrite").objectStore(ls).index("repoName").openCursor(IDBKeyRange.only(t));let o=0,l=0;a.onsuccess=u=>{const d=u.target.result;if(d){l++;const h=d.delete();h.onsuccess=()=>{o++,d.continue()},h.onerror=()=>{n(new Error("Failed to delete vector"))}}else l===0||o===l?e():n(new Error("Some vectors failed to delete"))},a.onerror=()=>{n(new Error("Failed to delete vectors"))}})}async function S8(t,e,n=5){const r=await g8(t),s=e?await w8(e):await b8();if(s.length===0)return[];const i=s.map(o=>{const l=k8(r,o.values);return{doc:T8(o),score:l}}),a=i.sort((o,l)=>l.score-o.score).slice(0,n);if(a.length===0){if(console.warn(`[RAG] No results found for query: "${t}" (repo: ${e||"all"})`),console.warn(`[RAG] Total vectors searched: ${s.length}`),s.length>0){const o=i.slice(0,5).map(l=>l.score);console.warn(`[RAG] Top 5 similarity scores: ${o.join(", ")}`)}}else console.log(`[RAG] Found ${a.length} results for query: "${t.substring(0,50)}..." (repo: ${e||"all"})`),console.log(`[RAG] Similarity scores: ${a.map(o=>o.score.toFixed(3)).join(", ")}`);return a.filter(o=>o.score>.3)}function k8(t,e){if(t.length!==e.length)throw new Error("Vectors must have the same length");let n=0,r=0,s=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a],r+=t[a]*t[a],s+=e[a]*e[a];const i=Math.sqrt(r)*Math.sqrt(s);return i===0?0:n/i}function T8(t){return{id:t.id,repoName:t.metadata.repoName,path:t.metadata.path,content:t.content,startLine:t.metadata.startLine,endLine:t.metadata.endLine}}function A8(t){return t.length===0?"":t.map((n,r)=>{const{doc:s}=n,i=s.startLine&&s.endLine?`lines ${s.startLine}-${s.endLine}`:"file";return`[Context ${r+1}] ${s.path} (${i}):
${s.content}`}).join(`

`)}async function E8(t){console.log(`[RAG] Indexing repository: ${t.fullName}`),await uu(),await _8(t.fullName);const e=await Sv(t.owner,t.name,"",t.defaultBranch,void 0,5),n=["package-lock.json","yarn.lock","pnpm-lock.yaml","node_modules",".git",".vscode",".idea","dist","build",".next",".nuxt",".cache",".DS_Store","Thumbs.db"],r=[".png",".jpg",".jpeg",".gif",".svg",".ico",".webp",".woff",".woff2",".ttf",".eot",".otf",".mp4",".mp3",".avi",".mov",".wmv",".zip",".tar",".gz",".rar",".7z",".exe",".dll",".so",".dylib",".bin",".pdf",".xlsx",".xls",".docx",".doc"],s=[/\.sql$/i,/migration/i,/seed/i,/schema/i,/fixture/i,/mock.*data/i,/\.db$/i,/\.sqlite$/i,/\.sqlite3$/i,/prisma/i,/typeorm/i,/sequelize/i,/drizzle/i,/knex/i,/database/i,/models?\.(ts|js|py|java|go|rs)$/i],a=e.filter(d=>{const h=d.toLowerCase();return n.some(p=>h.includes(p.toLowerCase()))?!1:s.some(p=>p.test(d))?!0:!r.some(p=>h.endsWith(p))}).sort((d,h)=>{const m=s.some(y=>y.test(d)),p=s.some(y=>y.test(h));return m&&!p?-1:!m&&p?1:0});console.log(`[RAG] Found ${a.length} files to index (out of ${e.length} total)`);const o=[],l=5e5;for(const d of a)try{const h=await qr(t.owner,t.name,d,t.defaultBranch);if(h){if(h.length>l){console.warn(`[RAG] Skipping large file: ${d} (${h.length} chars)`);continue}const m=(h.match(/\0/g)||[]).length,p=(h.match(/[\x00-\x08\x0E-\x1F\x7F-\x9F]/g)||[]).length;if(m>0||p/h.length>.1){console.warn(`[RAG] Skipping binary file: ${d}`);continue}const y=u8(t.fullName,d,h);o.push(...y)}}catch(h){console.warn(`[RAG] Failed to process ${d}:`,h)}if(console.log(`[RAG] Created ${o.length} chunks`),o.length===0)return 0;console.log("[RAG] Generating embeddings...");const u=await p8(o);return console.log(`[RAG] Storing ${u.length} vectors...`),await x8(u,o),console.log(`[RAG] Successfully indexed ${u.length} chunks for ${t.fullName}`),u.length}async function ao(t,e,n=5){const r=await S8(t,e,n);return A8(r)}function tO(t){try{localStorage.setItem("openai_api_key",t),console.log("OpenAI API key stored successfully")}catch(e){throw console.error("Failed to store OpenAI API key:",e),new Error("Could not store OpenAI API key in localStorage")}}function jo(){try{const t=localStorage.getItem("openai_api_key");if(t)return t}catch{console.warn("Could not access localStorage for OpenAI API key")}return null}const C8=()=>{const t=jo();if(!t)throw new Error("OpenAI API key not configured. Please go to Settings and enter your API key.");return t.startsWith("sk-")||console.warn('[LangChain] API key does not start with "sk-" - it may be invalid'),t},N8=(t="gpt-4o-mini",e=.7,n)=>{const r=C8();if(typeof window<"u"){const a=window.fetch;window.fetch=async(o,l)=>{var h,m;const u=typeof o=="string"?o:o instanceof URL?o.href:o.url;if(u.includes("api.openai.com/v1/chat/completions")||u.startsWith("/api/openai/chat/completions")&&(l==null?void 0:l.method)==="POST")try{const p=l!=null&&l.body?JSON.parse(l.body):{},y=!1,w=y?"/api/openai/chat/completions":"https://api.openai.com/v1/chat/completions";if(!r)throw new Error("OpenAI API key is not configured. Please set your API key in Settings.");console.log("[LangChain] Routing OpenAI API call:",{mode:y?"dev (proxy)":"production (direct)",url:w,model:p.model||t,messagesCount:((h=p.messages)==null?void 0:h.length)||0,apiKeyPresent:!!r,apiKeyPrefix:r.substring(0,10)+"..."});const x={"Content-Type":"application/json"};y||(x.Authorization=`Bearer ${r}`);const g=await a(w,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r,...x},body:JSON.stringify({messages:p.messages||[],model:p.model||t,temperature:p.temperature||e,max_tokens:p.max_tokens||p.maxTokens||n||4096})});if(!g.ok){let f="Request failed",v=null;try{v=await g.json(),f=((m=v.error)==null?void 0:m.message)||v.error||v.message||f}catch{f=await g.text()||f}throw console.error("[LangChain] Request error:",{status:g.status,statusText:g.statusText,url:w,mode:y?"dev (proxy)":"production (direct)",error:v||f,apiKeyPresent:!!r,apiKeyPrefix:r?`${r.substring(0,10)}...`:"MISSING"}),g.status===404&&!y?new Error("OpenAI API endpoint not found (404). This may be a CORS issue. Consider using a backend proxy in production."):g.status===401?new Error("OpenAI API key is missing or invalid. Please check your API key in Settings."):g.status===403?new Error("Access forbidden. Check your API key permissions and account status."):new Error(`Request failed: ${f} (${g.status})`)}return g}catch(p){throw console.error("[LangChain] Proxy request failed:",p),p}return a(o,l)}}const i={modelName:t,temperature:e,apiKey:r};return n&&(i.maxTokens=n,i.max_tokens=n),new ZW(i)};async function Ms(t,e,n="gpt-4o-mini",r=.7,s,i=!0,a){const o=a||(n.includes("gpt-4o")?16384:4096),l=N8(n,r,o),u=new zR,d=t.includes("Relevant Code Context:")||t.includes("RAG context")||t.includes("ACTUAL CODE FROM REPOSITORY");let h="";if(i&&s&&!d)try{const w=await ao(t,s,10);w&&(h=`

Relevant code context:
${w}
`)}catch(w){console.warn("[LangChain] RAG retrieval failed, continuing without context:",w)}else i&&s&&d&&console.log("[LangChain] RAG context already in prompt, skipping retrieval");const m=[];e&&m.push(new Ps(e));const p=h&&!d?`${h}

User query: ${t}`:t;m.push(new us(p));const y=qo.from([l,u]);try{const w=await y.invoke(m),x=typeof w=="string"?w.length:JSON.stringify(w).length,g=typeof w=="string"?w.split(/\s+/).length:0;return console.log(`[LangChain] Response received: ${g} words, ${x} characters, maxTokens was: ${o}`),g<1e3&&o>=8e3&&console.warn(`[LangChain] WARNING: Response is very short (${g} words) despite high maxTokens (${o}). Model may have stopped early.`),w}catch(w){console.error("[LangChain] Error in callLangChain:",w);let x=w.message||"Unknown error";throw x.includes("API key")||x.includes("401")?x="OpenAI API key is missing or invalid. Please configure your API key in settings.":x.includes("CORS")||x.includes("cors")?x="CORS error. Make sure your OpenAI API key is configured correctly.":x.includes("network")||x.includes("fetch")?x="Network error. Please check your internet connection and try again.":x.includes("timeout")&&(x="Request timed out. Please try again."),new Error(x)}}const nO=Object.freeze(Object.defineProperty({__proto__:null,callLangChain:Ms,getOpenAIApiKey:jo,setOpenAIApiKey:tO},Symbol.toStringTag,{value:"Module"}));async function I8(t){console.log("[RepoAnalysis] Starting repository analysis...");const e={currentStep:pe.ANALYSIS,repoAnalyses:new Map};if(!t.discoveredRepos||t.discoveredRepos.length===0)return e.errors=new Map([["analysis","No repositories to analyze"]]),e;const n=dn(),r=new Map,s=t.discoveredRepos.length;let i=0;const a=t.discoveredRepos.map(async l=>{try{console.log(`[RepoAnalysis] Starting analysis for ${l.fullName}`);const[u,d]=l.fullName.split("/"),h=l.defaultBranch||"main",[m,p,y]=await Promise.all([qr(u,d,"README.md",h,n||void 0).catch(()=>null),qr(u,d,"package.json",h,n||void 0).catch(()=>null),Ss(u,d,"",h,n||void 0).catch(()=>[])]);let w=null;if(p)try{w=JSON.parse(p)}catch{console.warn(`[RepoAnalysis] Failed to parse package.json for ${l.fullName}`)}const x=[],g=[],f=[];if(w){if(w.dependencies){const N=Object.keys(w.dependencies);N.includes("react")&&g.push("React"),N.includes("vue")&&g.push("Vue"),N.includes("angular")&&g.push("Angular"),N.includes("next")&&g.push("Next.js"),N.includes("express")&&g.push("Express"),N.includes("fastify")&&g.push("Fastify")}x.push(w.language||"JavaScript")}const v=new Set;y.forEach(N=>{var D;if(N.type==="file"){const F=(D=N.name.split(".").pop())==null?void 0:D.toLowerCase();F&&v.add(F)}}),(v.has("ts")||v.has("tsx"))&&x.push("TypeScript"),(v.has("js")||v.has("jsx"))&&x.push("JavaScript"),v.has("py")&&x.push("Python"),v.has("java")&&x.push("Java"),v.has("go")&&x.push("Go"),v.has("rs")&&x.push("Rust"),y.forEach(N=>{N.type==="file"&&!N.name.startsWith(".")&&f.push(N.name)});let b="",_=[],E=[...x,...g],C="moderate";try{const N=y.filter(Y=>Y.type==="file"&&(Y.name.includes("migration")||Y.name.includes("seed")||Y.name.includes("schema")||Y.name.includes("model")||Y.name.endsWith(".sql")||Y.name.includes("prisma")||Y.name.includes("database"))).slice(0,5).map(Y=>Y.name),D=`Analyze this GitHub repository and provide comprehensive insights:

Repository: ${l.fullName}
Description: ${l.description||"No description"}
Language: ${l.language||x.join(", ")||"Unknown"}
Has README: ${m?"Yes":"No"}
Has package.json: ${w?"Yes":"No"}
Main files: ${f.slice(0,10).join(", ")}
${N.length>0?`Database-related files found: ${N.join(", ")}`:""}

${w?`Package.json dependencies: ${Object.keys(w.dependencies||{}).slice(0,20).join(", ")}`:""}
${m?`
README content (first 1000 chars):
${m.substring(0,1e3)}`:""}

CRITICAL: First understand what this application DOES - its purpose, role, and main functionality. 
Pay special attention to database schemas, migrations, seed data, and data models - these often reveal what the application actually does.
Then provide:

1. A comprehensive summary (4-6 sentences) explaining:
   - What the application/project does
   - Its primary purpose and role
   - Main problem it solves
   - Key value proposition
   - Target users or use cases
2. 5-8 key features or capabilities (be specific about what the app can do)
3. The primary tech stack (languages, frameworks, tools)
4. Complexity level (simple/moderate/complex)

Format as JSON:
{
  "summary": "Comprehensive 4-6 sentence explanation of what this application does, its purpose, role, and main functionality...",
  "keyFeatures": ["Feature 1", "Feature 2", ...],
  "techStack": ["Technology 1", "Technology 2", ...],
  "complexity": "simple|moderate|complex"
}`;E8(l).catch(Y=>console.warn(`[RepoAnalysis] RAG indexing failed for ${l.fullName}:`,Y));const F=await Ms(D,"You are a technical analyst. Provide concise, accurate analysis of code repositories.","gpt-4o-mini",.3,l.fullName,!0);try{const Y=JSON.parse(F);b=Y.summary||"",_=Y.keyFeatures||[],Y.techStack&&(E=[...new Set([...E,...Y.techStack])]),C=Y.complexity||"moderate"}catch{b=F.split(`
`)[0]||`A ${l.language||"software"} project`}}catch{console.warn(`[RepoAnalysis] AI analysis failed for ${l.fullName}, using fallback`),b=l.description||`A ${l.language||"software"} project`,_=g.length>0?g:["General purpose"]}if(!C||C==="moderate"){const N=y.length,D=y.some(Y=>Y.name.includes("test")||Y.name.includes("spec")),F=y.some(Y=>Y.name.includes("config")||Y.name.includes(".json")||Y.name.includes(".yaml"));N<10&&!D&&!F?C="simple":N>50||D&&F&&w?C="complex":C="moderate"}const S={repo:l,structure:{languages:[...new Set(x)],frameworks:[...new Set(g)],hasReadme:!!m,hasPackageJson:!!w,hasConfigFiles:y.some(N=>N.name.includes("config")),mainFiles:f.slice(0,20)},summary:b||l.description||`A ${l.language||"software"} project`,keyFeatures:_.length>0?_:["General purpose application"],techStack:[...new Set(E)],complexity:C};return i++,e.progress={current:i,total:s,currentRepo:l.fullName,currentAgent:"RepoAnalysis"},console.log(`[RepoAnalysis] Completed analysis for ${l.fullName} (${i}/${s})`),{repoFullName:l.fullName,analysis:S,error:null}}catch(u){return i++,console.error(`[RepoAnalysis] Error analyzing ${l.fullName}:`,u),e.progress={current:i,total:s,currentRepo:l.fullName,currentAgent:"RepoAnalysis"},{repoFullName:l.fullName,analysis:null,error:{key:`analysis_${l.fullName}`,message:u.message||"Analysis failed"}}}}),o=await Promise.all(a);for(const l of o)l.analysis?r.set(l.repoFullName,l.analysis):l.error&&(e.errors||(e.errors=new Map),e.errors.set(l.error.key,l.error.message));return e.repoAnalyses=r,e.completedSteps=new Set([...t.completedSteps||[],pe.ANALYSIS]),e.progress={current:t.discoveredRepos.length,total:t.discoveredRepos.length,currentAgent:"RepoAnalysis"},console.log(`[RepoAnalysis] Completed analysis for ${r.size} repositories`),e}async function R8(t){console.log("[DocsPlanner] Starting documentation planning...");const e={currentStep:pe.PLANNING,documentationPlans:new Map};if(!t.repoAnalyses||t.repoAnalyses.size===0)return e.errors=new Map([["planning","No repository analyses available"]]),e;const n=new Map,r=t.repoAnalyses.size;let s=0;const i=Array.from(t.repoAnalyses.entries()).map(async([o,l])=>{try{console.log(`[DocsPlanner] Starting planning for ${o}`);const u=`Create a documentation plan for this repository:

Repository: ${o}
Summary: ${l.summary}
Key Features: ${l.keyFeatures.join(", ")}
Tech Stack: ${l.techStack.join(", ")}
Complexity: ${l.complexity}
Has README: ${l.structure.hasReadme}
Has package.json: ${l.structure.hasPackageJson}
Main Files: ${l.structure.mainFiles.slice(0,10).join(", ")}

Create a comprehensive documentation plan with sections. Consider:
- Overview/Introduction
- Features and capabilities
- Setup/Installation instructions
- API documentation (if applicable)
- Architecture/Structure
- Examples/Usage

Return JSON format:
{
  "sections": [
    {
      "title": "Section Title",
      "type": "overview|features|setup|api|architecture|examples",
      "priority": 1-10,
      "estimatedTokens": 500
    }
  ],
  "estimatedLength": 5000,
  "focusAreas": ["area1", "area2"],
  "style": "technical|user-friendly|comprehensive"
}`;let d;try{const h=await Ms(u,"You are a documentation planning expert. Create detailed, structured documentation plans.","gpt-4o-mini",.4),m=JSON.parse(h);d={repo:l.repo,sections:m.sections.map(p=>({title:p.title,type:p.type||"overview",priority:p.priority||5,estimatedTokens:p.estimatedTokens||500})),estimatedLength:m.estimatedLength||5e3,focusAreas:m.focusAreas||l.keyFeatures,style:m.style||"comprehensive"}}catch{console.warn(`[DocsPlanner] AI planning failed for ${o}, using default plan`),d={repo:l.repo,sections:[{title:"Overview",type:"overview",priority:10,estimatedTokens:300},{title:"Features",type:"features",priority:9,estimatedTokens:500},{title:"Setup",type:"setup",priority:8,estimatedTokens:400},{title:"Architecture",type:"architecture",priority:7,estimatedTokens:600},{title:"Examples",type:"examples",priority:6,estimatedTokens:400}],estimatedLength:3e3,focusAreas:l.keyFeatures,style:"comprehensive"}}return d.sections.sort((h,m)=>m.priority-h.priority),s++,e.progress={current:s,total:r,currentRepo:o,currentAgent:"DocsPlanner"},console.log(`[DocsPlanner] Completed planning for ${o} (${s}/${r})`),{repoFullName:o,plan:d,error:null}}catch(u){return s++,console.error(`[DocsPlanner] Error planning for ${o}:`,u),e.progress={current:s,total:r,currentRepo:o,currentAgent:"DocsPlanner"},{repoFullName:o,plan:null,error:{key:`planning_${o}`,message:u.message||"Planning failed"}}}}),a=await Promise.all(i);for(const o of a)o.plan?n.set(o.repoFullName,o.plan):o.error&&(e.errors||(e.errors=new Map),e.errors.set(o.error.key,o.error.message));return e.documentationPlans=n,e.completedSteps=new Set([...t.completedSteps||[],pe.PLANNING]),e.progress={current:r,total:r,currentAgent:"DocsPlanner"},console.log(`[DocsPlanner] Completed planning for ${n.size} repositories`),e}async function O8(t,e,n={}){var a;const r=((a=t.sections)==null?void 0:a.sort((o,l)=>o.order-l.order))||[];let s="";s=`${t.title}

`;const i=[];if(r.forEach(o=>{let l="";const u=o.type.toLowerCase(),d=o.props||{};switch(u){case"hero":d.title?(l=`A hero section featuring "${d.title}"`,d.subtitle&&(l+=` with the message "${d.subtitle}"`)):l="A hero section";break;case"features":d.title?(l=`A features section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` highlighting ${d.items.length} key feature${d.items.length!==1?"s":""}`)):l="A features section";break;case"pricing":d.title?(l=`A pricing section titled "${d.title}"`,d.tiers&&Array.isArray(d.tiers)&&(l+=` with ${d.tiers.length} pricing tier${d.tiers.length!==1?"s":""}`)):l="A pricing section";break;case"testimonials":d.title?(l=`A testimonials section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` featuring ${d.items.length} testimonial${d.items.length!==1?"s":""}`)):l="A testimonials section";break;case"faq":d.title?(l=`An FAQ section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` with ${d.items.length} question${d.items.length!==1?"s":""} and answer${d.items.length!==1?"s":""}`)):l="An FAQ section";break;case"gallery":d.title?(l=`A gallery section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` showcasing ${d.items.length} item${d.items.length!==1?"s":""}`)):l="A gallery section";break;case"contact":if(d.title){if(l=`A contact section titled "${d.title}"`,d.email||d.phone||d.address){const h=[];d.email&&h.push("email"),d.phone&&h.push("phone"),d.address&&h.push("address"),l+=` with contact information (${h.join(", ")})`}}else l="A contact section";break;case"about":d.title?(l=`An about section titled "${d.title}"`,d.content&&(l+=" with detailed content")):l="An about section";break;case"cta":d.title?(l=`A call-to-action section titled "${d.title}"`,d.ctaLabel&&(l+=` with a "${d.ctaLabel}" button`)):l="A call-to-action section";break;case"footer":d.companyName?(l=`A footer section for ${d.companyName}`,d.links&&Array.isArray(d.links)&&(l+=` with ${d.links.length} link${d.links.length!==1?"s":""}`)):l="A footer section";break;case"navbar":l="A navigation bar";break;default:l=`A ${o.type} section`}i.push(l)}),i.length===0)s+=`This is the ${t.title} page located at ${t.path}. The page is part of the ${e.name} project.

`,s+="Currently, this page does not have any sections configured.";else{s+=`This is the ${t.title} page located at ${t.path}. The page is part of the ${e.name} project.

`,s+=`This page contains the following content:

`,i.forEach((l,u)=>{s+=`${u+1}. ${l}.
`}),s+=`
Together, these sections create a ${t.title.toLowerCase()} page that `;const o=t.title.toLowerCase();o.includes("home")||t.path==="/"?s+=`serves as the main landing page for the website, introducing visitors to ${e.name} and providing key information and navigation options.`:o.includes("about")?s+=`provides information about ${e.name}, including background details and key information about the organization or service.`:o.includes("contact")?s+=`allows visitors to get in touch with ${e.name} through various contact methods.`:o.includes("pricing")||o.includes("plan")?s+=`displays pricing information and options for ${e.name}'s products or services.`:o.includes("service")?s+=`showcases the services or offerings provided by ${e.name}.`:o.includes("portfolio")||o.includes("gallery")||o.includes("work")?s+=`displays a collection of work, projects, or visual content for ${e.name}.`:o.includes("blog")||o.includes("article")?s+=`features blog posts, articles, or news content related to ${e.name}.`:s+=`provides relevant information and content related to ${t.title.toLowerCase()} for ${e.name}.`}return s}async function P8(t,e,n,r,s,i){const a=[];if(n){const l=n.split(`
`).filter(u=>u.trim().length>0).slice(0,5).join(" ");l.length>0&&a.push(`Project Description: ${l.substring(0,500)}`)}if(r&&(r.description&&a.push(`Package Description: ${r.description}`),r.name&&a.push(`Project Name: ${r.name}`),r.scripts)){const o=Object.keys(r.scripts).join(", ");a.push(`Available Scripts: ${o}`)}if(s&&s.pages){const o=s.pages.map(u=>u.title).join(", ");a.push(`Pages: ${o}`);const l=[];if(s.pages.forEach(u=>{u.sections&&Array.isArray(u.sections)&&u.sections.forEach(d=>{d.type&&l.push(d.type)})}),l.length>0){const u=[...new Set(l)];a.push(`Site Features: ${u.join(", ")} sections`)}}try{const o="You are a technical documentation expert. Analyze the provided information about a website or web application and write a clear, comprehensive explanation of what the site does, its purpose, and its main features. Write in a professional but accessible tone.",l=`Based on the following information about the website "${t}" (${e}/${t}), write a comprehensive explanation of what this site does:

${a.join(`

`)}

Please provide:
1. A clear explanation of the site's purpose and what it does
2. The main features and functionality
3. Who the target audience might be
4. What users can accomplish with this site

Write 2-4 paragraphs that clearly explain what this site does.`;return await Ms(l,o,"gpt-4o-mini",.7)}catch{return j8(t,e,a,i)}}function j8(t,e,n,r){let s=`## What This Site Does

`;if(s+=`The **${t}** website is a web application developed by ${e}. `,r&&r.length>0){const i=r.map(a=>a.title.toLowerCase());i.some(a=>a.includes("home")||a.includes("landing"))&&(s+="This site serves as a digital presence with a landing page that introduces visitors to the project. "),i.some(a=>a.includes("about"))&&(s+="It includes an About page that provides information about the organization or project. "),i.some(a=>a.includes("contact"))&&(s+="Visitors can get in touch through a dedicated Contact page. "),i.some(a=>a.includes("service")||a.includes("feature"))&&(s+="The site showcases services or features offered by the project. "),i.some(a=>a.includes("product")||a.includes("shop")||a.includes("store"))&&(s+="It includes e-commerce functionality with product listings and shopping capabilities. "),i.some(a=>a.includes("blog")||a.includes("article"))&&(s+="The site features a blog or article section for content publishing. "),i.some(a=>a.includes("portfolio")||a.includes("gallery"))&&(s+="It displays a portfolio or gallery showcasing work, projects, or visual content. "),i.some(a=>a.includes("pricing")||a.includes("plan"))&&(s+="Pricing information and plans are available for users to review. "),i.some(a=>a.includes("dashboard"))&&(s+="The site includes a dashboard with analytics, data visualization, and user management features. "),s+=`

`,s+=`**Main Pages:** The site consists of ${r.length} main page${r.length!==1?"s":""}: ${r.map(a=>a.title).join(", ")}. `,s+="Each page serves a specific purpose in providing information and functionality to visitors."}else s+="Based on the repository structure, this appears to be a web application with various features and functionality. ",s+="The site likely provides information, services, or tools related to the project's purpose.";if(n.length>0){s+=`

**Technical Details:** `;const i=n.filter(a=>!a.includes("Pages:")&&!a.includes("Site Features:"));i.length>0&&(s+=i.join(". ")+".")}return s}async function $8(t,e={}){var w,x,g;const n=ym(t);if(!n)throw new Error("Invalid GitHub URL. Please use format: https://github.com/owner/repo or owner/repo");const{owner:r,repo:s,branch:i="main"}=n,a=dn();let o="";o=`# Documentation for ${r}/${s}

`,o+=`**Repository:** ${r}/${s}  
`,o+=`**Branch:** ${i}  
`,o+=`**Generated:** ${new Date().toISOString()}

`,o+=`---

`;let l=null;try{l=await qr(r,s,"README.md",i,a||void 0)}catch{}l&&(o+=`## Project Overview

`,o+=`${l}

`,o+=`---

`);let u=null;try{const f=await qr(r,s,"package.json",i,a||void 0);if(f){if(u=JSON.parse(f),o+=`## Project Configuration

`,o+=`**Name:** ${u.name||s}

`,u.description&&(o+=`**Description:** ${u.description}

`),u.version&&(o+=`**Version:** ${u.version}

`),u.scripts&&(o+=`**Available Scripts:**

`,Object.entries(u.scripts).forEach(([v,b])=>{o+=`- \`${v}\`: ${b}
`}),o+=`
`),u.dependencies){const v=Object.keys(u.dependencies).length;o+=`**Dependencies:** ${v} packages

`}o+=`---

`}}catch{}const d=["project.json","export/project.json","src/project.json"];let h=null;for(const f of d)try{const v=await qr(r,s,f,i,a||void 0);if(v)try{h=JSON.parse(v);break}catch{}}catch{}let m="",p=null,y=null;h&&(p={id:"",user_id:"",name:h.name||s,description:h.description||"",theme:h.theme||{primary:"#3b82f6",secondary:"#8b5cf6",background:"#ffffff",text:"#1f2937",fontFamily:"Inter, sans-serif"},pages:((w=h.pages)==null?void 0:w.map(f=>({id:f.id||"",project_id:"",path:f.path,title:f.title,order:f.order||0,sections:f.sections||[]})))||[]},y=p.pages||[]);try{m=await P8(s,r,l,u,h,y),o+=`## What This Site Does

`,o+=`${m}

`,o+=`---

`}catch(f){console.warn("Could not generate AI explanation:",f.message)}if(h){o+=`## Site Structure

`,o+=`This project contains ${((x=h.pages)==null?void 0:x.length)||0} page${((g=h.pages)==null?void 0:g.length)!==1?"s":""}:

`;for(const f of p.pages.sort((v,b)=>v.order-b.order)){const v=await O8(f,p,e);o+=`${v}

`}}else{o+=`## Site Structure Analysis

`;try{const f=["app","pages","src/pages","src/app","components","src/components"],v=[],b=[];for(const C of f)try{const S=await Ss(r,s,C,i,a||void 0);for(const N of S)if(N.type==="file"&&(N.name.endsWith(".tsx")||N.name.endsWith(".jsx")||N.name.endsWith(".ts")||N.name.endsWith(".js")))C.includes("page")||N.name.includes("page")||N.path.includes("/page")?v.push(N.path):C.includes("component")&&b.push(N.path);else if(N.type==="dir")try{const D=await Ss(r,s,N.path,i,a||void 0);for(const F of D)F.type==="file"&&(F.name.endsWith(".tsx")||F.name.endsWith(".jsx"))&&(F.path.includes("page")||F.name==="page.tsx"||F.name==="page.jsx"?v.push(F.path):b.push(F.path))}catch{}}catch{}if(v.length>0&&(o+=`### Pages Found (${v.length})

`,v.forEach(C=>{o+=`- **${C}**
`}),o+=`
`),b.length>0){o+=`### Components Found (${b.length})

`;const C={};b.forEach(S=>{const N=S.split("/").slice(0,-1).join("/")||"root";C[N]||(C[N]=[]),C[N].push(S.split("/").pop()||S)}),Object.entries(C).forEach(([S,N])=>{o+=`**${S||"root"}:**
`,N.forEach(D=>{o+=`- ${D}
`}),o+=`
`})}const _=["next.config.js","next.config.ts","tailwind.config.js","tailwind.config.ts","tsconfig.json"];o+=`### Configuration Files

`;const E=[];for(const C of _)try{await qr(r,s,C,i,a||void 0)&&E.push(C)}catch{}E.length>0?E.forEach(C=>{o+=`**${C}** - Found and analyzed

`}):o+=`No configuration files found in the repository root.

`}catch(f){o+=`Unable to analyze repository structure: ${f.message}

`,o+=`This may be due to:
`,o+=`- Repository is private (requires GitHub token)
`,o+=`- Rate limiting (try again later or use a GitHub token)
`,o+=`- Invalid repository URL

`}}try{const f=await Ss(r,s,"",i,a||void 0);f.length>0&&(o+=`## Repository Structure

`,o+=`**Root Directory Contents:**

`,f.forEach(v=>{const b=v.type==="dir"?"":"";o+=`${b} ${v.name}
`}),o+=`
`)}catch{}return o}function Fk(t,e="documentation.md"){const n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}async function D8(t,e,n,r,s={},i){switch(e){case"markdown":return L8(n,r);case"markdown_mermaid":return await M8(n,r,t,i);case"mdx":return await U8(n,r);case"openapi":return await z8(n,r,t,i);case"html":return G8(n,r);default:return r}}function L8(t,e){const r=`${np(t)}

${e}`,s=r.split(/\s+/).length,i=r.length;return console.log(`[FormatGenerator] Markdown for ${t}: ${s} words, ${i} characters`),s<1e3&&console.warn(`[FormatGenerator] WARNING: Markdown content is very short (${s} words). Expected 0-6000+ words.`),r}async function M8(t,e,n,r){var a,o,l,u,d;const s=np(t);let i="";try{const h=ym(n);if(h){const{owner:m,repo:p,branch:y="main"}=h,w=dn();let x="";try{x=`Repository structure: ${(await Ss(m,p,"",y,w||void 0)).filter(C=>C.type==="dir").map(C=>C.name).join(", ")}`}catch{}const g=r?`Tech Stack: ${((a=r.techStack)==null?void 0:a.join(", "))||"Unknown"}
Frameworks: ${((l=(o=r.structure)==null?void 0:o.frameworks)==null?void 0:l.join(", "))||"Unknown"}
Languages: ${((d=(u=r.structure)==null?void 0:u.languages)==null?void 0:d.join(", "))||"Unknown"}`:"",f=`Based on this repository documentation and structure, generate a detailed Mermaid diagram for a ${t} section.

${g}
${x}

Repository Documentation:
${e.substring(0,0)}

Generate a Mermaid diagram that accurately represents:
${t==="ARCHITECTURE"?"The system architecture, component relationships, and data flow":t==="API"?"API endpoints, request/response flow, and data models":t==="COMPONENTS"?"Component hierarchy, props flow, and component relationships":"The structure and relationships"}

Return ONLY the Mermaid diagram code (without markdown code fences). Make it detailed and accurate based on the repository structure.`;i=`
\`\`\`mermaid
${(await Ms(f,"You are an expert at creating Mermaid diagrams for software documentation. Generate accurate, detailed diagrams based on repository structure.","gpt-4o-mini",.4)).replace(/```mermaid\n?/g,"").replace(/```\n?/g,"").trim()}
\`\`\`

`}}catch(h){console.warn("[FormatGenerator] Failed to generate Mermaid diagram, using fallback:",h),i=F8(t)}return`${s}

${i}${e}`}function F8(t){switch(t){case"ARCHITECTURE":return`
\`\`\`mermaid
graph TB
    A[Application] --> B[Components]
    A --> C[Services]
    A --> D[Utilities]
    B --> E[UI Components]
    C --> F[API Layer]
    D --> G[Helpers]
\`\`\`

`;case"API":return`
\`\`\`mermaid
sequenceDiagram
    participant Client
    participant API
    participant Database
    
    Client->>API: Request
    API->>Database: Query
    Database-->>API: Response
    API-->>Client: Result
\`\`\`

`;case"COMPONENTS":return`
\`\`\`mermaid
graph LR
    A[Component] --> B[Props]
    A --> C[State]
    A --> D[Methods]
    B --> E[Inputs]
    C --> F[Data]
\`\`\`

`;default:return""}}async function U8(t,e,n,r){const s=np(t),i=`import { CodeBlock, Callout, Tabs, TabItem, Card, Grid } from '@mdx/components';
import { Info, Warning, CheckCircle, AlertCircle } from 'lucide-react';

export const meta = {
  title: '${rp(t)}',
  description: '${t} documentation',
};

`;let a=e;if(a=a.replace(/```(\w+)?\n([\s\S]*?)```/g,(o,l,u)=>`<CodeBlock language="${l||"text"}" showLineNumbers>
${u.trim()}
</CodeBlock>`),a=a.replace(/^> (.+)$/gm,(o,l)=>`<Callout type="info">
${l.trim()}
</Callout>`),t==="API"||t==="COMPONENTS"){const o=a.split(`
`),l=Math.floor(o.length*.4);a=`
<Tabs>
  <TabItem label="Overview" value="overview">
${o.slice(0,l).join(`
`)}
  </TabItem>
  <TabItem label="Examples" value="examples">
    <Card>
      <h3>Usage Examples</h3>
      <p>See the code examples below for practical usage.</p>
    </Card>
  </TabItem>
  <TabItem label="Reference" value="reference">
${a}
  </TabItem>
</Tabs>

`}if(t==="COMPONENTS"){const o=Math.floor(a.length*.3);a=`<Grid cols={2}>
  <Card>
    <h3>Component Overview</h3>
    ${a.substring(0,o)}
  </Card>
  <Card>
    <h3>Props & Usage</h3>
    ${a.substring(o)}
  </Card>
</Grid>`}return`${i}${s}

${a}`}async function z8(t,e,n,r){var d,h,m;if(t!=="API")return`# ${rp(t)}

This section does not contain API documentation.`;const s=ym(n);if(!s)return`# API Reference

Invalid repository URL.`;const{owner:i,repo:a,branch:o="main"}=s,l=dn();let u=[];try{const p=await Ss(i,a,"",o,l||void 0),y=["api","routes","endpoints","controllers","handlers"];for(const w of p)if(w.type==="dir"&&y.some(x=>w.name.toLowerCase().includes(x)))try{const x=await Ss(i,a,w.path,o,l||void 0);u.push(...x.filter(g=>g.type==="file"&&(g.name.endsWith(".ts")||g.name.endsWith(".js"))).map(g=>g.path))}catch{}}catch{}try{const p=u.length>0?`

Found potential API files: ${u.slice(0,5).join(", ")}`:"",y=r?`
Tech Stack: ${((d=r.techStack)==null?void 0:d.join(", "))||"Unknown"}
Frameworks: ${((m=(h=r.structure)==null?void 0:h.frameworks)==null?void 0:m.join(", "))||"Unknown"}`:"",w=`Analyze this repository documentation and generate a complete OpenAPI 3.0 specification.

Repository: ${i}/${a}
${y}
${p}

Documentation:
${e.substring(0,3e3)}

Generate a complete OpenAPI 3.0 YAML specification with:
- Info section with proper title, version, and description
- Servers array (infer from documentation or use common patterns)
- Paths section with actual endpoints extracted from the documentation
- Request/response schemas
- Parameters, request bodies, and responses
- Proper HTTP methods (GET, POST, PUT, DELETE, etc.)

Return ONLY valid OpenAPI 3.0 YAML. Be specific and detailed. Include at least 3-5 endpoints if possible.`;let g=(await Ms(w,"You are an expert at creating OpenAPI specifications. Generate complete, valid OpenAPI 3.0 YAML with detailed endpoints, schemas, and examples.","gpt-4o-mini",.5)).replace(/```yaml\n?/g,"").replace(/```\n?/g,"").trim();return g.startsWith("openapi:")||(g=`openapi: 3.0.0
${g}`),g}catch(p){return console.warn("[FormatGenerator] Failed to generate OpenAPI spec:",p),`openapi: 3.0.0
info:
  title: ${a} API
  version: 1.0.0
  description: Auto-generated API documentation for ${i}/${a}
servers:
  - url: https://api.example.com
    description: Production server
  - url: https://api-staging.example.com
    description: Staging server
paths:
  /api/v1/health:
    get:
      summary: Health check endpoint
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
components:
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
        code:
          type: integer
`}}function G8(t,e){const n=np(t);return`
<style>
.doc-html-content * { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
}
.doc-html-content {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif; 
    line-height: 1.8; 
    color: #1a1a1a;
    background: white;
    border-radius: 16px;
    overflow: hidden;
}
.doc-html-content .header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px;
    text-align: center;
    margin: -40px -40px 40px -40px;
}
.doc-html-content .header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
    font-weight: 700;
}
.doc-html-content .header p {
    opacity: 0.9;
    font-size: 1.1em;
}
.doc-html-content .content {
    padding: 0;
}
.doc-html-content h1 { 
    color: #667eea; 
    font-size: 2em;
    margin: 30px 0 20px 0;
    border-bottom: 3px solid #667eea;
    padding-bottom: 10px;
}
.doc-html-content h2 { 
    color: #764ba2; 
    font-size: 1.6em;
    margin: 25px 0 15px 0;
}
.doc-html-content h3 { 
    color: #555; 
    font-size: 1.3em;
    margin: 20px 0 10px 0;
}
.doc-html-content p {
    margin: 15px 0;
    color: #333;
}
.doc-html-content code { 
    background: #f4f4f4; 
    padding: 3px 8px; 
    border-radius: 4px; 
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
    color: #e83e8c;
}
.doc-html-content pre { 
    background: #1e1e1e; 
    color: #d4d4d4;
    padding: 20px; 
    border-radius: 8px; 
    overflow-x: auto;
    margin: 20px 0;
    border-left: 4px solid #667eea;
}
.doc-html-content pre code {
    background: transparent;
    color: #d4d4d4;
    padding: 0;
}
.doc-html-content blockquote { 
    border-left: 4px solid #667eea; 
    padding-left: 20px; 
    margin-left: 0;
    margin: 20px 0;
    padding: 15px 20px;
    background: #f8f9fa;
    border-radius: 4px;
    font-style: italic;
}
.doc-html-content ul, 
.doc-html-content ol {
    margin: 15px 0;
    padding-left: 30px;
}
.doc-html-content li {
    margin: 8px 0;
}
.doc-html-content a {
    color: #667eea;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.3s;
}
.doc-html-content a:hover {
    border-bottom-color: #667eea;
}
.doc-html-content .footer {
    background: #f8f9fa;
    padding: 20px 40px;
    text-align: center;
    color: #666;
    font-size: 0.9em;
    margin: 40px -40px -40px -40px;
}
.doc-html-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}
.doc-html-content th, 
.doc-html-content td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}
.doc-html-content th {
    background: #667eea;
    color: white;
    font-weight: 600;
}
.doc-html-content tr:hover {
    background: #f8f9fa;
}
</style>
<div class="doc-html-content">
    <div class="header">
        <h1>${rp(t)}</h1>
        <p>Comprehensive Documentation</p>
    </div>
    <div class="content">
        ${B8(`${n}

${e}`)}
    </div>
    <div class="footer">
        <p>Generated on ${new Date().toLocaleDateString()}  Auto-generated documentation</p>
    </div>
</div>`}function B8(t){let e=t;return e=e.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/```(\w+)?\n([\s\S]*?)```/gim,(r,s,i)=>`<pre><code class="language-${s||"text"}">${V8(i.trim())}</code></pre>`),e=e.replace(/`([^`]+)`/gim,"<code>$1</code>"),e=e.replace(/\*\*\*(.*?)\*\*\*/gim,"<strong><em>$1</em></strong>"),e=e.replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>"),e=e.replace(/\*(.*?)\*/gim,"<em>$1</em>"),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener">$1</a>'),e=e.replace(/^> (.+)$/gim,"<blockquote>$1</blockquote>"),e=e.replace(/^\- (.+)$/gim,"<li>$1</li>"),e=e.replace(/^(\d+)\. (.+)$/gim,"<li>$2</li>"),e=e.replace(/^---$/gim,"<hr>"),e=e.split(/\n\n+/).map(r=>(r=r.trim(),r?r.startsWith("<")&&(r.startsWith("<h")||r.startsWith("<pre")||r.startsWith("<ul")||r.startsWith("<ol")||r.startsWith("<blockquote"))?r:`<p>${r}</p>`:"")).join(`

`),e=e.replace(/(<li>.*<\/li>\n?)+/g,r=>`<ul>${r}</ul>`),e}function V8(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])}function np(t){return`# ${rp(t)}`}function rp(t){switch(t){case"README":return"README";case"ARCHITECTURE":return"Architecture";case"API":return"API Reference";case"COMPONENTS":return"Components";case"TESTING_CI":return"Testing & CI/CD";case"CHANGELOG":return"Changelog";default:return"Documentation"}}async function H8(t,e={}){const{includeInlineDocs:n=!0,includeFunctionDocs:r=!0,includeClassDocs:s=!0,includeExamples:i=!0,includeTypes:a=!0,language:o="typescript"}=e,l=await Sv(t.owner,t.name,"",t.defaultBranch,void 0,3),u=K8(o),d=l.filter(m=>u.some(p=>m.toLowerCase().endsWith(p))).slice(0,20);let h=`# ${t.name} - Code Documentation

`;h+=`*Generated in Ai-Style format*

`,h+=`---

`;for(const m of d)try{const p=await qr(t.owner,t.name,m,t.defaultBranch);if(p){const y=await W8(m,p,t,{includeInlineDocs:n,includeFunctionDocs:r,includeClassDocs:s,includeExamples:i,includeTypes:a,language:o});y&&(h+=y+`

---

`)}}catch(p){console.warn(`[CursorDocs] Failed to process ${m}:`,p)}return h}async function W8(t,e,n,r){const s=await ao(`Document the code in ${t}`,n.fullName,3).catch(()=>""),i=q8(t),a=`You are an expert code documentation generator (like Cursor AI). Generate comprehensive, detailed, inline-style documentation for this code file.

File: ${t}
Language: ${i}

${s?`Relevant Context:
${s}

`:""}

Code:
\`\`\`${i}
${e} // Full file content for comprehensive documentation
\`\`\`

Generate EXTENSIVE, DETAILED documentation in the following style:

1. **File-level documentation** (comprehensive):
   - Detailed overview of what this file does and its purpose
   - Explanation of the file's role in the codebase
   - Key concepts and patterns used
   - Dependencies and imports explanation
   - Architecture and design decisions
   - Usage context and when to use this file

2. **For each exported function/class/interface/module:**
   ${r.includeFunctionDocs?`
   - **Comprehensive JSDoc/TSDoc documentation** including:
     * Detailed description of what the function/class does
     * Purpose and use cases
     * Design rationale and implementation details
     * Performance considerations (if relevant)
     * Thread safety or concurrency notes (if relevant)
     * Error handling approach
   `:""}
   ${r.includeTypes?`
   - **Complete type signatures** with:
     * Full parameter types and descriptions
     * Return type with detailed explanation
     * Generic type parameters (if any)
     * Type constraints and requirements
     * Optional vs required parameters
   `:""}
   ${r.includeExamples?`
   - **Multiple practical usage examples**:
     * Basic usage example
     * Advanced usage with edge cases
     * Real-world scenarios
     * Integration examples
     * Error handling examples
   `:""}
   ${r.includeInlineDocs?`
   - **Detailed inline comments**:
     * Explain complex logic step-by-step
     * Algorithm explanations
     * Business logic rationale
     * Performance optimizations
     * Edge cases and special handling
   `:""}

3. **Additional documentation sections**:
   - Constants and configuration values explanation
   - Type definitions and interfaces with detailed descriptions
   - Utility functions and helpers
   - Internal functions (even if not exported)
   - Error types and exception handling
   - Performance notes and optimizations
   - Security considerations (if applicable)
   - Testing notes and testability

Format requirements:
- Use proper JSDoc/TSDoc format for ${i==="typescript"||i==="javascript"?"TypeScript/JavaScript":i}
- Include ALL standard tags: @param, @returns, @throws, @example, @see, @since, @deprecated (if applicable)
- Add @remarks for important notes
- Include @see references to related functions/classes
- Provide multiple @example tags for different use cases
- Add detailed parameter descriptions explaining not just the type, but the purpose and constraints
- Include return value descriptions explaining what is returned and when
- Document all edge cases and error conditions
- Explain the "why" behind implementation choices, not just the "what"
- Make it comprehensive enough that a new developer can understand the entire file without reading the code

Generate the COMPLETE, DETAILED documented code with extensive comments and explanations. Be thorough and comprehensive - aim for documentation quality similar to professional API documentation.`;try{const l=await Ms(a,`You are an expert at writing comprehensive, detailed code documentation in the style of Cursor AI and professional API documentation. You generate:

- EXTENSIVE, DETAILED explanations (not brief summaries)
- Complete type information with full parameter and return descriptions
- Multiple practical examples covering different use cases
- Detailed inline comments explaining complex logic, algorithms, and design decisions
- Comprehensive JSDoc/TSDoc formatted comments with all standard tags
- Developer-friendly language that explains both "what" and "why"
- Architecture and design rationale explanations
- Performance considerations and optimization notes
- Error handling and edge case documentation
- Integration examples and real-world usage scenarios
- Complete documentation for all functions, classes, interfaces, types, and constants

Your documentation should be:
- As detailed as professional API documentation (like MDN, TypeScript Handbook, or major open-source projects)
- Comprehensive enough that developers can understand the codebase without reading the implementation
- Include context about how pieces fit together
- Explain design decisions and trade-offs
- Provide multiple examples for different scenarios
- Document internal functions and helpers, not just public APIs
- Include notes about performance, security, and best practices

Always include the actual code with extensive documentation comments added. Be thorough - aim for documentation that is as comprehensive as the code itself.`,"gpt-4o-mini",.2,n.fullName,!0);return`## ${t}

\`\`\`${i}
${l}
\`\`\``}catch(o){return console.error(`[CursorDocs] Failed to document ${t}:`,o),`## ${t}

*Documentation generation failed*
`}}function q8(t){var r;const e=((r=t.split(".").pop())==null?void 0:r.toLowerCase())||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",java:"java",go:"go",rs:"rust",cpp:"cpp",c:"c",h:"c",hpp:"cpp"}[e]||"typescript"}function K8(t){return{typescript:[".ts",".tsx"],javascript:[".js",".jsx"],python:[".py"],java:[".java"],go:[".go"],rust:[".rs"],cpp:[".cpp",".hpp",".h",".c"]}[t]||[".ts",".tsx",".js",".jsx"]}async function Y8(t){var m,p;console.log("[DocsWriter] Starting documentation generation...");const e={currentStep:pe.WRITING,generatedDocs:new Map};if(!t.documentationPlans||t.documentationPlans.size===0)return e.errors=new Map([["writing","No documentation plans available"]]),e;const n=t.selectedOutputFormats||["markdown"],r=t.selectedSectionTypes||["README"],s=t.selectedLanguage||"en",i=new Map,a=new Map,o=t.documentationPlans.size;let l=0;const u=t.selectedModel||"gpt-4o-mini",d=Array.from(t.documentationPlans.entries()).map(async([y,w])=>{var f;const x=u;let g="";try{console.log(`[DocsWriter] Starting generation for ${y}`),console.log(`[DocsWriter] Formats: ${n.join(", ")}, Sections: ${r.join(", ")}`);const v=w.repo.htmlUrl||`${w.repo.owner}/${w.repo.name}`;try{g=await $8(v,{format:"markdown",includeCode:!0,includeProps:!0,includeExamples:!0,depth:w.style==="comprehensive"?"comprehensive":w.style==="technical"?"detailed":"basic"}),console.log(`[DocsWriter] Base markdown generated for ${y}, length: ${g.length}`)}catch(N){console.error(`[DocsWriter] Failed to generate base markdown for ${y}:`,N),g=`# ${w.repo.name}

${w.repo.description||"Documentation for "+y}

*Note: Base documentation generation failed. Please check repository access.*`}const b=[],_=(f=t.repoAnalyses)==null?void 0:f.get(y);for(const N of r){console.log(`[DocsWriter] Generating ${N} content for ${y}...`);const D=await J8(N,v,g,_,w,s,x),F=D.split(/\s+/).length,Y=D.length;console.log(`[DocsWriter] Generated ${N} content: ${F} words, ${Y} characters`),F<1e3&&console.error(`[DocsWriter] WARNING: ${N} content is very short (${F} words). Expected 0-6000+ words.`);for(const de of n)try{const H=await D8(v,de,N,D,{includeCode:!0,includeProps:!0,includeExamples:!0,depth:w.style==="comprehensive"?"comprehensive":"detailed"},_),B={id:`${N}_${de}_${Date.now()}`,type:N,format:de,language:s,title:`${Z8(N)} (${de})`};de==="openapi"?B.openapiYaml=H:de==="html"?B.html=H:B.markdown=H,b.push(B)}catch(H){console.error(`[DocsWriter] Error generating ${de} for ${N}:`,H)}}const E={repoName:w.repo.name,owner:w.repo.owner,sections:b,createdAt:new Date().toISOString()};let C="";const S=b.find(N=>N.markdown);if(S!=null&&S.markdown)C=S.markdown;else if(b.length>0){const N=b[0];C=N.markdown||N.html||N.openapiYaml||""}else if(console.warn(`[DocsWriter] No sections generated for ${y}, using baseMarkdown as fallback`),g&&g.trim().length>0){const N={id:`fallback_${Date.now()}`,type:r[0]||"README",format:n[0]||"markdown",language:s,title:"Documentation",markdown:g};b.push(N),E.sections=b,C=g,console.log(`[DocsWriter] Using baseMarkdown fallback for ${y}`)}else console.error(`[DocsWriter] No documentation generated for ${y} - baseMarkdown is also empty`),C=`# ${w.repo.name}

*Documentation generation failed. Please check the console for errors.*`;return l++,e.progress={current:l,total:o,currentRepo:y,currentAgent:"DocsWriter"},console.log(`[DocsWriter] Completed generation for ${y} (${l}/${o})`),{repoFullName:y,generatedDocs:E,markdown:C,error:null}}catch(v){return l++,console.error(`[DocsWriter] Error generating docs for ${y}:`,v),e.progress={current:l,total:o,currentRepo:y,currentAgent:"DocsWriter"},{repoFullName:y,generatedDocs:null,markdown:"",error:{key:`writing_${y}`,message:v.message||"Documentation generation failed"}}}}),h=await Promise.all(d);for(const y of h)y.generatedDocs?(a.set(y.repoFullName,y.generatedDocs),y.markdown&&i.set(y.repoFullName,y.markdown)):y.error&&(e.errors||(e.errors=new Map),e.errors.set(y.error.key,y.error.message));return e.generatedDocs=i,e.generatedDocsFull=a,e.completedSteps=new Set([...t.completedSteps||[],pe.WRITING]),e.progress={current:o,total:o,currentAgent:"DocsWriter"},console.log(`[DocsWriter] Completed generation for ${i.size} repositories`),console.log(`[DocsWriter] Generated docs map size: ${i.size}, Full docs map size: ${a.size}`),i.size===0&&a.size===0&&(console.error("[DocsWriter] WARNING: No documentation was generated for any repository!"),console.error("[DocsWriter] State check:",{hasDocumentationPlans:!!t.documentationPlans&&t.documentationPlans.size>0,plansCount:((m=t.documentationPlans)==null?void 0:m.size)||0,selectedFormats:n,selectedSectionTypes:r,errors:Array.from(((p=e.errors)==null?void 0:p.entries())||[])})),e}function Z8(t){switch(t){case"README":return"README";case"ARCHITECTURE":return"Architecture";case"API":return"API Reference";case"COMPONENTS":return"Components";case"TESTING_CI":return"Testing & CI/CD";case"CHANGELOG":return"Changelog";case"INLINE_CODE":return"Inline Code Documentation";default:return"Documentation"}}async function J8(t,e,n,r,s,i="en",a="gpt-4o-mini"){var y,w,x,g,f,v;const o=`${s.repo.owner}/${s.repo.name}`;let l="";try{console.log(`[DocsWriter] Retrieving RAG context for ${o} (${t})...`);const _=await ao("Database schema, migrations, seed data, mock data, models, entities. What data does this application store and manage? What are the main entities, tables, or data models?",o,8);console.log(`[DocsWriter] Database context retrieved: ${_?`${_.length} chars`:"EMPTY"}`);const C=await ao("What does this application do? What is its main purpose, role, and core functionality? Main entry points, app initialization, and primary features.",o,8);console.log(`[DocsWriter] Purpose context retrieved: ${C?`${C.length} chars`:"EMPTY"}`);const S=`Generate ${t} documentation for ${o}. Code structure, architecture, components, APIs, and implementation details.`,N=await ao(S,o,8);console.log(`[DocsWriter] Section context retrieved: ${N?`${N.length} chars`:"EMPTY"}`),l=(_?`Database and Data Models:${_}

`:"")+(C?`Application Purpose:${C}

`:"")+(N?`Code Structure:${N}`:""),console.log(`[DocsWriter] Combined RAG context: ${l?`${l.length} chars`:"EMPTY"}`),(!l||l.trim().length<100)&&(console.error(`[DocsWriter] WARNING: RAG context is empty or too short (${l.length} chars). The repository may not be indexed, or similarity search returned no results.`),console.error("[DocsWriter] This will cause the AI to invent content instead of documenting actual code."))}catch(b){console.error(`[DocsWriter] RAG context retrieval failed for ${o}:`,b);try{l=await ao(`What does this application do? Database schema, data models, main purpose, functionality, entry points, and code structure for ${t} documentation`,o,20),console.log(`[DocsWriter] Fallback RAG context: ${l?`${l.length} chars`:"EMPTY"}`)}catch(_){console.error("[DocsWriter] Fallback RAG context retrieval also failed:",_),l=""}}let u="";try{const b=ym(e);if(b){const{owner:_,repo:E,branch:C="main"}=b,S=dn();u=await L1(_,E,"",C,S||void 0)}}catch(b){console.warn(`[DocsWriter] Failed to generate directory tree for ${o}:`,b)}const d=r?`
Repository Analysis:
- Summary: ${r.summary}
- Key Features: ${r.keyFeatures.join(", ")}
- Tech Stack: ${r.techStack.join(", ")}
- Frameworks: ${((w=(y=r.structure)==null?void 0:y.frameworks)==null?void 0:w.join(", "))||"Unknown"}
- Languages: ${((g=(x=r.structure)==null?void 0:x.languages)==null?void 0:g.join(", "))||"Unknown"}
- Complexity: ${r.complexity}
- Main Files: ${((v=(f=r.structure)==null?void 0:f.mainFiles)==null?void 0:v.join(", "))||"Unknown"}
${u?`
Complete Directory Structure:
\`\`\`
${u}\`\`\`
`:""}
`:u?`
Complete Directory Structure:
\`\`\`
${u}\`\`\`
`:"",h={en:"English",fr:"French",de:"German"},m=i!=="en"?`

IMPORTANT: Generate all content in ${h[i]}. All text, descriptions, and explanations must be in ${h[i]}.`:"";let p="";switch(t){case"README":p=`Generate a comprehensive README.md for the repository "${o}" following the EXACT structure and style of professional open-source project documentation (like the GitScribe DOCUMENTATION.md example - 600-700+ lines, 4500-5000+ words, comprehensive and detailed).
${m}

${l?`

=== CRITICAL: ACTUAL CODE FROM REPOSITORY (YOUR ONLY SOURCE OF TRUTH) ===
${l}
=== END OF ACTUAL CODE ===

`:`

 WARNING: NO RAG CONTEXT AVAILABLE - Repository may not be indexed. You MUST NOT invent content. Only document what you can verify from repository analysis.

`}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL FIRST STEP: Before generating any content, you MUST:
1. Read the RAG context VERY CAREFULLY - this contains the ACTUAL code from the repository
2. Identify what ACTUALLY exists in the code:
   - Look for actual file paths, function names, class names, component names in the RAG context
   - Find actual API endpoints, routes, handlers in the code
   - Identify actual features by finding their implementation in the code
   - Note the actual tech stack from the code (not assumptions)
3. Create a list of ONLY the features/components/APIs you can VERIFY exist in the RAG context
4. DO NOT proceed until you have a verified list of what actually exists

CRITICAL - YOU MUST FOLLOW THESE RULES STRICTLY:
1. FOR EVERY FEATURE YOU DOCUMENT:
   - You MUST be able to point to specific code in the RAG context that implements it
   - You MUST cite the file path or function name where it exists
   - If you cannot find the code, DO NOT document it as a feature

2. WHEN LISTING FEATURES:
   - Go through the RAG context line by line
   - Extract ONLY features that have actual code implementations
   - For each feature, note which file/function implements it
   - DO NOT list features based on assumptions, names, or examples

3. WHEN DESCRIBING FUNCTIONALITY:
   - Base descriptions ONLY on what the code actually does
   - If the code shows a function that does X, document that it does X
   - DO NOT assume it also does Y unless the code shows Y
   - DO NOT add capabilities that aren't in the code

4. TO REACH WORD COUNT:
   - Expand on REAL features with more detail about how they work (based on code)
   - Add more code examples from the RAG context
   - Explain the implementation details you see in the code
   - Add more subsections explaining existing features in depth
   - DO NOT invent new features to reach word count

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE README content based ONLY on what exists in the RAG context. DO NOT simply reformat or copy the reference documentation above. Instead:
- FIRST: Extract a list of actual features from the RAG context (with file paths/function names)
- THEN: Document ONLY those verified features with details from the code
- Generate fresh, detailed documentation based on the actual code structure and purpose
- Create comprehensive content that accurately describes what the application does and how it works
- Use the reference only to understand documentation structure, not to copy content
- Follow the EXACT structure and style of professional documentation (like GitScribe's DOCUMENTATION.md - comprehensive, detailed, 600-700+ lines, 4500-5000+ words)
- MOST IMPORTANT: The Overview section MUST accurately explain what this application does based on the code context, not generic descriptions

CRITICAL - DOCUMENT ONLY WHAT EXISTS:
- DO NOT invent features, APIs, or components that don't exist in the codebase
- ONLY list features that you can verify exist in the RAG context with specific code references
- When describing "Core Features", ONLY include features that actually exist in the code (cite the code location)
- When describing "Advanced Features", ONLY include features that actually exist in the code (cite the code location)
- If you cannot find evidence of a feature in the RAG context, DO NOT include it - skip it entirely
- Base ALL feature descriptions on actual code, not assumptions or examples from other projects
- To reach the word count, expand on REAL features with more detail, examples, and explanations - do NOT invent new features
- If the repository has fewer features than the target count, document those features in EXTREME detail rather than inventing new ones

Create an EXTENSIVE, COMPREHENSIVE README that MUST follow this EXACT structure (be thorough and detailed, match the style of DOCUMENTATION.md):

Start with:
# README

# [Project Name]: [Brief Description]

Then follow this EXACT structure (matching DOCUMENTATION.md style):

## Project Title and Description

### Overview
- Write EXACTLY 3 comprehensive paragraphs explaining what the project does
- First paragraph: Describe the project, its purpose, and key technologies (100-150 words)
- Second paragraph: Explain the problem it solves and how it addresses pain points (100-150 words)
- Third paragraph: Describe the architecture, approach, and key capabilities (100-150 words)
- Be detailed and thorough (300-450 words total minimum)

### Purpose and Goals
- Write EXACTLY 3 comprehensive paragraphs
- First paragraph: Explain the primary purpose and what problems it solves (100-150 words)
- Second paragraph: Describe key goals, democratization, and accessibility (100-150 words)
- Third paragraph: Explain additional goals like multi-language support and reducing cognitive load (100-150 words)
- Be detailed and thorough (300-450 words total minimum)

### Target Audience
- Write EXACTLY 3 comprehensive paragraphs
- First paragraph: Describe primary audience (developers, PMs, technical writers) and main benefits (100-150 words)
- Second paragraph: Explain benefits for individual developers, open-source maintainers, and enterprise teams (100-150 words)
- Third paragraph: Describe benefits for technical writers, project managers, and organizations onboarding (100-150 words)
- Be detailed and thorough (300-450 words total minimum)

## Features

### Core Features
- MANDATORY FIRST STEP: Extract features from RAG context before writing anything:
  1. Go through the RAG context and list every function, class, component, API endpoint, or feature you can find
  2. For each item, note the file path where it exists
  3. Verify each item actually has implementation code (not just a name)
  4. This verified list is the ONLY source of features you can document
- Create a numbered list of ONLY the features you extracted and verified (could be 3, could be 20 - list exactly what exists)
- DO NOT aim for a specific number - list what actually exists in the codebase
- Each feature should have:
  - **Bold feature name** (the actual name from the code)
  - File path in parentheses: (src/path/to/file.ts)
  - 2-4 detailed sentences explaining what the code actually does (based on the implementation you see in RAG context)
  - Why it's useful (based on how it's used in the codebase)
- Format exactly like:
  1. **Feature Name** (src/path/to/file.ts): Detailed description explaining what the code actually does based on the implementation you see. [Additional sentences with more detail about how it works, what it does, examples from the code, etc.]
   
  2. **Another Feature** (src/another/path.ts): Another detailed description based on actual code implementation...
- CRITICAL: If you cannot find a feature in the RAG context with its implementation, DO NOT include it. Skip it entirely.
- IMPORTANT: If the repository has very few features (e.g., only 2-3), document those in EXTREME detail rather than inventing more. It's better to have 3 well-documented features than 10 invented ones.
- To reach word count: Expand each verified feature with extensive detail about its implementation, usage, examples, edge cases, etc. - do NOT add invented features.

### Advanced Features
- FIRST: Check the RAG context to see if there are any advanced/sophisticated features:
  - Look for complex functions, advanced modules, sophisticated implementations
  - Look for advanced configurations, optimizations, integrations
  - Look for advanced patterns, architectures, or capabilities in the code
- CRITICAL: If you find advanced features, create a numbered list of ONLY the advanced features you can verify exist in the code
- If you find 3 advanced features, list 3. If you find 8, list 8. If you find 0, SKIP THIS SECTION ENTIRELY.
- If there are no advanced features in the codebase, DO NOT create this section. Simply skip it and move on to the next section.
- Same format as Core Features (with code references) if features exist
- CRITICAL: ONLY include features that you can VERIFY exist in the RAG context. If you cannot find any advanced features, DO NOT create this section - skip it completely.

## Installation/Setup

### Prerequisites
- Start with: "To set up [project name], ensure you have the following prerequisites:"
- Create a bullet list with bold items:
  - **Item Name**: Description
  - **Another Item**: Description

### Step-by-Step Setup Instructions
- Number each step (1., 2., 3., etc.)
- Each step should have:
  - **Bold step title** (e.g., "Clone the Repository")
  - Brief description
  - Code blocks with actual commands
- Include steps for:
  1. Clone the Repository (with git clone command)
  2. Install Dependencies (with npm install command)
  3. Configure Environment Variables (with .env example)
  4. Start the Development Server (with npm run dev command)
  5. Build for Production (with npm run build command)

### Troubleshooting
- Create a bullet list of common issues
- Each item should have:
  - **Bold issue name**: Detailed solution with 2-3 sentences explaining the problem and how to fix it
- Include AT LEAST 5-7 troubleshooting items with comprehensive solutions
- Cover: API Key errors, Rate Limiting, Private Repository Access, CORS Issues, Build Failures, Timeout Issues, Memory Issues, etc.

## Usage

### Quick Start Guide
- Numbered steps (1., 2., 3., etc.) for getting started quickly
- Each step should be clear and actionable
- Include 5-7 steps covering the basic workflow

### Detailed Usage Examples
- **Basic Example** subsection with:
  - Complete code example in code blocks
  - Explanation of what the code does
  - Expected output or result
- **Advanced Example** subsection with:
  - More complex code example
  - Explanation of advanced features
- **Error Handling Example** subsection with:
  - Code showing error handling
  - Explanation of error scenarios

## API/Function Examples

- FIRST: Check the RAG context to identify what functions, classes, or APIs actually exist in the codebase
- CRITICAL: Only document functions/classes/APIs that you can VERIFY exist in the RAG context
- If the repository has NO exported functions or APIs (e.g., it's a static website, a configuration repo, etc.), SKIP THIS SECTION ENTIRELY or note that this is not applicable
- If the repository has functions/APIs, document them following this format:

For each major function/class that EXISTS, document with:

### \`functionName\`
- Function signature with TypeScript types (or JavaScript if that's what the code uses)
- **Parameters**: Table or detailed list with:
  - Parameter name, type, description, constraints, examples
- **Returns**: Detailed explanation of return value
- **Example Usage**:
  \`\`\`typescript
  // Complete code example
  \`\`\`
- Include 2-3 usage examples (basic, advanced, edge cases)

- Document ALL major functions/classes that you can verify exist (could be 2, could be 20 - document what actually exists)
- DO NOT aim for a specific number - document what's actually in the codebase
- If there are only 2-3 functions, document those in EXTREME detail rather than inventing more
- For each function, include:
  - Complete function signature with full types (as they appear in the code)
  - Detailed parameter documentation table or list
  - Comprehensive return value explanation
  - Multiple usage examples (basic, advanced, edge cases, error handling)
  - Performance considerations if applicable
  - Related functions or dependencies

## Configuration

### Environment Variables
- Create a table with columns:
  | Variable | Required | Description |
  |---------|----------|-------------|
  | VAR_NAME | Yes/No | Description |
- Include example values in descriptions

### GitHub Token Setup (if applicable)
- Numbered steps for setting up tokens
- Include links and detailed instructions

## Architecture Overview

### System Design
- FIRST: Check the RAG context to understand what the actual architecture is
- Write comprehensive paragraphs explaining the high-level architecture based on what ACTUALLY exists in the codebase
- DO NOT describe architectures that don't exist (e.g., don't mention "agent-based system" or "LangChain" if they're not in the code)
- Describe what the code actually shows:
  - If it's a web app, describe the web architecture
  - If it's a CLI tool, describe the CLI architecture
  - If it's a library, describe the library structure
  - If it's a static site, describe the static site architecture
- Reference actual components, services, and patterns from the RAG context
- Write 2-4 paragraphs (100-150 words each) based on what the code actually shows

### Component Relationships
- FIRST: Extract actual component/module names from the RAG context
- Only document components/modules that you can VERIFY exist in the codebase
- If the repository has no clear component structure (e.g., it's a simple script or single-file project), adapt this section accordingly or skip it
- Create a detailed bullet list describing each major component that EXISTS
- For each component that exists, explain:
  - Its role and responsibility (based on the code)
  - How it interacts with other components (if applicable)
  - Data flow and dependencies (if applicable)
  - Key methods or functions it provides (from the actual code)
- Reference actual component names, file paths, and class/function names from the RAG context
- DO NOT list components that don't exist - only document what you can verify

### Project Structure
- Use the complete directory structure provided in the context above
- Display as a code block with tree format:
  \`\`\`
  src/
   components/          # Reusable React components
      Component1.tsx
      Component2.tsx
   lib/                 # Core business logic
      service1.ts
      service2.ts
   pages/               # Main page components
       Page1.tsx
  \`\`\`
- Show ALL files and directories - do NOT truncate
- Include brief inline comments (using #) for directory purposes

## Contributing

### Guidelines for Contributors
- Numbered steps (1., 2., 3., etc.) for:
  1. Fork the Repository (with description)
  2. Create a Feature Branch (with git command example)
  3. Commit Your Changes (with git commit example)
  4. Push to Your Branch (with git push example)
  5. Open a Pull Request (with description)

### Development Standards
- Bullet list with:
  - **Standard Name**: Description
  - Include: TypeScript Best Practices, Functional Components, Code Comments, Documentation, Testing

## License
- License information
- Usage terms
- Attribution if applicable

## Additional Sections

### FAQ
- **Q1: Question?**
  A1: Detailed answer with 3-5 sentences explaining the solution comprehensively
- Include AT LEAST 5-7 FAQ items covering:
  - Setup and configuration questions
  - Usage and workflow questions
  - Technical questions about features
  - Troubleshooting questions
  - Best practices questions
  - Integration questions
  - Cost and performance questions

### Troubleshooting
- Bullet list with AT LEAST 5-7 troubleshooting items
- Each item should have:
  - **Issue Name**: Detailed solution with 2-3 sentences explaining both the problem and the fix
- Cover common issues like: API errors, authentication problems, rate limiting, build issues, performance problems, etc.

### Known Issues
- Bullet list with AT LEAST 5-6 known issues
- Each issue should have:
  - **Issue Name**: Detailed description (2-3 sentences) explaining the limitation and any workarounds
- Include issues like: PDF export limitations, workflow timeouts, CORS issues, token limits, translation quality, API generation accuracy, etc.

### Roadmap
- FIRST: Check the RAG context, repository analysis, and any issues/PRs mentioned to see if there are actual roadmap items
- CRITICAL: ONLY include roadmap items that are ACTUALLY mentioned in:
  - The codebase (comments, TODOs, issues)
  - Repository analysis (if it mentions future plans)
  - Any visible planning documents
- If there are roadmap items, create a bullet list with:
  - **Feature Name**: Detailed description (2-3 sentences) explaining what it will do and why it's valuable
- If there are NO roadmap items mentioned anywhere:
  - Either SKIP THIS SECTION ENTIRELY, OR
  - Create a section titled "Potential Future Improvements" and clearly state these are SUGGESTIONS based on current limitations, NOT planned features
  - Label them clearly as "Potential improvements" or "Suggestions" not "Planned features"
- DO NOT invent roadmap items to reach a target number
- It's better to skip this section or have fewer items than to invent features

CRITICAL LENGTH REQUIREMENT: You MUST generate AT LEAST 4500-5500 words (approximately 600-700+ lines like DOCUMENTATION.md). This is NOT optional. The documentation MUST be comprehensive and extensive. Do NOT stop early or be brief. Continue generating until you have covered ALL aspects thoroughly.

Length Enforcement:
- Minimum: 4500 words / 600+ lines (approximately 6000-7500 tokens)
- Target: 5000-5500 words / 650-700+ lines (approximately 7000-8500 tokens)
- Maximum: Use the full token budget available (up to 12,000 words / 1000+ lines if needed)

STRUCTURE REQUIREMENTS:
- Follow the structure provided above, but ADAPT it based on what actually exists in the repository
- Use proper markdown formatting (## for main sections, ### for subsections)
- Include core sections (Overview, Purpose and Goals, Target Audience, Installation/Setup, Usage, etc.)
- For optional sections (Advanced Features, API/Function Examples, Component Relationships, Roadmap):
  - ONLY include them if the repository actually has those elements
  - If a section doesn't apply (e.g., no APIs, no components, no advanced features), SKIP IT or note that it's not applicable
  - It's better to skip a section than to invent content for it
- Use numbered lists for features (1., 2., 3.)
- Use code blocks for all code examples
- Use tables for configuration (Environment Variables) - only if the repo has configuration
- Use tree format for Project Structure
- Each section should be substantial (not just 1-2 sentences)
- CRITICAL: Document what EXISTS, not what you think should exist

If you find yourself being brief or concise, STOP and expand. Add more:
- More detailed explanations in each section (each paragraph should be 3-5 sentences, Overview/Purpose/Target Audience should have 3 paragraphs each)
- More code examples (at least 3-5 per major function, document 5-7 functions total)
- More use cases and scenarios
- More troubleshooting items (7 items minimum with detailed solutions)
- More FAQ entries (7 questions minimum with comprehensive answers)
- More detailed architecture descriptions (3 paragraphs for System Design, detailed component list for Component Relationships)
- More features in both Core and Advanced sections (14+ core features, 12+ advanced features)
- More known issues (6 items minimum with workarounds)
- More roadmap items (8 items minimum with detailed descriptions)

Style: Write in a professional, comprehensive style EXACTLY like the DOCUMENTATION.md example. Be thorough, detailed, and developer-friendly. Include extensive code snippets that show actual usage patterns from the codebase. Make it actionable and complete. Match the tone, structure, and level of detail of professional open-source project documentation.`;break;case"ARCHITECTURE":p=`Generate an Architecture documentation section for "${o}" in Ai-Style format.
${m}

${l?`

=== CRITICAL: ACTUAL CODE FROM REPOSITORY (YOUR ONLY SOURCE OF TRUTH) ===
${l}
=== END OF ACTUAL CODE ===

`:`

 WARNING: NO RAG CONTEXT AVAILABLE - Repository may not be indexed. You MUST NOT invent content. Only document what you can verify from repository analysis.

`}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Architecture content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Architecture document in Ai-Style that includes (be thorough and detailed):

1. **System Overview** - Detailed high-level architecture description with diagrams descriptions, design decisions, and code references
2. **Component Structure** - Complete breakdown of ALL major components/modules with:
   - Detailed purpose and responsibility
   - Complete code examples
   - Interaction patterns
   - Dependencies between components
3. **Key Classes/Functions** - Comprehensive documentation of important classes and functions with:
   - Complete JSDoc/TSDoc comments
   - Full type signatures with detailed parameter descriptions
   - Purpose, responsibility, and design rationale
   - How they fit in the architecture
   - Multiple usage examples
   - Performance considerations
4. **Data Flow** - Detailed explanation of how data moves through the system with:
   - Step-by-step flow descriptions
   - Reference to actual functions
   - State management approach
   - Data transformation points
5. **Technology Stack** - Comprehensive tech stack documentation with:
   - Detailed explanations of each technology
   - Why each was chosen
   - Code examples showing usage
   - Version information
6. **Project Structure** - Display the COMPLETE directory structure of the entire repository (especially the src/ directory) as a simple tree format using backticks and tree characters (, ). The complete directory structure is provided in the context above. You MUST include ALL files and subdirectories. Format it like this example:

\`\`\`
src/
 components/
    Component1.tsx
    Component2.tsx
 pages/
    Page1.tsx
 lib/
     utils.ts
\`\`\`

IMPORTANT: Use the complete directory structure provided in the context above. Show ALL files and directories - do NOT truncate or summarize. Use ONLY the simple tree format with brief inline comments (using #) for directory purposes. Keep it concise and clean but COMPLETE.
7. **Design Patterns** - Detailed documentation of patterns used with:
   - Pattern explanations
   - Code examples
   - When and why patterns are used
8. **Dependencies** - Comprehensive dependency documentation with:
   - Key dependencies and their roles
   - Version requirements
   - Why each dependency is needed
9. **System Interactions** - How different parts interact
10. **Scalability and Performance** - Architecture considerations

CRITICAL LENGTH REQUIREMENT: You MUST generate AT LEAST 0-6000 words. This is NOT optional. The documentation MUST be comprehensive and extensive. Do NOT stop early or be brief. Continue generating until you have covered ALL aspects thoroughly.

Length Enforcement:
- Minimum: 0 words (approximately 5500-7000 tokens)
- Target: 5000-6000 words (approximately 7000-8500 tokens)
- Maximum: Use the full token budget available (up to 12,000 words if needed)

If you find yourself being brief or concise, STOP and expand. Add more:
- Detailed component breakdowns
- Complete code examples for every component
- Architecture diagrams descriptions
- Design pattern explanations with code
- Data flow descriptions
- Performance considerations
- More detailed explanations of each section

Style: Code-first approach like Cursor AI. Show actual code structures, class hierarchies, and function relationships. Include extensive code examples that demonstrate the architecture. Be EXTENSIVE and THOROUGH.`;break;case"API":p=`Generate an API Reference documentation for "${o}" in Ai-Style format.
${m}

${l?`

=== CRITICAL: ACTUAL CODE FROM REPOSITORY (YOUR ONLY SOURCE OF TRUTH) ===
${l}
=== END OF ACTUAL CODE ===

`:`

 WARNING: NO RAG CONTEXT AVAILABLE - Repository may not be indexed. You MUST NOT invent content. Only document what you can verify from repository analysis.

`}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE API Reference content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE API Reference in Ai-Style that includes (be thorough and detailed):

1. **API Overview** - Comprehensive introduction to the API including:
   - Purpose and use cases
   - Design philosophy
   - Getting started guide
   - Common patterns

2. **Function/Class Documentation** - For EVERY exported function/class that EXISTS in the codebase:
   - FIRST: Extract all exported functions/classes from the RAG context
   - Only document functions/classes that you can VERIFY exist in the code
   - If the repository has NO exported functions/classes (e.g., it's a static site, config repo, etc.), adapt this section or note that APIs are not applicable
   - For each function/class that EXISTS, include:
     - Complete JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
     - Full type signatures with detailed parameter descriptions (as they appear in the code)
     - Complete parameter documentation including:
       * Type information
       * Purpose and constraints
       * Valid value ranges
       * Default values
       * Example values
     - Comprehensive return type documentation including:
       * What is returned
       * Return value structure
       * Edge cases
     - Multiple practical usage examples (basic, advanced, edge cases, error handling)
     - Performance considerations
     - Error conditions and handling
     - Related functions/classes
   - Document ALL that exist - could be 2, could be 50 - document what's actually there

3. **Code Examples** - Extensive real code examples showing:
   - Basic usage
   - Advanced usage patterns
   - Integration examples
   - Error handling
   - Best practices
   - Anti-patterns to avoid

4. **Type Definitions** - Complete interface/type documentation with:
   - All properties documented
   - Type constraints explained
   - Usage examples
   - Related types

5. **Error Handling** - Comprehensive error documentation including:
   - All error codes and messages
   - When errors occur
   - How to handle errors
   - Error recovery strategies

6. **Authentication** - Complete authentication guide (if applicable)

7. **Additional Sections**:
   - Rate limiting
   - Versioning
   - Migration guides
   - Deprecation notices

CRITICAL LENGTH REQUIREMENT: You MUST generate AT LEAST 5000-8000 words. This is NOT optional. The documentation MUST be comprehensive and extensive. Do NOT stop early or be brief. Continue generating until you have covered ALL aspects thoroughly.

Length Enforcement:
- Minimum: 5000 words (approximately 7000-8500 tokens)
- Target: 6000-8000 words (approximately 8500-11,000 tokens)
- Maximum: Use the full token budget available (up to 12,000 words if needed)

If you find yourself being brief or concise, STOP and expand. Add more:
- Complete documentation for EVERY exported function/class
- Multiple examples for each function (basic, advanced, edge cases)
- Detailed parameter documentation for EVERY parameter
- Complete return type documentation
- Error handling examples for each function
- Integration examples
- More code snippets showing actual usage

Style: Generate documentation similar to Cursor AI - include the actual code with inline documentation comments. Show complete function signatures, detailed parameter types, return types, and extensive practical examples. Make it code-first and developer-friendly. Be EXTENSIVE and THOROUGH.`;break;case"COMPONENTS":p=`Generate a Components documentation section for "${o}" in Ai-Style format.
${m}

${l?`

=== CRITICAL: ACTUAL CODE FROM REPOSITORY (YOUR ONLY SOURCE OF TRUTH) ===
${l}
=== END OF ACTUAL CODE ===

`:`

 WARNING: NO RAG CONTEXT AVAILABLE - Repository may not be indexed. You MUST NOT invent content. Only document what you can verify from repository analysis.

`}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Components content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Components document in Ai-Style that includes (be thorough and detailed):

1. **Component Overview** - Comprehensive introduction to the component system including:
   - Architecture and design patterns
   - Component organization
   - Design principles

2. **Component Documentation** - For EVERY component/class/module that EXISTS in the codebase:
   - FIRST: Extract all components/modules from the RAG context
   - Only document components/modules that you can VERIFY exist in the code
   - If the repository has NO components (e.g., it's a backend API, CLI tool, library without UI, etc.), adapt this section accordingly or note that UI components are not applicable
   - For each component/module that EXISTS, include:
     - Complete JSDoc/TSDoc style documentation with all standard tags
     - Comprehensive Props/Parameters documentation with:
       * Complete type information (as it appears in the code)
       * Detailed descriptions
       * Required vs optional
       * Default values
       * Validation rules
       * Example values
     - Complete interface/type definitions with all properties documented
     - Extensive usage examples with actual code (basic, advanced, edge cases)
     - Dependencies and imports explained
     - Component lifecycle (if applicable)
     - State management approach (if applicable)
     - Event handling (if applicable)
     - Styling approach (if applicable)
   - Document ALL that exist - could be 1, could be 100 - document what's actually there

3. **Code Examples** - Extensive examples showing:
   - Actual component code with complete documentation comments
   - Multiple usage scenarios
   - Integration examples
   - Composition patterns
   - Best practices

4. **Component Hierarchy** - Detailed explanation of:
   - How components relate to each other
   - Component tree structure
   - Data flow between components
   - Communication patterns

5. **Props/Configuration** - Comprehensive prop/parameter documentation with:
   - Complete type information
   - Detailed descriptions
   - Validation rules
   - Default values
   - Usage examples

6. **Additional Sections**:
   - Styling guide
   - Theming
   - Accessibility considerations
   - Performance optimization
   - Testing strategies

CRITICAL LENGTH REQUIREMENT: You MUST generate AT LEAST 0-6000 words. This is NOT optional. The documentation MUST be comprehensive and extensive. Do NOT stop early or be brief. Continue generating until you have covered ALL aspects thoroughly.

Length Enforcement:
- Minimum: 0 words (approximately 5500-7000 tokens)
- Target: 5000-6000 words (approximately 7000-8500 tokens)
- Maximum: Use the full token budget available (up to 12,000 words if needed)

If you find yourself being brief or concise, STOP and expand. Add more:
- Complete documentation for EVERY component
- Detailed prop documentation for EVERY prop
- Multiple usage examples for each component
- Composition patterns
- Styling examples
- Accessibility considerations
- More code examples showing real usage

Style: Generate like Cursor AI - show the actual code with inline documentation. Include complete type information, detailed parameter descriptions, and extensive practical examples. Make it code-focused and practical. Be EXTENSIVE and THOROUGH.`;break;case"TESTING_CI":p=`Generate a Testing & CI/CD documentation section for "${o}".
${m}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Testing & CI/CD content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Testing & CI/CD document that includes (be thorough and detailed):

1. **Testing Strategy** - Comprehensive overview of testing approach including:
   - Testing philosophy and principles
   - Testing pyramid explanation
   - Coverage goals
   - Quality metrics

2. **Test Setup** - Complete guide on how to set up and run tests including:
   - Prerequisites and dependencies
   - Configuration files
   - Environment setup
   - Troubleshooting common issues

3. **Test Types** - Detailed documentation of all test types:
   - Unit tests (with examples)
   - Integration tests (with examples)
   - E2E tests (with examples)
   - Performance tests
   - Security tests
   - Visual regression tests

4. **CI/CD Pipeline** - Comprehensive CI/CD documentation including:
   - Complete pipeline configuration
   - All stages explained
   - Build process
   - Deployment process
   - Rollback procedures

5. **Running Tests** - Extensive commands and instructions:
   - All test commands
   - Options and flags
   - Running specific test suites
   - Debugging tests

6. **Coverage** - Complete test coverage information:
   - Coverage reports
   - Coverage goals
   - Improving coverage

7. **Deployment** - Comprehensive deployment documentation:
   - Deployment process step-by-step
   - All environments explained
   - Deployment strategies
   - Monitoring and rollback

8. **Additional Sections**:
   - Best practices
   - Common issues and solutions
   - Performance optimization
   - Security considerations

IMPORTANT: Generate EXTENSIVE documentation - aim for 3000-5000+ words. Be thorough, detailed, and comprehensive. Include extensive examples and detailed explanations.

Focus on practical testing and deployment workflows with complete information.`;break;case"INLINE_CODE":try{console.log(`[DocsWriter] Generating inline code documentation for ${o}...`);const b=await H8(s.repo,{includeInlineDocs:!0,includeFunctionDocs:!0,includeClassDocs:!0,includeExamples:!0,includeTypes:!0,language:"typescript"});return console.log(`[DocsWriter] Generated inline code documentation: ${b.length} characters`),b}catch(b){return console.error("[DocsWriter] Failed to generate inline code documentation:",b),`# Inline Code Documentation

*Failed to generate inline code documentation. Please check the console for errors.*`}case"CHANGELOG":p=`Generate a Changelog documentation for "${o}".
${m}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,0)}${n.length>0?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Changelog content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Changelog that includes (be thorough and detailed):

1. **Version History** - Complete list of ALL versions with:
   - Dates
   - Release notes
   - Key highlights

2. **Change Categories** - Detailed documentation for each category:
   - Added (with descriptions)
   - Changed (with before/after explanations)
   - Deprecated (with migration paths)
   - Removed (with alternatives)
   - Fixed (with issue descriptions)
   - Security (with severity and impact)

3. **Recent Changes** - Comprehensive documentation of most recent version changes:
   - Detailed descriptions
   - Impact analysis
   - Migration requirements
   - Breaking changes highlighted

4. **Migration Guides** - Complete migration guides for:
   - All breaking changes
   - Step-by-step migration instructions
   - Code examples
   - Common issues and solutions

5. **Release Notes** - Detailed summaries of major releases including:
   - Feature highlights
   - Performance improvements
   - Bug fixes
   - Security updates

6. **Additional Sections**:
   - Timeline visualization
   - Contributor acknowledgments
   - Statistics

IMPORTANT: Generate EXTENSIVE documentation - aim for 0-0+ words. Be thorough, detailed, and comprehensive. Include complete information for all versions and changes.

Format it as a standard changelog with version numbers and dates, but make it comprehensive and detailed.`;break;default:return n}try{const _=(L=>L.includes("gpt-4o")||L.includes("gpt-5")?16384:L.startsWith("gpt-4")?8192:L.startsWith("gpt-3.5")?4096:16384)(a),E=Math.floor(_*.75),C={README:{min:4500,target:5e3},ARCHITECTURE:{min:0,target:4500},API:{min:0,target:4500},COMPONENTS:{min:5e3,target:6e3},TESTING_CI:{min:3e3,target:0},CHANGELOG:{min:0,target:3e3},INLINE_CODE:{min:0,target:0}},{min:S,target:N}=C[t]||{min:0,target:4500},D=`LENGTH ENFORCEMENT - CRITICAL - READ THIS CAREFULLY: 
- You have access to ${_} output tokens (${E} words)
- For ${t} sections: MINIMUM ${S} words, TARGET ${N} words, MAXIMUM: Use the full token budget (${_} tokens)
- You MUST use at least 80-90% of the available token budget (${Math.floor(_*.8)} tokens minimum)
- CRITICAL: If your response is under ${S} words, you have FAILED the task and will need to regenerate
- DO NOT stop early - continue generating until you reach at least ${N} words
- DO NOT use stop sequences or finish tokens until you reach ${N} words
- If you think you're done but haven't reached ${N} words, you're NOT done - keep going
- Count your words as you generate - aim for ${N} words, not just ${S} words
- Add more sections, more examples, more explanations, more code snippets, more details
- Expand every section with multiple subsections (at least 3-5 subsections per major section)
- Include extensive code examples (at least 15-20 code snippets for README, 20-30 for COMPONENTS)
- Add detailed explanations for every concept (5-7 sentences per paragraph, not 2-3)
- Include troubleshooting sections (10+ items), FAQ sections (10+ items), best practices sections (10+ items)
- Add "Additional Resources", "Related Topics", "See Also" sections to expand content
- Include multiple "Example" subsections under each major section (at least 3-5 examples per concept)
- Add "Common Patterns", "Advanced Usage", "Edge Cases" subsections
- Add "Performance Considerations", "Security Notes", "Scalability", "Best Practices" sections
- Do NOT stop until you have generated comprehensive, extensive documentation matching professional standards
- Remember: SHORT = FAILURE. LONG = SUCCESS. Be verbose, be thorough, be comprehensive.
- Your goal is to generate ${N} words - keep generating until you reach this target.
- IMPORTANT: The model will automatically stop at ${_} tokens, so use them all - don't stop early!`,F=i!=="en"?`You are an expert code documentation generator in the style of Cursor AI. Generate EXTENSIVE, COMPREHENSIVE, DETAILED ${t} documentation in ${h[i]}. 

CRITICAL FIRST STEP - EXTRACT AND VERIFY (MANDATORY - DO NOT SKIP):
BEFORE generating any documentation, you MUST complete this verification process:

STEP 1: Extract actual code elements from RAG context:
- Read the RAG context line by line
- Extract: function names, class names, component names, API routes, file paths
- Create a list: "Feature X found in file Y"
- DO NOT proceed if you haven't created this list

STEP 2: Verify each element:
- For each item in your list, verify it has actual implementation code in the RAG context
- Remove any items you cannot verify
- Your final list contains ONLY verified, existing features

STEP 3: This verified list is your ONLY source of truth:
- You can ONLY document items from this verified list
- If it's not in the list, it doesn't exist - DO NOT document it
- If the list has 5 items, document 5 items - no more

STEP 4: Only AFTER completing steps 1-3, generate documentation:
- Document ONLY items from your verified list
- For each item, cite the file path and explain what the code actually does
- Expand on these verified items with detail - do NOT add new items

CRITICAL: If you skip this extraction and start documenting, you WILL invent content. This step is MANDATORY.

MANDATORY: Before writing documentation, you MUST:
1. List all verified features/components/APIs you found in RAG context (with file paths)
2. Show this list in your response before the documentation (format: "Verified Features: 1. FeatureA (src/path.ts), 2. FeatureB (src/path2.ts)...")
3. Document ONLY items from this list
4. For each item, cite the exact file path and code location

CRITICAL - DO NOT INVENT CONTENT:
- DO NOT invent features, functions, or capabilities that don't exist in the codebase
- DO NOT make up API endpoints, components, or modules that aren't in the actual code
- DO NOT describe functionality that you cannot verify exists in the RAG context or code analysis
- ONLY document what you can see in the actual code, RAG context, and repository analysis
- If a feature is mentioned in reference docs but not in the code, DO NOT include it
- If you're unsure if something exists, DO NOT include it - only document what you can verify
- When listing features, ONLY list features that actually exist in the codebase
- When describing APIs, ONLY describe APIs that actually exist in the code
- When listing components, ONLY list components that actually exist in the code
- Base ALL content on the RAG context, code analysis, and actual repository structure
- If the code doesn't show a feature, DO NOT document it as if it exists
- To reach the word count, expand on REAL features with more detail, examples, and explanations - do NOT invent new features

CRITICAL REQUIREMENTS:
- Generate COMPLETELY NEW, EXTENSIVE documentation (MANDATORY: ${S}-${N}+ words - this is NOT optional)
- DO NOT copy or reformat the reference documentation - generate fresh content based on actual codebase analysis
- Use RAG context and repository analysis as PRIMARY sources, not the reference documentation
- MOST IMPORTANT: The documentation MUST accurately explain what this application does based on the code context - do NOT generate generic or vague descriptions
- Be THOROUGH and COMPREHENSIVE - do not be brief or concise - CONTINUE GENERATING until you reach the word count
- Document EVERYTHING - all functions, classes, types, interfaces, constants, utilities - leave nothing out
- Include COMPLETE JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
- Provide MULTIPLE examples for each concept (basic, advanced, edge cases, error handling, integration) - at least 3-5 examples per major function/class
- Include detailed type information with complete parameter descriptions including constraints and valid ranges
- Explain design decisions and rationale - explain both "what" and "why" - be verbose in explanations
- Include performance considerations, security notes, scalability concerns, and best practices
- Document internal functions and helpers, not just public APIs
- Provide extensive code examples from the actual codebase (use RAG context to find real code) - include actual code snippets
- Include troubleshooting guides, common issues, and solutions - expand on these sections
- Make it as comprehensive as professional API documentation (MDN, TypeScript Handbook, major open-source projects level)
- ANALYZE THE ACTUAL CODEBASE - don't rely on reference documentation

${D}

All content must be in ${h[i]}. Be EXTENSIVE and DETAILED - quality over brevity. Generate NEW comprehensive content based on codebase analysis, not reference material. Be verbose and thorough. Match the structure and detail level of professional documentation like GitScribe's DOCUMENTATION.md (4,500-5,500 words, 600-700+ lines).`:`You are an expert code documentation generator in the style of Cursor AI. Generate EXTENSIVE, COMPREHENSIVE, DETAILED ${t} documentation.

CRITICAL FIRST STEP - EXTRACT AND VERIFY (MANDATORY - DO NOT SKIP):
BEFORE generating any documentation, you MUST complete this verification process:

STEP 1: Extract actual code elements from RAG context:
- Read the RAG context line by line
- Extract: function names, class names, component names, API routes, file paths
- Create a list: "Feature X found in file Y"
- DO NOT proceed if you haven't created this list

STEP 2: Verify each element:
- For each item in your list, verify it has actual implementation code in the RAG context
- Remove any items you cannot verify
- Your final list contains ONLY verified, existing features

STEP 3: This verified list is your ONLY source of truth:
- You can ONLY document items from this verified list
- If it's not in the list, it doesn't exist - DO NOT document it
- If the list has 5 items, document 5 items - no more

STEP 4: Only AFTER completing steps 1-3, generate documentation:
- Document ONLY items from your verified list
- For each item, cite the file path and explain what the code actually does
- Expand on these verified items with detail - do NOT add new items

CRITICAL: If you skip this extraction and start documenting, you WILL invent content. This step is MANDATORY.

MANDATORY: Before writing documentation, you MUST:
1. List all verified features/components/APIs you found in RAG context (with file paths)
2. Show this list in your response before the documentation (format: "Verified Features: 1. FeatureA (src/path.ts), 2. FeatureB (src/path2.ts)...")
3. Document ONLY items from this list
4. For each item, cite the exact file path and code location

CRITICAL - DO NOT INVENT CONTENT:
- DO NOT invent features, functions, or capabilities that don't exist in the codebase
- DO NOT make up API endpoints, components, or modules that aren't in the actual code
- DO NOT describe functionality that you cannot verify exists in the RAG context or code analysis
- ONLY document what you can see in the actual code, RAG context, and repository analysis
- If a feature is mentioned in reference docs but not in the code, DO NOT include it
- If you're unsure if something exists, DO NOT include it - only document what you can verify
- When listing features, ONLY list features that actually exist in the codebase
- When describing APIs, ONLY describe APIs that actually exist in the code
- When listing components, ONLY list components that actually exist in the code
- Base ALL content on the RAG context, code analysis, and actual repository structure
- If the code doesn't show a feature, DO NOT document it as if it exists
- To reach the word count, expand on REAL features with more detail, examples, and explanations - do NOT invent new features

CRITICAL REQUIREMENTS:
- Generate COMPLETELY NEW, EXTENSIVE documentation (MANDATORY: ${S}-${N}+ words - this is NOT optional)
- DO NOT copy or reformat the reference documentation - generate fresh content based on actual codebase analysis
- Use RAG context and repository analysis as PRIMARY sources, not the reference documentation
- MOST IMPORTANT: The documentation MUST accurately explain what this application does based on the code context - do NOT generate generic or vague descriptions
- Be THOROUGH and COMPREHENSIVE - do not be brief or concise - CONTINUE GENERATING until you reach the word count
- Document EVERYTHING - all functions, classes, types, interfaces, constants, utilities - leave nothing out
- Include COMPLETE JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
- Provide MULTIPLE examples for each concept (basic, advanced, edge cases, error handling, integration) - at least 3-5 examples per major function/class
- Include detailed type information with complete parameter descriptions including constraints and valid ranges
- Explain design decisions and rationale - explain both "what" and "why" - be verbose in explanations
- Include performance considerations, security notes, scalability concerns, and best practices
- Document internal functions and helpers, not just public APIs
- Provide extensive code examples from the actual codebase (use RAG context to find real code) - include actual code snippets
- Include troubleshooting guides, common issues, and solutions - expand on these sections
- Make it as comprehensive as professional API documentation (MDN, TypeScript Handbook, major open-source projects level)
- ANALYZE THE ACTUAL CODEBASE - don't rely on reference documentation

${D}

Style: Code-first, practical, developer-friendly, but EXTENSIVE and DETAILED. Quality and completeness over brevity. Generate NEW comprehensive content based on codebase analysis, not reference material. Be verbose and thorough. Match the structure and detail level of professional documentation like GitScribe's DOCUMENTATION.md (4,500-5,500 words, 600-700+ lines).`;console.log(`[DocsWriter] Generating ${t} with model: ${a}, maxTokens: ${_}, temperature: 0.2`);const Y=await Ms(p,F,a,.2,o,!0,_),de=Y.split(/\s+/).length,H=Y.length,B=Y.split(`
`).length;console.log(`[DocsWriter] Generated ${t} content: ${de} words, ${H} characters, ${B} lines`);const q={README:{min:4500,target:5e3},ARCHITECTURE:{min:0,target:4500},API:{min:0,target:4500},COMPONENTS:{min:5e3,target:6e3},TESTING_CI:{min:3e3,target:0},CHANGELOG:{min:0,target:3e3}},{min:z,target:P}=q[t]||{min:0,target:4500};if(de<z){if(console.error(`[DocsWriter] ERROR: Generated content is TOO SHORT (${de} words). Expected minimum ${z} words for ${t}. This indicates the model stopped early or didn't follow instructions.`),console.error(`[DocsWriter] Model: ${a}, MaxTokens: ${_}, Actual words: ${de}, Expected: ${z}-${P}`),console.error(`[DocsWriter] Content preview (first 500 chars): ${Y.substring(0,500)}...`),de<z*.95){console.warn(`[DocsWriter] Attempting to expand content (${de} words < ${z} minimum)`);try{const L=`The previous documentation generation for ${t} was too short (${de} words). You MUST expand it to at least ${z} words (target: ${P} words). You are currently ${z-de} words SHORT.

Current content:
${Y}

CRITICAL EXPANSION REQUIREMENTS:
- You MUST add at least ${z-de} more words (target: ${P-de} more words)
- DO NOT just add filler - expand meaningfully with real content
- Add more detailed explanations, more examples, more code snippets, more subsections
- Expand every existing section with additional details, examples, and explanations
- Add new sections if needed: "Advanced Usage", "Common Patterns", "Edge Cases", "Best Practices", "Troubleshooting", "FAQ"
- For each major section, add 2-3 more subsections with detailed content
- Add more code examples (at least 5-10 more code snippets)
- Expand explanations to 5-7 sentences per paragraph instead of 2-3
- Add "See Also", "Related Topics", "Additional Resources" sections

You MUST expand this content significantly. Add:
- More detailed explanations (expand each section with 3-5 additional paragraphs)
- More code examples (add 5-10 additional code snippets)
- More subsections (break down existing sections into more detailed subsections)
- More troubleshooting items (add 5+ more troubleshooting scenarios)
- More FAQ items (add 5+ more FAQ questions and answers)
- More examples (add 3-5 more usage examples per major concept)
- More detailed API documentation (expand parameter descriptions, add more examples)
- More architecture details (add diagrams descriptions, more design patterns)
- More best practices (add 5+ more best practice recommendations)

CRITICAL - DO NOT INVENT CONTENT WHEN EXPANDING:
- DO NOT invent new features, APIs, or components to reach the word count
- ONLY expand on features and content that already exist in the current documentation
- Add more detail, examples, explanations, and code snippets to EXISTING features
- Add more subsections to EXISTING sections
- Add more troubleshooting items, FAQs, and best practices based on EXISTING functionality
- DO NOT make up new functionality that wasn't in the original content
- Base all expansions on what's already documented, just with more detail

DO NOT just add filler text. Expand meaningfully with real, useful content based on what EXISTS. The final documentation MUST be at least ${z} words (target: ${P} words). Continue generating until you reach this length.`,G=await Ms(L,`You are a documentation expert. CRITICAL TASK: Expand and enhance documentation to meet minimum length requirements.

CURRENT STATUS: ${de} words
REQUIRED MINIMUM: ${z} words  
TARGET: ${P} words
WORDS NEEDED: At least ${z-de} more words (target: ${P-de} more words)

CRITICAL - DO NOT INVENT CONTENT:
- DO NOT invent new features, APIs, or components that don't exist in the current documentation
- ONLY expand on features and content that are already documented
- Add more detail, examples, and explanations to EXISTING features
- Add more subsections to EXISTING sections
- DO NOT make up new functionality

You MUST:
- Expand the existing content with more details, examples, and explanations
- Add new meaningful sections and subsections based on EXISTING content
- Include more code examples and snippets for EXISTING features
- Add troubleshooting guides, FAQs, best practices for EXISTING functionality
- Be thorough, comprehensive, and detailed about what EXISTS
- DO NOT stop until you reach at least ${z} words
- Aim for ${P} words total

This is NOT optional - you MUST reach the minimum word count. Continue generating until you have at least ${z} words.`,a,.3,o,!0,_),X=G.split(/\s+/).length;if(console.log(`[DocsWriter] Expanded content: ${X} words (was ${de})`),X>=z)return G;console.warn(`[DocsWriter] Expansion still insufficient (${X} < ${z}), returning original`)}catch(L){console.error("[DocsWriter] Failed to expand content:",L)}}}else de<P?console.warn(`[DocsWriter] WARNING: Generated content is shorter than target (${de} words). Target: ${P} words for ${t}.`):console.log(`[DocsWriter]  Generated comprehensive documentation: ${de} words (target: ${P})`);return Y}catch{return console.warn(`[DocsWriter] Failed to generate section-specific content for ${t}, using base markdown`),n}}const X8=[{from:pe.DISCOVERY,to:pe.ANALYSIS},{from:pe.ANALYSIS,to:pe.PLANNING},{from:pe.PLANNING,to:pe.WRITING},{from:pe.WRITING,to:pe.COMPLETE}],Uk=new Map([[pe.DISCOVERY,{name:"RepoDiscovery",execute:YM,shouldRun:t=>{var r,s;const e=((r=t.completedSteps)==null?void 0:r.has(pe.DISCOVERY))||!1,n=t.selectedRepos&&t.selectedRepos.length>0;return console.log("[Manager] DISCOVERY shouldRun check:",{hasCompleted:e,hasRepos:n,selectedReposCount:((s=t.selectedRepos)==null?void 0:s.length)||0}),!e&&n}}],[pe.ANALYSIS,{name:"RepoAnalysis",execute:I8,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(pe.DISCOVERY)&&!((n=t.completedSteps)!=null&&n.has(pe.ANALYSIS))&&t.discoveredRepos&&t.discoveredRepos.length>0)}}],[pe.PLANNING,{name:"DocsPlanner",execute:R8,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(pe.ANALYSIS)&&!((n=t.completedSteps)!=null&&n.has(pe.PLANNING))&&t.repoAnalyses&&t.repoAnalyses.size>0)}}],[pe.WRITING,{name:"DocsWriter",execute:Y8,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(pe.PLANNING)&&!((n=t.completedSteps)!=null&&n.has(pe.WRITING))&&t.documentationPlans&&t.documentationPlans.size>0)}}]]);function Q8(t,e){const n=X8.filter(s=>s.from===t);if(n.length===0)return null;for(const s of n){if(!s.condition){const i=n.find(a=>a.condition&&a.condition(e));return i?i.to:s.to}if(s.condition(e))return s.to}const r=n.find(s=>!s.condition);return r?r.to:null}class e7{constructor(e,n,r){this.state={...e},this.onStateUpdate=n,this.onProgress=r}updateState(e){this.state={...this.state,...e,completedSteps:new Set([...this.state.completedSteps||[],...e.completedSteps||[]]),errors:new Map([...this.state.errors||[],...e.errors||[]])},this.onStateUpdate&&this.onStateUpdate(this.state),this.onProgress&&e.progress&&this.onProgress(e.progress)}async executeStep(e){const n=Uk.get(e);if(!n)throw new Error(`No agent node found for step: ${e}`);if(n.shouldRun&&!n.shouldRun(this.state))return!1;console.log(`[Manager] Executing ${n.name}...`);const r=await n.execute(this.state);return this.updateState(r),!0}async run(){var s,i,a,o;console.log("[Manager] Starting agent workflow..."),console.log("[Manager] Initial state:",{selectedRepos:((s=this.state.selectedRepos)==null?void 0:s.length)||0,completedSteps:Array.from(this.state.completedSteps||[])}),this.updateState({currentStep:pe.DISCOVERY});let e=pe.DISCOVERY,n=0;const r=20;for(;e&&e!==pe.COMPLETE&&n<r;)try{n++,console.log(`[Manager] === Iteration ${n}: Executing step ${e} ===`),console.log("[Manager] State before step:",{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0});const l=await this.executeStep(e);console.log(`[Manager] Step ${e} executed: ${l}`),console.log("[Manager] State after step:",{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0});const u=Q8(e,this.state);if(console.log(`[Manager] Next step from ${e}:`,u),l&&u){if(u===e){console.warn(`[Manager] Workflow stuck at ${e}, breaking`);break}if(e===pe.DISCOVERY&&((i=this.state.completedSteps)!=null&&i.has(pe.DISCOVERY))&&(!this.state.discoveredRepos||this.state.discoveredRepos.length===0)){console.error("[Manager] DISCOVERY completed but no repositories found. Stopping workflow."),this.updateState({errors:new Map([["manager","No repositories discovered. Cannot proceed with workflow."]])});break}const d=Uk.get(u);if(d&&d.shouldRun){const h=d.shouldRun(this.state);if(console.log(`[Manager] Next step ${u} can run:`,h),!h&&(console.warn(`[Manager] Next step ${u} conditions not met. State:`,{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0,hasDocumentationPlans:!!this.state.documentationPlans&&this.state.documentationPlans.size>0,hasGeneratedDocs:!!this.state.generatedDocs&&this.state.generatedDocs.size>0}),u===pe.ANALYSIS&&((a=this.state.completedSteps)!=null&&a.has(pe.DISCOVERY))&&(!this.state.discoveredRepos||this.state.discoveredRepos.length===0))){console.error("[Manager] Cannot proceed to ANALYSIS: No discovered repositories");break}}e=u,this.updateState({currentStep:e})}else if(l){console.log(`[Manager] No next step from ${e}, completing workflow`);break}else{if(console.error(`[Manager] Step ${e} was skipped! This may indicate a problem.`),console.error("[Manager] Current state:",{completedSteps:Array.from(this.state.completedSteps||[]),selectedRepos:((o=this.state.selectedRepos)==null?void 0:o.length)||0}),e===pe.DISCOVERY)throw new Error("DISCOVERY step was skipped - this should never happen on first run. Check that selectedRepos are provided.");if(u&&u!==e)console.log(`[Manager] Attempting to continue to ${u} despite skip`),e=u,this.updateState({currentStep:e});else{console.warn(`[Manager] Cannot proceed from ${e}, breaking`);break}}}catch(l){console.error(`[Manager] Error in step ${e}:`,l);const u=`manager_${e}`;this.updateState({errors:new Map([[u,l.message||"Workflow error"]])});break}return n>=r&&(console.error("[Manager] Workflow exceeded max iterations, stopping"),this.updateState({errors:new Map([["manager","Workflow exceeded maximum iterations"]])})),this.updateState({currentStep:pe.COMPLETE,completedSteps:new Set([...this.state.completedSteps||[],pe.COMPLETE])}),console.log("[Manager] Workflow completed"),this.state}getState(){return{...this.state}}reset(e){this.state={...this.state,...e,currentStep:void 0,completedSteps:new Set,errors:new Map}}}function t7({selectedRepos:t,selectedOutputFormats:e=["markdown"],selectedSectionTypes:n=["README"],selectedLanguage:r="en",selectedModel:s="gpt-4o-mini",onReposChange:i,onComplete:a}){const[o,l]=$.useState(!1),[u,d]=$.useState(null),[h,m]=$.useState(""),[p,y]=$.useState(null),[w]=$.useState(()=>localStorage.getItem("selectedLanguage")||r),x=ya(w),g=$.useCallback(async()=>{if(t.length===0){m(x("pleaseSelectAtLeastOneRepository"));return}m(""),l(!0),m(""),d(null);const E={selectedRepos:t,selectedOutputFormats:e,selectedSectionTypes:n,selectedLanguage:w,selectedModel:s,completedSteps:new Set};try{const C=new e7(E,N=>{d(N)},N=>{});y(C);const S=await C.run();d(S),a(S)}catch(C){m(C.message||x("workflowFailed")),console.error("Agent workflow error:",C)}finally{l(!1)}},[t,e,n,w,s,a,x]);$.useEffect(()=>{const E=()=>{!o&&t.length>0&&g()};return window.addEventListener("autoStartWorkflow",E),()=>{window.removeEventListener("autoStartWorkflow",E)}},[o,t.length,g]);const f=E=>{var C,S;return u?u.currentStep===E?"running":(C=u.completedSteps)!=null&&C.has(E)?"completed":(S=u.errors)!=null&&S.has(`manager_${E}`)?"error":"pending":"pending"},v=(E,C)=>{switch(C){case"completed":return c.jsx(to,{className:"w-5 h-5 text-green-600"});case"running":return c.jsx(ty,{className:"w-5 h-5 text-orange-600 animate-spin"});case"error":return c.jsx(DM,{className:"w-5 h-5 text-red-600"});default:return c.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}},b=E=>{switch(E){case pe.DISCOVERY:return x("repositoryDiscovery");case pe.ANALYSIS:return x("repositoryAnalysis");case pe.PLANNING:return x("documentationPlanning");case pe.WRITING:return x("documentationWriting");case pe.COMPLETE:return x("complete");default:return E}},_=[pe.DISCOVERY,pe.ANALYSIS,pe.PLANNING,pe.WRITING];return c.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 border border-white/50 shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[c.jsx(_t,{className:"w-5 h-5 text-red-600"}),x("agentWorkflow")]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x("automatedPipeline")})]}),o&&c.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-xl font-semibold shadow-lg flex items-center gap-2",children:[c.jsx(ty,{className:"w-5 h-5 animate-spin"}),c.jsx("span",{children:x("running")})]})]}),c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl border border-orange-200/50",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-700 mb-2 flex items-center gap-1",children:[c.jsx(Ut,{className:"w-3.5 h-3.5 text-orange-600"}),x("outputFormats")]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(E=>c.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:E==="markdown"?"MD":E==="markdown_mermaid"?"MD+Mermaid":E==="mdx"?"MDX":E==="openapi"?"OpenAPI":"HTML"},E))})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-700 mb-2 flex items-center gap-1",children:[c.jsx(Ut,{className:"w-3.5 h-3.5 text-orange-600"}),x("sectionTypes")]}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map(E=>c.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:E},E))})]})]})}),h&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h}),c.jsx("div",{className:"space-y-4",children:_.map((E,C)=>{var D,F;const S=f(E),N=C===_.length-1;return c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[v(E,S),!N&&c.jsx("div",{className:`w-0.5 h-12 mt-2 ${S==="completed"?"bg-green-600":"bg-gray-200"}`})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:b(E)}),(u==null?void 0:u.progress)&&u.progress.currentAgent===E.replace("_","")&&c.jsxs("span",{className:"text-xs text-gray-500",children:[u.progress.current,"/",u.progress.total,u.progress.currentRepo&&c.jsx("span",{className:"ml-2 text-red-600",children:u.progress.currentRepo.split("/")[1]})]})]}),S==="running"&&((D=u==null?void 0:u.progress)==null?void 0:D.currentRepo)&&c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[x("processing")," ",u.progress.currentRepo]}),S==="completed"&&c.jsx("p",{className:"text-sm text-green-600 mt-1",children:x("completed")}),S==="error"&&c.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[x("error")," ",(F=u==null?void 0:u.errors)==null?void 0:F.get(`manager_${E}`)]})]})]},E)})}),((u==null?void 0:u.currentStep)===pe.COMPLETE||(u==null?void 0:u.generatedDocsFull))&&c.jsxs("div",{className:"mt-6 space-y-4",children:[(u==null?void 0:u.currentStep)===pe.COMPLETE&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsxs("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[c.jsx(to,{className:"w-5 h-5"}),x("workflowComplete")]}),c.jsx("div",{className:"space-y-2 text-sm text-green-800",children:u.generatedDocs&&c.jsxs("p",{children:[x("generatedDocumentationFor")," ",u.generatedDocs.size," ",u.generatedDocs.size!==1?x("repositories"):x("repository")]})})]}),u.generatedDocsFull&&u.generatedDocsFull.size>0&&c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[c.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[c.jsx(Zi,{className:"w-5 h-5"}),x("pdfExport")]}),c.jsx("div",{className:"space-y-2",children:Array.from(u.generatedDocsFull.entries()).map(([E,C])=>c.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[c.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:E.split("/")[1]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:C.sections.map(S=>c.jsxs("button",{onClick:async()=>{try{const{exportToPDF:N,downloadPDF:D}=await gm(async()=>{const{exportToPDF:Y,downloadPDF:de}=await import("./pdf-exporter-M1iVyzVj.js");return{exportToPDF:Y,downloadPDF:de}},[]),F=await N(S);D(F,`${E.split("/")[1]}_${S.type}_${S.format}.pdf`)}catch(N){alert(`${x("pdfExportFailed")}: ${N.message}`)}},className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-xs font-medium",children:[c.jsx(Zi,{className:"w-3.5 h-3.5"}),S.type," (",S.format,")"]},S.id))})]},E))})]})]})]})}function zr({children:t,content:e}){const[n,r]=$.useState(!1),[s,i]=$.useState({top:0,right:0}),a=$.useRef(null),o=()=>{if(a.current){const l=a.current.getBoundingClientRect();i({top:l.top+l.height/2,right:window.innerWidth-l.left+8})}};return $.useEffect(()=>{if(n){o();const l=()=>o(),u=()=>o();return window.addEventListener("scroll",l,!0),window.addEventListener("resize",u),()=>{window.removeEventListener("scroll",l,!0),window.removeEventListener("resize",u)}}},[n]),c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:a,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"relative",children:t}),n&&tE.createPortal(c.jsx("div",{className:"fixed z-[9999] pointer-events-none transition-opacity duration-200",style:{top:`${s.top}px`,right:`${s.right}px`,transform:"translateY(-50%)"},children:c.jsx("div",{className:"bg-white text-gray-900 text-xs rounded-lg px-3 py-2 shadow-xl border border-gray-200 whitespace-nowrap",children:e})}),document.body)]})}function n7({onBack:t}){const n=(()=>{try{const I=localStorage.getItem("gitScribe_documentation"),ve=localStorage.getItem("gitScribe_repoDocumentations"),xe=localStorage.getItem("gitScribe_repoDocumentationsFull"),qe=localStorage.getItem("gitScribe_selectedRepos"),$e=localStorage.getItem("gitScribe_modelUsedForGeneration"),Pe=localStorage.getItem("gitScribe_activeTab");let ze=new Map;if(ve)try{ze=new Map(JSON.parse(ve))}catch(yt){console.error("Error parsing repoDocumentations:",yt)}let je=new Map;if(xe)try{const yt=JSON.parse(xe);je=new Map(yt.map(([On,ka])=>[On,ka]))}catch(yt){console.error("Error parsing repoDocumentationsFull:",yt)}let rn=[];if(qe)try{rn=JSON.parse(qe)}catch(yt){console.error("Error parsing selectedRepos:",yt)}return{documentation:I||"",repoDocumentations:ze,repoDocumentationsFull:je,selectedRepos:rn,modelUsedForGeneration:$e||"",activeTab:Pe||"combined"}}catch(I){return console.error("Error loading from localStorage:",I),{documentation:"",repoDocumentations:new Map,repoDocumentationsFull:new Map,selectedRepos:[],modelUsedForGeneration:"",activeTab:"combined"}}})(),[r,s]=$.useState(n.documentation),[i,a]=$.useState(n.repoDocumentations),[o,l]=$.useState(n.repoDocumentationsFull),[u,d]=$.useState("markdown"),[h,m]=$.useState("README"),[p,y]=$.useState(!1),[w,x]=$.useState(""),[g,f]=$.useState(n.selectedRepos),[v,b]=$.useState(!1),[_,E]=$.useState("gpt-4o-mini"),[C,S]=$.useState(n.modelUsedForGeneration),[N,D]=$.useState(dn()||""),[F,Y]=$.useState(!1),[de,H]=$.useState(jo()||""),[B,q]=$.useState(!1),[z,P]=$.useState(!1),[L,G]=$.useState(dn()||""),[X,ie]=$.useState(jo()||""),[Oe,Fe]=$.useState(!1),[ke,A]=$.useState(null),[k,U]=$.useState(!1),[O,Ce]=$.useState(""),[We,Ue]=$.useState("main"),[at,gt]=$.useState([]),[In,Qe]=$.useState(!1),[tn,jr]=$.useState(""),[qt,Z]=$.useState(n.activeTab),[nn,fe]=$.useState(!1),[oe,_e]=$.useState(!0),[ee,J]=$.useState(!1),[ge,ye]=$.useState(!1),[Kt,du]=$.useState(!1),[wa,rO]=$.useState(!0),[sO,sp]=$.useState(!1),[iO,ba]=$.useState(!1),[aO,hu]=$.useState(!1),[cr,mu]=$.useState(null),[oO,pu]=$.useState(!1),[Rn,Yo]=$.useState(null),[Gs,lO]=$.useState(["markdown"]),[Bs,cO]=$.useState(["README"]),[Vs,Zo]=$.useState(["markdown"]),[Hs,Jo]=$.useState(["README"]),[_a,uO]=$.useState(()=>localStorage.getItem("selectedLanguage")||"en"),[Lt,ip]=$.useState(!1),[ap,op]=$.useState(""),[dO,lp]=$.useState(!1);$.useEffect(()=>{localStorage.setItem("selectedLanguage",_a),window.dispatchEvent(new Event("languageChanged"))},[_a]),$.useEffect(()=>{try{r?localStorage.setItem("gitScribe_documentation",r):localStorage.removeItem("gitScribe_documentation")}catch(I){console.error("Error saving documentation to localStorage:",I)}},[r]),$.useEffect(()=>{try{if(i.size>0){const I=JSON.stringify(Array.from(i.entries()));localStorage.setItem("gitScribe_repoDocumentations",I)}else localStorage.removeItem("gitScribe_repoDocumentations")}catch(I){console.error("Error saving repoDocumentations to localStorage:",I)}},[i]),$.useEffect(()=>{try{if(o.size>0){const I=JSON.stringify(Array.from(o.entries()));localStorage.setItem("gitScribe_repoDocumentationsFull",I)}else localStorage.removeItem("gitScribe_repoDocumentationsFull")}catch(I){console.error("Error saving repoDocumentationsFull to localStorage:",I)}},[o]),$.useEffect(()=>{try{g.length>0?localStorage.setItem("gitScribe_selectedRepos",JSON.stringify(g)):localStorage.removeItem("gitScribe_selectedRepos")}catch(I){console.error("Error saving selectedRepos to localStorage:",I)}},[g]),$.useEffect(()=>{try{C?localStorage.setItem("gitScribe_modelUsedForGeneration",C):localStorage.removeItem("gitScribe_modelUsedForGeneration")}catch(I){console.error("Error saving modelUsedForGeneration to localStorage:",I)}},[C]),$.useEffect(()=>{try{qt&&localStorage.setItem("gitScribe_activeTab",qt)}catch(I){console.error("Error saving activeTab to localStorage:",I)}},[qt]),$.useEffect(()=>{k&&g.length>0&&(async()=>{var ve;Qe(!0),jr("");try{const xe=g[0],qe=await HM(xe.owner,xe.name,dn()||void 0);if(gt(qe),qe.length>0){const $e=xe.defaultBranch||"main";qe.includes($e)?Ue($e):Ue(qe[0])}}catch(xe){console.error("Error fetching branches:",xe),jr(xe.message||"Failed to fetch branches"),gt([]),Ue(((ve=g[0])==null?void 0:ve.defaultBranch)||"main")}finally{Qe(!1)}})()},[k,g]),$.useEffect(()=>{!r&&nn&&fe(!1)},[r,nn]);const R=ya(_a);$.useEffect(()=>{const I=()=>{const ve=window.scrollY||document.documentElement.scrollTop,xe=ve<1500;du(ve>1500||xe),rO(xe||ve===0)};return window.addEventListener("scroll",I),I(),()=>window.removeEventListener("scroll",I)},[]);const hO=()=>{wa?window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},fu=(I,ve,xe)=>{console.log(`[updateDocumentationDisplay] Updating for ${I}, format: ${ve}, section: ${xe}`);const qe=o.get(I);if(console.log(`[updateDocumentationDisplay] Full docs available: ${!!qe}, sections: ${(qe==null?void 0:qe.sections.length)||0}`),qe&&qe.sections.length>0){const Pe=qe.sections.find(ze=>ze.format===ve&&ze.type===xe);if(console.log(`[updateDocumentationDisplay] Matching section found: ${!!Pe}`),Pe){const ze=Pe.markdown||Pe.html||Pe.openapiYaml||"";console.log(`[updateDocumentationDisplay] Setting content from section, length: ${ze.length}`),s(ze);return}else{const ze=qe.sections.find(je=>je.format===ve)||qe.sections.find(je=>je.type===xe)||qe.sections[0];if(ze){const je=ze.markdown||ze.html||ze.openapiYaml||"";console.log(`[updateDocumentationDisplay] Using fallback section, length: ${je.length}`),s(je);return}}}const $e=i.get(I);console.log(`[updateDocumentationDisplay] Using simple doc, available: ${!!$e}, length: ${($e==null?void 0:$e.length)||0}`),$e?s($e):console.warn(`[updateDocumentationDisplay] No documentation found for ${I}`)},Xo=()=>g,mO=async()=>{if(Lt&&Pi(),g.length===0){x(R("noRepositoriesSelected"));return}if(!O.trim()){x(R("pleaseProvideCommitMessage"));return}y(!0),x(""),A(null);try{const I=dn();if(!I)throw new Error(R("githubTokenRequiredForCommitting"));const ve=[];for(let $e=0;$e<g.length;$e++){const Pe=g[$e];A({current:$e+1,total:g.length,repo:Pe.fullName});try{const ze=i.get(Pe.fullName);if(!ze)throw new Error(R("documentationNotFoundForRepository"));const[je,rn]=Pe.fullName.split("/"),yt=await qM(je,rn,"DOCUMENTATION.md",ze,O,We,I);ve.push({repo:Pe.fullName,success:!0,commitUrl:yt.commit.html_url})}catch(ze){ve.push({repo:Pe.fullName,success:!1,error:ze.message})}}const xe=ve.filter($e=>$e.success).length,qe=ve.filter($e=>!$e.success).length;if(qe===0)x(""),alert(xe===1?R("successfullyCommittedToRepository"):R("successfullyCommittedToRepositories").replace("{count}",xe.toString())),U(!1);else{const $e=ve.filter(Pe=>!Pe.success).map(Pe=>`${Pe.repo}: ${Pe.error}`).join(`
`);x(qe===1?`${R("failedToCommitToRepository")}
${$e}`:`${R("failedToCommitToRepositories").replace("{count}",qe.toString())}
${$e}`)}}catch(I){x(I.message||R("failedToCommitDocumentation")),console.error("Commit error:",I)}finally{y(!1),A(null)}},Bx=(I,ve="manual")=>{var qe;s(I),ve==="manual"&&Lt&&ip(!1);const xe=qt!=="combined"?qt:(qe=g[0])==null?void 0:qe.fullName;xe?(a($e=>{const Pe=new Map($e);return Pe.set(xe,I),console.log(`[DocumentationEditor] Updated repoDocumentations for ${xe}`),Pe}),l($e=>{const Pe=new Map($e),ze=$e.get(xe);if(ze){const je=ze.sections.map(rn=>rn.format===u&&rn.type===h?u==="openapi"?{...rn,openapiYaml:I}:u==="html"?{...rn,html:I}:{...rn,markdown:I}:rn);Pe.set(xe,{...ze,sections:je}),console.log(`[DocumentationEditor] Updated repoDocumentationsFull for ${xe}, format: ${u}, section: ${h}`)}else console.log(`[DocumentationEditor] No full docs found for ${xe}, creating basic entry`);return Pe})):console.log("[DocumentationEditor] No current repo found, updating documentation state only"),P(!1)},Pi=()=>{Lt&&ap!==r&&Bx(ap,"manual")},Vx=I=>{console.log("[DocumentationEditor] Assistant update received, saving to repository maps..."),Bx(I,"assistant"),console.log("[DocumentationEditor] Assistant update saved successfully")},cp=()=>{Lt&&Pi(),r&&lp(!0)},gu=async I=>{if(!r)return;const ve=g.length>0?g[0].fullName:"documentation",xe=ve?`documentation-${ve.replace("/","-")}`:"documentation";switch(I){case"md":Fk(r,`${xe}.md`);break;case"txt":Fk(r,`${xe}.txt`);break;case"html":const qe=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1, h2, h3, h4, h5, h6 { margin-top: 24px; margin-bottom: 16px; }
    code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; }
    pre { background-color: #f4f4f4; padding: 16px; border-radius: 6px; overflow-x: auto; }
    pre code { background-color: transparent; padding: 0; }
  </style>
</head>
<body>
${r.split(`
`).map(je=>je.startsWith("# ")?`<h1>${je.substring(2)}</h1>`:je.startsWith("## ")?`<h2>${je.substring(3)}</h2>`:je.startsWith("### ")?`<h3>${je.substring(4)}</h3>`:je.startsWith("#### ")?`<h4>${je.substring(5)}</h4>`:je.startsWith("```")?je.includes("```")?"</pre>":"<pre>":je.trim()===""?"<br>":`<p>${je.replace(/`([^`]+)`/g,"<code>$1</code>")}</p>`).join(`
`)}
</body>
</html>`,$e=new Blob([qe],{type:"text/html"}),Pe=URL.createObjectURL($e),ze=document.createElement("a");ze.href=Pe,ze.download=`${xe}.html`,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),URL.revokeObjectURL(Pe);break;case"pdf":try{const{exportToPDF:je,downloadPDF:rn}=await gm(async()=>{const{exportToPDF:ka,downloadPDF:pO}=await import("./pdf-exporter-M1iVyzVj.js");return{exportToPDF:ka,downloadPDF:pO}},[]),On=await je({id:"export",type:h,format:"markdown",language:_a,title:"Documentation",markdown:r});rn(On,`${xe}.pdf`)}catch(je){alert(`PDF export failed: ${je.message}`)}break}lp(!1)},Kn=r?Math.round(r.length/4):0,$r=r?r.split(/\s+/).filter(I=>I.length>0).length:0,Ws=r?r.split(`
`).length:0,qs=r?r.length:0,up=Ws>0?($r/Ws).toFixed(1):"0",ds=$r>0?Math.ceil($r/200):0,Qo=(qs/1024).toFixed(2),ji=r?(r.match(/^##+\s/gm)||[]).length:0,yu=r?(r.match(/```[\s\S]*?```/g)||[]).length:0,vu=r?(r.match(/\[([^\]]+)\]\(([^)]+)\)/g)||[]).length:0,Sa=r?(r.match(/^#+\s/gm)||[]).length:0,Hx={"gpt-4o-mini":{input:.15,output:.6},"gpt-4o":{input:2.5,output:10},"gpt-4o-2024-08-06":{input:2.5,output:10},"gpt-4-turbo":{input:10,output:30},"gpt-4-turbo-preview":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"gpt-5.2":{input:5,output:15},"gpt-5-codex":{input:8,output:24}},Wx=Hx[_]||Hx["gpt-4o-mini"],xu=Math.round(Kn*.3),wu=Math.round(Kn*.7),Dr=r?xu/1e6*Wx.input+wu/1e6*Wx.output:0;return c.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-slate-50 via-orange-50/30 to-red-50/30",style:{overflowX:"visible"},children:[c.jsx("header",{className:"bg-white/70 backdrop-blur-xl border-b border-white/20 shadow-lg shadow-black/5 flex-shrink-0 sticky top-0 z-50",children:c.jsx("div",{className:"px-4 md:px-6 lg:px-8 py-3 md:py-4 lg:py-5",children:c.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 lg:gap-5 min-w-0 flex-1",children:[c.jsx("button",{onClick:t,className:"p-2 md:p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 group shadow-sm hover:shadow-md flex-shrink-0",children:c.jsx($1,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-600 group-hover:text-orange-600 group-hover:-translate-x-1 transition-all"})}),c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[c.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg shadow-orange-500/30 flex-shrink-0",children:c.jsx(_t,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-extrabold bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 bg-clip-text text-transparent truncate",children:R("startWritingDocumentation")}),c.jsx("p",{className:"text-xs md:text-sm text-slate-500 mt-0.5 font-medium truncate",children:R("aiPoweredGeneration")})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 flex-shrink-0",children:[c.jsxs("select",{value:_a,onChange:I=>uO(I.target.value),className:"px-2 md:px-3 py-1.5 md:py-2 text-xs md:text-sm font-semibold rounded-xl bg-white/80 backdrop-blur-sm text-slate-700 hover:bg-white border border-slate-200 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md cursor-pointer",title:"Translate page",children:[c.jsx("option",{value:"en",children:" EN"}),c.jsx("option",{value:"fr",children:" FR"}),c.jsx("option",{value:"de",children:" DE"})]}),c.jsxs("button",{onClick:()=>{r&&fe(!nn)},className:`p-2 md:p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md relative group ${r?"":"opacity-50 cursor-not-allowed"}`,title:R(r?nn?"hideAiAssistant":"showAiAssistant":"assistantErrorNoDocumentation"),disabled:!r,children:[c.jsx(IM,{className:`w-4 h-4 md:w-5 md:h-5 transition-colors ${nn?"text-orange-600":"text-slate-400"}`}),nn&&c.jsx("span",{className:"absolute -top-1 -right-1 w-2 md:w-2.5 h-2 md:h-2.5 bg-green-500 rounded-full border-2 border-white animate-pulse"})]})]})]})})}),c.jsxs("div",{className:"flex-1 flex min-h-0 relative",style:{overflow:"visible"},children:[nn&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>fe(!1),children:c.jsxs("aside",{className:"absolute left-0 top-0 bottom-0 w-80 max-w-[85vw] bg-white/95 backdrop-blur-xl border-r border-white/30 shadow-2xl shadow-black/5 overflow-hidden flex flex-col transition-all duration-300",onClick:I=>I.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900",children:R("aiAssistant")}),c.jsx("button",{onClick:()=>fe(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":R("close"),children:c.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(b_,{documentation:r,onUpdateDocumentation:Vx,model:_})})]})}),c.jsx("aside",{className:"hidden md:flex w-64 md:w-72 lg:w-80 sticky top-0 self-start h-screen bg-white/60 backdrop-blur-xl border-r border-white/30 shadow-2xl shadow-black/5 overflow-hidden flex-col transition-all duration-300 flex-shrink-0",children:c.jsx(b_,{documentation:r,onUpdateDocumentation:Vx,model:_})})]}),c.jsxs("main",{className:"flex-1 flex flex-col bg-gradient-to-br from-slate-50 via-orange-50/20 to-red-50/20",style:{overflowX:"visible"},children:[c.jsxs("div",{className:"bg-white/40 backdrop-blur-xl border-b border-white/30 shadow-lg shadow-black/5 flex-shrink-0",children:[c.jsx("div",{className:"p-3 md:p-4 border-b border-white/20",children:c.jsxs("button",{onClick:()=>_e(!oe),className:"w-full flex items-center justify-between group hover:bg-white/30 rounded-lg p-2 transition-all duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-1.5 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg shadow-md",children:c.jsx(Jn,{className:"w-4 h-4 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("h3",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition-colors",children:R("sourceSelection")}),c.jsx("p",{className:"text-xs text-slate-500",children:R(oe?"clickToCollapse":"clickToExpand")})]})]}),c.jsx("div",{className:"p-1.5 rounded-lg bg-white/50 group-hover:bg-white/80 transition-all duration-300",children:oe?c.jsx(TM,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-900 transition-colors"}):c.jsx(kM,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-900 transition-colors"})})]})}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${oe?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("div",{className:"p-3 md:p-4",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-3 border border-white/50 shadow-lg shadow-orange-500/10",children:[c.jsxs("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[c.jsx(vs,{className:"w-3 h-3 text-orange-500"}),R("selectRepos")]}),c.jsx("button",{onClick:()=>b(!0),className:"w-full px-3 py-2.5 border-2 border-dashed border-slate-300 rounded-lg hover:border-orange-400 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 transition-all text-left group shadow-sm hover:shadow-md",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg group-hover:bg-orange-200 transition-colors",children:c.jsx(vs,{className:"w-4 h-4 text-orange-600"})}),c.jsx("span",{className:"text-xs text-slate-700 font-medium",children:g.length>0?`${g.length} repo${g.length!==1?"s":""}`:R("selectRepos")})]}),c.jsx(D1,{className:"w-4 h-4 text-slate-400 group-hover:text-orange-500 transition-colors"})]})}),g.length>0&&c.jsx("div",{className:"space-y-1.5 mt-2 max-h-32 overflow-y-auto",children:g.map(I=>c.jsxs("div",{className:"flex items-center justify-between px-2.5 py-1.5 bg-gradient-to-r from-orange-50/80 to-red-50/80 backdrop-blur-sm border border-orange-200/50 rounded-lg shadow-sm hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xs,{className:"w-3 h-3 text-orange-600"}),c.jsx("span",{className:"text-xs text-slate-700 font-bold truncate max-w-[120px]",children:I.name})]}),c.jsx("div",{className:"flex items-center gap-1",children:c.jsx("button",{onClick:()=>{mu(I),hu(!0)},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-all duration-300",title:"Remove repository",children:c.jsx(wt,{className:"w-3 h-3"})})})]},I.id))}),g.length>0&&c.jsxs("button",{onClick:()=>pu(!0),className:"mt-2 w-full px-3 py-2 text-xs font-semibold text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 rounded-lg transition-all duration-300 flex items-center justify-center gap-2",children:[c.jsx(wt,{className:"w-3 h-3"}),"Clear All"]})]}),c.jsxs("button",{onClick:()=>Fe(!0),className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-3 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg shadow-orange-500/30 hover:shadow-xl hover:shadow-orange-500/40 flex items-center justify-center gap-2",children:[c.jsx(y_,{className:"w-4 h-4"}),R("settings")," - ",R("token")," & ",R("openaiKey")]}),c.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[N&&c.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[c.jsx(to,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:"GitHub Token"})]}),de&&c.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[c.jsx(to,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:"OpenAI Key"})]}),!N&&!de&&c.jsx("span",{className:"text-gray-500",children:"No credentials configured"})]})]})})})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-8 min-h-0 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent hover:scrollbar-thumb-slate-400",children:[w&&c.jsx("div",{className:"max-w-5xl mx-auto mb-6 p-5 bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 rounded-2xl text-red-700 shadow-xl shadow-red-500/20",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:c.jsx(wt,{className:"w-5 h-5 text-red-600"})}),c.jsx("span",{className:"font-bold",children:w})]})}),!r&&!p&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center max-w-3xl mx-auto",children:[c.jsxs("div",{className:"relative mb-8",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-400 rounded-3xl blur-2xl opacity-20 animate-pulse"}),c.jsx("div",{className:"relative p-8 bg-gradient-to-br from-orange-100 via-red-100 to-pink-100 rounded-3xl shadow-2xl",children:c.jsx(Ut,{className:"w-20 h-20 text-orange-600 mx-auto"})})]}),c.jsx("h3",{className:"text-3xl font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-4",children:"Ready to Generate Documentation"}),c.jsx("p",{className:"text-slate-600 text-lg font-medium max-w-xl",children:"Enter a GitHub repository URL to generate comprehensive documentation from its structure and code."})]}),p&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[c.jsxs("div",{className:"relative mb-8",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-400 rounded-full blur-3xl opacity-30 animate-pulse"}),c.jsx("div",{className:"relative animate-spin w-20 h-20 border-4 border-orange-200 border-t-orange-600 rounded-full"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(_t,{className:"w-8 h-8 text-orange-600 animate-pulse"})})]}),c.jsx("p",{className:"text-slate-700 font-bold text-xl mb-2 bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:R("generating")}),ke&&c.jsxs("div",{className:"mt-6 text-center max-w-md bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/50",children:[c.jsxs("p",{className:"text-sm text-slate-600 mb-3 font-medium",children:["Processing ",c.jsx("span",{className:"font-bold text-orange-600 text-lg",children:ke.current})," of"," ",c.jsx("span",{className:"font-bold text-slate-700",children:ke.total})]}),ke.repo&&c.jsx("p",{className:"text-xs text-slate-500 mb-4 font-mono bg-slate-50 px-3 py-2 rounded-lg",children:ke.repo}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden shadow-inner",children:c.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 h-full rounded-full transition-all duration-500 shadow-lg",style:{width:`${ke.current/ke.total*100}%`}})})]})]}),r&&c.jsxs("div",{className:"h-full flex flex-col max-w-6xl mx-auto min-h-0",children:[i.size>0&&g.length>0&&c.jsx("div",{className:"bg-white/90 backdrop-blur-xl border border-white/50 rounded-2xl mb-6 flex-shrink-0 shadow-2xl shadow-black/5 overflow-hidden",children:c.jsx("div",{className:"flex items-center gap-2 overflow-x-auto px-4 py-3 scrollbar-thin",children:g.map(I=>{const ve=i.has(I.fullName),xe=qt===I.fullName;return c.jsxs("button",{onClick:()=>{Z(I.fullName),fu(I.fullName,u,h)},className:`px-3 md:px-4 lg:px-5 py-2 md:py-2.5 lg:py-3 text-xs md:text-sm font-bold border-b-2 transition-all duration-300 whitespace-nowrap flex items-center gap-1.5 md:gap-2 rounded-t-lg md:rounded-t-xl ${xe?"border-orange-500 text-orange-600 bg-gradient-to-b from-orange-50 to-white shadow-lg":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300 hover:bg-slate-50"}`,children:[c.jsx(xs,{className:`w-3.5 h-3.5 md:w-4 md:h-4 flex-shrink-0 ${xe?"text-orange-600":"text-slate-500"}`}),c.jsx("span",{className:"truncate max-w-[120px] md:max-w-[150px] lg:max-w-[200px]",children:I.name}),ve&&c.jsx("span",{className:"px-2 py-0.5 bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 rounded-full text-xs flex-shrink-0 font-bold border border-green-200",children:""})]},I.id)})})}),o.size>0&&c.jsx("div",{className:"bg-white/90 backdrop-blur-xl border border-white/50 rounded-lg md:rounded-xl mb-3 md:mb-4 flex-shrink-0 shadow-lg shadow-black/5 p-2 md:p-2.5",children:c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 flex-1 min-w-0",children:[c.jsx(Ut,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-orange-500 flex-shrink-0"}),c.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-slate-600 flex-shrink-0",children:R("format")}),c.jsx("div",{className:"flex gap-0.5 md:gap-1 flex-wrap min-w-0",children:Gs.map(I=>c.jsx("button",{onClick:()=>{var xe;d(I);const ve=qt!=="combined"?qt:(xe=g[0])==null?void 0:xe.fullName;ve&&fu(ve,I,h)},className:`px-2 py-1 text-[10px] font-semibold rounded-md transition-all whitespace-nowrap ${u===I?"bg-orange-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-orange-100 hover:text-orange-700 hover:shadow-md hover:scale-105 cursor-pointer"}`,title:R(I==="markdown"?"markdownStandardFormat":I==="markdown_mermaid"?"markdownMermaidDescription":I==="mdx"?"mdxDescription":I==="openapi"?"openapiDescription":"htmlDescription"),children:I==="markdown"?"MD":I==="markdown_mermaid"?"MD+M":I==="mdx"?"MDX":I==="openapi"?"OAPI":"HTML"},I))})]}),c.jsx("div",{className:"w-px h-6 bg-slate-300"}),c.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[c.jsx(Ea,{className:"w-3.5 h-3.5 text-orange-500 flex-shrink-0"}),c.jsx("span",{className:"text-[10px] font-bold text-slate-600 flex-shrink-0",children:R("section")}),c.jsx("div",{className:"flex gap-1 flex-wrap min-w-0",children:Bs.map(I=>c.jsx("button",{onClick:()=>{var xe;m(I);const ve=qt!=="combined"?qt:(xe=g[0])==null?void 0:xe.fullName;ve&&fu(ve,u,I)},className:`px-2 py-1 text-[10px] font-semibold rounded-md transition-all whitespace-nowrap ${h===I?"bg-orange-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-orange-100 hover:text-orange-700 hover:shadow-md hover:scale-105 cursor-pointer"}`,title:R(I==="README"?"sectionReadme":I==="ARCHITECTURE"?"sectionArchitecture":I==="API"?"sectionApiReference":I==="COMPONENTS"?"sectionComponents":I==="TESTING_CI"?"sectionTestingCicd":I==="CHANGELOG"?"sectionChangelog":I==="INLINE_CODE"?"sectionInlineCode":"sectionChangelog"),children:R(I==="README"?"sectionReadmeShort":I==="ARCHITECTURE"?"sectionArchitectureShort":I==="API"?"sectionApiReferenceShort":I==="COMPONENTS"?"sectionComponentsShort":I==="TESTING_CI"?"sectionTestingCicdShort":I==="CHANGELOG"?"sectionChangelogShort":I==="INLINE_CODE"?"sectionInlineCodeShort":"sectionChangelogShort")},I))})]})]})}),c.jsx("div",{className:"flex-1 min-h-0 overflow-hidden relative",children:c.jsxs("div",{className:"h-full bg-white/90 backdrop-blur-xl rounded-2xl md:rounded-3xl border border-white/50 shadow-2xl shadow-black/10 p-4 md:p-6 lg:p-10 overflow-y-auto overflow-x-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent hover:scrollbar-thumb-slate-400",children:[r&&!Lt&&c.jsxs("button",{onClick:()=>{op(r),ip(!0),P(!0)},className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10 flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:R("editDocumentation"),children:[c.jsx(OM,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:R("edit")})]}),Lt&&c.jsxs("div",{className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10 flex items-center gap-1.5 md:gap-2",children:[c.jsxs("button",{onClick:Pi,className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:R("saveChanges"),children:[c.jsx(Ca,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:R("save")})]}),c.jsxs("button",{onClick:()=>{ip(!1),op(""),P(!1)},className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-slate-500 to-slate-600 text-white rounded-lg hover:from-slate-600 hover:to-slate-700 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:R("cancel"),children:[c.jsx(wt,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:R("cancel")})]})]}),!Lt&&z&&r&&c.jsx("div",{className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10",children:c.jsxs("button",{onClick:Pi,className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm animate-pulse",title:R("saveChanges"),children:[c.jsx(Ca,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden lg:inline",children:R("saveChanges")}),c.jsx("span",{className:"lg:hidden",children:R("save")})]})}),Lt?c.jsx("textarea",{value:ap,onChange:I=>{op(I.target.value),P(I.target.value!==r)},className:"w-full h-full min-h-[400px] md:min-h-[500px] p-3 md:p-4 border-2 border-orange-300 rounded-lg focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200 font-mono text-xs md:text-sm resize-none",placeholder:R("editDocumentationPlaceholder")}):u==="html"?c.jsx("div",{className:"prose prose-slate max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:r}}):u==="openapi"?c.jsx("pre",{className:"whitespace-pre-wrap text-xs md:text-sm font-mono bg-slate-900 text-slate-100 p-4 md:p-6 rounded-lg overflow-x-auto",children:c.jsx("code",{children:r})}):c.jsx("div",{className:"whitespace-pre-wrap text-xs md:text-sm prose prose-slate max-w-none prose-sm md:prose-base prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-700 prose-a:text-orange-600 prose-code:bg-slate-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-pre:bg-slate-900 prose-pre:overflow-x-auto prose-pre:max-w-full",children:r})]})})]})]})]}),ee&&c.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>J(!1),children:c.jsxs("aside",{className:"absolute bottom-0 left-0 right-0 max-h-[85vh] bg-white/95 backdrop-blur-xl border-t border-white/30 shadow-2xl shadow-black/5 rounded-t-3xl overflow-hidden flex flex-col transition-all duration-300",onClick:I=>I.stopPropagation(),children:[c.jsx("div",{className:"flex items-center justify-center pt-3 pb-2",children:c.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),c.jsxs("div",{className:"flex items-center justify-between px-6 pb-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Actions & Settings"}),c.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:c.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:c.jsxs("div",{className:"p-4 md:p-5 lg:p-6",children:[c.jsxs("div",{className:"space-y-4 mb-8",children:[c.jsxs("button",{onClick:()=>{if(Xo().length===0){x(R("selectAtLeastOneRepo"));return}Zo(Gs.length>0?Gs:["markdown"]),Jo(Bs.length>0?Bs:["README"]),ba(!0),J(!1)},disabled:p||g.length===0,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 text-white rounded-xl md:rounded-2xl hover:from-red-700 hover:via-orange-700 hover:to-red-700 active:scale-95 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm md:text-base shadow-2xl shadow-orange-500/40 hover:shadow-2xl hover:shadow-orange-500/50 hover:scale-[1.02] disabled:hover:scale-100 transform touch-manipulation",children:[c.jsx(_t,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("generate")})]}),r&&c.jsxs(c.Fragment,{children:[(Lt||z)&&c.jsxs("button",{onClick:Pi,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl md:rounded-2xl hover:from-orange-600 hover:to-red-600 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-orange-500/30 hover:shadow-2xl hover:shadow-orange-500/40 hover:scale-[1.02] transform touch-manipulation",children:[c.jsx(Ca,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("saveChanges")})]}),c.jsxs("button",{onClick:cp,disabled:Lt,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-slate-700 to-slate-900 text-white rounded-xl md:rounded-2xl hover:from-slate-800 hover:to-black active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-slate-500/30 hover:shadow-2xl hover:shadow-slate-500/40 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[c.jsx(Zi,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("export")})]}),g.length>0&&c.jsxs("button",{onClick:()=>U(!0),disabled:Lt,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-green-500 via-emerald-600 to-teal-600 text-white rounded-xl md:rounded-2xl hover:from-green-600 hover:via-emerald-700 hover:to-teal-700 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-2xl shadow-green-500/40 hover:shadow-2xl hover:shadow-green-500/50 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[c.jsx(ql,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("commitToRepos")})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-orange-50/50 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/50 p-4 md:p-5 lg:p-6 shadow-xl shadow-orange-500/10",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-5",children:[c.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-100 to-red-100 rounded-xl shadow-md",children:c.jsx(Aa,{className:"w-4 h-4 md:w-5 md:h-5 text-orange-600"})}),c.jsx("h3",{className:"text-sm md:text-base font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:R("statistics")})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ut,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("length")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:r?`${r.length.toLocaleString()}`:"0"})]}),C&&c.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Gu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("modelUsed")})]}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] truncate max-w-[120px]",title:C,children:C.replace("gpt-","").replace(/-/g," ").toUpperCase()})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Aa,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("estTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Kn>1e3?`${(Kn/1e3).toFixed(1)}K`:Kn.toString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Qp,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("estCost")})]}),c.jsxs("span",{className:"font-bold text-green-600",children:["$",Dr<.01?"<0.01":Dr.toFixed(4)]})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Id,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("words")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:$r.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(cl,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("lines")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Ws.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("characters")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:qs.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ut,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("fileSize")})]}),c.jsxs("span",{className:"font-bold text-gray-900",children:[Qo," KB"]})]}),r&&ds>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Xp,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("readingTime")})]}),c.jsxs("span",{className:"font-bold text-gray-900",children:["~",ds," ",R("minUnit")]})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(v_,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("avgWordsPerLine")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:up})]}),r&&ji>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ea,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("sections")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:ji})]}),r&&Sa>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(cl,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("headers")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Sa})]}),r&&yu>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("codeBlocks")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:yu})]}),r&&vu>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(f_,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("links")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:vu})]}),r&&c.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(zu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("inputTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:xu.toLocaleString()})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(zu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("outputTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:wu.toLocaleString()})]})]}),g.length>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(vs,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("repositories")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:g.length})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("source")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:"GitHub"})]})]})]})]})})]})}),c.jsx("aside",{className:`hidden md:flex flex-col bg-white/70 backdrop-blur-xl border-l border-white/30 shadow-2xl shadow-black/5 flex-shrink-0 relative transition-all duration-300 ease-in-out ${ge?"w-16":"w-64 md:w-72 lg:w-80"}`,children:ge?c.jsxs("div",{className:"flex flex-col items-center py-2 space-y-3 h-full scrollbar-thin overflow-y-auto",children:[c.jsx("button",{onClick:()=>ye(!ge),className:"absolute top-1 right-10 z-20 p-2 bg-white/90 backdrop-blur-sm rounded-lg shadow-md hover:bg-white hover:shadow-lg transition-all duration-200 border border-gray-200/50 hover:border-orange-300 group","aria-label":"Maximize sidebar",title:"Maximize sidebar",children:c.jsx(NM,{className:"w-4 h-4 text-orange-600 group-hover:text-orange-700 transition-colors mx-auto"})}),c.jsx("div",{className:"w-full h-px bg-gray-0 my-5 "}),c.jsxs("div",{className:"w-full space-y-2 px-2",children:[c.jsx("button",{onClick:()=>{if(Xo().length===0){x(R("selectAtLeastOneRepo"));return}Zo(Gs.length>0?Gs:["markdown"]),Jo(Bs.length>0?Bs:["README"]),ba(!0)},disabled:p||g.length===0,className:"w-full p-3 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 text-white rounded-lg hover:from-red-700 hover:via-orange-700 hover:to-red-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-orange-500/40 hover:shadow-xl hover:shadow-orange-500/50",title:R("generate"),children:c.jsx(_t,{className:"w-5 h-5 mx-auto"})}),r&&c.jsxs(c.Fragment,{children:[(Lt||z)&&c.jsx("button",{onClick:Pi,className:"w-full p-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg shadow-orange-500/30 hover:shadow-xl hover:shadow-orange-500/40",title:R("saveChanges"),children:c.jsx(Ca,{className:"w-5 h-5 mx-auto"})}),c.jsx("button",{onClick:cp,disabled:Lt,className:"w-full p-3 bg-gradient-to-r from-slate-700 to-slate-900 text-white rounded-lg hover:from-slate-800 hover:to-black transition-all duration-300 shadow-lg shadow-slate-500/30 hover:shadow-xl hover:shadow-slate-500/40 disabled:opacity-50 disabled:cursor-not-allowed",title:R("export"),children:c.jsx(Zi,{className:"w-5 h-5 mx-auto"})}),g.length>0&&c.jsx("button",{onClick:()=>U(!0),disabled:Lt,className:"w-full p-3 bg-gradient-to-r from-green-500 via-emerald-600 to-teal-600 text-white rounded-lg hover:from-green-600 hover:via-emerald-700 hover:to-teal-700 transition-all duration-300 shadow-lg shadow-green-500/40 hover:shadow-xl hover:shadow-green-500/50 disabled:opacity-50 disabled:cursor-not-allowed",title:R("commitToRepos"),children:c.jsx(ql,{className:"w-5 h-5 mx-auto"})})]})]}),c.jsx("div",{className:"w-full h-px bg-gray-200 my-2"}),r?c.jsxs(c.Fragment,{children:[C&&c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("modelUsed")}),c.jsx("div",{className:"text-gray-700",children:C}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("cost"),": $",Dr<.01?"<0.01":Dr.toFixed(4)]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg hover:from-pink-100 hover:to-pink-200 transition-all cursor-default",children:[c.jsx(Gu,{className:"w-4 h-4 text-pink-600 mb-1"}),c.jsx("span",{className:"text-[8px] font-bold text-pink-700 text-center leading-tight px-0.5",children:C.replace("gpt-","").replace(/-/g," ").substring(0,4).toUpperCase()})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("wordCount")}),c.jsxs("div",{className:"text-gray-700",children:[$r.toLocaleString()," ",R("wordsUnit")]}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("avg"),": ",up," ",R("wordsPerLine")]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg hover:from-blue-100 hover:to-blue-200 transition-all cursor-default",children:[c.jsx(Id,{className:"w-4 h-4 text-blue-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-blue-700 text-center leading-tight",children:$r>1e3?`${($r/1e3).toFixed(1)}K`:$r})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("characterCount")}),c.jsxs("div",{className:"text-gray-700",children:[qs.toLocaleString()," ",R("charactersUnit")]}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("fileSizeLabel"),": ",Qo," KB"]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg hover:from-purple-100 hover:to-purple-200 transition-all cursor-default",children:[c.jsx(Jn,{className:"w-4 h-4 text-purple-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-purple-700 text-center leading-tight",children:qs>1e3?`${(qs/1e3).toFixed(1)}K`:qs})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("estimatedTokens")}),c.jsxs("div",{className:"text-gray-700",children:[Kn.toLocaleString()," ",R("tokensUnit")]}),r&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("input"),": ",xu.toLocaleString()]}),c.jsxs("div",{className:"text-gray-500 text-[10px]",children:[R("output"),": ",wu.toLocaleString()]})]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg hover:from-orange-100 hover:to-orange-200 transition-all cursor-default",children:[c.jsx(Aa,{className:"w-4 h-4 text-orange-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-orange-700 text-center leading-tight",children:Kn>1e3?`${(Kn/1e3).toFixed(1)}K`:Kn})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("fileSize")}),c.jsxs("div",{className:"text-gray-700",children:[Qo," KB (",qs.toLocaleString()," ",R("bytesUnit"),")"]}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("lengthLabel"),": ",r.length.toLocaleString()," ",R("charsUnit")]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg hover:from-slate-100 hover:to-slate-200 transition-all cursor-default",children:[c.jsx(Ut,{className:"w-4 h-4 text-slate-600 mb-1"}),c.jsxs("span",{className:"text-[9px] font-bold text-slate-700 text-center leading-tight",children:[Qo,"KB"]})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("lineCount")}),c.jsxs("div",{className:"text-gray-700",children:[Ws.toLocaleString()," ",R("lines")]}),ds>0&&c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("readingTime"),": ~",ds," ",R("minUnit")]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-green-50 to-green-100 rounded-lg hover:from-green-100 hover:to-green-200 transition-all cursor-default",children:[c.jsx(cl,{className:"w-4 h-4 text-green-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-green-700 text-center leading-tight",children:Ws>1e3?`${(Ws/1e3).toFixed(1)}K`:Ws})]})}),c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("estCost")}),c.jsxs("div",{className:"text-gray-700",children:["$",Dr<.01?"<0.01":Dr.toFixed(4)]}),C&&c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("modelUsed"),": ",C]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg hover:from-emerald-100 hover:to-emerald-200 transition-all cursor-default",children:[c.jsx(Qp,{className:"w-4 h-4 text-emerald-600 mb-1"}),c.jsxs("span",{className:"text-[9px] font-bold text-emerald-700 text-center leading-tight",children:["$",Dr<.01?"<0.01":Dr.toFixed(2)]})]})}),ds>0&&c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("readingTime")}),c.jsxs("div",{className:"text-gray-700",children:["~",ds," ",R("minUnit")]}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("words"),": ",$r.toLocaleString()]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-lg hover:from-cyan-100 hover:to-cyan-200 transition-all cursor-default",children:[c.jsx(Xp,{className:"w-4 h-4 text-cyan-600 mb-1"}),c.jsxs("span",{className:"text-[9px] font-bold text-cyan-700 text-center leading-tight",children:[ds,"m"]})]})}),ji>0&&c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("sections")}),c.jsxs("div",{className:"text-gray-700",children:[ji," ",R("sections")]}),Sa>0&&c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[R("headers"),": ",Sa]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg hover:from-indigo-100 hover:to-indigo-200 transition-all cursor-default",children:[c.jsx(Ea,{className:"w-4 h-4 text-indigo-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-indigo-700 text-center leading-tight",children:ji})]})}),g.length>0&&c.jsx(zr,{content:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold mb-1 text-gray-900",children:R("repositories")}),c.jsxs("div",{className:"text-gray-700",children:[g.length," ",R("repositories")]}),c.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:[g.slice(0,3).map(I=>I.name).join(", "),g.length>3&&"..."]})]}),children:c.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg hover:from-teal-100 hover:to-teal-200 transition-all cursor-default",children:[c.jsx(vs,{className:"w-4 h-4 text-teal-600 mb-1"}),c.jsx("span",{className:"text-[9px] font-bold text-teal-700 text-center leading-tight",children:g.length})]})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-gray-400",children:[c.jsx(Aa,{className:"w-6 h-6 mb-2 opacity-50"}),c.jsx("span",{className:"text-[10px] text-center",children:"No stats"})]})]}):c.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[c.jsx("button",{onClick:()=>ye(!ge),className:"absolute top-3 right-3 z-20 p-2 bg-white/90 backdrop-blur-sm rounded-lg shadow-md hover:bg-white hover:shadow-lg transition-all duration-200 border border-gray-200/50 hover:border-orange-300 group","aria-label":"Minimize sidebar",title:"Minimize sidebar",children:c.jsx(RM,{className:"w-4 h-4 text-gray-600 group-hover:text-orange-600 transition-colors"})}),c.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-4 md:p-5 lg:p-6",children:[c.jsxs("div",{className:"space-y-4 mb-8",children:[c.jsxs("button",{onClick:()=>{if(Xo().length===0){x(R("selectAtLeastOneRepo"));return}Zo(Gs.length>0?Gs:["markdown"]),Jo(Bs.length>0?Bs:["README"]),ba(!0)},disabled:p||g.length===0,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 text-white rounded-xl md:rounded-2xl hover:from-red-700 hover:via-orange-700 hover:to-red-700 active:scale-95 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm md:text-base shadow-2xl shadow-orange-500/40 hover:shadow-2xl hover:shadow-orange-500/50 hover:scale-[1.02] disabled:hover:scale-100 transform touch-manipulation",children:[c.jsx(_t,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("generate")})]}),r&&c.jsxs(c.Fragment,{children:[(Lt||z)&&c.jsxs("button",{onClick:Pi,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl md:rounded-2xl hover:from-orange-600 hover:to-red-600 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-orange-500/30 hover:shadow-2xl hover:shadow-orange-500/40 hover:scale-[1.02] transform touch-manipulation",children:[c.jsx(Ca,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("saveChanges")})]}),c.jsxs("button",{onClick:cp,disabled:Lt,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-slate-700 to-slate-900 text-white rounded-xl md:rounded-2xl hover:from-slate-800 hover:to-black active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-slate-500/30 hover:shadow-2xl hover:shadow-slate-500/40 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[c.jsx(Zi,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("export")})]}),g.length>0&&c.jsxs("button",{onClick:()=>U(!0),disabled:Lt,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-green-500 via-emerald-600 to-teal-600 text-white rounded-xl md:rounded-2xl hover:from-green-600 hover:via-emerald-700 hover:to-teal-700 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-2xl shadow-green-500/40 hover:shadow-2xl hover:shadow-green-500/50 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[c.jsx(ql,{className:"w-4 h-4 md:w-5 md:h-5"}),c.jsx("span",{className:"truncate",children:R("commitToRepos")})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-orange-50/50 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/50 p-4 md:p-5 lg:p-6 shadow-xl shadow-orange-500/10",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-5",children:[c.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-100 to-red-100 rounded-xl shadow-md",children:c.jsx(Aa,{className:"w-4 h-4 md:w-5 md:h-5 text-orange-600"})}),c.jsx("h3",{className:"text-sm md:text-base font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:R("statistics")})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ut,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("length")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:r?`${r.length.toLocaleString()}`:"0"})]}),C&&c.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Gu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("modelUsed")})]}),c.jsx("span",{className:"font-bold text-gray-900 text-[10px] truncate max-w-[120px]",title:C,children:C.replace("gpt-","").replace(/-/g," ").toUpperCase()})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Aa,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("estTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Kn>1e3?`${(Kn/1e3).toFixed(1)}K`:Kn.toString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Qp,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("estCost")})]}),c.jsxs("span",{className:"font-bold text-green-600",children:["$",Dr<.01?"<0.01":Dr.toFixed(4)]})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Id,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("words")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:$r.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(cl,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("lines")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Ws.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("characters")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:qs.toLocaleString()})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ut,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("fileSize")})]}),c.jsxs("span",{className:"font-bold text-gray-900",children:[Qo," KB"]})]}),r&&ds>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Xp,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("readingTime")})]}),c.jsxs("span",{className:"font-bold text-gray-900",children:["~",ds," ",R("minUnit")]})]}),r&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(v_,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("avgWordsPerLine")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:up})]}),r&&ji>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Ea,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("sections")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:ji})]}),r&&Sa>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(cl,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("headers")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:Sa})]}),r&&yu>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("codeBlocks")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:yu})]}),r&&vu>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(f_,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("links")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:vu})]}),r&&c.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(zu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("inputTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:xu.toLocaleString()})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(zu,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("outputTokens")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:wu.toLocaleString()})]})]}),g.length>0&&c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(vs,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("repositories")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:g.length})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(Jn,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:R("source")})]}),c.jsx("span",{className:"font-bold text-gray-900",children:"GitHub"})]})]})]})]})]})})]}),c.jsx("div",{className:"mt-auto",children:c.jsx(_v,{onNavigate:I=>{window.dispatchEvent(new CustomEvent("navigate",{detail:I}))}})}),Oe&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[c.jsx(y_,{className:"w-5 h-5 text-orange-500"}),R("settings")]}),c.jsx("button",{onClick:()=>{z&&(D(L),H(X),P(!1)),Fe(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(wt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[c.jsx(Jn,{className:"w-4 h-4 text-orange-500"}),R("token")]}),c.jsx("input",{type:"password",value:N,onChange:I=>{D(I.target.value),Y(!1);const ve=I.target.value.trim()!==L||de.trim()!==X;P(ve)},placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 font-medium mt-2",children:[c.jsx(to,{className:"w-4 h-4"}),"Token saved successfully!"]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Required for private repos or to avoid rate limits."," ",c.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 underline",children:"Create a token"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[c.jsx(_t,{className:"w-4 h-4 text-red-500"}),R("openaiKey")]}),c.jsx("input",{type:"password",value:de,onChange:I=>{H(I.target.value),q(!1);const ve=I.target.value.trim()!==X||N.trim()!==L;P(ve)},placeholder:"sk-xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),B&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 font-medium mt-2",children:[c.jsx(to,{className:"w-4 h-4"}),"API key saved successfully!"]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[R("requiredForAiPoweredDocumentationGeneration")," ",c.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-red-600 hover:text-red-700 underline",children:"Get your API key"})]})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[c.jsx("button",{onClick:()=>{z&&(D(L),H(X),P(!1)),Fe(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:z?"Cancel":"Close"}),z&&c.jsxs("button",{onClick:()=>{try{N.trim()!==L&&(VM(N.trim()),G(N.trim()),Y(!0),setTimeout(()=>Y(!1),3e3)),de.trim()!==X&&(tO(de.trim()),ie(de.trim()),q(!0),setTimeout(()=>q(!1),3e3)),P(!1),x(""),setTimeout(()=>{Fe(!1)},500)}catch{x("Failed to save changes. Please try again.")}},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-red-500 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg shadow-orange-500/30 flex items-center gap-2",children:[c.jsx(Ca,{className:"w-4 h-4"}),R("saveChanges")]})]})]})}),iO&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:c.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[c.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg flex-shrink-0",children:c.jsx(Ea,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 truncate",children:"Select Formats & Sections"}),c.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:"Choose output formats and documentation sections"})]})]}),c.jsx("button",{onClick:()=>ba(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":R("close"),children:c.jsx(wt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 lg:p-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[c.jsx(Ut,{className:"w-5 h-5 text-orange-500"}),R("formats")]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["markdown","markdown_mermaid","mdx","openapi","html"].map(I=>{const ve=Vs.includes(I);return c.jsx("button",{type:"button",onClick:()=>{ve?Vs.length>1&&Zo(Vs.filter(xe=>xe!==I)):Zo([...Vs,I])},className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold text-sm ${ve?"bg-gradient-to-r from-orange-500 to-red-500 text-white border-orange-500 shadow-lg shadow-orange-500/30":"bg-white text-slate-700 border-slate-200 hover:border-orange-300 hover:bg-orange-50"}`,children:I==="markdown"?"Markdown":I==="markdown_mermaid"?"Markdown + Mermaid":I==="mdx"?"MDX":I==="openapi"?"OpenAPI":"HTML"},I)})}),Vs.length===0&&c.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Please select at least one format"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[c.jsx(Ea,{className:"w-5 h-5 text-orange-500"}),R("sections")]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["README","ARCHITECTURE","API","COMPONENTS","TESTING_CI","CHANGELOG"].map(I=>{const ve=Hs.includes(I);return c.jsx("button",{type:"button",onClick:()=>{ve?Hs.length>1&&Jo(Hs.filter(xe=>xe!==I)):Jo([...Hs,I])},className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold text-sm ${ve?"bg-gradient-to-r from-orange-500 to-red-500 text-white border-orange-500 shadow-lg shadow-orange-500/30":"bg-white text-slate-700 border-slate-200 hover:border-orange-300 hover:bg-orange-50"}`,children:R(I==="README"?"sectionReadme":I==="ARCHITECTURE"?"sectionArchitecture":I==="API"?"sectionApiReference":I==="COMPONENTS"?"sectionComponents":I==="TESTING_CI"?"sectionTestingCicd":"sectionChangelog")},I)})}),Hs.length===0&&c.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Please select at least one section"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[c.jsx(Gu,{className:"w-5 h-5 text-orange-500"}),"AI Model"]}),c.jsxs("select",{value:_,onChange:I=>E(I.target.value),className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white font-semibold",children:[c.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),c.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),c.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),c.jsx("option",{value:"gpt-4",children:"GPT-4 - Standard"}),c.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),c.jsx("option",{value:"gpt-5.2",children:"GPT-5.2"}),c.jsx("option",{value:"gpt-5-codex",children:"GPT-5 Codex"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select the AI model to use for documentation generation. GPT-4o Mini is recommended for faster and cost-effective generation."})]})]})}),c.jsxs("div",{className:"p-4 md:p-5 lg:p-6 border-t border-gray-200 flex items-center justify-end gap-3 flex-shrink-0",children:[c.jsx("button",{onClick:()=>ba(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:R("cancel")}),c.jsxs("button",{onClick:()=>{if(Vs.length===0){x(R("selectAtLeastOneFormat"));return}if(Hs.length===0){x(R("selectAtLeastOneSection"));return}lO(Vs),cO(Hs),ba(!1),sp(!0),setTimeout(()=>{const I=new CustomEvent("autoStartWorkflow");window.dispatchEvent(I)},100)},disabled:Vs.length===0||Hs.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-red-500 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg shadow-orange-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c.jsx(_t,{className:"w-4 h-4"}),"Generate Documentation"]})]})]})}),sO&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:c.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[c.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl shadow-lg flex-shrink-0",children:c.jsx(_t,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 truncate",children:"Agent Workflow"}),c.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:"Automated documentation generation pipeline"})]})]}),c.jsx("button",{onClick:()=>sp(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":R("close"),children:c.jsx(wt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 lg:p-6",children:c.jsx(t7,{selectedRepos:Xo(),selectedOutputFormats:Gs,selectedSectionTypes:Bs,selectedLanguage:_a,selectedModel:_,onReposChange:I=>{f(I)},onComplete:I=>{var ve,xe,qe;if(S(_),console.log("[DocumentationEditor] onComplete called with state:",{hasGeneratedDocs:!!I.generatedDocs,generatedDocsSize:((ve=I.generatedDocs)==null?void 0:ve.size)||0,hasGeneratedDocsFull:!!I.generatedDocsFull,generatedDocsFullSize:((xe=I.generatedDocsFull)==null?void 0:xe.size)||0,hasErrors:!!I.errors&&I.errors.size>0,errorsCount:((qe=I.errors)==null?void 0:qe.size)||0}),I.generatedDocs&&I.generatedDocs.size>0){const $e=new Map,Pe=[];I.generatedDocs.forEach((yt,On)=>{console.log(`[DocumentationEditor] Setting docs for ${On}, length: ${yt.length}`),$e.set(On,yt),Pe.push(On)}),a($e),I.generatedDocsFull&&I.generatedDocsFull.size>0&&(console.log(`[DocumentationEditor] Setting full docs, size: ${I.generatedDocsFull.size}`),I.generatedDocsFull.forEach((yt,On)=>{console.log(`[DocumentationEditor] Full docs for ${On}:`,{sectionsCount:yt.sections.length,sections:yt.sections.map(ka=>`${ka.type}_${ka.format}`)})}),l(I.generatedDocsFull));const ze=Xo();if(console.log(`[DocumentationEditor] Repos for workflow: ${ze.length}`),ze.length>0){const yt=ze[0];console.log(`[DocumentationEditor] Setting active tab to: ${yt.fullName}`),Z(yt.fullName),console.log(`[DocumentationEditor] Updating display with format: ${u}, section: ${h}`),fu(yt.fullName,u,h);const On=$e.get(yt.fullName);On&&(console.log(`[DocumentationEditor] Setting documentation directly, length: ${On.length}`),s(On),fe(!0))}const je=I.errors&&I.errors.size>0,rn=Pe.length===1?`Documentation generated successfully for ${Pe[0]}${je?" (some errors occurred)":""}`:`Documentation generated successfully for ${Pe.length} repositories${je?" (some errors occurred)":""}`;Yo({message:rn,type:je?"info":"success",repoName:Pe.length===1?Pe[0]:Pe.join(", ")}),setTimeout(()=>{Yo(null)},je?7e3:5e3)}else console.warn("[DocumentationEditor] No generated docs in state!"),Yo({message:"Documentation generation completed but no documentation was generated. Please check the console for errors.",type:"error"}),setTimeout(()=>{Yo(null)},5e3);sp(!1)}})})]})}),dO&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:c.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[c.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg",children:c.jsx(Zi,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:[R("export")," ",R("documentation")]}),c.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Choose export format"})]})]}),c.jsx("button",{onClick:()=>lp(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":R("close"),children:c.jsx(wt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),c.jsx("div",{className:"p-4 md:p-5 lg:p-6",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>gu("md"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all group",children:[c.jsx(Ut,{className:"w-8 h-8 text-gray-600 group-hover:text-orange-600"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Markdown"}),c.jsx("span",{className:"text-xs text-gray-500",children:".md"})]}),c.jsxs("button",{onClick:()=>gu("pdf"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all group",children:[c.jsx(Ut,{className:"w-8 h-8 text-gray-600 group-hover:text-red-600"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"PDF"}),c.jsx("span",{className:"text-xs text-gray-500",children:".pdf"})]}),c.jsxs("button",{onClick:()=>gu("html"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[c.jsx(Ut,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"HTML"}),c.jsx("span",{className:"text-xs text-gray-500",children:".html"})]}),c.jsxs("button",{onClick:()=>gu("txt"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-gray-500 hover:bg-gray-50 transition-all group",children:[c.jsx(Ut,{className:"w-8 h-8 text-gray-600 group-hover:text-gray-700"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Text"}),c.jsx("span",{className:"text-xs text-gray-500",children:".txt"})]})]})})]})}),v&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsx(KM,{selectedRepos:g,onSelectionChange:f,onClose:()=>b(!1)})}),k&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 max-w-md w-full",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[R("commit")," ",R("documentation")]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:R("commitMessage")}),c.jsx("input",{type:"text",value:O,onChange:I=>Ce(I.target.value),placeholder:R("addDocumentation"),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[R("branch"),g.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(from ",g[0].fullName,")"]})]}),In?c.jsxs("div",{className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-green-500 border-t-transparent"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Loading branches..."})]}):at.length>0?c.jsx("select",{value:We,onChange:I=>Ue(I.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all bg-white",children:at.map(I=>c.jsx("option",{value:I,children:I},I))}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:We,onChange:I=>Ue(I.target.value),placeholder:"main",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"}),tn&&c.jsx("p",{className:"text-xs text-red-600",children:tn}),c.jsx("p",{className:"text-xs text-gray-500",children:"Enter branch name manually (branches could not be loaded)"})]})]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-sm text-gray-600",children:["This will commit ",c.jsx("code",{className:"bg-white px-1.5 py-0.5 rounded font-mono text-xs",children:"DOCUMENTATION.md"})," to"," ",g.length," repository",g.length!==1?"ies":"","."]})]}),c.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[c.jsx("button",{onClick:()=>{U(!1),Ce(""),gt([]),jr(""),Ue("main")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:R("cancel")}),c.jsx("button",{onClick:mO,disabled:!O.trim()||p,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-md",children:R(p?"committing":"commit")})]})]})}),oO&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:c.jsx(wt,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Clear All Repositories"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure?"})]})]}),c.jsx("button",{onClick:()=>pu(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(wt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to remove all ",c.jsx("span",{className:"font-semibold text-gray-900",children:g.length})," selected ",g.length===1?"repository":"repositories","?"]}),(r||i.size>0)&&c.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsx("p",{className:"text-xs text-yellow-800",children:"Clearing all repositories will also remove all generated documentation."})})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[c.jsx("button",{onClick:()=>pu(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:R("cancel")}),c.jsxs("button",{onClick:()=>{f([]),a(new Map),l(new Map),Z("combined"),s(""),pu(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg shadow-red-500/30 flex items-center gap-2",children:[c.jsx(wt,{className:"w-4 h-4"}),"Clear All"]})]})]})}),aO&&cr&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:c.jsx(wt,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Remove Repository"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure?"})]})]}),c.jsx("button",{onClick:()=>{hu(!1),mu(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(wt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to remove ",c.jsx("span",{className:"font-semibold text-gray-900",children:cr.fullName})," from the selected repositories?"]}),r&&i.has(cr.fullName)&&c.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsx("p",{className:"text-xs text-yellow-800",children:"Removing this repository will also remove its generated documentation."})})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[c.jsx("button",{onClick:()=>{hu(!1),mu(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:R("cancel")}),c.jsxs("button",{onClick:()=>{if(cr){if(f(g.filter(I=>I.id!==cr.id)),i.has(cr.fullName)){const I=new Map(i);I.delete(cr.fullName),a(I)}if(o.has(cr.fullName)){const I=new Map(o);I.delete(cr.fullName),l(I)}if(qt===cr.fullName){const I=g.filter(ve=>ve.id!==cr.id);I.length>0?Z(I[0].fullName):(Z("combined"),s(""))}}hu(!1),mu(null)},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg shadow-red-500/30 flex items-center gap-2",children:[c.jsx(wt,{className:"w-4 h-4"}),"Remove"]})]})]})}),Rn&&c.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md w-full animate-in slide-in-from-top-5 transition-all duration-300 ${Rn.type==="success"?"bg-green-50 border-green-200":Rn.type==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"} border-2 rounded-xl shadow-2xl p-4 backdrop-blur-sm`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg ${Rn.type==="success"?"bg-green-100":Rn.type==="error"?"bg-red-100":"bg-blue-100"}`,children:Rn.type==="success"?c.jsx(_M,{className:`w-5 h-5 ${Rn.type==="success"?"text-green-600":""}`}):c.jsx(wt,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:`font-bold text-sm ${Rn.type==="success"?"text-green-900":"text-red-900"}`,children:Rn.type==="success"?"Documentation Generated":"Generation Failed"}),c.jsx("p",{className:`text-xs mt-1 ${Rn.type==="success"?"text-green-700":"text-red-700"}`,children:Rn.message}),Rn.repoName&&c.jsx("p",{className:"text-xs mt-1 text-gray-600 font-mono",children:Rn.repoName})]}),c.jsx("button",{onClick:()=>Yo(null),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(wt,{className:"w-4 h-4"})})]})}),Kt&&c.jsx("button",{onClick:hO,className:"fixed bottom-8 right-8 z-50 p-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-full shadow-2xl shadow-orange-500/50 hover:shadow-orange-500/70 transition-all duration-300 hover:scale-110 active:scale-95 group","aria-label":R(wa?"scrollToBottom":"scrollToTop"),children:wa?c.jsx(wM,{className:"w-6 h-6 group-hover:translate-y-1 transition-transform duration-300"}):c.jsx(bM,{className:"w-6 h-6 group-hover:-translate-y-1 transition-transform duration-300"})})]})}function r7({pageType:t,onBack:e}){const[n,r]=$.useState(()=>localStorage.getItem("selectedLanguage")||"en");$.useEffect(()=>{const o=()=>{const u=localStorage.getItem("selectedLanguage");u&&r(u)};window.addEventListener("storage",o);const l=setInterval(o,100);return()=>{window.removeEventListener("storage",o),clearInterval(l)}},[]);const s=ya(n),a=(()=>{switch(t){case"github-integration":return{title:s("githubIntegration"),icon:c.jsx(xs,{className:"w-8 h-8"}),description:s("seamlesslyConnectWithGitHub"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("gitScribeIntegratesDirectly")," ",s("accessYourRepositories")," ",s("generateComprehensiveDocumentation"),".",s("whetherPublicOrPrivate"),", ",s("ourIntegrationMakesItEasy")," ",s("documentYourCodebase"),"."]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("features")}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg mt-0.5",children:c.jsx(xs,{className:"w-5 h-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("repositoryAccess")}),c.jsxs("p",{className:"text-gray-600",children:[s("connectToAnyRepository")," ",s("usingPersonalAccessToken")]})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:c.jsx(vs,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("fileAnalysis")}),c.jsxs("p",{className:"text-gray-600",children:[s("automaticallyAnalyzeRepository")," ",s("repositoryStructure"),", ",s("codeFiles"),", ",s("configuration")]})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:c.jsx(Jn,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("codeUnderstanding")}),c.jsxs("p",{className:"text-gray-600",children:[s("aiPoweredAnalysisOfCodebase")," ",s("generateAccurateDocumentation")]})]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("gettingStarted")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["1. ",s("createGitHubToken")]}),c.jsxs("p",{className:"text-gray-600 mb-2",children:[s("goToGitHubSettings"),"  ",s("developerSettings"),"  ",s("personalAccessTokens"),"  ",s("tokensClassic")]}),c.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[s("requiredScopes"),": ",c.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," (",s("forPrivateRepos"),")"]}),c.jsx("p",{className:"text-sm text-gray-500",children:s("forPublicRepos")})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["2. ",s("addTokenToGitScribe")]}),c.jsxs("p",{className:"text-gray-600",children:[s("enterYourToken")," ",s("githubTokenField")," ",s("documentationEditorSettings"),". ",s("clickSaveChanges")," ",s("persistIt"),"."]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["3. ",s("startGenerating")]}),c.jsxs("p",{className:"text-gray-600 mb-2",children:[s("enterRepositoryUrl")," (",s("egOwnerRepo"),", ",c.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:s("ownerRepoPlaceholder")}),") ",s("selectMultipleRepositories")]}),c.jsxs("p",{className:"text-gray-600",children:[s("chooseOutputFormats")," ",s("thenClickRunWorkflow")," ",s("startAiAgentWorkflow")]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("supportedFormats")}),c.jsxs("p",{className:"text-gray-700 mb-3",children:[s("youCanUseAnyOfTheseFormats")," ",s("toSpecifyRepository"),":"]}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsx("li",{children:c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"https://github.com/owner/repo"})}),c.jsx("li",{children:c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"github.com/owner/repo"})}),c.jsx("li",{children:c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"owner/repo"})})]})]})]})};case"multi-repo-support":return{title:s("multiRepoSupportTitle"),icon:c.jsx(vs,{className:"w-8 h-8"}),description:s("multiRepoSupportDescription"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("gitScribeIntegratesDirectly")," ",s("generateDocumentationForMultiple")," ",s("simultaneously"),",",s("saveTimeProcessingMultiple")," ",s("maintainConsistentFormat"),"."]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("keyFeatures")}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:c.jsx(vs,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("batchProcessing")}),c.jsx("p",{className:"text-gray-600",children:s("selectAndProcessMultiple")})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:c.jsx(_t,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("individualDocumentation")}),c.jsx("p",{className:"text-gray-600",children:s("eachRepositoryGetsOwn")})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:c.jsx(ql,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("batchCommit")}),c.jsx("p",{className:"text-gray-600",children:s("commitToAllSelected")})]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howToUse")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("selectMultipleReposStep")}),c.jsxs("p",{className:"text-gray-600",children:[s("clickSelectReposButton")," ",s("browseAndSelectFromGitHub"),". ",s("searchAndFilterByVisibility"),"."]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("chooseOutputFormatsSections")}),c.jsxs("p",{className:"text-gray-600",children:[s("selectOneOrMoreFormats")," ",s("markdownMdxOpenapiHtml")," ",s("documentationSectionTypes")," ",s("readmeArchitectureApi")]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("runWorkflowStep")}),c.jsxs("p",{className:"text-gray-600",children:[s("clickRunWorkflowToStart")," ",s("systemWillProcessEachRepo")," ",s("throughDiscoveryAnalysisPlanning"),"."]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("reviewCommitStep")}),c.jsxs("p",{className:"text-gray-600",children:[s("reviewDocumentationInTabs")," ",s("switchBetweenFormatsSections"),". ",s("whenReadyClickCommitToRepos")," ",s("commitAllAtOnce"),"."]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("benefits")}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsx("li",{children:s("saveTimeProcessingMultiple")}),c.jsx("li",{children:s("maintainConsistentFormat")}),c.jsx("li",{children:s("easyManagementWithTabs")}),c.jsx("li",{children:s("batchCommitFunctionality")})]})]})]})};case"ai-powered-generation":return{title:s("aiPoweredGenerationTitle"),icon:c.jsx(_t,{className:"w-8 h-8"}),description:s("aiPoweredGenerationDescription"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("aiPoweredOverview")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiModels")}),c.jsxs("p",{className:"text-gray-700 mb-4",children:[s("gitScribeSupportsMultipleModels"),". ",s("chooseBasedOnNeeds")," ",s("speedCostQuality"),":"]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4oMiniRecommended")}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s("fastAndCostEffective")}),c.jsx("p",{className:"text-xs text-gray-500",children:s("bestBalanceSpeedQuality")})]}),c.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 rounded-lg p-4 border border-red-200",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4o")}),c.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s("mostAdvancedModel")," ",s("complexCodebases")]}),c.jsx("p",{className:"text-xs text-gray-500",children:s("highestQualityHigherCost")})]}),c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4Turbo")}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s("balancedPerformanceAccuracy")}),c.jsx("p",{className:"text-xs text-gray-500",children:s("goodForLargeRepos")})]}),c.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt35Turbo")}),c.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s("fastAndEconomical")," ",s("simpleProjects")]}),c.jsx("p",{className:"text-xs text-gray-500",children:s("lowestCostOption")})]})]}),c.jsxs("p",{className:"text-gray-600 mt-4 text-sm",children:[s("youCanChangeModel")," ",s("settingsPanel"),". ",s("realtimeCostEstimation")," ",s("statisticsSidebar"),"."]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiAssistant")}),c.jsxs("p",{className:"text-gray-700 mb-4",children:[s("aiAssistantFeature")," ",s("interactivelyEditImprove"),":"]}),c.jsxs("ul",{className:"space-y-2 text-gray-700 ml-4",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("rewriteSectionsForClarity")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("fixGrammarSpellingErrors")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("addRemoveContentBasedOnNeeds")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("restructureDocumentation")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("formatTextImproveReadability")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("costEstimation")}),c.jsxs("p",{className:"text-gray-700 mb-3",children:[s("gitScribeProvidesRealtime")," ",s("basedOn"),":"]}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsx("li",{children:s("selectedAiModelPricing")}),c.jsx("li",{children:s("estimatedTokenUsage")}),c.jsx("li",{children:s("documentationLengthComplexity")})]}),c.jsxs("p",{className:"text-gray-600 mt-4 text-sm",children:[s("costsDisplayedInStatistics")," ",s("statisticsSidebar")," ",s("duringGeneration"),"."]})]})]})};case"export-commit":return{title:s("exportCommitTitle"),icon:c.jsx(Zi,{className:"w-8 h-8"}),description:s("exportCommitDescription"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("exportDocumentation")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("downloadGeneratedDocumentation")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("exportFormats")}),c.jsxs("ul",{className:"space-y-2 text-gray-700",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("formatMarkdown")})," - ",s("markdownStandardFormat")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("formatMarkdownMermaid")})," - ",s("markdownMermaidDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("formatMdx")})," - ",s("mdxDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("formatOpenapi")})," - ",s("openapiDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("formatHtml")})," - ",s("htmlDescription")]})]})]}),c.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:s("eachFormatGenerated")})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("exportDocumentation")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("exportDocumentationDescription")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("howItWorks")}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[c.jsx("li",{children:s("runWorkflowGenerate")}),c.jsx("li",{children:s("reviewGeneratedDocumentation")}),c.jsx("li",{children:s("downloadGeneratedDocumentation")}),c.jsx("li",{children:"Copy or use the documentation in your project"})]}),c.jsxs("p",{className:"text-gray-600 mt-3 text-sm",children:[c.jsxs("strong",{children:[s("overview"),":"]})," Documentation is generated locally and can be downloaded or copied for use in your repositories."]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("multiRepoSupportTitle")}),c.jsx("p",{className:"text-gray-700 mb-2",children:s("whenWorkingWithMultiple")}),c.jsx("p",{className:"text-gray-600 text-sm",children:s("documentationStoredSeparately")})]})]})]})]})};case"documentation-page":return{title:s("documentationTitle"),icon:c.jsx(Id,{className:"w-8 h-8"}),description:s("completeGuideToUsing"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("gettingStarted")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("welcomeToGitScribe")}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("quickStart")}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[c.jsx("li",{children:s("addOpenAiKey")}),c.jsx("li",{children:s("optionalAddGitHubToken")}),c.jsx("li",{children:s("enterRepositoryUrlOrSelect")}),c.jsx("li",{children:s("chooseOutputFormatsSections")}),c.jsx("li",{children:s("clickRunWorkflowStart")}),c.jsx("li",{children:s("reviewEditCommit")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("coreFeatures")}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(xs,{className:"w-5 h-5 text-orange-600"}),s("githubIntegration")]}),c.jsx("p",{className:"text-sm text-gray-600",children:s("directIntegration")})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(vs,{className:"w-5 h-5 text-orange-600"}),s("multiRepoSupport")]}),c.jsx("p",{className:"text-sm text-gray-600",children:s("processMultipleRepos")})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(_t,{className:"w-5 h-5 text-orange-600"}),s("aiAgentWorkflows")]}),c.jsx("p",{className:"text-sm text-gray-600",children:s("intelligentAgentSystem")})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(ql,{className:"w-5 h-5 text-orange-600"}),s("export")," & ",s("commit")]}),c.jsx("p",{className:"text-sm text-gray-600",children:s("multipleOutputFormats")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("outputFormats")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("outputFormatsDescription")}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMarkdown")}),c.jsx("p",{className:"text-sm text-gray-600",children:s("standardMarkdownFormat")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMarkdownMermaid")}),c.jsx("p",{className:"text-sm text-gray-600",children:s("markdownWithDiagrams")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMdx")}),c.jsx("p",{className:"text-sm text-gray-600",children:s("markdownWithJsx")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatOpenapi")}),c.jsx("p",{className:"text-sm text-gray-600",children:s("yamlFormatForApi")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatHtml")}),c.jsx("p",{className:"text-sm text-gray-600",children:s("fullyStyledHtml")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("documentationSections")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("generateDifferentTypes")}),c.jsxs("ul",{className:"space-y-2 text-gray-700",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionReadme")})," - ",s("readmeDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionArchitecture")})," - ",s("architectureDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionApiReference")})," - ",s("apiReferenceDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionComponents")})," - ",s("componentsDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionTestingCicd")})," - ",s("testingCicdDescription")]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsxs("span",{children:[c.jsx("strong",{children:s("sectionChangelog")})," - ",s("changelogDescription")]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiAgentWorkflow")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("gitScribeUsesIntelligent")}),c.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-6 border border-orange-200",children:c.jsxs("ol",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsxs("span",{className:"font-bold text-orange-600",children:["1. ",s("repoDiscovery")]}),c.jsx("span",{className:"text-gray-700",children:s("validatesAndDiscovers")})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsxs("span",{className:"font-bold text-orange-600",children:["2. ",s("repoAnalysis")]}),c.jsx("span",{className:"text-gray-700",children:s("analyzesStructure")})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsxs("span",{className:"font-bold text-orange-600",children:["3. ",s("docsPlanner")]}),c.jsx("span",{className:"text-gray-700",children:s("createsStructuredPlan")})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsxs("span",{className:"font-bold text-orange-600",children:["4. ",s("docsWriter")]}),c.jsx("span",{className:"text-gray-700",children:s("generatesDocumentation")})]})]})})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("learnMore")}),c.jsx("p",{className:"text-gray-700",children:s("exploreOtherPages")})]})]})};case"api-reference":return{title:s("apiReferenceTitle"),icon:c.jsx(Jn,{className:"w-8 h-8"}),description:s("completeApiDocumentation"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("agentWorkflowSystem")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("gitScribeUsesLangGraph")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-6 overflow-x-auto mb-4",children:c.jsx("pre",{className:"text-sm",children:`${s("agentWorkflowSteps")}
1. ${s("repoDiscovery")} - ${s("validatesAndDiscovers")}
2. ${s("repoAnalysis")} - ${s("analyzesStructure")}
3. ${s("docsPlanner")} - ${s("createsStructuredPlan")}
4. ${s("docsWriter")} - ${s("generatesDocumentation")}`})}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("agentState")}),c.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("workflowMaintainsSharedState")}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 text-sm ml-2",children:[c.jsx("li",{children:s("discoveredRepositories")}),c.jsx("li",{children:s("repositoryAnalyses")}),c.jsx("li",{children:s("documentationPlans")}),c.jsx("li",{children:s("generatedDocumentationByFormat")}),c.jsx("li",{children:s("commitResults")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("githubService")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionFetchUserRepos")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`fetchUserRepos(options?: {
  visibility?: 'all' | 'public' | 'private';
  perPage?: number;
  page?: number;
}): Promise<SimpleRepo[]>`})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionCreateOrUpdateFile")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`createOrUpdateFile(
  owner: string,
  repo: string,
  path: string,
  content: string,
  message: string,
  branch?: string
): Promise<CommitResponse>`})})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("langChainService")}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionCallLangChain")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`callLangChain(
  prompt: string,
  systemPrompt?: string,
  model?: string,
  temperature?: number
): Promise<string>`})})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("typeDefinitions")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeSimpleRepo")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`type SimpleRepo = {
  id: number;
  name: string;
  fullName: string;
  owner: string;
  private: boolean;
  htmlUrl: string;
  description?: string;
  defaultBranch: string;
}`})})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeDocOutputFormat")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`type DocOutputFormat = 
  | 'markdown'
  | 'markdown_mermaid'
  | 'mdx'
  | 'openapi'
  | 'html';`})})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeDocSectionType")}),c.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:c.jsx("pre",{className:"text-sm",children:`type DocSectionType = 
  | 'README'
  | 'ARCHITECTURE'
  | 'API'
  | 'COMPONENTS'
  | 'TESTING_CI'
  | 'CHANGELOG';`})})]})]})]})]})};case"examples":return{title:s("examplesTitle"),icon:c.jsx(CM,{className:"w-8 h-8"}),description:s("exampleUseCases"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example1SingleRepository")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("youWantToGenerate")}),c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("steps")}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[c.jsxs("li",{children:[s("enterGitHubRepositoryUrl")," ",c.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"facebook/react"})]}),c.jsx("li",{children:s("selectOutputFormatsEg")}),c.jsx("li",{children:s("selectSectionTypesEg")}),c.jsx("li",{children:s("clickRunWorkflowStart")}),c.jsx("li",{children:s("watchWorkflowProgress")}),c.jsx("li",{children:s("reviewGeneratedDocumentationSwitch")}),c.jsx("li",{children:s("clickCommitToReposWhenReady")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example2MultipleRepositories")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("youManageMultipleMicroservices")}),c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("steps")}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[c.jsx("li",{children:s("clickSelectRepositories")}),c.jsx("li",{children:s("selectOutputFormatsEgOpenAPI")}),c.jsx("li",{children:s("selectSectionTypesEg")}),c.jsx("li",{children:s("clickRunWorkflowStart")}),c.jsx("li",{children:s("monitorWorkflowProgress")}),c.jsx("li",{children:s("reviewEachRepositoryDocumentation")}),c.jsx("li",{children:s("switchBetweenFormatsSectionsForEach")}),c.jsx("li",{children:s("commitAllRepositoriesAtOnce")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example4UsingAiAssistant")}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),c.jsx("p",{className:"text-gray-700 mb-4",children:s("youWantToImproveDocumentation")}),c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("examplePrompts")}),c.jsxs("ul",{className:"space-y-2 text-gray-700",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("addSectionExplainingInstallation")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("makeApiDocumentationMoreDetailed")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("fixAllGrammarErrors")})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-600 mt-1",children:""}),c.jsx("span",{children:s("restructureDocumentationForBetterFlow")})]})]})]})]})]})};case"support":return{title:s("supportTitle"),icon:c.jsx(EM,{className:"w-8 h-8"}),description:s("supportTitle"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("needHelp")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("wereHereToHelp")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactOptions")}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(ny,{className:"w-5 h-5 text-orange-600"}),s("emailSupport")]}),c.jsx("p",{className:"text-gray-600 mb-3",children:s("getDirectHelpViaEmail")}),c.jsx("a",{href:"mailto:support@GitScribe.com",className:"text-orange-600 hover:text-orange-700 font-medium",children:"support@GitScribe.com"})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[c.jsx(xs,{className:"w-5 h-5 text-orange-600"}),s("githubIssues")]}),c.jsx("p",{className:"text-gray-600 mb-3",children:s("reportBugsOrRequestFeatures")}),c.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 font-medium",children:s("openAnIssue")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("commonIssues")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("openaiApiKeyError")}),c.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("addOpenAiKeyInSettings")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("githubRateLimiting")}),c.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("addGitHubTokenInSettings")}),c.jsxs("p",{className:"text-gray-600 text-xs",children:[s("requiredScopeRepo")," ",c.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," (",s("forPrivateRepos"),")"]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("workflowNotStarting")}),c.jsx("p",{className:"text-gray-700 text-sm",children:s("ensureYouHaveSelected")})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("documentationNotCommitting")}),c.jsxs("p",{className:"text-gray-700 text-sm",children:[s("makeSureGitHubTokenHasRepoScope")," ",c.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," ",s("requiredScopeRepo")," ",s("forPrivateRepos"),"."]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("documentation")}),c.jsx("p",{className:"text-gray-700",children:s("checkOutComprehensiveDocumentation")})]})]})};case"privacy-policy":return{title:s("privacyPolicyTitle"),icon:c.jsx($M,{className:"w-8 h-8"}),description:s("howWeProtectAndHandle"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("introduction")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeCommittedToPrivacy")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("informationWeCollect")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("personalInformation")}),c.jsx("p",{className:"text-gray-700",children:s("weMayCollectPersonalInfo")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("githubTokens")}),c.jsx("p",{className:"text-gray-700",children:s("githubTokensStoredLocally")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("usageData")}),c.jsx("p",{className:"text-gray-700",children:s("weMayCollectUsageData")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howWeUseYourInformation")}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsx("li",{children:s("toProvideAndImprove")}),c.jsx("li",{children:s("toProcessYourRequests")}),c.jsx("li",{children:s("toCommunicateWithYou")}),c.jsx("li",{children:s("toAnalyzeUsagePatterns")})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("dataSecurity")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weImplementSecurityMeasures")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("thirdPartyServices")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:s("weUseFollowingThirdParty")}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"OpenAI:"})," ",s("openaiForAiPowered")]}),c.jsxs("li",{children:[c.jsx("strong",{children:"GitHub:"})," ",s("githubForRepositoryAccess")]}),c.jsxs("li",{children:[c.jsx("strong",{children:"LocalStorage:"})," ",s("localStorageForStoring")]})]}),c.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:s("allDataStoredLocally")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("yourRights")}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("youHaveRightToAccess")," support@GitScribe.com."]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactUsPrivacy")}),c.jsxs("p",{className:"text-gray-700",children:[s("ifYouHaveQuestionsPrivacy")," ",c.jsx("a",{href:"mailto:privacy@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"privacy@GitScribe.com"})]})]})]})};case"terms-of-service":return{title:s("termsOfServiceTitle"),icon:c.jsx(Ut,{className:"w-8 h-8"}),description:s("termsAndConditions"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("agreementToTerms")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("byAccessingOrUsing")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("useOfService")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("eligibility")}),c.jsx("p",{className:"text-gray-700",children:s("youMustBeAtLeast18")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("accountResponsibility")}),c.jsx("p",{className:"text-gray-700",children:s("youAreResponsibleForMaintaining")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("acceptableUse")}),c.jsx("p",{className:"text-gray-700 mb-2",children:s("youAgreeNotTo")}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 ml-4",children:[c.jsx("li",{children:s("useServiceForIllegalPurpose")}),c.jsx("li",{children:s("violateLawsOrRegulations")}),c.jsx("li",{children:s("infringeOnIntellectualProperty")}),c.jsx("li",{children:s("transmitMaliciousCode")}),c.jsx("li",{children:s("attemptUnauthorizedAccess")})]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("apiUsageAndCosts")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeUsesOpenAIApi")}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 mt-3",children:[c.jsx("li",{children:s("providingYourOwnOpenAiKey")}),c.jsx("li",{children:s("allCostsAssociated")}),c.jsx("li",{children:s("managingYourApiKeySecurity")})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("intellectualProperty")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("serviceOwnedByGitScribe")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("limitationOfLiability")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeProvidedAsIs")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("changesToTerms")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weReserveRightToModify")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactTerms")}),c.jsxs("p",{className:"text-gray-700",children:[s("forQuestionsAboutTerms")," ",c.jsx("a",{href:"mailto:legal@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"legal@GitScribe.com"})]})]})]})};case"cookie-policy":return{title:s("cookiePolicyTitle"),icon:c.jsx(AM,{className:"w-8 h-8"}),description:s("howWeUseCookies"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{children:[c.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("whatAreCookies")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("cookiesAreSmallTextFiles")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howWeUseCookiesTitle")}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("essentialCookies")}),c.jsx("p",{className:"text-gray-700",children:s("theseCookiesAreNecessary")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("preferenceCookies")}),c.jsx("p",{className:"text-gray-700",children:s("weUseLocalStorageToStore")})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("analyticsCookies")}),c.jsx("p",{className:"text-gray-700",children:s("weMayUseAnalyticsCookies")})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("localStorageUsage")}),c.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:s("gitScribeUsesBrowserLocalStorage")}),c.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[c.jsx("li",{children:s("githubPersonalAccessTokensEncrypted")}),c.jsx("li",{children:s("userPreferencesAndSettings")}),c.jsx("li",{children:s("autoFollowRepositoryConfigurations")})]}),c.jsx("p",{className:"text-gray-700 mt-4",children:s("thisDataRemainsOnDevice")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("managingCookies")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("youCanControlCookies")}),c.jsx("p",{className:"text-gray-700 mt-4",children:s("toClearLocalStorageData")})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("thirdPartyCookies")}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weMayUseThirdPartyServices")}),c.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 mt-3",children:c.jsx("li",{children:s("analyticsProviders")})})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactCookiePolicy")}),c.jsxs("p",{className:"text-gray-700",children:[s("forQuestionsAboutCookiePolicy")," ",c.jsx("a",{href:"mailto:privacy@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"privacy@GitScribe.com"})]})]})]})};case"Donate":return{title:s("Donate"),icon:c.jsx(ra,{className:"w-8 h-8"}),description:s("supportGitScribeDevelopment"),content:c.jsxs("div",{className:"space-y-6",children:[c.jsx("section",{children:c.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-8 border border-orange-200 text-center mb-6",children:[c.jsx(ra,{className:"w-16 h-16 text-red-500 mx-auto mb-4 fill-red-500"}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:s("supportGitScribe")}),c.jsx("p",{className:"text-lg text-gray-700 mb-6",children:s("ifYouFindGitScribeUseful")}),c.jsxs("a",{href:"https://www.buymeacoffee.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold text-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[c.jsx("span",{children:""}),c.jsx("span",{children:s("buyMeACoffee")})]})]})}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("whySupport")}),c.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[s("gitScribeIsFreeAndOpenSource")," ",s("yourSupportHelpsUs")]}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg mt-0.5",children:c.jsx(_t,{className:"w-5 h-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("newFeatures")}),c.jsx("p",{className:"text-gray-600",children:s("developNewFeaturesAndImprovements")})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:c.jsx(Jn,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("maintenanceAndUpdates")}),c.jsx("p",{className:"text-gray-600",children:s("keepGitScribeRunningSmoothly")})]})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg mt-0.5",children:c.jsx(ra,{className:"w-5 h-5 text-green-600 fill-green-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:s("freeAndOpenSource")}),c.jsx("p",{className:"text-gray-600",children:s("maintainFreeAccessForEveryone")})]})]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("otherWaysToSupport")}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[c.jsx(xs,{className:"w-8 h-8 text-gray-700 mb-3"}),c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("starOnGitHub")}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s("starringOurRepository")}),c.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:[s("visitGitHub")," "]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[c.jsx(ny,{className:"w-8 h-8 text-gray-700 mb-3"}),c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("shareFeedback")}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s("letUsKnowWhatYouThink")}),c.jsxs("a",{href:"mailto:support@GitScribe.com",className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:[s("contactUs")," "]})]})]})]}),c.jsxs("section",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:s("thankYou")}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("everyContributionMatters")," ",s("whetherThroughDonations")," ",s("weAppreciateYourSupport")]})]})]})};default:return{title:s("pageNotFound"),icon:c.jsx(Ut,{className:"w-8 h-8"}),description:s("theRequestedPageCouldNotBeFound"),content:c.jsx("div",{children:c.jsx("p",{className:"text-gray-700",children:s("thePageYoureLookingForDoesntExist")})})}}})();return c.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[c.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx($1,{className:"w-5 h-5 text-gray-600"})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg",children:a.icon}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-gray-900",children:a.title}),c.jsx("p",{className:"text-sm text-gray-500",children:a.description})]})]})]})})})}),c.jsx("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-12 w-full",children:c.jsx("div",{className:"prose prose-slate max-w-none",children:a.content})}),c.jsx(_v,{onNavigate:o=>{window.dispatchEvent(new CustomEvent("navigate",{detail:o}))}})]})}function s7(){const[t,e]=$.useState("landing");return $.useEffect(()=>{const r=s=>{e(s.detail)};return window.addEventListener("navigate",r),()=>{window.removeEventListener("navigate",r)}},[]),["github-integration","multi-repo-support","ai-powered-generation","export-commit","documentation-page","api-reference","examples","support","privacy-policy","terms-of-service","cookie-policy","Donate"].includes(t)?c.jsx(r7,{pageType:t,onBack:()=>e("landing")}):t==="documentation"?c.jsx(n7,{onBack:()=>e("landing")}):c.jsx(MM,{onGenerate:()=>e("documentation")})}nE(document.getElementById("root")).render(c.jsx($.StrictMode,{children:c.jsx(s7,{})}));
