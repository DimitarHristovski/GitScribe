var _j=Object.defineProperty;var bj=(t,e,n)=>e in t?_j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>bj(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Yk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jk={exports:{}},Yh={},Xk={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=Symbol.for("react.element"),Sj=Symbol.for("react.portal"),kj=Symbol.for("react.fragment"),Tj=Symbol.for("react.strict_mode"),Aj=Symbol.for("react.profiler"),Ej=Symbol.for("react.provider"),Cj=Symbol.for("react.context"),Nj=Symbol.for("react.forward_ref"),Ij=Symbol.for("react.suspense"),Rj=Symbol.for("react.memo"),jj=Symbol.for("react.lazy"),ex=Symbol.iterator;function Pj(t){return t===null||typeof t!="object"?null:(t=ex&&t[ex]||t["@@iterator"],typeof t=="function"?t:null)}var Qk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e1=Object.assign,t1={};function Co(t,e,n){this.props=t,this.context=e,this.refs=t1,this.updater=n||Qk}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n1(){}n1.prototype=Co.prototype;function Qy(t,e,n){this.props=t,this.context=e,this.refs=t1,this.updater=n||Qk}var e0=Qy.prototype=new n1;e0.constructor=Qy;e1(e0,Co.prototype);e0.isPureReactComponent=!0;var tx=Array.isArray,r1=Object.prototype.hasOwnProperty,t0={current:null},s1={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)r1.call(e,r)&&!s1.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Nc,type:t,key:i,ref:a,props:s,_owner:t0.current}}function Oj(t,e){return{$$typeof:Nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function n0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nc}function $j(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nx=/\/+/g;function df(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$j(""+t.key):e.toString(36)}function hd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Nc:case Sj:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+df(a,0):r,tx(s)?(n="",t!=null&&(n=t.replace(nx,"$&/")+"/"),hd(s,e,n,"",function(c){return c})):s!=null&&(n0(s)&&(s=Oj(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(nx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",tx(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+df(i,o);a+=hd(i,e,n,l,s)}else if(l=Pj(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+df(i,o++),a+=hd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vu(t,e,n){if(t==null)return t;var r=[],s=0;return hd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Dj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},md={transition:null},Mj={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:md,ReactCurrentOwner:t0};function a1(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:vu,forEach:function(t,e,n){vu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vu(t,function(){e++}),e},toArray:function(t){return vu(t,function(e){return e})||[]},only:function(t){if(!n0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=Co;Oe.Fragment=kj;Oe.Profiler=Aj;Oe.PureComponent=Qy;Oe.StrictMode=Tj;Oe.Suspense=Ij;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mj;Oe.act=a1;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=e1({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=t0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)r1.call(e,l)&&!s1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Nc,type:t.type,key:s,ref:i,props:r,_owner:a}};Oe.createContext=function(t){return t={$$typeof:Cj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ej,_context:t},t.Consumer=t};Oe.createElement=i1;Oe.createFactory=function(t){var e=i1.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:Nj,render:t}};Oe.isValidElement=n0;Oe.lazy=function(t){return{$$typeof:jj,_payload:{_status:-1,_result:t},_init:Dj}};Oe.memo=function(t,e){return{$$typeof:Rj,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=md.transition;md.transition={};try{t()}finally{md.transition=e}};Oe.unstable_act=a1;Oe.useCallback=function(t,e){return un.current.useCallback(t,e)};Oe.useContext=function(t){return un.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return un.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return un.current.useEffect(t,e)};Oe.useId=function(){return un.current.useId()};Oe.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return un.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};Oe.useRef=function(t){return un.current.useRef(t)};Oe.useState=function(t){return un.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return un.current.useTransition()};Oe.version="18.3.1";Xk.exports=Oe;var P=Xk.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj=P,Fj=Symbol.for("react.element"),Uj=Symbol.for("react.fragment"),zj=Object.prototype.hasOwnProperty,Bj=Lj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gj={key:!0,ref:!0,__self:!0,__source:!0};function o1(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)zj.call(e,r)&&!Gj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Fj,type:t,key:i,ref:a,props:s,_owner:Bj.current}}Yh.Fragment=Uj;Yh.jsx=o1;Yh.jsxs=o1;Jk.exports=Yh;var u=Jk.exports,l1={exports:{}},Bn={},c1={exports:{}},u1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,M){var U=j.length;j.push(M);e:for(;0<U;){var ie=U-1>>>1,ee=j[ie];if(0<s(ee,M))j[ie]=M,j[U]=ee,U=ie;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var M=j[0],U=j.pop();if(U!==M){j[0]=U;e:for(var ie=0,ee=j.length,Ae=ee>>>1;ie<Ae;){var Ge=2*(ie+1)-1,Ie=j[Ge],A=Ge+1,S=j[A];if(0>s(Ie,U))A<ee&&0>s(S,Ie)?(j[ie]=S,j[A]=U,ie=A):(j[ie]=Ie,j[Ge]=U,ie=Ge);else if(A<ee&&0>s(S,U))j[ie]=S,j[A]=U,ie=A;else break e}}return M}function s(j,M){var U=j.sortIndex-M.sortIndex;return U!==0?U:j.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,m=3,f=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(j){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=j)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function _(j){if(w=!1,g(j),!y)if(n(l)!==null)y=!0,G(k);else{var M=n(c);M!==null&&q(_,M.startTime-j)}}function k(j,M){y=!1,w&&(w=!1,v(b),b=-1),f=!0;var U=m;try{for(g(M),h=n(l);h!==null&&(!(h.expirationTime>M)||j&&!L());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,m=h.priorityLevel;var ee=ie(h.expirationTime<=M);M=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(l)&&r(l),g(M)}else r(l);h=n(l)}if(h!==null)var Ae=!0;else{var Ge=n(c);Ge!==null&&q(_,Ge.startTime-M),Ae=!1}return Ae}finally{h=null,m=U,f=!1}}var E=!1,C=null,b=-1,O=5,$=-1;function L(){return!(t.unstable_now()-$<O)}function ge(){if(C!==null){var j=t.unstable_now();$=j;var M=!0;try{M=C(!0,j)}finally{M?ot():(E=!1,C=null)}}else E=!1}var ot;if(typeof p=="function")ot=function(){p(ge)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,B=K.port2;K.port1.onmessage=ge,ot=function(){B.postMessage(null)}}else ot=function(){x(ge,0)};function G(j){C=j,E||(E=!0,ot())}function q(j,M){b=x(function(){j(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,G(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var U=m;m=M;try{return j()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,M){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=m;m=j;try{return M()}finally{m=U}},t.unstable_scheduleCallback=function(j,M,U){var ie=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ie+U:ie):U=ie,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=U+ee,j={id:d++,callback:M,priorityLevel:j,startTime:U,expirationTime:ee,sortIndex:-1},U>ie?(j.sortIndex=U,e(c,j),n(l)===null&&j===n(c)&&(w?(v(b),b=-1):w=!0,q(_,U-ie))):(j.sortIndex=ee,e(l,j),y||f||(y=!0,G(k))),j},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(j){var M=m;return function(){var U=m;m=M;try{return j.apply(this,arguments)}finally{m=U}}}})(u1);c1.exports=u1;var Vj=c1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj=P,Fn=Vj;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d1=new Set,Zl={};function da(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(Zl[t]=e,t=0;t<e.length;t++)d1.add(e[t])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,Wj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rx={},sx={};function qj(t){return Up.call(sx,t)?!0:Up.call(rx,t)?!1:Wj.test(t)?sx[t]=!0:(rx[t]=!0,!1)}function Kj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zj(t,e,n,r){if(e===null||typeof e>"u"||Kj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var r0=/[\-:]([a-z])/g;function s0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(r0,s0);qt[e]=new dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(r0,s0);qt[e]=new dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(r0,s0);qt[e]=new dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new dn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function i0(t,e,n,r){var s=qt.hasOwnProperty(e)?qt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zj(e,n,s,r)&&(n=null),r||s===null?qj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var js=Hj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wu=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),ja=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),h1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),o0=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),Gp=Symbol.for("react.suspense_list"),l0=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),f1=Symbol.for("react.offscreen"),ix=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=ix&&t[ix]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,hf;function sl(t){if(hf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hf=e&&e[1]||""}return`
`+hf+t}var mf=!1;function ff(t,e){if(!t||mf)return"";mf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{mf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sl(t):""}function Yj(t){switch(t.tag){case 5:return sl(t.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return t=ff(t.type,!1),t;case 11:return t=ff(t.type.render,!1),t;case 1:return t=ff(t.type,!0),t;default:return""}}function Vp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ja:return"Fragment";case Ra:return"Portal";case zp:return"Profiler";case a0:return"StrictMode";case Bp:return"Suspense";case Gp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m1:return(t.displayName||"Context")+".Consumer";case h1:return(t._context.displayName||"Context")+".Provider";case o0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case l0:return e=t.displayName||null,e!==null?e:Vp(t.type)||"Memo";case Hs:e=t._payload,t=t._init;try{return Vp(t(e))}catch{}}return null}function Jj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vp(e);case 8:return e===a0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xj(t){var e=p1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xu(t){t._valueTracker||(t._valueTracker=Xj(t))}function g1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=p1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hp(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ax(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&i0(t,"checked",e,!1)}function Wp(t,e){y1(t,e);var n=hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qp(t,e.type,n):e.hasOwnProperty("defaultValue")&&qp(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ox(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qp(t,e,n){(e!=="number"||Ud(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var il=Array.isArray;function Qa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(il(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hi(n)}}function v1(t,e){var n=hi(e.value),r=hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _u,x1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_u=_u||document.createElement("div"),_u.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_u.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qj=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){Qj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tl[e]=Tl[t]})});function _1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+e).trim():e+"px"}function b1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eP=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yp(t,e){if(e){if(eP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Jp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function c0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qp=null,eo=null,to=null;function ux(t){if(t=jc(t)){if(typeof Qp!="function")throw Error(H(280));var e=t.stateNode;e&&(e=tm(e),Qp(t.stateNode,t.type,e))}}function S1(t){eo?to?to.push(t):to=[t]:eo=t}function k1(){if(eo){var t=eo,e=to;if(to=eo=null,ux(t),e)for(t=0;t<e.length;t++)ux(e[t])}}function T1(t,e){return t(e)}function A1(){}var pf=!1;function E1(t,e,n){if(pf)return t(e,n);pf=!0;try{return T1(t,e,n)}finally{pf=!1,(eo!==null||to!==null)&&(A1(),k1())}}function Jl(t,e){var n=t.stateNode;if(n===null)return null;var r=tm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var eg=!1;if(xs)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){eg=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{eg=!1}function tP(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Al=!1,zd=null,Bd=!1,tg=null,nP={onError:function(t){Al=!0,zd=t}};function rP(t,e,n,r,s,i,a,o,l){Al=!1,zd=null,tP.apply(nP,arguments)}function sP(t,e,n,r,s,i,a,o,l){if(rP.apply(this,arguments),Al){if(Al){var c=zd;Al=!1,zd=null}else throw Error(H(198));Bd||(Bd=!0,tg=c)}}function ha(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dx(t){if(ha(t)!==t)throw Error(H(188))}function iP(t){var e=t.alternate;if(!e){if(e=ha(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dx(s),t;if(i===r)return dx(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function N1(t){return t=iP(t),t!==null?I1(t):null}function I1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=I1(t);if(e!==null)return e;t=t.sibling}return null}var R1=Fn.unstable_scheduleCallback,hx=Fn.unstable_cancelCallback,aP=Fn.unstable_shouldYield,oP=Fn.unstable_requestPaint,yt=Fn.unstable_now,lP=Fn.unstable_getCurrentPriorityLevel,u0=Fn.unstable_ImmediatePriority,j1=Fn.unstable_UserBlockingPriority,Gd=Fn.unstable_NormalPriority,cP=Fn.unstable_LowPriority,P1=Fn.unstable_IdlePriority,Jh=null,Gr=null;function uP(t){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(Jh,t,void 0,(t.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:mP,dP=Math.log,hP=Math.LN2;function mP(t){return t>>>=0,t===0?32:31-(dP(t)/hP|0)|0}var bu=64,Su=4194304;function al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=al(o):(i&=a,i!==0&&(r=al(i)))}else a=n&~s,a!==0?r=al(a):i!==0&&(r=al(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-br(e),s=1<<n,r|=t[n],e&=~s;return r}function fP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-br(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=fP(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function ng(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function O1(){var t=bu;return bu<<=1,!(bu&4194240)&&(bu=64),t}function gf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-br(e),t[e]=n}function gP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-br(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function d0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-br(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ye=0;function $1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D1,h0,M1,L1,F1,rg=!1,ku=[],ni=null,ri=null,si=null,Xl=new Map,Ql=new Map,Ks=[],yP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mx(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":Xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(e.pointerId)}}function Ho(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=jc(e),e!==null&&h0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vP(t,e,n,r,s){switch(e){case"focusin":return ni=Ho(ni,t,e,n,r,s),!0;case"dragenter":return ri=Ho(ri,t,e,n,r,s),!0;case"mouseover":return si=Ho(si,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xl.set(i,Ho(Xl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ql.set(i,Ho(Ql.get(i)||null,t,e,n,r,s)),!0}return!1}function U1(t){var e=Bi(t.target);if(e!==null){var n=ha(e);if(n!==null){if(e=n.tag,e===13){if(e=C1(n),e!==null){t.blockedOn=e,F1(t.priority,function(){M1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xp=r,n.target.dispatchEvent(r),Xp=null}else return e=jc(n),e!==null&&h0(e),t.blockedOn=n,!1;e.shift()}return!0}function fx(t,e,n){fd(t)&&n.delete(e)}function wP(){rg=!1,ni!==null&&fd(ni)&&(ni=null),ri!==null&&fd(ri)&&(ri=null),si!==null&&fd(si)&&(si=null),Xl.forEach(fx),Ql.forEach(fx)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,rg||(rg=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,wP)))}function ec(t){function e(s){return Wo(s,t)}if(0<ku.length){Wo(ku[0],t);for(var n=1;n<ku.length;n++){var r=ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ni!==null&&Wo(ni,t),ri!==null&&Wo(ri,t),si!==null&&Wo(si,t),Xl.forEach(e),Ql.forEach(e),n=0;n<Ks.length;n++)r=Ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ks.length&&(n=Ks[0],n.blockedOn===null);)U1(n),n.blockedOn===null&&Ks.shift()}var no=js.ReactCurrentBatchConfig,Hd=!0;function xP(t,e,n,r){var s=Ye,i=no.transition;no.transition=null;try{Ye=1,m0(t,e,n,r)}finally{Ye=s,no.transition=i}}function _P(t,e,n,r){var s=Ye,i=no.transition;no.transition=null;try{Ye=4,m0(t,e,n,r)}finally{Ye=s,no.transition=i}}function m0(t,e,n,r){if(Hd){var s=sg(t,e,n,r);if(s===null)Af(t,e,r,Wd,n),mx(t,r);else if(vP(s,t,e,n,r))r.stopPropagation();else if(mx(t,r),e&4&&-1<yP.indexOf(t)){for(;s!==null;){var i=jc(s);if(i!==null&&D1(i),i=sg(t,e,n,r),i===null&&Af(t,e,r,Wd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Af(t,e,r,null,n)}}var Wd=null;function sg(t,e,n,r){if(Wd=null,t=c0(r),t=Bi(t),t!==null)if(e=ha(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wd=t,null}function z1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lP()){case u0:return 1;case j1:return 4;case Gd:case cP:return 16;case P1:return 536870912;default:return 16}default:return 16}}var Ys=null,f0=null,pd=null;function B1(){if(pd)return pd;var t,e=f0,n=e.length,r,s="value"in Ys?Ys.value:Ys.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return pd=s.slice(t,1<r?1-r:void 0)}function gd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function px(){return!1}function Gn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Tu:px,this.isPropagationStopped=px,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),e}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=Gn(No),Rc=dt({},No,{view:0,detail:0}),bP=Gn(Rc),yf,vf,qo,Xh=dt({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(yf=t.screenX-qo.screenX,vf=t.screenY-qo.screenY):vf=yf=0,qo=t),yf)},movementY:function(t){return"movementY"in t?t.movementY:vf}}),gx=Gn(Xh),SP=dt({},Xh,{dataTransfer:0}),kP=Gn(SP),TP=dt({},Rc,{relatedTarget:0}),wf=Gn(TP),AP=dt({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),EP=Gn(AP),CP=dt({},No,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NP=Gn(CP),IP=dt({},No,{data:0}),yx=Gn(IP),RP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PP[t])?!!e[t]:!1}function g0(){return OP}var $P=dt({},Rc,{key:function(t){if(t.key){var e=RP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g0,charCode:function(t){return t.type==="keypress"?gd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DP=Gn($P),MP=dt({},Xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vx=Gn(MP),LP=dt({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g0}),FP=Gn(LP),UP=dt({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),zP=Gn(UP),BP=dt({},Xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GP=Gn(BP),VP=[9,13,27,32],y0=xs&&"CompositionEvent"in window,El=null;xs&&"documentMode"in document&&(El=document.documentMode);var HP=xs&&"TextEvent"in window&&!El,G1=xs&&(!y0||El&&8<El&&11>=El),wx=" ",xx=!1;function V1(t,e){switch(t){case"keyup":return VP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function WP(t,e){switch(t){case"compositionend":return H1(e);case"keypress":return e.which!==32?null:(xx=!0,wx);case"textInput":return t=e.data,t===wx&&xx?null:t;default:return null}}function qP(t,e){if(Pa)return t==="compositionend"||!y0&&V1(t,e)?(t=B1(),pd=f0=Ys=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G1&&e.locale!=="ko"?null:e.data;default:return null}}var KP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KP[t.type]:e==="textarea"}function W1(t,e,n,r){S1(r),e=qd(e,"onChange"),0<e.length&&(n=new p0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cl=null,tc=null;function ZP(t){rT(t,0)}function Qh(t){var e=Da(t);if(g1(e))return t}function YP(t,e){if(t==="change")return e}var q1=!1;if(xs){var xf;if(xs){var _f="oninput"in document;if(!_f){var bx=document.createElement("div");bx.setAttribute("oninput","return;"),_f=typeof bx.oninput=="function"}xf=_f}else xf=!1;q1=xf&&(!document.documentMode||9<document.documentMode)}function Sx(){Cl&&(Cl.detachEvent("onpropertychange",K1),tc=Cl=null)}function K1(t){if(t.propertyName==="value"&&Qh(tc)){var e=[];W1(e,tc,t,c0(t)),E1(ZP,e)}}function JP(t,e,n){t==="focusin"?(Sx(),Cl=e,tc=n,Cl.attachEvent("onpropertychange",K1)):t==="focusout"&&Sx()}function XP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qh(tc)}function QP(t,e){if(t==="click")return Qh(e)}function eO(t,e){if(t==="input"||t==="change")return Qh(e)}function tO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:tO;function nc(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Up.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function kx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tx(t,e){var n=kx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kx(n)}}function Z1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y1(){for(var t=window,e=Ud();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ud(t.document)}return e}function v0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nO(t){var e=Y1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Z1(n.ownerDocument.documentElement,n)){if(r!==null&&v0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tx(n,i);var a=Tx(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rO=xs&&"documentMode"in document&&11>=document.documentMode,Oa=null,ig=null,Nl=null,ag=!1;function Ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ag||Oa==null||Oa!==Ud(r)||(r=Oa,"selectionStart"in r&&v0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nl&&nc(Nl,r)||(Nl=r,r=qd(ig,"onSelect"),0<r.length&&(e=new p0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function Au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $a={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},bf={},J1={};xs&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function em(t){if(bf[t])return bf[t];if(!$a[t])return t;var e=$a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J1)return bf[t]=e[n];return t}var X1=em("animationend"),Q1=em("animationiteration"),eT=em("animationstart"),tT=em("transitionend"),nT=new Map,Ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){nT.set(t,e),da(e,[t])}for(var Sf=0;Sf<Ex.length;Sf++){var kf=Ex[Sf],sO=kf.toLowerCase(),iO=kf[0].toUpperCase()+kf.slice(1);xi(sO,"on"+iO)}xi(X1,"onAnimationEnd");xi(Q1,"onAnimationIteration");xi(eT,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(tT,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function Cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sP(r,e,void 0,t),t.currentTarget=null}function rT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,o,c),i=l}}}if(Bd)throw t=tg,Bd=!1,tg=null,t}function tt(t,e){var n=e[dg];n===void 0&&(n=e[dg]=new Set);var r=t+"__bubble";n.has(r)||(sT(e,t,2,!1),n.add(r))}function Tf(t,e,n){var r=0;e&&(r|=4),sT(n,t,r,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function rc(t){if(!t[Eu]){t[Eu]=!0,d1.forEach(function(n){n!=="selectionchange"&&(aO.has(n)||Tf(n,!1,t),Tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Tf("selectionchange",!1,e))}}function sT(t,e,n,r){switch(z1(e)){case 1:var s=xP;break;case 4:s=_P;break;default:s=m0}n=s.bind(null,e,n,t),s=void 0,!eg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Af(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Bi(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}E1(function(){var c=i,d=c0(n),h=[];e:{var m=nT.get(t);if(m!==void 0){var f=p0,y=t;switch(t){case"keypress":if(gd(n)===0)break e;case"keydown":case"keyup":f=DP;break;case"focusin":y="focus",f=wf;break;case"focusout":y="blur",f=wf;break;case"beforeblur":case"afterblur":f=wf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=kP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=FP;break;case X1:case Q1:case eT:f=EP;break;case tT:f=zP;break;case"scroll":f=bP;break;case"wheel":f=GP;break;case"copy":case"cut":case"paste":f=NP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=vx}var w=(e&4)!==0,x=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var p=c,g;p!==null;){g=p;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,v!==null&&(_=Jl(p,v),_!=null&&w.push(sc(p,_,g)))),x)break;p=p.return}0<w.length&&(m=new f(m,y,null,n,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",m&&n!==Xp&&(y=n.relatedTarget||n.fromElement)&&(Bi(y)||y[_s]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(y=n.relatedTarget||n.toElement,f=c,y=y?Bi(y):null,y!==null&&(x=ha(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=c),f!==y)){if(w=gx,_="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=vx,_="onPointerLeave",v="onPointerEnter",p="pointer"),x=f==null?m:Da(f),g=y==null?m:Da(y),m=new w(_,p+"leave",f,n,d),m.target=x,m.relatedTarget=g,_=null,Bi(d)===c&&(w=new w(v,p+"enter",y,n,d),w.target=g,w.relatedTarget=x,_=w),x=_,f&&y)t:{for(w=f,v=y,p=0,g=w;g;g=_a(g))p++;for(g=0,_=v;_;_=_a(_))g++;for(;0<p-g;)w=_a(w),p--;for(;0<g-p;)v=_a(v),g--;for(;p--;){if(w===v||v!==null&&w===v.alternate)break t;w=_a(w),v=_a(v)}w=null}else w=null;f!==null&&Nx(h,m,f,w,!1),y!==null&&x!==null&&Nx(h,x,y,w,!0)}}e:{if(m=c?Da(c):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var k=YP;else if(_x(m))if(q1)k=eO;else{k=XP;var E=JP}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=QP);if(k&&(k=k(t,c))){W1(h,k,n,d);break e}E&&E(t,m,c),t==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&qp(m,"number",m.value)}switch(E=c?Da(c):window,t){case"focusin":(_x(E)||E.contentEditable==="true")&&(Oa=E,ig=c,Nl=null);break;case"focusout":Nl=ig=Oa=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,Ax(h,n,d);break;case"selectionchange":if(rO)break;case"keydown":case"keyup":Ax(h,n,d)}var C;if(y0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pa?V1(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(G1&&n.locale!=="ko"&&(Pa||b!=="onCompositionStart"?b==="onCompositionEnd"&&Pa&&(C=B1()):(Ys=d,f0="value"in Ys?Ys.value:Ys.textContent,Pa=!0)),E=qd(c,b),0<E.length&&(b=new yx(b,t,null,n,d),h.push({event:b,listeners:E}),C?b.data=C:(C=H1(n),C!==null&&(b.data=C)))),(C=HP?WP(t,n):qP(t,n))&&(c=qd(c,"onBeforeInput"),0<c.length&&(d=new yx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=C))}rT(h,e)})}function sc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Jl(t,n),i!=null&&r.unshift(sc(t,i,s)),i=Jl(t,e),i!=null&&r.push(sc(t,i,s))),t=t.return}return r}function _a(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nx(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=Jl(n,i),l!=null&&a.unshift(sc(n,l,o))):s||(l=Jl(n,i),l!=null&&a.push(sc(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var oO=/\r\n?/g,lO=/\u0000|\uFFFD/g;function Ix(t){return(typeof t=="string"?t:""+t).replace(oO,`
`).replace(lO,"")}function Cu(t,e,n){if(e=Ix(e),Ix(t)!==e&&n)throw Error(H(425))}function Kd(){}var og=null,lg=null;function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ug=typeof setTimeout=="function"?setTimeout:void 0,cO=typeof clearTimeout=="function"?clearTimeout:void 0,Rx=typeof Promise=="function"?Promise:void 0,uO=typeof queueMicrotask=="function"?queueMicrotask:typeof Rx<"u"?function(t){return Rx.resolve(null).then(t).catch(dO)}:ug;function dO(t){setTimeout(function(){throw t})}function Ef(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ec(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ec(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Io,ic="__reactProps$"+Io,_s="__reactContainer$"+Io,dg="__reactEvents$"+Io,hO="__reactListeners$"+Io,mO="__reactHandles$"+Io;function Bi(t){var e=t[Lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_s]||n[Lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jx(t);t!==null;){if(n=t[Lr])return n;t=jx(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[Lr]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function tm(t){return t[ic]||null}var hg=[],Ma=-1;function _i(t){return{current:t}}function rt(t){0>Ma||(t.current=hg[Ma],hg[Ma]=null,Ma--)}function et(t,e){Ma++,hg[Ma]=t.current,t.current=e}var mi={},Qt=_i(mi),kn=_i(!1),sa=mi;function lo(t,e){var n=t.type.contextTypes;if(!n)return mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Tn(t){return t=t.childContextTypes,t!=null}function Zd(){rt(kn),rt(Qt)}function Px(t,e,n){if(Qt.current!==mi)throw Error(H(168));et(Qt,e),et(kn,n)}function iT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,Jj(t)||"Unknown",s));return dt({},n,r)}function Yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,sa=Qt.current,et(Qt,t),et(kn,kn.current),!0}function Ox(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=iT(t,e,sa),r.__reactInternalMemoizedMergedChildContext=t,rt(kn),rt(Qt),et(Qt,t)):rt(kn),et(kn,n)}var us=null,nm=!1,Cf=!1;function aT(t){us===null?us=[t]:us.push(t)}function fO(t){nm=!0,aT(t)}function bi(){if(!Cf&&us!==null){Cf=!0;var t=0,e=Ye;try{var n=us;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}us=null,nm=!1}catch(s){throw us!==null&&(us=us.slice(t+1)),R1(u0,bi),s}finally{Ye=e,Cf=!1}}return null}var La=[],Fa=0,Jd=null,Xd=0,Zn=[],Yn=0,ia=null,ms=1,fs="";function Oi(t,e){La[Fa++]=Xd,La[Fa++]=Jd,Jd=t,Xd=e}function oT(t,e,n){Zn[Yn++]=ms,Zn[Yn++]=fs,Zn[Yn++]=ia,ia=t;var r=ms;t=fs;var s=32-br(r)-1;r&=~(1<<s),n+=1;var i=32-br(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ms=1<<32-br(e)+s|n<<s|r,fs=i+t}else ms=1<<i|n<<s|r,fs=t}function w0(t){t.return!==null&&(Oi(t,1),oT(t,1,0))}function x0(t){for(;t===Jd;)Jd=La[--Fa],La[Fa]=null,Xd=La[--Fa],La[Fa]=null;for(;t===ia;)ia=Zn[--Yn],Zn[Yn]=null,fs=Zn[--Yn],Zn[Yn]=null,ms=Zn[--Yn],Zn[Yn]=null}var Dn=null,On=null,it=!1,xr=null;function lT(t,e){var n=Jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $x(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,On=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ia!==null?{id:ms,overflow:fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,On=null,!0):!1;default:return!1}}function mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fg(t){if(it){var e=On;if(e){var n=e;if(!$x(t,e)){if(mg(t))throw Error(H(418));e=ii(n.nextSibling);var r=Dn;e&&$x(t,e)?lT(r,n):(t.flags=t.flags&-4097|2,it=!1,Dn=t)}}else{if(mg(t))throw Error(H(418));t.flags=t.flags&-4097|2,it=!1,Dn=t}}}function Dx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function Nu(t){if(t!==Dn)return!1;if(!it)return Dx(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cg(t.type,t.memoizedProps)),e&&(e=On)){if(mg(t))throw cT(),Error(H(418));for(;e;)lT(t,e),e=ii(e.nextSibling)}if(Dx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=Dn?ii(t.stateNode.nextSibling):null;return!0}function cT(){for(var t=On;t;)t=ii(t.nextSibling)}function co(){On=Dn=null,it=!1}function _0(t){xr===null?xr=[t]:xr.push(t)}var pO=js.ReactCurrentBatchConfig;function Ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Iu(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mx(t){var e=t._init;return e(t._payload)}function uT(t){function e(v,p){if(t){var g=v.deletions;g===null?(v.deletions=[p],v.flags|=16):g.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=ci(v,p),v.index=0,v.sibling=null,v}function i(v,p,g){return v.index=g,t?(g=v.alternate,g!==null?(g=g.index,g<p?(v.flags|=2,p):g):(v.flags|=2,p)):(v.flags|=1048576,p)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,p,g,_){return p===null||p.tag!==6?(p=$f(g,v.mode,_),p.return=v,p):(p=s(p,g),p.return=v,p)}function l(v,p,g,_){var k=g.type;return k===ja?d(v,p,g.props.children,_,g.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hs&&Mx(k)===p.type)?(_=s(p,g.props),_.ref=Ko(v,p,g),_.return=v,_):(_=Sd(g.type,g.key,g.props,null,v.mode,_),_.ref=Ko(v,p,g),_.return=v,_)}function c(v,p,g,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Df(g,v.mode,_),p.return=v,p):(p=s(p,g.children||[]),p.return=v,p)}function d(v,p,g,_,k){return p===null||p.tag!==7?(p=Yi(g,v.mode,_,k),p.return=v,p):(p=s(p,g),p.return=v,p)}function h(v,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=$f(""+p,v.mode,g),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case wu:return g=Sd(p.type,p.key,p.props,null,v.mode,g),g.ref=Ko(v,null,p),g.return=v,g;case Ra:return p=Df(p,v.mode,g),p.return=v,p;case Hs:var _=p._init;return h(v,_(p._payload),g)}if(il(p)||Go(p))return p=Yi(p,v.mode,g,null),p.return=v,p;Iu(v,p)}return null}function m(v,p,g,_){var k=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:o(v,p,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case wu:return g.key===k?l(v,p,g,_):null;case Ra:return g.key===k?c(v,p,g,_):null;case Hs:return k=g._init,m(v,p,k(g._payload),_)}if(il(g)||Go(g))return k!==null?null:d(v,p,g,_,null);Iu(v,g)}return null}function f(v,p,g,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(g)||null,o(p,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wu:return v=v.get(_.key===null?g:_.key)||null,l(p,v,_,k);case Ra:return v=v.get(_.key===null?g:_.key)||null,c(p,v,_,k);case Hs:var E=_._init;return f(v,p,g,E(_._payload),k)}if(il(_)||Go(_))return v=v.get(g)||null,d(p,v,_,k,null);Iu(p,_)}return null}function y(v,p,g,_){for(var k=null,E=null,C=p,b=p=0,O=null;C!==null&&b<g.length;b++){C.index>b?(O=C,C=null):O=C.sibling;var $=m(v,C,g[b],_);if($===null){C===null&&(C=O);break}t&&C&&$.alternate===null&&e(v,C),p=i($,p,b),E===null?k=$:E.sibling=$,E=$,C=O}if(b===g.length)return n(v,C),it&&Oi(v,b),k;if(C===null){for(;b<g.length;b++)C=h(v,g[b],_),C!==null&&(p=i(C,p,b),E===null?k=C:E.sibling=C,E=C);return it&&Oi(v,b),k}for(C=r(v,C);b<g.length;b++)O=f(C,v,b,g[b],_),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?b:O.key),p=i(O,p,b),E===null?k=O:E.sibling=O,E=O);return t&&C.forEach(function(L){return e(v,L)}),it&&Oi(v,b),k}function w(v,p,g,_){var k=Go(g);if(typeof k!="function")throw Error(H(150));if(g=k.call(g),g==null)throw Error(H(151));for(var E=k=null,C=p,b=p=0,O=null,$=g.next();C!==null&&!$.done;b++,$=g.next()){C.index>b?(O=C,C=null):O=C.sibling;var L=m(v,C,$.value,_);if(L===null){C===null&&(C=O);break}t&&C&&L.alternate===null&&e(v,C),p=i(L,p,b),E===null?k=L:E.sibling=L,E=L,C=O}if($.done)return n(v,C),it&&Oi(v,b),k;if(C===null){for(;!$.done;b++,$=g.next())$=h(v,$.value,_),$!==null&&(p=i($,p,b),E===null?k=$:E.sibling=$,E=$);return it&&Oi(v,b),k}for(C=r(v,C);!$.done;b++,$=g.next())$=f(C,v,b,$.value,_),$!==null&&(t&&$.alternate!==null&&C.delete($.key===null?b:$.key),p=i($,p,b),E===null?k=$:E.sibling=$,E=$);return t&&C.forEach(function(ge){return e(v,ge)}),it&&Oi(v,b),k}function x(v,p,g,_){if(typeof g=="object"&&g!==null&&g.type===ja&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case wu:e:{for(var k=g.key,E=p;E!==null;){if(E.key===k){if(k=g.type,k===ja){if(E.tag===7){n(v,E.sibling),p=s(E,g.props.children),p.return=v,v=p;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hs&&Mx(k)===E.type){n(v,E.sibling),p=s(E,g.props),p.ref=Ko(v,E,g),p.return=v,v=p;break e}n(v,E);break}else e(v,E);E=E.sibling}g.type===ja?(p=Yi(g.props.children,v.mode,_,g.key),p.return=v,v=p):(_=Sd(g.type,g.key,g.props,null,v.mode,_),_.ref=Ko(v,p,g),_.return=v,v=_)}return a(v);case Ra:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(v,p.sibling),p=s(p,g.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=Df(g,v.mode,_),p.return=v,v=p}return a(v);case Hs:return E=g._init,x(v,p,E(g._payload),_)}if(il(g))return y(v,p,g,_);if(Go(g))return w(v,p,g,_);Iu(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(v,p.sibling),p=s(p,g),p.return=v,v=p):(n(v,p),p=$f(g,v.mode,_),p.return=v,v=p),a(v)):n(v,p)}return x}var uo=uT(!0),dT=uT(!1),Qd=_i(null),eh=null,Ua=null,b0=null;function S0(){b0=Ua=eh=null}function k0(t){var e=Qd.current;rt(Qd),t._currentValue=e}function pg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ro(t,e){eh=t,b0=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(b0!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(eh===null)throw Error(H(308));Ua=t,eh.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var Gi=null;function T0(t){Gi===null?Gi=[t]:Gi.push(t)}function hT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,T0(e)):(n.next=s.next,s.next=n),e.interleaved=n,bs(t,r)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ws=!1;function A0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,bs(t,n)}return s=r.interleaved,s===null?(e.next=e,T0(r)):(e.next=s.next,s.next=e),r.interleaved=e,bs(t,n)}function yd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,d0(t,n)}}function Lx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function th(t,e,n,r){var s=t.updateQueue;Ws=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=c=l=null,o=i;do{var m=o.lane,f=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,w=o;switch(m=e,f=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){h=y.call(f,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(f,h,m):y,m==null)break e;h=dt({},h,m);break e;case 2:Ws=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else f={eventTime:f,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=f,l=h):d=d.next=f,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oa|=a,t.lanes=a,t.memoizedState=h}}function Fx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Pc={},Vr=_i(Pc),ac=_i(Pc),oc=_i(Pc);function Vi(t){if(t===Pc)throw Error(H(174));return t}function E0(t,e){switch(et(oc,e),et(ac,t),et(Vr,Pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zp(e,t)}rt(Vr),et(Vr,e)}function ho(){rt(Vr),rt(ac),rt(oc)}function fT(t){Vi(oc.current);var e=Vi(Vr.current),n=Zp(e,t.type);e!==n&&(et(ac,t),et(Vr,n))}function C0(t){ac.current===t&&(rt(Vr),rt(ac))}var lt=_i(0);function nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nf=[];function N0(){for(var t=0;t<Nf.length;t++)Nf[t]._workInProgressVersionPrimary=null;Nf.length=0}var vd=js.ReactCurrentDispatcher,If=js.ReactCurrentBatchConfig,aa=0,ut=null,It=null,Dt=null,rh=!1,Il=!1,lc=0,gO=0;function Zt(){throw Error(H(321))}function I0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function R0(t,e,n,r,s,i){if(aa=i,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vd.current=t===null||t.memoizedState===null?xO:_O,t=n(r,s),Il){i=0;do{if(Il=!1,lc=0,25<=i)throw Error(H(301));i+=1,Dt=It=null,e.updateQueue=null,vd.current=bO,t=n(r,s)}while(Il)}if(vd.current=sh,e=It!==null&&It.next!==null,aa=0,Dt=It=ut=null,rh=!1,e)throw Error(H(300));return t}function j0(){var t=lc!==0;return lc=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ut.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function rr(){if(It===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=Dt===null?ut.memoizedState:Dt.next;if(e!==null)Dt=e,It=t;else{if(t===null)throw Error(H(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Dt===null?ut.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function cc(t,e){return typeof e=="function"?e(t):e}function Rf(t){var e=rr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=It,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var d=c.lane;if((aa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,ut.lanes|=d,oa|=d}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,kr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ut.lanes|=i,oa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jf(t){var e=rr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);kr(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function pT(){}function gT(t,e){var n=ut,r=rr(),s=e(),i=!kr(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,P0(wT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,uc(9,vT.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(H(349));aa&30||yT(n,e,s)}return s}function yT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vT(t,e,n,r){e.value=n,e.getSnapshot=r,xT(e)&&_T(t)}function wT(t,e,n){return n(function(){xT(e)&&_T(t)})}function xT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function _T(t){var e=bs(t,1);e!==null&&Sr(e,t,1,-1)}function Ux(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:t},e.queue=t,t=t.dispatch=wO.bind(null,ut,t),[e.memoizedState,t]}function uc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bT(){return rr().memoizedState}function wd(t,e,n,r){var s=Dr();ut.flags|=t,s.memoizedState=uc(1|e,n,void 0,r===void 0?null:r)}function rm(t,e,n,r){var s=rr();r=r===void 0?null:r;var i=void 0;if(It!==null){var a=It.memoizedState;if(i=a.destroy,r!==null&&I0(r,a.deps)){s.memoizedState=uc(e,n,i,r);return}}ut.flags|=t,s.memoizedState=uc(1|e,n,i,r)}function zx(t,e){return wd(8390656,8,t,e)}function P0(t,e){return rm(2048,8,t,e)}function ST(t,e){return rm(4,2,t,e)}function kT(t,e){return rm(4,4,t,e)}function TT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AT(t,e,n){return n=n!=null?n.concat([t]):null,rm(4,4,TT.bind(null,e,t),n)}function O0(){}function ET(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CT(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NT(t,e,n){return aa&21?(kr(n,e)||(n=O1(),ut.lanes|=n,oa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function yO(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=If.transition;If.transition={};try{t(!1),e()}finally{Ye=n,If.transition=r}}function IT(){return rr().memoizedState}function vO(t,e,n){var r=li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RT(t))jT(e,n);else if(n=hT(t,e,n,r),n!==null){var s=cn();Sr(n,t,r,s),PT(n,e,r)}}function wO(t,e,n){var r=li(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RT(t))jT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,kr(o,a)){var l=e.interleaved;l===null?(s.next=s,T0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=hT(t,e,s,r),n!==null&&(s=cn(),Sr(n,t,r,s),PT(n,e,r))}}function RT(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function jT(t,e){Il=rh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,d0(t,n)}}var sh={readContext:nr,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},xO={readContext:nr,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:zx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wd(4194308,4,TT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wd(4194308,4,t,e)},useInsertionEffect:function(t,e){return wd(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vO.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:Ux,useDebugValue:O0,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=Ux(!1),e=t[0];return t=yO.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,s=Dr();if(it){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Lt===null)throw Error(H(349));aa&30||yT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zx(wT.bind(null,r,i,t),[t]),r.flags|=2048,uc(9,vT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Dr(),e=Lt.identifierPrefix;if(it){var n=fs,r=ms;n=(r&~(1<<32-br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_O={readContext:nr,useCallback:ET,useContext:nr,useEffect:P0,useImperativeHandle:AT,useInsertionEffect:ST,useLayoutEffect:kT,useMemo:CT,useReducer:Rf,useRef:bT,useState:function(){return Rf(cc)},useDebugValue:O0,useDeferredValue:function(t){var e=rr();return NT(e,It.memoizedState,t)},useTransition:function(){var t=Rf(cc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:pT,useSyncExternalStore:gT,useId:IT,unstable_isNewReconciler:!1},bO={readContext:nr,useCallback:ET,useContext:nr,useEffect:P0,useImperativeHandle:AT,useInsertionEffect:ST,useLayoutEffect:kT,useMemo:CT,useReducer:jf,useRef:bT,useState:function(){return jf(cc)},useDebugValue:O0,useDeferredValue:function(t){var e=rr();return It===null?e.memoizedState=t:NT(e,It.memoizedState,t)},useTransition:function(){var t=jf(cc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:pT,useSyncExternalStore:gT,useId:IT,unstable_isNewReconciler:!1};function pr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sm={isMounted:function(t){return(t=t._reactInternals)?ha(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cn(),s=li(t),i=gs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ai(t,i,s),e!==null&&(Sr(e,t,s,r),yd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cn(),s=li(t),i=gs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ai(t,i,s),e!==null&&(Sr(e,t,s,r),yd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cn(),r=li(t),s=gs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ai(t,s,r),e!==null&&(Sr(e,t,r,n),yd(e,t,r))}};function Bx(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!nc(n,r)||!nc(s,i):!0}function OT(t,e,n){var r=!1,s=mi,i=e.contextType;return typeof i=="object"&&i!==null?i=nr(i):(s=Tn(e)?sa:Qt.current,r=e.contextTypes,i=(r=r!=null)?lo(t,s):mi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sm.enqueueReplaceState(e,e.state,null)}function yg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},A0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nr(i):(i=Tn(e)?sa:Qt.current,s.context=lo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sm.enqueueReplaceState(s,s.state,null),th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",r=e;do n+=Yj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SO=typeof WeakMap=="function"?WeakMap:Map;function $T(t,e,n){n=gs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ah||(ah=!0,Cg=r),vg(t,e)},n}function DT(t,e,n){n=gs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vg(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Vx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MO.bind(null,t,e,n),e.then(t,t))}function Hx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gs(-1,1),e.tag=2,ai(n,e,1))),n.lanes|=1),t)}var kO=js.ReactCurrentOwner,_n=!1;function on(t,e,n,r){e.child=t===null?dT(e,null,n,r):uo(e,t.child,n,r)}function qx(t,e,n,r,s){n=n.render;var i=e.ref;return ro(e,s),r=R0(t,e,n,r,i,s),n=j0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(it&&n&&w0(e),e.flags|=1,on(t,e,r,s),e.child)}function Kx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!B0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,MT(t,e,i,r,s)):(t=Sd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:nc,n(a,r)&&t.ref===e.ref)return Ss(t,e,s)}return e.flags|=1,t=ci(i,r),t.ref=e.ref,t.return=e,e.child=t}function MT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(nc(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,Ss(t,e,s)}return wg(t,e,n,r,s)}function LT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Ba,Pn),Pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(Ba,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,et(Ba,Pn),Pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,et(Ba,Pn),Pn|=r;return on(t,e,s,n),e.child}function FT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,n,r,s){var i=Tn(n)?sa:Qt.current;return i=lo(e,i),ro(e,s),n=R0(t,e,n,r,i,s),r=j0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(it&&r&&w0(e),e.flags|=1,on(t,e,n,s),e.child)}function Zx(t,e,n,r,s){if(Tn(n)){var i=!0;Yd(e)}else i=!1;if(ro(e,s),e.stateNode===null)xd(t,e),OT(e,n,r),yg(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=nr(c):(c=Tn(n)?sa:Qt.current,c=lo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&Gx(e,a,r,c),Ws=!1;var m=e.memoizedState;a.state=m,th(e,r,a,s),l=e.memoizedState,o!==r||m!==l||kn.current||Ws?(typeof d=="function"&&(gg(e,n,d,r),l=e.memoizedState),(o=Ws||Bx(e,n,o,r,m,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,mT(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:pr(e.type,o),a.props=c,h=e.pendingProps,m=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=Tn(n)?sa:Qt.current,l=lo(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==l)&&Gx(e,a,r,l),Ws=!1,m=e.memoizedState,a.state=m,th(e,r,a,s);var y=e.memoizedState;o!==h||m!==y||kn.current||Ws?(typeof f=="function"&&(gg(e,n,f,r),y=e.memoizedState),(c=Ws||Bx(e,n,c,r,m,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return xg(t,e,n,r,i,s)}function xg(t,e,n,r,s,i){FT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ox(e,n,!1),Ss(t,e,i);r=e.stateNode,kO.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=uo(e,t.child,null,i),e.child=uo(e,null,o,i)):on(t,e,o,i),e.memoizedState=r.state,s&&Ox(e,n,!0),e.child}function UT(t){var e=t.stateNode;e.pendingContext?Px(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Px(t,e.context,!1),E0(t,e.containerInfo)}function Yx(t,e,n,r,s){return co(),_0(s),e.flags|=256,on(t,e,n,r),e.child}var _g={dehydrated:null,treeContext:null,retryLane:0};function bg(t){return{baseLanes:t,cachePool:null,transitions:null}}function zT(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),et(lt,s&1),t===null)return fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=om(a,r,0,null),t=Yi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bg(n),e.memoizedState=_g,t):$0(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return TO(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ci(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=ci(o,i):(i=Yi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?bg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=_g,r}return i=t.child,t=i.sibling,r=ci(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $0(t,e){return e=om({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ru(t,e,n,r){return r!==null&&_0(r),uo(e,t.child,null,n),t=$0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TO(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Pf(Error(H(422))),Ru(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=om({mode:"visible",children:r.children},s,0,null),i=Yi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&uo(e,t.child,null,a),e.child.memoizedState=bg(a),e.memoizedState=_g,i);if(!(e.mode&1))return Ru(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(H(419)),r=Pf(i,r,void 0),Ru(t,e,a,r)}if(o=(a&t.childLanes)!==0,_n||o){if(r=Lt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bs(t,s),Sr(r,t,s,-1))}return z0(),r=Pf(Error(H(421))),Ru(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,On=ii(s.nextSibling),Dn=e,it=!0,xr=null,t!==null&&(Zn[Yn++]=ms,Zn[Yn++]=fs,Zn[Yn++]=ia,ms=t.id,fs=t.overflow,ia=e),e=$0(e,r.children),e.flags|=4096,e)}function Jx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pg(t.return,e,n)}function Of(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(on(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jx(t,n,e);else if(t.tag===19)Jx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Of(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Of(e,!0,n,null,i);break;case"together":Of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AO(t,e,n){switch(e.tag){case 3:UT(e),co();break;case 5:fT(e);break;case 1:Tn(e.type)&&Yd(e);break;case 4:E0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;et(Qd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?zT(t,e,n):(et(lt,lt.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);et(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,LT(t,e,n)}return Ss(t,e,n)}var GT,Sg,VT,HT;GT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sg=function(){};VT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vi(Vr.current);var i=null;switch(n){case"input":s=Hp(t,s),r=Hp(t,r),i=[];break;case"select":s=dt({},s,{value:void 0}),r=dt({},r,{value:void 0}),i=[];break;case"textarea":s=Kp(t,s),r=Kp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kd)}Yp(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EO(t,e,n){var r=e.pendingProps;switch(x0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Tn(e.type)&&Zd(),Yt(e),null;case 3:return r=e.stateNode,ho(),rt(kn),rt(Qt),N0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(Rg(xr),xr=null))),Sg(t,e),Yt(e),null;case 5:C0(e);var s=Vi(oc.current);if(n=e.type,t!==null&&e.stateNode!=null)VT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Yt(e),null}if(t=Vi(Vr.current),Nu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Lr]=e,r[ic]=i,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)tt(ol[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":ax(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":lx(r,i),tt("invalid",r)}Yp(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,o,t),s=["children",""+o]):Zl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&tt("scroll",r)}switch(n){case"input":xu(r),ox(r,i,!0);break;case"textarea":xu(r),cx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Lr]=e,t[ic]=r,GT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jp(n,r),n){case"dialog":tt("cancel",t),tt("close",t),s=r;break;case"iframe":case"object":case"embed":tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)tt(ol[s],t);s=r;break;case"source":tt("error",t),s=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),s=r;break;case"details":tt("toggle",t),s=r;break;case"input":ax(t,r),s=Hp(t,r),tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dt({},r,{value:void 0}),tt("invalid",t);break;case"textarea":lx(t,r),s=Kp(t,r),tt("invalid",t);break;default:s=r}Yp(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?b1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&x1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yl(t,l):typeof l=="number"&&Yl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&tt("scroll",t):l!=null&&i0(t,i,l,a))}switch(n){case"input":xu(t),ox(t,r,!1);break;case"textarea":xu(t),cx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Qa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Qa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)HT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Vi(oc.current),Vi(Vr.current),Nu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lr]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:Cu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=e,e.stateNode=r}return Yt(e),null;case 13:if(rt(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&On!==null&&e.mode&1&&!(e.flags&128))cT(),co(),e.flags|=98560,i=!1;else if(i=Nu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Lr]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else xr!==null&&(Rg(xr),xr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Pt===0&&(Pt=3):z0())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return ho(),Sg(t,e),t===null&&rc(e.stateNode.containerInfo),Yt(e),null;case 10:return k0(e.type._context),Yt(e),null;case 17:return Tn(e.type)&&Zd(),Yt(e),null;case 19:if(rt(lt),i=e.memoizedState,i===null)return Yt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Zo(i,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=nh(t),a!==null){for(e.flags|=128,Zo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>fo&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304)}else{if(!r)if(t=nh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!it)return Yt(e),null}else 2*yt()-i.renderingStartTime>fo&&n!==1073741824&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=lt.current,et(lt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return U0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function CO(t,e){switch(x0(e),e.tag){case 1:return Tn(e.type)&&Zd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ho(),rt(kn),rt(Qt),N0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return C0(e),null;case 13:if(rt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(lt),null;case 4:return ho(),null;case 10:return k0(e.type._context),null;case 22:case 23:return U0(),null;case 24:return null;default:return null}}var ju=!1,Jt=!1,NO=typeof WeakSet=="function"?WeakSet:Set,ne=null;function za(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(t,e,r)}else n.current=null}function kg(t,e,n){try{n()}catch(r){pt(t,e,r)}}var Xx=!1;function IO(t,e){if(og=Hd,t=Y1(),v0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===t)break t;if(m===n&&++c===s&&(o=a),m===i&&++d===r&&(l=a),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lg={focusedElem:t,selectionRange:n},Hd=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:pr(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(_){pt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return y=Xx,Xx=!1,y}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kg(e,n,i)}s=s.next}while(s!==r)}}function im(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WT(t){var e=t.alternate;e!==null&&(t.alternate=null,WT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lr],delete e[ic],delete e[dg],delete e[hO],delete e[mO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qT(t){return t.tag===5||t.tag===3||t.tag===4}function Qx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kd));else if(r!==4&&(t=t.child,t!==null))for(Ag(t,e,n),t=t.sibling;t!==null;)Ag(t,e,n),t=t.sibling}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}var Bt=null,wr=!1;function Fs(t,e,n){for(n=n.child;n!==null;)KT(t,e,n),n=n.sibling}function KT(t,e,n){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(Jh,n)}catch{}switch(n.tag){case 5:Jt||za(n,e);case 6:var r=Bt,s=wr;Bt=null,Fs(t,e,n),Bt=r,wr=s,Bt!==null&&(wr?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(wr?(t=Bt,n=n.stateNode,t.nodeType===8?Ef(t.parentNode,n):t.nodeType===1&&Ef(t,n),ec(t)):Ef(Bt,n.stateNode));break;case 4:r=Bt,s=wr,Bt=n.stateNode.containerInfo,wr=!0,Fs(t,e,n),Bt=r,wr=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&kg(n,e,a),s=s.next}while(s!==r)}Fs(t,e,n);break;case 1:if(!Jt&&(za(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){pt(n,e,o)}Fs(t,e,n);break;case 21:Fs(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Fs(t,e,n),Jt=r):Fs(t,e,n);break;default:Fs(t,e,n)}}function e_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NO),e.forEach(function(r){var s=FO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Bt=o.stateNode,wr=!1;break e;case 3:Bt=o.stateNode.containerInfo,wr=!0;break e;case 4:Bt=o.stateNode.containerInfo,wr=!0;break e}o=o.return}if(Bt===null)throw Error(H(160));KT(i,a,s),Bt=null,wr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZT(e,t),e=e.sibling}function ZT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),Rr(t),r&4){try{Rl(3,t,t.return),im(3,t)}catch(w){pt(t,t.return,w)}try{Rl(5,t,t.return)}catch(w){pt(t,t.return,w)}}break;case 1:ir(e,t),Rr(t),r&512&&n!==null&&za(n,n.return);break;case 5:if(ir(e,t),Rr(t),r&512&&n!==null&&za(n,n.return),t.flags&32){var s=t.stateNode;try{Yl(s,"")}catch(w){pt(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&y1(s,i),Jp(o,a);var c=Jp(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?b1(s,h):d==="dangerouslySetInnerHTML"?x1(s,h):d==="children"?Yl(s,h):i0(s,d,h,c)}switch(o){case"input":Wp(s,i);break;case"textarea":v1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Qa(s,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Qa(s,!!i.multiple,i.defaultValue,!0):Qa(s,!!i.multiple,i.multiple?[]:"",!1))}s[ic]=i}catch(w){pt(t,t.return,w)}}break;case 6:if(ir(e,t),Rr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){pt(t,t.return,w)}}break;case 3:if(ir(e,t),Rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ec(e.containerInfo)}catch(w){pt(t,t.return,w)}break;case 4:ir(e,t),Rr(t);break;case 13:ir(e,t),Rr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(L0=yt())),r&4&&e_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(c=Jt)||d,ir(e,t),Jt=c):ir(e,t),Rr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ne=t,d=t.child;d!==null;){for(h=ne=d;ne!==null;){switch(m=ne,f=m.child,m.tag){case 0:case 11:case 14:case 15:Rl(4,m,m.return);break;case 1:za(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){pt(r,n,w)}}break;case 5:za(m,m.return);break;case 22:if(m.memoizedState!==null){n_(h);continue}}f!==null?(f.return=m,ne=f):n_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=_1("display",a))}catch(w){pt(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){pt(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ir(e,t),Rr(t),r&4&&e_(t);break;case 21:break;default:ir(e,t),Rr(t)}}function Rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qT(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yl(s,""),r.flags&=-33);var i=Qx(t);Eg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Qx(t);Ag(t,o,a);break;default:throw Error(H(161))}}catch(l){pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RO(t,e,n){ne=t,YT(t)}function YT(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ju;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Jt;o=ju;var c=Jt;if(ju=a,(Jt=l)&&!c)for(ne=s;ne!==null;)a=ne,l=a.child,a.tag===22&&a.memoizedState!==null?r_(s):l!==null?(l.return=a,ne=l):r_(s);for(;i!==null;)ne=i,YT(i),i=i.sibling;ne=s,ju=o,Jt=c}t_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):t_(t)}}function t_(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||im(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fx(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fx(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Jt||e.flags&512&&Tg(e)}catch(m){pt(e,e.return,m)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function n_(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function r_(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{im(4,e)}catch(l){pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pt(e,s,l)}}var i=e.return;try{Tg(e)}catch(l){pt(e,i,l)}break;case 5:var a=e.return;try{Tg(e)}catch(l){pt(e,a,l)}}}catch(l){pt(e,e.return,l)}if(e===t){ne=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ne=o;break}ne=e.return}}var jO=Math.ceil,ih=js.ReactCurrentDispatcher,D0=js.ReactCurrentOwner,er=js.ReactCurrentBatchConfig,Me=0,Lt=null,St=null,Wt=0,Pn=0,Ba=_i(0),Pt=0,dc=null,oa=0,am=0,M0=0,jl=null,vn=null,L0=0,fo=1/0,cs=null,ah=!1,Cg=null,oi=null,Pu=!1,Js=null,oh=0,Pl=0,Ng=null,_d=-1,bd=0;function cn(){return Me&6?yt():_d!==-1?_d:_d=yt()}function li(t){return t.mode&1?Me&2&&Wt!==0?Wt&-Wt:pO.transition!==null?(bd===0&&(bd=O1()),bd):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:z1(t.type)),t):1}function Sr(t,e,n,r){if(50<Pl)throw Pl=0,Ng=null,Error(H(185));Ic(t,n,r),(!(Me&2)||t!==Lt)&&(t===Lt&&(!(Me&2)&&(am|=n),Pt===4&&Zs(t,Wt)),An(t,r),n===1&&Me===0&&!(e.mode&1)&&(fo=yt()+500,nm&&bi()))}function An(t,e){var n=t.callbackNode;pP(t,e);var r=Vd(t,t===Lt?Wt:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?fO(s_.bind(null,t)):aT(s_.bind(null,t)),uO(function(){!(Me&6)&&bi()}),n=null;else{switch($1(r)){case 1:n=u0;break;case 4:n=j1;break;case 16:n=Gd;break;case 536870912:n=P1;break;default:n=Gd}n=sA(n,JT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JT(t,e){if(_d=-1,bd=0,Me&6)throw Error(H(327));var n=t.callbackNode;if(so()&&t.callbackNode!==n)return null;var r=Vd(t,t===Lt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lh(t,r);else{e=r;var s=Me;Me|=2;var i=QT();(Lt!==t||Wt!==e)&&(cs=null,fo=yt()+500,Zi(t,e));do try{$O();break}catch(o){XT(t,o)}while(!0);S0(),ih.current=i,Me=s,St!==null?e=0:(Lt=null,Wt=0,e=Pt)}if(e!==0){if(e===2&&(s=ng(t),s!==0&&(r=s,e=Ig(t,s))),e===1)throw n=dc,Zi(t,0),Zs(t,r),An(t,yt()),n;if(e===6)Zs(t,r);else{if(s=t.current.alternate,!(r&30)&&!PO(s)&&(e=lh(t,r),e===2&&(i=ng(t),i!==0&&(r=i,e=Ig(t,i))),e===1))throw n=dc,Zi(t,0),Zs(t,r),An(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:$i(t,vn,cs);break;case 3:if(Zs(t,r),(r&130023424)===r&&(e=L0+500-yt(),10<e)){if(Vd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ug($i.bind(null,t,vn,cs),e);break}$i(t,vn,cs);break;case 4:if(Zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-br(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jO(r/1960))-r,10<r){t.timeoutHandle=ug($i.bind(null,t,vn,cs),r);break}$i(t,vn,cs);break;case 5:$i(t,vn,cs);break;default:throw Error(H(329))}}}return An(t,yt()),t.callbackNode===n?JT.bind(null,t):null}function Ig(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(Zi(t,e).flags|=256),t=lh(t,e),t!==2&&(e=vn,vn=n,e!==null&&Rg(e)),t}function Rg(t){vn===null?vn=t:vn.push.apply(vn,t)}function PO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~M0,e&=~am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-br(e),r=1<<n;t[n]=-1,e&=~r}}function s_(t){if(Me&6)throw Error(H(327));so();var e=Vd(t,0);if(!(e&1))return An(t,yt()),null;var n=lh(t,e);if(t.tag!==0&&n===2){var r=ng(t);r!==0&&(e=r,n=Ig(t,r))}if(n===1)throw n=dc,Zi(t,0),Zs(t,e),An(t,yt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,vn,cs),An(t,yt()),null}function F0(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(fo=yt()+500,nm&&bi())}}function la(t){Js!==null&&Js.tag===0&&!(Me&6)&&so();var e=Me;Me|=1;var n=er.transition,r=Ye;try{if(er.transition=null,Ye=1,t)return t()}finally{Ye=r,er.transition=n,Me=e,!(Me&6)&&bi()}}function U0(){Pn=Ba.current,rt(Ba)}function Zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cO(n)),St!==null)for(n=St.return;n!==null;){var r=n;switch(x0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zd();break;case 3:ho(),rt(kn),rt(Qt),N0();break;case 5:C0(r);break;case 4:ho();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:k0(r.type._context);break;case 22:case 23:U0()}n=n.return}if(Lt=t,St=t=ci(t.current,null),Wt=Pn=e,Pt=0,dc=null,M0=am=oa=0,vn=jl=null,Gi!==null){for(e=0;e<Gi.length;e++)if(n=Gi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Gi=null}return t}function XT(t,e){do{var n=St;try{if(S0(),vd.current=sh,rh){for(var r=ut.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rh=!1}if(aa=0,Dt=It=ut=null,Il=!1,lc=0,D0.current=null,n===null||n.return===null){Pt=1,dc=e,St=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=Wt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Hx(a);if(f!==null){f.flags&=-257,Wx(f,a,o,i,e),f.mode&1&&Vx(i,c,e),e=f,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){Vx(i,c,e),z0();break e}l=Error(H(426))}}else if(it&&o.mode&1){var x=Hx(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Wx(x,a,o,i,e),_0(mo(l,o));break e}}i=l=mo(l,o),Pt!==4&&(Pt=2),jl===null?jl=[i]:jl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=$T(i,l,e);Lx(i,v);break e;case 1:o=l;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(oi===null||!oi.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=DT(i,o,e);Lx(i,_);break e}}i=i.return}while(i!==null)}tA(n)}catch(k){e=k,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function QT(){var t=ih.current;return ih.current=sh,t===null?sh:t}function z0(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Lt===null||!(oa&268435455)&&!(am&268435455)||Zs(Lt,Wt)}function lh(t,e){var n=Me;Me|=2;var r=QT();(Lt!==t||Wt!==e)&&(cs=null,Zi(t,e));do try{OO();break}catch(s){XT(t,s)}while(!0);if(S0(),Me=n,ih.current=r,St!==null)throw Error(H(261));return Lt=null,Wt=0,Pt}function OO(){for(;St!==null;)eA(St)}function $O(){for(;St!==null&&!aP();)eA(St)}function eA(t){var e=rA(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?tA(t):St=e,D0.current=null}function tA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CO(n,e),n!==null){n.flags&=32767,St=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,St=null;return}}else if(n=EO(n,e,Pn),n!==null){St=n;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Pt===0&&(Pt=5)}function $i(t,e,n){var r=Ye,s=er.transition;try{er.transition=null,Ye=1,DO(t,e,n,r)}finally{er.transition=s,Ye=r}return null}function DO(t,e,n,r){do so();while(Js!==null);if(Me&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gP(t,i),t===Lt&&(St=Lt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pu||(Pu=!0,sA(Gd,function(){return so(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=er.transition,er.transition=null;var a=Ye;Ye=1;var o=Me;Me|=4,D0.current=null,IO(t,n),ZT(n,t),nO(lg),Hd=!!og,lg=og=null,t.current=n,RO(n),oP(),Me=o,Ye=a,er.transition=i}else t.current=n;if(Pu&&(Pu=!1,Js=t,oh=s),i=t.pendingLanes,i===0&&(oi=null),uP(n.stateNode),An(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ah)throw ah=!1,t=Cg,Cg=null,t;return oh&1&&t.tag!==0&&so(),i=t.pendingLanes,i&1?t===Ng?Pl++:(Pl=0,Ng=t):Pl=0,bi(),null}function so(){if(Js!==null){var t=$1(oh),e=er.transition,n=Ye;try{if(er.transition=null,Ye=16>t?16:t,Js===null)var r=!1;else{if(t=Js,Js=null,oh=0,Me&6)throw Error(H(331));var s=Me;for(Me|=4,ne=t.current;ne!==null;){var i=ne,a=i.child;if(ne.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(ne=c;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:Rl(8,d,i)}var h=d.child;if(h!==null)h.return=d,ne=h;else for(;ne!==null;){d=ne;var m=d.sibling,f=d.return;if(WT(d),d===c){ne=null;break}if(m!==null){m.return=f,ne=m;break}ne=f}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}ne=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ne=a;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ne=v;break e}ne=i.return}}var p=t.current;for(ne=p;ne!==null;){a=ne;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,ne=g;else e:for(a=p;ne!==null;){if(o=ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:im(9,o)}}catch(k){pt(o,o.return,k)}if(o===a){ne=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,ne=_;break e}ne=o.return}}if(Me=s,bi(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(Jh,t)}catch{}r=!0}return r}finally{Ye=n,er.transition=e}}return!1}function i_(t,e,n){e=mo(n,e),e=$T(t,e,1),t=ai(t,e,1),e=cn(),t!==null&&(Ic(t,1,e),An(t,e))}function pt(t,e,n){if(t.tag===3)i_(t,t,n);else for(;e!==null;){if(e.tag===3){i_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=mo(n,t),t=DT(e,t,1),e=ai(e,t,1),t=cn(),e!==null&&(Ic(e,1,t),An(e,t));break}}e=e.return}}function MO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=cn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Wt&n)===n&&(Pt===4||Pt===3&&(Wt&130023424)===Wt&&500>yt()-L0?Zi(t,0):M0|=n),An(t,e)}function nA(t,e){e===0&&(t.mode&1?(e=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):e=1);var n=cn();t=bs(t,e),t!==null&&(Ic(t,e,n),An(t,n))}function LO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nA(t,n)}function FO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),nA(t,n)}var rA;rA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,AO(t,e,n);_n=!!(t.flags&131072)}else _n=!1,it&&e.flags&1048576&&oT(e,Xd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xd(t,e),t=e.pendingProps;var s=lo(e,Qt.current);ro(e,n),s=R0(null,e,r,t,s,n);var i=j0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(r)?(i=!0,Yd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,A0(e),s.updater=sm,e.stateNode=s,s._reactInternals=e,yg(e,r,t,n),e=xg(null,e,r,!0,i,n)):(e.tag=0,it&&i&&w0(e),on(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zO(r),t=pr(r,t),s){case 0:e=wg(null,e,r,t,n);break e;case 1:e=Zx(null,e,r,t,n);break e;case 11:e=qx(null,e,r,t,n);break e;case 14:e=Kx(null,e,r,pr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),wg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),Zx(t,e,r,s,n);case 3:e:{if(UT(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mT(t,e),th(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mo(Error(H(423)),e),e=Yx(t,e,r,n,s);break e}else if(r!==s){s=mo(Error(H(424)),e),e=Yx(t,e,r,n,s);break e}else for(On=ii(e.stateNode.containerInfo.firstChild),Dn=e,it=!0,xr=null,n=dT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===s){e=Ss(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return fT(e),t===null&&fg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,cg(r,s)?a=null:i!==null&&cg(r,i)&&(e.flags|=32),FT(t,e),on(t,e,a,n),e.child;case 6:return t===null&&fg(e),null;case 13:return zT(t,e,n);case 4:return E0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uo(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),qx(t,e,r,s,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,et(Qd,r._currentValue),r._currentValue=a,i!==null)if(kr(i.value,a)){if(i.children===s.children&&!kn.current){e=Ss(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=gs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),pg(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),pg(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}on(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ro(e,n),s=nr(s),r=r(s),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,s=pr(r,e.pendingProps),s=pr(r.type,s),Kx(t,e,r,s,n);case 15:return MT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),xd(t,e),e.tag=1,Tn(r)?(t=!0,Yd(e)):t=!1,ro(e,n),OT(e,r,s),yg(e,r,s,n),xg(null,e,r,!0,t,n);case 19:return BT(t,e,n);case 22:return LT(t,e,n)}throw Error(H(156,e.tag))};function sA(t,e){return R1(t,e)}function UO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,n,r){return new UO(t,e,n,r)}function B0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zO(t){if(typeof t=="function")return B0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===o0)return 11;if(t===l0)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=Jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sd(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")B0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ja:return Yi(n.children,s,i,e);case a0:a=8,s|=8;break;case zp:return t=Jn(12,n,e,s|2),t.elementType=zp,t.lanes=i,t;case Bp:return t=Jn(13,n,e,s),t.elementType=Bp,t.lanes=i,t;case Gp:return t=Jn(19,n,e,s),t.elementType=Gp,t.lanes=i,t;case f1:return om(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h1:a=10;break e;case m1:a=9;break e;case o0:a=11;break e;case l0:a=14;break e;case Hs:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Jn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yi(t,e,n,r){return t=Jn(7,t,r,e),t.lanes=n,t}function om(t,e,n,r){return t=Jn(22,t,r,e),t.elementType=f1,t.lanes=n,t.stateNode={isHidden:!1},t}function $f(t,e,n){return t=Jn(6,t,null,e),t.lanes=n,t}function Df(t,e,n){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gf(0),this.expirationTimes=gf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function G0(t,e,n,r,s,i,a,o,l){return t=new BO(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},A0(i),t}function GO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iA(t){if(!t)return mi;t=t._reactInternals;e:{if(ha(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Tn(n))return iT(t,n,e)}return e}function aA(t,e,n,r,s,i,a,o,l){return t=G0(n,r,!0,t,s,i,a,o,l),t.context=iA(null),n=t.current,r=cn(),s=li(n),i=gs(r,s),i.callback=e??null,ai(n,i,s),t.current.lanes=s,Ic(t,s,r),An(t,r),t}function lm(t,e,n,r){var s=e.current,i=cn(),a=li(s);return n=iA(n),e.context===null?e.context=n:e.pendingContext=n,e=gs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ai(s,e,a),t!==null&&(Sr(t,s,a,i),yd(t,s,a)),a}function ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function V0(t,e){a_(t,e),(t=t.alternate)&&a_(t,e)}function VO(){return null}var oA=typeof reportError=="function"?reportError:function(t){console.error(t)};function H0(t){this._internalRoot=t}cm.prototype.render=H0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));lm(t,e,null,null)};cm.prototype.unmount=H0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;la(function(){lm(null,t,null,null)}),e[_s]=null}};function cm(t){this._internalRoot=t}cm.prototype.unstable_scheduleHydration=function(t){if(t){var e=L1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ks.length&&e!==0&&e<Ks[n].priority;n++);Ks.splice(n,0,t),n===0&&U1(t)}};function W0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o_(){}function HO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ch(a);i.call(c)}}var a=aA(e,r,t,0,null,!1,!1,"",o_);return t._reactRootContainer=a,t[_s]=a.current,rc(t.nodeType===8?t.parentNode:t),la(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=ch(l);o.call(c)}}var l=G0(t,0,!1,null,null,!1,!1,"",o_);return t._reactRootContainer=l,t[_s]=l.current,rc(t.nodeType===8?t.parentNode:t),la(function(){lm(e,l,n,r)}),l}function dm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=ch(a);o.call(l)}}lm(e,a,t,s)}else a=HO(n,e,t,s,r);return ch(a)}D1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=al(e.pendingLanes);n!==0&&(d0(e,n|1),An(e,yt()),!(Me&6)&&(fo=yt()+500,bi()))}break;case 13:la(function(){var r=bs(t,1);if(r!==null){var s=cn();Sr(r,t,1,s)}}),V0(t,1)}};h0=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=cn();Sr(e,t,134217728,n)}V0(t,134217728)}};M1=function(t){if(t.tag===13){var e=li(t),n=bs(t,e);if(n!==null){var r=cn();Sr(n,t,e,r)}V0(t,e)}};L1=function(){return Ye};F1=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};Qp=function(t,e,n){switch(e){case"input":if(Wp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tm(r);if(!s)throw Error(H(90));g1(r),Wp(r,s)}}}break;case"textarea":v1(t,n);break;case"select":e=n.value,e!=null&&Qa(t,!!n.multiple,e,!1)}};T1=F0;A1=la;var WO={usingClientEntryPoint:!1,Events:[jc,Da,tm,S1,k1,F0]},Yo={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qO={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N1(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||VO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{Jh=Ou.inject(qO),Gr=Ou}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WO;Bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!W0(e))throw Error(H(200));return GO(t,e,null,n)};Bn.createRoot=function(t,e){if(!W0(t))throw Error(H(299));var n=!1,r="",s=oA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=G0(t,1,!1,null,null,n,!1,r,s),t[_s]=e.current,rc(t.nodeType===8?t.parentNode:t),new H0(e)};Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=N1(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t){return la(t)};Bn.hydrate=function(t,e,n){if(!um(e))throw Error(H(200));return dm(null,t,e,!0,n)};Bn.hydrateRoot=function(t,e,n){if(!W0(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=oA;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=aA(e,null,t,1,n??null,s,!1,i,a),t[_s]=e.current,rc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cm(e)};Bn.render=function(t,e,n){if(!um(e))throw Error(H(200));return dm(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!um(t))throw Error(H(40));return t._reactRootContainer?(la(function(){dm(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};Bn.unstable_batchedUpdates=F0;Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!um(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return dm(t,e,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function lA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lA)}catch(t){console.error(t)}}lA(),l1.exports=Bn;var KO=l1.exports,cA,l_=KO;cA=l_.createRoot,l_.hydrateRoot;const uA=P.createContext({});function ZO(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const q0=typeof window<"u",YO=q0?P.useLayoutEffect:P.useEffect,K0=P.createContext(null);function Z0(t,e){t.indexOf(e)===-1&&t.push(e)}function Y0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ks=(t,e,n)=>n>e?e:n<t?t:n;let uh=()=>{};const Ts={},dA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hA(t){return typeof t=="object"&&t!==null}const mA=t=>/^0[^.\s]+$/u.test(t);function J0(t){let e;return()=>(e===void 0&&(e=t()),e)}const tr=t=>t,JO=(t,e)=>n=>e(t(n)),Oc=(...t)=>t.reduce(JO),hc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class X0{constructor(){this.subscriptions=[]}add(e){return Z0(this.subscriptions,e),()=>Y0(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hr=t=>t*1e3,Xn=t=>t/1e3;function fA(t,e){return e?t*(1e3/e):0}const pA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XO=1e-7,QO=12;function e2(t,e,n,r,s){let i,a,o=0;do a=e+(n-e)/2,i=pA(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>XO&&++o<QO);return a}function $c(t,e,n,r){if(t===e&&n===r)return tr;const s=i=>e2(i,0,1,t,n);return i=>i===0||i===1?i:pA(s(i),e,r)}const gA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,yA=t=>e=>1-t(1-e),vA=$c(.33,1.53,.69,.99),Q0=yA(vA),wA=gA(Q0),xA=t=>(t*=2)<1?.5*Q0(t):.5*(2-Math.pow(2,-10*(t-1))),ev=t=>1-Math.sin(Math.acos(t)),_A=yA(ev),bA=gA(ev),t2=$c(.42,0,1,1),n2=$c(0,0,.58,1),SA=$c(.42,0,.58,1),r2=t=>Array.isArray(t)&&typeof t[0]!="number",kA=t=>Array.isArray(t)&&typeof t[0]=="number",c_={linear:tr,easeIn:t2,easeInOut:SA,easeOut:n2,circIn:ev,circInOut:bA,circOut:_A,backIn:Q0,backInOut:wA,backOut:vA,anticipate:xA},s2=t=>typeof t=="string",u_=t=>{if(kA(t)){uh(t.length===4);const[e,n,r,s]=t;return $c(e,n,r,s)}else if(s2(t))return uh(c_[t]!==void 0),c_[t];return t},$u=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],d_={value:null,addProjectionMetrics:null};function i2(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){a.has(h)&&(d.schedule(h),t()),l++,h(o)}const d={schedule:(h,m=!1,f=!1)=>{const w=f&&s?n:r;return m&&a.add(h),w.has(h)||w.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),e&&d_.value&&d_.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const a2=40;function TA(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=$u.reduce((g,_)=>(g[_]=i2(i,e?_:void 0),g),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:m,render:f,postRender:y}=a,w=()=>{const g=Ts.useManualTiming?s.timestamp:performance.now();n=!1,Ts.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(g-s.timestamp,a2),1)),s.timestamp=g,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),h.process(s),m.process(s),f.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(w))},x=()=>{n=!0,r=!0,s.isProcessing||t(w)};return{schedule:$u.reduce((g,_)=>{const k=a[_];return g[_]=(E,C=!1,b=!1)=>(n||x(),k.schedule(E,C,b)),g},{}),cancel:g=>{for(let _=0;_<$u.length;_++)a[$u[_]].cancel(g)},state:s,steps:a}}const{schedule:at,cancel:fi,state:Gt,steps:Mf}=TA(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0);let kd;function o2(){kd=void 0}const bn={now:()=>(kd===void 0&&bn.set(Gt.isProcessing||Ts.useManualTiming?Gt.timestamp:performance.now()),kd),set:t=>{kd=t,queueMicrotask(o2)}},AA=t=>e=>typeof e=="string"&&e.startsWith(t),EA=AA("--"),l2=AA("var(--"),tv=t=>l2(t)?c2.test(t.split("/*")[0].trim()):!1,c2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mc={...Ro,transform:t=>ks(0,1,t)},Du={...Ro,default:1},Ol=t=>Math.round(t*1e5)/1e5,nv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function u2(t){return t==null}const d2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rv=(t,e)=>n=>!!(typeof n=="string"&&d2.test(n)&&n.startsWith(t)||e&&!u2(n)&&Object.prototype.hasOwnProperty.call(n,e)),CA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,o]=r.match(nv);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},h2=t=>ks(0,255,t),Lf={...Ro,transform:t=>Math.round(h2(t))},Hi={test:rv("rgb","red"),parse:CA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Lf.transform(t)+", "+Lf.transform(e)+", "+Lf.transform(n)+", "+Ol(mc.transform(r))+")"};function m2(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const jg={test:rv("#"),parse:m2,transform:Hi.transform},Dc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vs=Dc("deg"),Wr=Dc("%"),xe=Dc("px"),f2=Dc("vh"),p2=Dc("vw"),h_={...Wr,parse:t=>Wr.parse(t)/100,transform:t=>Wr.transform(t*100)},Ga={test:rv("hsl","hue"),parse:CA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wr.transform(Ol(e))+", "+Wr.transform(Ol(n))+", "+Ol(mc.transform(r))+")"},_t={test:t=>Hi.test(t)||jg.test(t)||Ga.test(t),parse:t=>Hi.test(t)?Hi.parse(t):Ga.test(t)?Ga.parse(t):jg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hi.transform(t):Ga.transform(t),getAnimatableNone:t=>{const e=_t.parse(t);return e.alpha=0,_t.transform(e)}},g2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function y2(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(nv))==null?void 0:e.length)||0)+(((n=t.match(g2))==null?void 0:n.length)||0)>0}const NA="number",IA="color",v2="var",w2="var(",m_="${}",x2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(x2,l=>(_t.test(l)?(r.color.push(i),s.push(IA),n.push(_t.parse(l))):l.startsWith(w2)?(r.var.push(i),s.push(v2),n.push(l)):(r.number.push(i),s.push(NA),n.push(parseFloat(l))),++i,m_)).split(m_);return{values:n,split:o,indexes:r,types:s}}function RA(t){return fc(t).values}function jA(t){const{split:e,types:n}=fc(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const o=n[a];o===NA?i+=Ol(s[a]):o===IA?i+=_t.transform(s[a]):i+=s[a]}return i}}const _2=t=>typeof t=="number"?0:_t.test(t)?_t.getAnimatableNone(t):t;function b2(t){const e=RA(t);return jA(t)(e.map(_2))}const pi={test:y2,parse:RA,createTransformer:jA,getAnimatableNone:b2};function Ff(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function S2({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;s=Ff(l,o,t+1/3),i=Ff(l,o,t),a=Ff(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function dh(t,e){return n=>n>0?e:t}const ct=(t,e,n)=>t+(e-t)*n,Uf=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},k2=[jg,Hi,Ga],T2=t=>k2.find(e=>e.test(t));function f_(t){const e=T2(t);if(!e)return!1;let n=e.parse(t);return e===Ga&&(n=S2(n)),n}const p_=(t,e)=>{const n=f_(t),r=f_(e);if(!n||!r)return dh(t,e);const s={...n};return i=>(s.red=Uf(n.red,r.red,i),s.green=Uf(n.green,r.green,i),s.blue=Uf(n.blue,r.blue,i),s.alpha=ct(n.alpha,r.alpha,i),Hi.transform(s))},Pg=new Set(["none","hidden"]);function A2(t,e){return Pg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E2(t,e){return n=>ct(t,e,n)}function sv(t){return typeof t=="number"?E2:typeof t=="string"?tv(t)?dh:_t.test(t)?p_:I2:Array.isArray(t)?PA:typeof t=="object"?_t.test(t)?p_:C2:dh}function PA(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>sv(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function C2(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=sv(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function N2(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],o=t.values[a]??0;n[s]=o,r[i]++}return n}const I2=(t,e)=>{const n=pi.createTransformer(e),r=fc(t),s=fc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Pg.has(t)&&!s.values.length||Pg.has(e)&&!r.values.length?A2(t,e):Oc(PA(N2(r,s),s.values),n):dh(t,e)};function OA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ct(t,e,n):sv(t)(t,e)}const R2=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>at.update(e,n),stop:()=>fi(e),now:()=>Gt.isProcessing?Gt.timestamp:bn.now()}},$A=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},hh=2e4;function iv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<hh;)e+=n,r=t.next(e);return e>=hh?1/0:e}function j2(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(iv(r),hh);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Xn(s)}}const P2=5;function DA(t,e,n){const r=Math.max(e-P2,0);return fA(n-t(r),e-r)}const ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zf=.001;function O2({duration:t=ht.duration,bounce:e=ht.bounce,velocity:n=ht.velocity,mass:r=ht.mass}){let s,i,a=1-e;a=ks(ht.minDamping,ht.maxDamping,a),t=ks(ht.minDuration,ht.maxDuration,Xn(t)),a<1?(s=c=>{const d=c*a,h=d*t,m=d-n,f=Og(c,a),y=Math.exp(-h);return zf-m/f*y},i=c=>{const h=c*a*t,m=h*n+n,f=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-h),w=Og(Math.pow(c,2),a);return(-s(c)+zf>0?-1:1)*((m-f)*y)/w}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-zf+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const o=5/t,l=D2(s,i,o);if(t=Hr(t),isNaN(l))return{stiffness:ht.stiffness,damping:ht.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const $2=12;function D2(t,e,n){let r=n;for(let s=1;s<$2;s++)r=r-t(r)/e(r);return r}function Og(t,e){return t*Math.sqrt(1-e*e)}const M2=["duration","bounce"],L2=["stiffness","damping","mass"];function g_(t,e){return e.some(n=>t[n]!==void 0)}function F2(t){let e={velocity:ht.velocity,stiffness:ht.stiffness,damping:ht.damping,mass:ht.mass,isResolvedFromDuration:!1,...t};if(!g_(t,L2)&&g_(t,M2))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ks(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ht.mass,stiffness:s,damping:i}}else{const n=O2(t);e={...e,...n,mass:ht.mass},e.isResolvedFromDuration=!0}return e}function mh(t=ht.visualDuration,e=ht.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:f}=F2({...n,velocity:-Xn(n.velocity||0)}),y=m||0,w=c/(2*Math.sqrt(l*d)),x=a-i,v=Xn(Math.sqrt(l/d)),p=Math.abs(x)<5;r||(r=p?ht.restSpeed.granular:ht.restSpeed.default),s||(s=p?ht.restDelta.granular:ht.restDelta.default);let g;if(w<1){const k=Og(v,w);g=E=>{const C=Math.exp(-w*v*E);return a-C*((y+w*v*x)/k*Math.sin(k*E)+x*Math.cos(k*E))}}else if(w===1)g=k=>a-Math.exp(-v*k)*(x+(y+v*x)*k);else{const k=v*Math.sqrt(w*w-1);g=E=>{const C=Math.exp(-w*v*E),b=Math.min(k*E,300);return a-C*((y+w*v*x)*Math.sinh(b)+k*x*Math.cosh(b))/k}}const _={calculatedDuration:f&&h||null,next:k=>{const E=g(k);if(f)o.done=k>=h;else{let C=k===0?y:0;w<1&&(C=k===0?Hr(y):DA(g,k,E));const b=Math.abs(C)<=r,O=Math.abs(a-E)<=s;o.done=b&&O}return o.value=o.done?a:E,o},toString:()=>{const k=Math.min(iv(_),hh),E=$A(C=>_.next(k*C).value,k,30);return k+"ms "+E},toTransition:()=>{}};return _}mh.applyToOptions=t=>{const e=j2(t,100,mh);return t.ease=e.ease,t.duration=Hr(e.duration),t.type="keyframes",t};function $g({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},f=b=>o!==void 0&&b<o||l!==void 0&&b>l,y=b=>o===void 0?l:l===void 0||Math.abs(o-b)<Math.abs(l-b)?o:l;let w=n*e;const x=h+w,v=a===void 0?x:a(x);v!==x&&(w=v-h);const p=b=>-w*Math.exp(-b/r),g=b=>v+p(b),_=b=>{const O=p(b),$=g(b);m.done=Math.abs(O)<=c,m.value=m.done?v:$};let k,E;const C=b=>{f(m.value)&&(k=b,E=mh({keyframes:[m.value,y(m.value)],velocity:DA(g,b,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return C(0),{calculatedDuration:null,next:b=>{let O=!1;return!E&&k===void 0&&(O=!0,_(b),C(b)),k!==void 0&&b>=k?E.next(b-k):(!O&&_(b),m)}}}function U2(t,e,n){const r=[],s=n||Ts.mix||OA,i=t.length-1;for(let a=0;a<i;a++){let o=s(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||tr:e;o=Oc(l,o)}r.push(o)}return r}function z2(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(uh(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=U2(e,r,s),l=o.length,c=d=>{if(a&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const m=hc(t[h],t[h+1],d);return o[h](m)};return n?d=>c(ks(t[0],t[i-1],d)):c}function B2(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=hc(0,e,r);t.push(ct(n,1,s))}}function G2(t){const e=[0];return B2(e,t.length-1),e}function V2(t,e){return t.map(n=>n*e)}function H2(t,e){return t.map(()=>e||SA).splice(0,t.length-1)}function $l({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=r2(r)?r.map(u_):u_(r),i={done:!1,value:e[0]},a=V2(n&&n.length===e.length?n:G2(e),t),o=z2(a,e,{ease:Array.isArray(s)?s:H2(e,s)});return{calculatedDuration:t,next:l=>(i.value=o(l),i.done=l>=t,i)}}const W2=t=>t!==null;function av(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(W2),o=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const q2={decay:$g,inertia:$g,tween:$l,keyframes:$l,spring:mh};function MA(t){typeof t.type=="string"&&(t.type=q2[t.type])}class ov{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const K2=t=>t/100;class lv extends ov{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==bn.now()&&this.tick(bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MA(e);const{type:n=$l,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const l=n||$l;l!==$l&&typeof o[0]!="number"&&(this.mixKeyframes=Oc(K2,OA(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=iv(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:f,type:y,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),p=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let g=this.currentTime,_=r;if(h){const b=Math.min(this.currentTime,s)/o;let O=Math.floor(b),$=b%1;!$&&b>=1&&($=1),$===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(m==="reverse"?($=1-$,f&&($-=f/o)):m==="mirror"&&(_=a)),g=ks(0,1,$)*o}const k=p?{done:!1,value:d[0]}:_.next(g);i&&(k.value=i(k.value));let{done:E}=k;!p&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return C&&y!==$g&&(k.value=av(d,this.options,x,this.speed)),w&&w(k.value),C&&this.finish(),k}then(e,n){return this.finished.then(e,n)}get duration(){return Xn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xn(e)}get time(){return Xn(this.currentTime)}set time(e){var n;e=Hr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Xn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=R2,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Z2(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Wi=t=>t*180/Math.PI,Dg=t=>{const e=Wi(Math.atan2(t[1],t[0]));return Mg(e)},Y2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Dg,rotateZ:Dg,skewX:t=>Wi(Math.atan(t[1])),skewY:t=>Wi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Mg=t=>(t=t%360,t<0&&(t+=360),t),y_=Dg,v_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),w_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),J2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:v_,scaleY:w_,scale:t=>(v_(t)+w_(t))/2,rotateX:t=>Mg(Wi(Math.atan2(t[6],t[5]))),rotateY:t=>Mg(Wi(Math.atan2(-t[2],t[0]))),rotateZ:y_,rotate:y_,skewX:t=>Wi(Math.atan(t[4])),skewY:t=>Wi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Lg(t){return t.includes("scale")?1:0}function Fg(t,e){if(!t||t==="none")return Lg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=J2,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Y2,s=o}if(!s)return Lg(e);const i=r[e],a=s[1].split(",").map(Q2);return typeof i=="function"?i(a):a[i]}const X2=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Fg(n,e)};function Q2(t){return parseFloat(t.trim())}const jo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Po=new Set(jo),x_=t=>t===Ro||t===xe,e$=new Set(["x","y","z"]),t$=jo.filter(t=>!e$.has(t));function n$(t){const e=[];return t$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ji={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Fg(e,"x"),y:(t,{transform:e})=>Fg(e,"y")};Ji.translateX=Ji.x;Ji.translateY=Ji.y;const Xi=new Set;let Ug=!1,zg=!1,Bg=!1;function LA(){if(zg){const t=Array.from(Xi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=n$(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var o;(o=r.getValue(i))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}zg=!1,Ug=!1,Xi.forEach(t=>t.complete(Bg)),Xi.clear()}function FA(){Xi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(zg=!0)})}function r$(){Bg=!0,FA(),LA(),Bg=!1}class cv{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Xi.add(this),Ug||(Ug=!0,at.read(FA),at.resolveKeyframes(LA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}Z2(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xi.delete(this)}cancel(){this.state==="scheduled"&&(Xi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s$=t=>t.startsWith("--");function i$(t,e,n){s$(e)?t.style.setProperty(e,n):t.style[e]=n}const a$=J0(()=>window.ScrollTimeline!==void 0),o$={};function l$(t,e){const n=J0(t);return()=>o$[e]??n()}const UA=l$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ll=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,__={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ll([0,.65,.55,1]),circOut:ll([.55,0,1,.45]),backIn:ll([.31,.01,.66,-.59]),backOut:ll([.33,1.53,.69,.99])};function zA(t,e){if(t)return typeof t=="function"?UA()?$A(t,e):"ease-out":kA(t)?ll(t):Array.isArray(t)?t.map(n=>zA(n,e)||__.easeOut):__[t]}function c$(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const h=zA(o,s);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(d,m)}function BA(t){return typeof t=="function"&&"applyToOptions"in t}function u$({type:t,...e}){return BA(t)&&UA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class d$ extends ov{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,uh(typeof e.type!="string");const c=u$(e);this.animation=c$(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=av(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):i$(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Xn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Xn(e)}get time(){return Xn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Hr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&a$()?(this.animation.timeline=e,tr):n(this)}}const GA={anticipate:xA,backInOut:wA,circInOut:bA};function h$(t){return t in GA}function m$(t){typeof t.ease=="string"&&h$(t.ease)&&(t.ease=GA[t.ease])}const b_=10;class f$ extends d${constructor(e){m$(e),MA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new lv({...a,autoplay:!1}),l=Hr(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-b_).value,o.sample(l).value,b_),o.stop()}}const S_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pi.test(t)||t==="0")&&!t.startsWith("url("));function p$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function g$(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=S_(s,e),o=S_(i,e);return!a||!o?!1:p$(t)||(n==="spring"||BA(n))&&r}function Gg(t){t.duration=0,t.type="keyframes"}const y$=new Set(["opacity","clipPath","filter","transform"]),v$=J0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function w$(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return v$()&&n&&y$.has(n)&&(n!=="transform"||!c)&&!l&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const x$=40;class _$ extends ov{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){var y;super(),this.stop=()=>{var w,x;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=bn.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:d,...h},f=(d==null?void 0:d.KeyframeResolver)||cv;this.keyframeResolver=new f(o,(w,x,v)=>this.onKeyframesResolved(w,x,m,!v),l,c,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=bn.now(),g$(e,i,a,o)||((Ts.instantAnimations||!l)&&(d==null||d(av(e,r,n))),e[0]=e[e.length-1],Gg(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>x$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&w$(m)?new f$({...m,element:m.motionValue.owner.current}):new lv(m);f.finished.then(()=>this.notifyFinished()).catch(tr),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),r$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const b$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S$(t){const e=b$.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function VA(t,e,n=1){const[r,s]=S$(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return dA(a)?parseFloat(a):a}return tv(s)?VA(s,e,n+1):s}function uv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const HA=new Set(["width","height","top","left","right","bottom",...jo]),k$={test:t=>t==="auto",parse:t=>t},WA=t=>e=>e.test(t),qA=[Ro,xe,Wr,Vs,p2,f2,k$],k_=t=>qA.find(WA(t));function T$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mA(t):!0}const A$=new Set(["brightness","contrast","saturate","opacity"]);function E$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(nv)||[];if(!r)return t;const s=n.replace(r,"");let i=A$.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const C$=/\b([a-z-]*)\(.*?\)/gu,Vg={...pi,getAnimatableNone:t=>{const e=t.match(C$);return e?e.map(E$).join(" "):t}},T_={...Ro,transform:Math.round},N$={rotate:Vs,rotateX:Vs,rotateY:Vs,rotateZ:Vs,scale:Du,scaleX:Du,scaleY:Du,scaleZ:Du,skew:Vs,skewX:Vs,skewY:Vs,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:mc,originX:h_,originY:h_,originZ:xe},dv={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe,...N$,zIndex:T_,fillOpacity:mc,strokeOpacity:mc,numOctaves:T_},I$={...dv,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:Vg,WebkitFilter:Vg},KA=t=>I$[t];function ZA(t,e){let n=KA(t);return n!==Vg&&(n=pi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const R$=new Set(["auto","none","0"]);function j$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!R$.has(i)&&fc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=ZA(n,s)}class P$ extends cv{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),tv(c))){const d=VA(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!HA.has(r)||e.length!==2)return;const[s,i]=e,a=k_(s),o=k_(i);if(a!==o)if(x_(a)&&x_(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Ji[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||T$(e[s]))&&r.push(s);r.length&&j$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ji[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Ji[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function O$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const YA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function $$(t){return hA(t)&&"offsetHeight"in t}const A_=30,D$=t=>!isNaN(parseFloat(t));class M${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=bn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=D$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new X0);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>A_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,A_);return fA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function po(t,e){return new M$(t,e)}const{schedule:hv,cancel:a7}=TA(queueMicrotask,!1),mr={x:!1,y:!1};function JA(){return mr.x||mr.y}function L$(t){return t==="x"||t==="y"?mr[t]?null:(mr[t]=!0,()=>{mr[t]=!1}):mr.x||mr.y?null:(mr.x=mr.y=!0,()=>{mr.x=mr.y=!1})}function XA(t,e){const n=O$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function E_(t){return!(t.pointerType==="touch"||JA())}function F$(t,e,n={}){const[r,s,i]=XA(t,n),a=o=>{if(!E_(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const d=h=>{E_(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(o=>{o.addEventListener("pointerenter",a,s)}),i}const QA=(t,e)=>e?t===e?!0:QA(t,e.parentElement):!1,mv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,U$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function z$(t){return U$.has(t.tagName)||t.tabIndex!==-1}const Td=new WeakSet;function C_(t){return e=>{e.key==="Enter"&&t(e)}}function Bf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const B$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=C_(()=>{if(Td.has(n))return;Bf(n,"down");const s=C_(()=>{Bf(n,"up")}),i=()=>Bf(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function N_(t){return mv(t)&&!JA()}function G$(t,e,n={}){const[r,s,i]=XA(t,n),a=o=>{const l=o.currentTarget;if(!N_(o))return;Td.add(l);const c=e(l,o),d=(f,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),Td.has(l)&&Td.delete(l),N_(f)&&typeof c=="function"&&c(f,{success:y})},h=f=>{d(f,l===window||l===document||n.useGlobalTarget||QA(l,f.target))},m=f=>{d(f,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),$$(o)&&(o.addEventListener("focus",c=>B$(c,s)),!z$(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function eE(t){return hA(t)&&"ownerSVGElement"in t}function V$(t){return eE(t)&&t.tagName==="svg"}const Xt=t=>!!(t&&t.getVelocity),H$=[...qA,_t,pi],W$=t=>H$.find(WA(t)),tE=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function q$(t=!0){const e=P.useContext(K0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=P.useId();P.useEffect(()=>{if(t)return s(i)},[t]);const a=P.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const nE=P.createContext({strict:!1}),I_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},go={};for(const t in I_)go[t]={isEnabled:e=>I_[t].some(n=>!!e[n])};function K$(t){for(const e in t)go[e]={...go[e],...t[e]}}const Z$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z$.has(t)}let rE=t=>!fh(t);function Y$(t){typeof t=="function"&&(rE=e=>e.startsWith("on")?!fh(e):t(e))}try{Y$(require("@emotion/is-prop-valid").default)}catch{}function J$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(rE(s)||n===!0&&fh(s)||!e&&!fh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const hm=P.createContext({});function mm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function pc(t){return typeof t=="string"||Array.isArray(t)}const fv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pv=["initial",...fv];function fm(t){return mm(t.animate)||pv.some(e=>pc(t[e]))}function sE(t){return!!(fm(t)||t.variants)}function X$(t,e){if(fm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||pc(n)?n:void 0,animate:pc(r)?r:void 0}}return t.inherit!==!1?e:{}}function Q$(t){const{initial:e,animate:n}=X$(t,P.useContext(hm));return P.useMemo(()=>({initial:e,animate:n}),[R_(e),R_(n)])}function R_(t){return Array.isArray(t)?t.join(" "):t}function j_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Jo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(xe.test(t))t=parseFloat(t);else return t;const n=j_(t,e.target.x),r=j_(t,e.target.y);return`${n}% ${r}%`}},eD={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=pi.parse(t);if(s.length>5)return r;const i=pi.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=ct(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}},Hg={borderRadius:{...Jo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jo,borderTopRightRadius:Jo,borderBottomLeftRadius:Jo,borderBottomRightRadius:Jo,boxShadow:eD};function iE(t,{layout:e,layoutId:n}){return Po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hg[t]||t==="opacity")}const tD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nD=jo.length;function rD(t,e,n){let r="",s=!0;for(let i=0;i<nD;i++){const a=jo[i],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=YA(o,dv[a]);if(!l){s=!1;const d=tD[a]||a;r+=`${d}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function gv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Po.has(l)){a=!0;continue}else if(EA(l)){s[l]=c;continue}else{const d=YA(c,dv[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(e.transform||(a||n?r.transform=rD(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const yv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aE(t,e,n){for(const r in e)!Xt(e[r])&&!iE(r,n)&&(t[r]=e[r])}function sD({transformTemplate:t},e){return P.useMemo(()=>{const n=yv();return gv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function iD(t,e){const n=t.style||{},r={};return aE(r,n,t),Object.assign(r,sD(t,e)),r}function aD(t,e){const n={},r=iD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const oD={offset:"stroke-dashoffset",array:"stroke-dasharray"},lD={offset:"strokeDashoffset",array:"strokeDasharray"};function cD(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?oD:lD;t[i.offset]=xe.transform(-r);const a=xe.transform(e),o=xe.transform(n);t[i.array]=`${a} ${o}`}function oE(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(gv(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&cD(h,s,i,a,!1)}const lE=()=>({...yv(),attrs:{}}),cE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uD(t,e,n,r){const s=P.useMemo(()=>{const i=lE();return oE(i,e,cE(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};aE(i,t.style,t),s.style={...i,...s.style}}return s}const dD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vv(t){return typeof t!="string"||t.includes("-")?!1:!!(dD.indexOf(t)>-1||/[A-Z]/u.test(t))}function hD(t,e,n,{latestValues:r},s,i=!1){const o=(vv(t)?uD:aD)(e,r,s,t),l=J$(e,typeof t=="string",i),c=t!==P.Fragment?{...l,...o,ref:n}:{},{children:d}=e,h=P.useMemo(()=>Xt(d)?d.get():d,[d]);return P.createElement(t,{...c,children:h})}function P_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function wv(t,e,n,r){if(typeof e=="function"){const[s,i]=P_(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=P_(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Ad(t){return Xt(t)?t.get():t}function mD({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:fD(n,r,s,t),renderState:e()}}function fD(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Ad(i[m]);let{initial:a,animate:o}=t;const l=fm(t),c=sE(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!mm(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const y=wv(t,m[f]);if(y){const{transitionEnd:w,transition:x,...v}=y;for(const p in v){let g=v[p];if(Array.isArray(g)){const _=d?g.length-1:0;g=g[_]}g!==null&&(s[p]=g)}for(const p in w)s[p]=w[p]}}}return s}const uE=t=>(e,n)=>{const r=P.useContext(hm),s=P.useContext(K0),i=()=>mD(t,e,r,s);return n?i():ZO(i)};function xv(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(Xt(r[a])||e.style&&Xt(e.style[a])||iE(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const pD=uE({scrapeMotionValuesFromProps:xv,createRenderState:yv});function dE(t,e,n){const r=xv(t,e,n);for(const s in t)if(Xt(t[s])||Xt(e[s])){const i=jo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const gD=uE({scrapeMotionValuesFromProps:dE,createRenderState:lE}),yD=Symbol.for("motionComponentSymbol");function Va(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vD(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Va(n)&&(n.current=r))},[e])}const _v=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wD="framerAppearId",hE="data-"+_v(wD),mE=P.createContext({});function xD(t,e,n,r,s){var w,x;const{visualElement:i}=P.useContext(hm),a=P.useContext(nE),o=P.useContext(K0),l=P.useContext(tE).reducedMotion,c=P.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=P.useContext(mE);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&_D(c.current,n,s,h);const m=P.useRef(!1);P.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const f=n[hE],y=P.useRef(!!f&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,f))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,f)));return YO(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),P.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),y.current=!1),d.enteringChildren=void 0)}),d}function _D(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:fE(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&Va(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function fE(t){if(t)return t.options.allowProjection!==!1?t.projection:fE(t.parent)}function Gf(t,{forwardMotionProps:e=!1}={},n,r){n&&K$(n);const s=vv(t)?gD:pD;function i(o,l){let c;const d={...P.useContext(tE),...o,layoutId:bD(o)},{isStatic:h}=d,m=Q$(o),f=s(o,h);if(!h&&q0){SD();const y=kD(d);c=y.MeasureLayout,m.visualElement=xD(t,f,d,r,y.ProjectionNode)}return u.jsxs(hm.Provider,{value:m,children:[c&&m.visualElement?u.jsx(c,{visualElement:m.visualElement,...d}):null,hD(t,o,vD(f,m.visualElement,l),f,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=P.forwardRef(i);return a[yD]=t,a}function bD({layoutId:t}){const e=P.useContext(uA).id;return e&&t!==void 0?e+"-"+t:t}function SD(t,e){P.useContext(nE).strict}function kD(t){const{drag:e,layout:n}=go;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function TD(t,e){if(typeof Proxy>"u")return Gf;const n=new Map,r=(i,a)=>Gf(i,a,t,e),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,Gf(a,void 0,t,e)),n.get(a))})}function pE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function AD({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ED(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vf(t){return t===void 0||t===1}function Wg({scale:t,scaleX:e,scaleY:n}){return!Vf(t)||!Vf(e)||!Vf(n)}function Di(t){return Wg(t)||gE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gE(t){return O_(t.x)||O_(t.y)}function O_(t){return t&&t!=="0%"}function ph(t,e,n){const r=t-n,s=e*r;return n+s}function $_(t,e,n,r,s){return s!==void 0&&(t=ph(t,s,r)),ph(t,n,r)+e}function qg(t,e=0,n=1,r,s){t.min=$_(t.min,e,n,r,s),t.max=$_(t.max,e,n,r,s)}function yE(t,{x:e,y:n}){qg(t.x,e.translate,e.scale,e.originPoint),qg(t.y,n.translate,n.scale,n.originPoint)}const D_=.999999999999,M_=1.0000000000001;function CD(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Wa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,yE(t,a)),r&&Di(i.latestValues)&&Wa(t,i.latestValues))}e.x<M_&&e.x>D_&&(e.x=1),e.y<M_&&e.y>D_&&(e.y=1)}function Ha(t,e){t.min=t.min+e,t.max=t.max+e}function L_(t,e,n,r,s=.5){const i=ct(t.min,t.max,s);qg(t,e,n,i,r)}function Wa(t,e){L_(t.x,e.x,e.scaleX,e.scale,e.originX),L_(t.y,e.y,e.scaleY,e.scale,e.originY)}function vE(t,e){return pE(ED(t.getBoundingClientRect(),e))}function ND(t,e,n){const r=vE(t,n),{scroll:s}=e;return s&&(Ha(r.x,s.offset.x),Ha(r.y,s.offset.y)),r}const F_=()=>({translate:0,scale:1,origin:0,originPoint:0}),qa=()=>({x:F_(),y:F_()}),U_=()=>({min:0,max:0}),Nt=()=>({x:U_(),y:U_()}),Kg={current:null},wE={current:!1};function ID(){if(wE.current=!0,!!q0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Kg.current=t.matches;t.addEventListener("change",e),e()}else Kg.current=!1}const RD=new WeakMap;function jD(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Xt(s))t.addValue(r,s);else if(Xt(i))t.addValue(r,po(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,po(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const z_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PD{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=bn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,at.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=fm(n),this.isVariantNode=sE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const f=h[m];l[m]!==void 0&&Xt(f)&&f.set(l[m])}}mount(e){var n;this.current=e,RD.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),wE.current||ID(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Kg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),fi(this.notifyUpdate),fi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Po.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in go){const n=go[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<z_.length;r++){const s=z_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=jD(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=po(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(dA(r)||mA(r))?r=parseFloat(r):!W$(r)&&pi.test(n)&&(r=ZA(e,n)),this.setBaseTarget(e,Xt(r)?r.get():r)),Xt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=wv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new X0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){hv.render(this.render)}}class xE extends PD{constructor(){super(...arguments),this.KeyframeResolver=P$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function _E(t,{style:e,vars:n},r,s){const i=t.style;let a;for(a in e)i[a]=e[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function OD(t){return window.getComputedStyle(t)}class $D extends xE{constructor(){super(...arguments),this.type="html",this.renderInstance=_E}readValueFromInstance(e,n){var r;if(Po.has(n))return(r=this.projection)!=null&&r.isProjecting?Lg(n):X2(e,n);{const s=OD(e),i=(EA(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vE(e,n)}build(e,n,r){gv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return xv(e,n,r)}}const bE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DD(t,e,n,r){_E(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(bE.has(s)?s:_v(s),e.attrs[s])}class MD extends xE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Po.has(n)){const r=KA(n);return r&&r.default||0}return n=bE.has(n)?n:_v(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return dE(e,n,r)}build(e,n,r){oE(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){DD(e,n,r,s)}mount(e){this.isSVGTag=cE(e.tagName),super.mount(e)}}const LD=(t,e)=>vv(t)?new MD(e):new $D(e,{allowProjection:t!==P.Fragment});function io(t,e,n){const r=t.getProps();return wv(r,e,n!==void 0?n:r.custom,t)}const Zg=t=>Array.isArray(t);function FD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,po(n))}function UD(t){return Zg(t)?t[t.length-1]||0:t}function zD(t,e){const n=io(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const o=UD(i[a]);FD(t,a,o)}}function BD(t){return!!(Xt(t)&&t.add)}function Yg(t,e){const n=t.getValue("willChange");if(BD(n))return n.add(e);if(!n&&Ts.WillChange){const r=new Ts.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function SE(t){return t.props[hE]}const GD=t=>t!==null;function VD(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(GD),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const HD={type:"spring",stiffness:500,damping:25,restSpeed:10},WD=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qD={type:"keyframes",duration:.8},KD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZD=(t,{keyframes:e})=>e.length>2?qD:Po.has(t)?t.startsWith("scale")?WD(e[1]):HD:KD;function YD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const bv=(t,e,n,r={},s,i)=>a=>{const o=uv(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Hr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:s};YD(o)||Object.assign(d,ZD(t,d)),d.duration&&(d.duration=Hr(d.duration)),d.repeatDelay&&(d.repeatDelay=Hr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Gg(d),d.delay===0&&(h=!0)),(Ts.instantAnimations||Ts.skipAnimations)&&(h=!0,Gg(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&e.get()!==void 0){const m=VD(d.keyframes,o);if(m!==void 0){at.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new lv(d):new _$(d)};function JD({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kE(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),m=o[d];if(m===void 0||c&&JD(c,d))continue;const f={delay:n,...uv(i||{},d)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===y&&!f.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const v=SE(t);if(v){const p=window.MotionHandoffAnimation(v,d,at);p!==null&&(f.startTime=p,w=!0)}}Yg(t,d),h.start(bv(d,h,m,t.shouldReduceMotion&&HA.has(d)?{type:!1}:f,t,w));const x=h.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{at.update(()=>{a&&zD(t,a)})}),l}function TE(t,e,n,r=0,s=1){const i=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),a=t.size,o=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:o-i*r}function Jg(t,e,n={}){var l;const r=io(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(kE(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return XD(t,e,c,d,h,m,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,d]=o==="beforeChildren"?[i,a]:[a,i];return c().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function XD(t,e,n=0,r=0,s=0,i=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(Jg(l,e,{...a,delay:n+(typeof r=="function"?0:r)+TE(t.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function QD(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Jg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Jg(t,e,n);else{const s=typeof e=="function"?io(t,e,n.custom):e;r=Promise.all(kE(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function AE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const eM=pv.length;function EE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?EE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eM;n++){const r=pv[n],s=t.props[r];(pc(s)||s===!1)&&(e[r]=s)}return e}const tM=[...fv].reverse(),nM=fv.length;function rM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>QD(t,n,r)))}function sM(t){let e=rM(t),n=B_(),r=!0;const s=l=>(c,d)=>{var m;const h=io(t,d,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:f,transitionEnd:y,...w}=h;c={...c,...w,...y}}return c};function i(l){e=l(t)}function a(l){const{props:c}=t,d=EE(t.parent)||{},h=[],m=new Set;let f={},y=1/0;for(let x=0;x<nM;x++){const v=tM[x],p=n[v],g=c[v]!==void 0?c[v]:d[v],_=pc(g),k=v===l?p.isActive:null;k===!1&&(y=x);let E=g===d[v]&&g!==c[v]&&_;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),p.protectedKeys={...f},!p.isActive&&k===null||!g&&!p.prevProp||mm(g)||typeof g=="boolean")continue;const C=iM(p.prevProp,g);let b=C||v===l&&p.isActive&&!E&&_||x>y&&_,O=!1;const $=Array.isArray(g)?g:[g];let L=$.reduce(s(v),{});k===!1&&(L={});const{prevResolvedValues:ge={}}=p,ot={...ge,...L},K=q=>{b=!0,m.has(q)&&(O=!0,m.delete(q)),p.needsAnimating[q]=!0;const j=t.getValue(q);j&&(j.liveStyle=!1)};for(const q in ot){const j=L[q],M=ge[q];if(f.hasOwnProperty(q))continue;let U=!1;Zg(j)&&Zg(M)?U=!AE(j,M):U=j!==M,U?j!=null?K(q):m.add(q):j!==void 0&&m.has(q)?K(q):p.protectedKeys[q]=!0}p.prevProp=g,p.prevResolvedValues=L,p.isActive&&(f={...f,...L}),r&&t.blockInitialAnimation&&(b=!1);const B=E&&C;b&&(!B||O)&&h.push(...$.map(q=>{const j={type:v};if(typeof q=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:M}=t,U=io(M,q);if(M.enteringChildren&&U){const{delayChildren:ie}=U.transition||{};j.delay=TE(M.enteringChildren,t,ie)}}return{animation:q,options:j}}))}if(m.size){const x={};if(typeof c.initial!="boolean"){const v=io(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(x.transition=v.transition)}m.forEach(v=>{const p=t.getBaseTarget(v),g=t.getValue(v);g&&(g.liveStyle=!0),x[v]=p??null}),h.push({animation:x})}let w=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(h):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var f;return(f=m.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=B_()}}}function iM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AE(e,t):!1}function ji(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B_(){return{animate:ji(!0),whileInView:ji(),whileHover:ji(),whileTap:ji(),whileDrag:ji(),whileFocus:ji(),exit:ji()}}class Si{constructor(e){this.isMounted=!1,this.node=e}update(){}}class aM extends Si{constructor(e){super(e),e.animationState||(e.animationState=sM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();mm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let oM=0;class lM extends Si{constructor(){super(...arguments),this.id=oM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cM={animation:{Feature:aM},exit:{Feature:lM}};function gc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Mc(t){return{point:{x:t.pageX,y:t.pageY}}}const uM=t=>e=>mv(e)&&t(e,Mc(e));function Dl(t,e,n,r){return gc(t,e,uM(n),r)}const CE=1e-4,dM=1-CE,hM=1+CE,NE=.01,mM=0-NE,fM=0+NE;function ln(t){return t.max-t.min}function pM(t,e,n){return Math.abs(t-e)<=n}function G_(t,e,n,r=.5){t.origin=r,t.originPoint=ct(e.min,e.max,t.origin),t.scale=ln(n)/ln(e),t.translate=ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dM&&t.scale<=hM||isNaN(t.scale))&&(t.scale=1),(t.translate>=mM&&t.translate<=fM||isNaN(t.translate))&&(t.translate=0)}function Ml(t,e,n,r){G_(t.x,e.x,n.x,r?r.originX:void 0),G_(t.y,e.y,n.y,r?r.originY:void 0)}function V_(t,e,n){t.min=n.min+e.min,t.max=t.min+ln(e)}function gM(t,e,n){V_(t.x,e.x,n.x),V_(t.y,e.y,n.y)}function H_(t,e,n){t.min=e.min-n.min,t.max=t.min+ln(e)}function gh(t,e,n){H_(t.x,e.x,n.x),H_(t.y,e.y,n.y)}function qn(t){return[t("x"),t("y")]}const IE=({current:t})=>t?t.ownerDocument.defaultView:null,W_=(t,e)=>Math.abs(t-e);function yM(t,e){const n=W_(t.x,e.x),r=W_(t.y,e.y);return Math.sqrt(n**2+r**2)}class RE{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Wf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=yM(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!y)return;const{point:w}=m,{timestamp:x}=Gt;this.history.push({...w,timestamp:x});const{onStart:v,onMove:p}=this.handlers;f||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Hf(f,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Wf(m.type==="pointercancel"?this.lastMoveEventInfo:Hf(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,v),w&&w(m,v)},!mv(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const o=Mc(e),l=Hf(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Gt;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Wf(l,this.history)),this.removeListeners=Oc(Dl(this.contextWindow,"pointermove",this.handlePointerMove),Dl(this.contextWindow,"pointerup",this.handlePointerUp),Dl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fi(this.updatePoint)}}function Hf(t,e){return e?{point:e(t.point)}:t}function q_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wf({point:t},e){return{point:t,delta:q_(t,jE(e)),offset:q_(t,vM(e)),velocity:wM(e,.1)}}function vM(t){return t[0]}function jE(t){return t[t.length-1]}function wM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=jE(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Hr(e)));)n--;if(!r)return{x:0,y:0};const i=Xn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function xM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ct(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ct(n,t,r.max):Math.min(t,n)),t}function K_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _M(t,{top:e,left:n,bottom:r,right:s}){return{x:K_(t.x,n,s),y:K_(t.y,e,r)}}function Z_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function bM(t,e){return{x:Z_(t.x,e.x),y:Z_(t.y,e.y)}}function SM(t,e){let n=.5;const r=ln(t),s=ln(e);return s>r?n=hc(e.min,e.max-r,t.min):r>s&&(n=hc(t.min,t.max-s,e.min)),ks(0,1,n)}function kM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Xg=.35;function TM(t=Xg){return t===!1?t=0:t===!0&&(t=Xg),{x:Y_(t,"left","right"),y:Y_(t,"top","bottom")}}function Y_(t,e,n){return{min:J_(t,e),max:J_(t,n)}}function J_(t,e){return typeof t=="number"?t:t[e]||0}const AM=new WeakMap;class EM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mc(h).point)},a=(h,m)=>{const{drag:f,dragPropagation:y,onDragStart:w}=this.getProps();if(f&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L$(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(v=>{let p=this.getAxisMotionValue(v).get()||0;if(Wr.test(p)){const{projection:g}=this.visualElement;if(g&&g.layout){const _=g.layout.layoutBox[v];_&&(p=ln(_)*(parseFloat(p)/100))}}this.originPoint[v]=p}),w&&at.postRender(()=>w(h,m)),Yg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:w,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=m;if(y&&this.currentDirection===null){this.currentDirection=CM(v),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),x&&x(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>qn(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new RE(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:IE(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&at.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Mu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=xM(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Va(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=_M(r.layoutBox,e):this.constraints=!1,this.elastic=TM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=kM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Va(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=ND(r,s.root,this.visualElement.getTransformPagePoint());let a=bM(s.layout.layoutBox,i);if(n){const o=n(AD(a));this.hasMutatedConstraints=!!o,o&&(a=pE(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=qn(d=>{if(!Mu(d,n,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,f=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Yg(this.visualElement,e),r.start(bv(e,r,0,n,this.visualElement,!1))}stopAnimation(){qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qn(n=>{const{drag:r}=this.getProps();if(!Mu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];i.set(e[n]-ct(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Va(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=SM({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(a=>{if(!Mu(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(ct(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;AM.set(this.visualElement,this);const e=this.visualElement.current,n=Dl(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Va(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),at.read(r);const a=gc(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(qn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Xg,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function Mu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class NM extends Si{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new EM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const X_=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class IM extends Si{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new RE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:X_(e),onStart:X_(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&at.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=Dl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ed={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let qf=!1;class RM extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),qf&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ed.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,qf=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||at.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),hv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;qf=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function PE(t){const[e,n]=q$(),r=P.useContext(uA);return u.jsx(RM,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(mE),isPresent:e,safeToRemove:n})}function jM(t,e,n){const r=Xt(t)?t:po(t);return r.start(bv("",r,e,n)),r.animation}const PM=(t,e)=>t.depth-e.depth;class OM{constructor(){this.children=[],this.isDirty=!1}add(e){Z0(this.children,e),this.isDirty=!0}remove(e){Y0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PM),this.isDirty=!1,this.children.forEach(e)}}function $M(t,e){const n=bn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(fi(r),t(i-e))};return at.setup(r,!0),()=>fi(r)}const OE=["TopLeft","TopRight","BottomLeft","BottomRight"],DM=OE.length,Q_=t=>typeof t=="string"?parseFloat(t):t,eb=t=>typeof t=="number"||xe.test(t);function MM(t,e,n,r,s,i){s?(t.opacity=ct(0,n.opacity??1,LM(r)),t.opacityExit=ct(e.opacity??1,0,FM(r))):i&&(t.opacity=ct(e.opacity??1,n.opacity??1,r));for(let a=0;a<DM;a++){const o=`border${OE[a]}Radius`;let l=tb(e,o),c=tb(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||eb(l)===eb(c)?(t[o]=Math.max(ct(Q_(l),Q_(c),r),0),(Wr.test(c)||Wr.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=ct(e.rotate||0,n.rotate||0,r))}function tb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LM=$E(0,.5,_A),FM=$E(.5,.95,tr);function $E(t,e,n){return r=>r<t?0:r>e?1:n(hc(t,e,r))}function nb(t,e){t.min=e.min,t.max=e.max}function ar(t,e){nb(t.x,e.x),nb(t.y,e.y)}function rb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sb(t,e,n,r,s){return t-=e,t=ph(t,1/n,r),s!==void 0&&(t=ph(t,1/s,r)),t}function UM(t,e=0,n=1,r=.5,s,i=t,a=t){if(Wr.test(e)&&(e=parseFloat(e),e=ct(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ct(i.min,i.max,r);t===i&&(o-=e),t.min=sb(t.min,e,n,o,s),t.max=sb(t.max,e,n,o,s)}function ib(t,e,[n,r,s],i,a){UM(t,e[n],e[r],e[s],e.scale,i,a)}const zM=["x","scaleX","originX"],BM=["y","scaleY","originY"];function ab(t,e,n,r){ib(t.x,e,zM,n?n.x:void 0,r?r.x:void 0),ib(t.y,e,BM,n?n.y:void 0,r?r.y:void 0)}function ob(t){return t.translate===0&&t.scale===1}function DE(t){return ob(t.x)&&ob(t.y)}function lb(t,e){return t.min===e.min&&t.max===e.max}function GM(t,e){return lb(t.x,e.x)&&lb(t.y,e.y)}function cb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ME(t,e){return cb(t.x,e.x)&&cb(t.y,e.y)}function ub(t){return ln(t.x)/ln(t.y)}function db(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class VM{constructor(){this.members=[]}add(e){Z0(this.members,e),e.scheduleRender()}remove(e){if(Y0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HM(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:m,skewX:f,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),f&&(r+=`skewX(${f}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Kf=["","X","Y","Z"],WM=1e3;let qM=0;function Zf(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function LE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=SE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&LE(r)}function FE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=qM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YM),this.nodes.forEach(eL),this.nodes.forEach(tL),this.nodes.forEach(JM)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new OM)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new X0),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=eE(a)&&!V$(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;at.read(()=>{h=window.innerWidth}),t(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,d&&d(),d=$M(m,250),Ed.hasAnimatedSinceResize&&(Ed.hasAnimatedSinceResize=!1,this.nodes.forEach(fb)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||aL,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=c.getProps(),v=!this.targetLayout||!ME(this.targetLayout,f),p=!h&&m;if(this.options.layoutRoot||this.resumeFrom||p||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...uv(y,"layout"),onPlay:w,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(d,p)}else h||fb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nL),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QM),this.nodes.forEach(KM),this.nodes.forEach(ZM)):this.nodes.forEach(mb),this.clearAllSnapshots();const o=bn.now();Gt.delta=ks(0,1e3/60,o-Gt.timestamp),Gt.timestamp=o,Gt.isProcessing=!0,Mf.update.process(Gt),Mf.preRender.process(Gt),Mf.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XM),this.sharedNodes.forEach(rL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ln(this.snapshot.measuredBox.x)&&!ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!DE(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Di(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),oL(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return Nt();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(lL))){const{scroll:d}=this.root;d&&(Ha(o.x,d.offset.x),Ha(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=Nt();if(ar(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&ar(o,a),Ha(o.x,h.offset.x),Ha(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=Nt();ar(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Wa(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Di(d.latestValues)&&Wa(l,d.latestValues)}return Di(this.latestValues)&&Wa(l,this.latestValues),l}removeTransform(a){const o=Nt();ar(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Di(c.latestValues))continue;Wg(c.latestValues)&&c.updateSnapshot();const d=Nt(),h=c.measurePageBox();ar(d,h),ab(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Di(this.latestValues)&&ab(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Gt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ar(this.target,this.layout.layoutBox),yE(this.target,this.targetDelta)):ar(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Wg(this.parent.latestValues)||gE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),gh(this.relativeTargetOrigin,o,l),ar(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ar(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;CD(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Nt());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rb(this.prevProjectionDelta.x,this.projectionDelta.x),rb(this.prevProjectionDelta.y,this.projectionDelta.y)),Ml(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!db(this.projectionDelta.x,this.prevProjectionDelta.x)||!db(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qa(),this.projectionDelta=qa(),this.projectionDeltaWithTransform=qa()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=qa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Nt(),f=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=f!==y,x=this.getStack(),v=!x||x.members.length<=1,p=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(iL));this.animationProgress=0;let g;this.mixTargetDelta=_=>{const k=_/1e3;pb(h.x,a.x,k),pb(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sL(this.relativeTarget,this.relativeTargetOrigin,m,k),g&&GM(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=Nt()),ar(g,this.relativeTarget)),w&&(this.animationValues=d,MM(d,c,this.latestValues,k,p,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(fi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{Ed.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=po(0)),this.currentAnimation=jM(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&UE(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Nt();const h=ln(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const m=ln(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}ar(o,l),Wa(o,d),Ml(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new VM),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Zf("z",a,c,this.animationValues);for(let d=0;d<Kf.length;d++)Zf(`rotate${Kf[d]}`,a,c,this.animationValues),Zf(`skew${Kf[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Ad(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Ad(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Di(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=HM(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:m,y:f}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Hg){if(d[y]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:v}=Hg[y],p=h==="none"?d[y]:w(d[y],c);if(x){const g=x.length;for(let _=0;_<g;_++)a[x[_]]=p}else v?this.options.visualElement.renderState.vars[y]=p:a[y]=p}this.options.layoutId&&(a.pointerEvents=c===this?Ad(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(hb),this.root.sharedNodes.clear()}}}function KM(t){t.updateLayout()}function ZM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?qn(h=>{const m=a?e.measuredBox[h]:e.layoutBox[h],f=ln(m);m.min=r[h].min,m.max=m.min+f}):UE(i,e.layoutBox,r)&&qn(h=>{const m=a?e.measuredBox[h]:e.layoutBox[h],f=ln(r[h]);m.max=m.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const o=qa();Ml(o,r,e.layoutBox);const l=qa();a?Ml(l,t.applyTransform(s,!0),e.measuredBox):Ml(l,r,e.layoutBox);const c=!DE(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const y=Nt();gh(y,e.layoutBox,m.layoutBox);const w=Nt();gh(w,r,f.layoutBox),ME(y,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function YM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XM(t){t.clearSnapshot()}function hb(t){t.clearMeasurements()}function mb(t){t.isLayoutDirty=!1}function QM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function fb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eL(t){t.resolveTargetDelta()}function tL(t){t.calcProjection()}function nL(t){t.resetSkewAndRotation()}function rL(t){t.removeLeadSnapshot()}function pb(t,e,n){t.translate=ct(e.translate,0,n),t.scale=ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function gb(t,e,n,r){t.min=ct(e.min,n.min,r),t.max=ct(e.max,n.max,r)}function sL(t,e,n,r){gb(t.x,e.x,n.x,r),gb(t.y,e.y,n.y,r)}function iL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aL={duration:.45,ease:[.4,0,.1,1]},yb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vb=yb("applewebkit/")&&!yb("chrome/")?Math.round:tr;function wb(t){t.min=vb(t.min),t.max=vb(t.max)}function oL(t){wb(t.x),wb(t.y)}function UE(t,e,n){return t==="position"||t==="preserve-aspect"&&!pM(ub(e),ub(n),.2)}function lL(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const cL=FE({attachResizeListener:(t,e)=>gc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yf={current:void 0},zE=FE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yf.current){const t=new cL({});t.mount(window),t.setOptions({layoutScroll:!0}),Yf.current=t}return Yf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uL={pan:{Feature:IM},drag:{Feature:NM,ProjectionNode:zE,MeasureLayout:PE}};function xb(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&at.postRender(()=>i(e,Mc(e)))}class dL extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=F$(e,(n,r)=>(xb(this.node,r,"Start"),s=>xb(this.node,s,"End"))))}unmount(){}}class hL extends Si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oc(gc(this.node.current,"focus",()=>this.onFocus()),gc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _b(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&at.postRender(()=>i(e,Mc(e)))}class mL extends Si{mount(){const{current:e}=this.node;e&&(this.unmount=G$(e,(n,r)=>(_b(this.node,r,"Start"),(s,{success:i})=>_b(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qg=new WeakMap,Jf=new WeakMap,fL=t=>{const e=Qg.get(t.target);e&&e(t)},pL=t=>{t.forEach(fL)};function gL({root:t,...e}){const n=t||document;Jf.has(n)||Jf.set(n,{});const r=Jf.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(pL,{root:t,...e})),r[s]}function yL(t,e,n){const r=gL(e);return Qg.set(t,n),r.observe(t),()=>{Qg.delete(t),r.unobserve(t)}}const vL={some:0,all:1};class wL extends Si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:vL[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return yL(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xL(e,n))&&this.startObserver()}unmount(){}}function xL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const _L={inView:{Feature:wL},tap:{Feature:mL},focus:{Feature:hL},hover:{Feature:dL}},bL={layout:{ProjectionNode:zE,MeasureLayout:PE}},SL={...cM,..._L,...uL,...bL},Fe=TD(SL,LD);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),be=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},d)=>P.createElement("svg",{ref:d,...kL,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${TL(t)}`,o].join(" "),...c},[...e.map(([h,m])=>P.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=be("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=be("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=be("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=be("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=be("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=be("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=be("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=be("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=be("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=be("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=be("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=be("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=be("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=be("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=be("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=be("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=be("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=be("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=be("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Eb={en:{aiPoweredGeneration:"AI-powered documentation generation",sourceSelection:"Source Selection",clickToCollapse:"Click to collapse",clickToExpand:"Click to expand",formats:"Formats",sections:"Sections",selectAtLeastOne:"Select at least one format and section",token:"Token",add:"Add",change:"Change",hide:"Hide",openaiKey:"OpenAI Key",saveChanges:"Save Changes",edit:"Edit",save:"Save",editDocumentation:"Edit Documentation",editDocumentationPlaceholder:"Edit your documentation here...",runWorkflow:"Run Workflow",startWritingDocumentation:"Start Writing Documentation",generating:"Generating...",documentation:"Documentation",noDocumentation:"No documentation generated yet",export:"Export",commit:"Commit",settings:"Settings",statistics:"Statistics",qualityScores:"Quality Scores",refactorProposals:"Refactor Proposals",badges:"Badges",pdfExport:"PDF Export",clear:"Clear",formatsLocked:"Formats and sections are locked after generation.",runNewWorkflow:"Run a new workflow to change them.",agentWorkflow:"Agent Workflow",useAiAgents:"Use AI agents for automated pipeline",singleRepo:"Single Repository",multiRepo:"Multi-Repository",githubUrl:"GitHub URL",selectRepos:"Select Repositories",selectAtLeastOneRepo:"Please select at least one repository",selectAtLeastOneFormat:"Please select at least one output format",selectAtLeastOneSection:"Please select at least one documentation section type",pleaseProvideUrl:"Please provide a GitHub URL",reviewAndCommit:'Review the documentation below, then click "Commit to Repos" if you want to commit it.',commitToRepos:"Commit to Repos",committing:"Committing...",clearDocumentation:"Clear documentation to change formats/sections",toChangeFormats:"to change formats/sections",gitScribe:"GitScribe",aiPowered:"AI-POWERED",aiPoweredDocumentationTitle:"AI-Powered Documentation for GitHub Repositories",aiPoweredDocumentationDescription:"Automatically generate comprehensive documentation from single or multiple GitHub repositories. Powered by AI agents that analyze, plan, and write documentation for your codebase.",githubIntegration:"GitHub Integration",githubIntegrationDescription:"Generate documentation from any GitHub repository",multiRepoSupport:"Multi-Repo Support",multiRepoSupportDescription:"Generate documentation for multiple repositories simultaneously",autoCommitExport:"Auto-Commit & Export",autoCommitExportDescription:"Automatically commit documentation to repos or download as Markdown",readyToStart:"Ready to start?",generateDocumentationFromRepos:"Generate documentation from GitHub repositories",noAccountNeeded:"No account needed - Start immediately!",startImmediately:"Start immediately!",whyChooseOurTool:"Why Choose Our Documentation Tool",whyChooseOurToolDescription:"Streamline your documentation workflow with AI-powered generation",aiAgentWorkflows:"AI Agent Workflows",aiAgentWorkflowsDescription:"Automated agent system that discovers, analyzes, plans, and writes documentation for your repositories.",autoUpdateFollow:"Auto-Update & Follow",autoUpdateFollowDescription:"Automatically detect changes and regenerate documentation when repositories are updated.",githubIntegrationFeature:"GitHub Integration",githubIntegrationFeatureDescription:"Seamless commit integration and direct repository access for your documentation workflow.",readyToGetStarted:"Ready to get started?",joinDevelopers:"Join developers and teams automating their documentation workflow",startGeneratingDocumentation:"Start Generating Documentation",footerDescription:"AI-powered documentation generation for GitHub repositories with multi-repo support, agent workflows, and auto-update features.",madeWith:"Made with",forDevelopers:"for developers",features:"Features",resources:"Resources",connect:"Connect",contactUs:"Contact Us",Donate:"Donate",buyMeACoffee:"Buy me a coffee",supportGitScribe:"Support GitScribe",supportGitScribeDevelopment:"Help us continue developing and improving GitScribe",ifYouFindGitScribeUseful:"If you find GitScribe useful and would like to support its development, consider buying us a coffee!",whySupport:"Why Support GitScribe?",gitScribeIsFreeAndOpenSource:"GitScribe is free and open-source, built with passion for the developer community.",yourSupportHelpsUs:"Your support helps us:",newFeatures:"New Features",developNewFeaturesAndImprovements:"Develop new features and improvements based on user feedback",maintenanceAndUpdates:"Maintenance & Updates",keepGitScribeRunningSmoothly:"Keep GitScribe running smoothly with regular updates and bug fixes",freeAndOpenSource:"Free & Open Source",maintainFreeAccessForEveryone:"Maintain free access for everyone while improving the tool",otherWaysToSupport:"Other Ways to Support",starOnGitHub:"Star on GitHub",starringOurRepository:"Starring our repository helps others discover GitScribe",visitGitHub:"Visit GitHub",shareFeedback:"Share Feedback",letUsKnowWhatYouThink:"Let us know what you think and how we can improve",thankYou:"Thank You!",everyContributionMatters:"Every contribution matters, no matter how small.",whetherThroughDonations:"Whether through donations, GitHub stars, or feedback,",weAppreciateYourSupport:"we appreciate your support in making GitScribe better for everyone.",allRightsReserved:"All rights reserved",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",cookiePolicy:"Cookie Policy",overview:"Overview",gettingStarted:"Getting Started",supportedFormats:"Supported Formats",repositoryAccess:"Repository Access",fileAnalysis:"File Analysis",codeUnderstanding:"Code Understanding",createGitHubToken:"Create a GitHub Personal Access Token",addTokenToGitScribe:"Add Token to GitScribe",startGenerating:"Start Generating",requiredScopes:"Required scopes",forPrivateRepos:"for private repos and commits",forPublicRepos:"For public repos, a token is optional but recommended to avoid rate limits",enterRepositoryUrl:"Enter your repository URL",chooseOutputFormats:"Choose output formats and section types",clickRunWorkflow:'Click "Run Workflow"',selectMultipleRepositories:"Select Multiple Repositories",aiPoweredAnalysis:"AI-powered analysis",automaticallyAnalyze:"Automatically analyze",connectToAnyRepository:"Connect to any GitHub repository",usingPersonalAccessToken:"using your Personal Access Token",goToGitHubSettings:"Go to GitHub Settings",developerSettings:"Developer settings",personalAccessTokens:"Personal access tokens",tokensClassic:"Tokens (classic)",enterYourToken:"Enter your token",githubTokenField:"in the GitHub Token field",documentationEditorSettings:"in the documentation editor settings",clickSaveChanges:'Click "Save Changes"',persistIt:"to persist it",egOwnerRepo:"e.g., owner/repo",thenClickRunWorkflow:'then click "Run Workflow"',startAiAgentWorkflow:"to start the AI agent workflow",youCanUseAnyOfTheseFormats:"You can use any of these formats to specify a repository",toSpecifyRepository:"to specify a repository",seamlesslyConnectWithGitHub:"Seamlessly connect with GitHub to generate documentation from your repositories",generateDocumentationFromRepositories:"generate documentation from your repositories",gitScribeIntegratesDirectly:"GitScribe integrates directly with GitHub's API",accessYourRepositories:"to access your repositories",generateComprehensiveDocumentation:"and generate comprehensive documentation",whetherPublicOrPrivate:"Whether you're working with public or private repositories",ourIntegrationMakesItEasy:"our integration makes it easy",documentYourCodebase:"to document your codebase",connectToAnyGitHubRepository:"Connect to any GitHub repository",automaticallyAnalyzeRepository:"Automatically analyze repository",repositoryStructure:"repository structure",codeFiles:"code files",configuration:"and configuration",aiPoweredAnalysisOfCodebase:"AI-powered analysis of your codebase",generateAccurateDocumentation:"to generate accurate documentation",tokenOptionalButRecommended:"For public repos, a token is optional but recommended",avoidRateLimits:"to avoid rate limits",multiRepoSupportTitle:"Multi-Repository Support",generateDocumentationForMultiple:"Generate documentation for multiple",simultaneously:"simultaneously",selectMultipleRepositoriesTitle:"Select Multiple Repositories",batchProcessing:"Batch Processing",unifiedDocumentation:"Unified Documentation",individualDocumentation:"Individual Documentation",aiPoweredGenerationTitle:"AI-Powered Generation",aiPoweredGenerationDescription:"Leverage advanced AI to create comprehensive, accurate documentation",exportCommitTitle:"Export & Commit",exportCommitDescription:"Export documentation or commit directly to your repositories",documentationTitle:"Documentation",apiReferenceTitle:"API Reference",examplesTitle:"Examples",supportTitle:"Support",privacyPolicyTitle:"Privacy Policy",termsOfServiceTitle:"Terms of Service",cookiePolicyTitle:"Cookie Policy",assistantGreeting:"Hi! I'm your AI assistant. I can help you edit and improve your documentation! ",assistantCapabilities:"I can:",assistantRewriteSections:"Rewrite sections",assistantImproveClarity:"Improve clarity and readability",assistantFixGrammar:"Fix grammar and spelling",assistantAddRemoveContent:"Add or remove content",assistantRestructure:"Restructure the documentation",assistantFormatText:"Format text better",assistantTellMeWhatToChange:"Just tell me what you'd like to change!",assistantErrorNoDocumentation:"Documentation editing mode requires documentation to be loaded. Please generate documentation first.",assistantErrorUnknown:"Sorry, I encountered an error",assistantErrorApiKey:"Configuration error: OpenAI API key is missing. Please check your environment variables.",assistantErrorParse:`I had trouble understanding that request. Could you try rephrasing it? For example:
 "Add a pricing section"
 "Change the primary color to blue"
 "Update the hero title"`,assistantErrorNetwork:"Network error: Please check your internet connection and try again.",assistantPlaceholderLoading:"AI is generating your request...",assistantPlaceholderReady:"Ask me anything about your documentation...",assistantTitleSend:"Send message",assistantTitleType:"Type a message to send",assistantClearConversation:"Clear conversation",selectRepositories:"Select Repositories",selected:"selected",close:"Close",searchRepositories:"Search repositories...",visibility:"Visibility:",all:"All",public:"Public",private:"Private",refresh:"Refresh",loadingRepositories:"Loading repositories...",noRepositoriesMatch:"No repositories match your search.",noRepositoriesFound:"No repositories found.",lastPushed:"Last pushed:",repositoriesSelected:"repositories selected",repositorySelected:"repository selected",noRepositoriesSelected:"No repositories selected",clearAll:"Clear All",done:"Done",repositoryDiscovery:"Repository Discovery",repositoryAnalysis:"Repository Analysis",qualityAnalysis:"Quality Analysis",refactorProposal:"Refactor Proposal",documentationPlanning:"Documentation Planning",documentationWriting:"Documentation Writing",gitOperations:"Git Operations",complete:"Complete",running:"Running...",processing:"Processing:",completed:" Completed",error:"Error:",automatedPipeline:"Automated documentation generation pipeline",outputFormats:"Output Formats",sectionTypes:"Section Types",pleaseSelectAtLeastOneRepository:"Please select at least one repository",noWorkflowState:"No workflow state available",noDocumentationToCommit:"No documentation to commit",commitFailed:"Commit failed",generatedFeatures:"Generated Features",workflowComplete:"Workflow Complete!",generatedDocumentationFor:"Generated documentation for",repository:"repository",repositories:"repositories",committedTo:"Committed to",backTo:"Back to",cancel:"Cancel",branch:"Branch",commitMessage:"Commit Message",scrollToTop:"Scroll to top",hideAiAssistant:"Hide AI Assistant",showAiAssistant:"Show AI Assistant",enableAutoUpdate:"Enable auto-update on push/merge",disableAutoUpdate:"Disable auto-update",format:"Format:",section:"Section:",addDocumentation:"Add documentation",ownerRepoOrGithub:"owner/repo or github.com/owner/repo",ownerRepoPlaceholder:"owner/repo",keyFeatures:"Key Features",selectAndProcessMultiple:"Select and process multiple repositories in a single operation",eachRepositoryGetsOwn:"Each repository gets its own dedicated documentation file",batchCommit:"Batch Commit",commitToAllSelected:"Commit documentation to all selected repositories with one click",howToUse:"How to Use",selectMultipleReposStep:"1. Select Multiple Repositories",clickSelectReposButton:'Click "Select repositories" button to browse and select from your GitHub repositories. You can search and filter by visibility.',browseAndSelectFromGitHub:"browse and select from your GitHub repositories",searchAndFilterByVisibility:"You can search and filter by visibility",chooseOutputFormatsSections:"2. Choose Output Formats & Sections",selectOneOrMoreFormats:"Select one or more output formats",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"and documentation section types",readmeArchitectureApi:"(README, Architecture, API, etc.)",runWorkflowStep:"3. Run Workflow",clickRunWorkflowToStart:'Click "Run Workflow" to start the AI agent workflow',systemWillProcessEachRepo:"The system will process each repository",throughDiscoveryAnalysisPlanning:"through discovery, analysis, planning, and writing stages",reviewCommitStep:"4. Review & Commit",reviewDocumentationInTabs:"Review documentation in separate tabs for each repository",switchBetweenFormatsSections:"Switch between formats and sections",whenReadyClickCommitToRepos:'When ready, click "Commit to Repos"',commitAllAtOnce:"to commit all at once",benefits:"Benefits",saveTimeProcessingMultiple:"Save time by processing multiple repositories simultaneously",maintainConsistentFormat:"Maintain consistent documentation format across projects",easyManagementWithTabs:"Easy management with tabbed interface for each repository",batchCommitFunctionality:"Batch commit functionality for efficient workflow",aiModels:"AI Models",gitScribeSupportsMultipleModels:"GitScribe supports multiple OpenAI models",chooseBasedOnNeeds:"Choose based on your needs",speedCostQuality:"for speed, cost, and quality",gpt4oMiniRecommended:"GPT-4o Mini (Recommended)",fastAndCostEffective:"Fast and cost-effective for most documentation tasks",bestBalanceSpeedQuality:"Best balance of speed and quality",gpt4o:"GPT-4o",mostAdvancedModel:"Most advanced model",complexCodebases:"for complex codebases",highestQualityHigherCost:"Highest quality, higher cost",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Balanced performance and accuracy",goodForLargeRepos:"Good for large repositories",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Fast and economical",simpleProjects:"for simple projects",lowestCostOption:"Lowest cost option",youCanChangeModel:"You can change the model",settingsPanel:"in the Settings panel",realtimeCostEstimation:"Real-time cost estimation",statisticsSidebar:"is displayed in the Statistics sidebar",aiAssistant:"AI Assistant",aiAssistantFeature:"The AI Assistant feature allows you",interactivelyEditImprove:"to interactively edit and improve your documentation",rewriteSectionsForClarity:"Rewrite sections for better clarity",fixGrammarSpellingErrors:"Fix grammar and spelling errors",addRemoveContentBasedOnNeeds:"Add or remove content based on your needs",restructureDocumentation:"Restructure documentation for better flow",formatTextImproveReadability:"Format text and improve readability",costEstimation:"Cost Estimation",gitScribeProvidesRealtime:"GitScribe provides real-time cost estimation",basedOn:"based on",selectedAiModelPricing:"Selected AI model pricing",estimatedTokenUsage:"Estimated token usage",documentationLengthComplexity:"Documentation length and complexity",costsDisplayedInStatistics:"Costs are displayed",duringGeneration:"during generation",github:"GitHub",exportDocumentation:"Export Documentation",downloadGeneratedDocumentation:"Download your generated documentation in multiple formats for use in documentation sites, wikis, or version control systems.",exportFormats:"Export Formats",markdownStandardFormat:"Markdown - Standard .md format for GitHub, GitLab, and documentation sites",markdownMermaidDescription:"Markdown + Mermaid - Markdown with AI-generated diagrams",mdxDescription:"MDX - Markdown with JSX components for interactive docs",openapiDescription:"OpenAPI - YAML format for API documentation",htmlDescription:"HTML - Fully styled HTML pages ready for deployment",eachFormatGenerated:"Each format is generated with section-specific content tailored to the selected section types.",commitToRepository:"Commit to Repository",automaticallyCommitDocumentation:"Automatically commit generated documentation directly to your GitHub repositories. Perfect for keeping documentation in sync with your codebase.",howItWorks:"How It Works",runWorkflowGenerate:"Run the workflow to generate documentation for your repository(ies)",reviewGeneratedDocumentation:"Review the generated documentation in the viewer",clickCommitToRepos:'Click "Commit to Repos" button (appears after workflow completes)',enterCommitMessage:'Enter a commit message (e.g., "docs: Add comprehensive documentation")',specifyTargetBranch:"Specify the target branch (default: main)",documentationCommitted:"Documentation is committed with the selected format and section types",workflowStopsAfterGeneration:"The workflow stops after generation, allowing you to review before committing.",controlOverCommits:"This ensures you have control over what gets committed to your repositories.",whenWorkingWithMultiple:"When working with multiple repositories, each repository receives its own dedicated documentation files based on your selected formats and sections.",eachRepositoryReceives:"Each repository receives its own dedicated documentation files based on your selected formats and sections.",commitOperationProcesses:"The commit operation processes all selected repositories in batch.",documentationStoredSeparately:"Each repository's documentation is stored separately and committed to the correct repository.",autoUpdateFeature:"Auto-Update Feature",enableAutoUpdateDescription:"Enable auto-update to automatically regenerate and commit documentation when your repository receives new commits or merges to the main branch.",automaticUpdates:"Automatic Updates",monitorsRepositories:"Monitors repositories every 5 minutes",detectsPushesMerges:"Detects pushes and merges to main branch",automaticallyRegenerates:"Automatically regenerates documentation",commitsUpdatedDocumentation:"Commits updated documentation with timestamp",multiRepoOverview:"GitScribe's multi-repository support allows you to process multiple GitHub repositories at once, saving time and effort when documenting multiple projects.",completeGuideToUsing:"Complete guide to using GitScribe",welcomeToGitScribe:"Welcome to GitScribe! An AI-powered documentation generation tool that automatically creates comprehensive documentation for your GitHub repositories using advanced AI agent workflows.",aiPoweredDocumentationTool:"AI-powered documentation generation tool",quickStart:"Quick Start",addOpenAiKey:"Add your OpenAI API key in the settings",optionalAddGitHubToken:"(Optional) Add a GitHub Personal Access Token for private repos",enterRepositoryUrlOrSelect:"Enter a GitHub repository URL or select multiple repositories",clickRunWorkflowStart:'Click "Run Workflow" to start the AI agent workflow',reviewEditCommit:"Review generated documentation, edit with AI Assistant, and commit",coreFeatures:"Core Features",directIntegration:"Direct integration with GitHub API for repository access and commits",processMultipleRepos:"Process multiple repositories simultaneously with batch operations",intelligentAgentSystem:"Intelligent agent system for automated documentation generation",multipleOutputFormats:"Multiple output formats and direct GitHub commits",outputFormatsDescription:"GitScribe supports multiple documentation formats to suit different needs:",standardMarkdownFormat:"Standard markdown format for GitHub, GitLab, and documentation sites",markdownWithDiagrams:"Markdown with AI-generated Mermaid diagrams for architecture and flows",markdownWithJsx:"Markdown with JSX components for interactive documentation",yamlFormatForApi:"YAML format for API documentation with endpoint specifications",fullyStyledHtml:"Fully styled HTML pages ready for deployment",documentationSections:"Documentation Sections",generateDifferentTypes:"Generate different types of documentation sections:",readmeDescription:"README - Project overview, installation, usage, and features",architectureDescription:"Architecture - System design, component structure, and data flow",apiReferenceDescription:"API Reference - Endpoint documentation, request/response schemas",componentsDescription:"Components - Component documentation with props and usage examples",testingCicdDescription:"Testing & CI/CD - Test setup, CI/CD pipeline, and deployment",changelogDescription:"Changelog - Version history and release notes",aiAgentWorkflow:"AI Agent Workflow",gitScribeUsesIntelligent:"GitScribe uses an intelligent agent system that processes repositories through multiple stages:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Validates and discovers repositories",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analyzes structure, tech stack, and complexity",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Creates structured documentation plan",docsWriter:"DocsWriter",generatesDocumentation:"- Generates documentation in selected formats",gitOps:"GitOps",commitsDocumentation:"- Commits documentation to repositories",learnMore:"Learn More",exploreOtherPages:"Explore the other pages in this documentation section for detailed information about each feature and how to use them effectively.",aiPoweredOverview:"GitScribe uses OpenAI's advanced language models to analyze your codebase and generate comprehensive, well-structured documentation. Our AI understands code context, relationships, and best practices to create documentation that's both accurate and readable.",gitScribeUsesOpenAI:"GitScribe uses OpenAI's advanced language models",completeApiDocumentation:"Complete API documentation for developers",agentWorkflowSystem:"Agent Workflow System",gitScribeUsesLangGraph:"GitScribe uses a LangGraph-style agent system for automated documentation generation:",agentWorkflowSteps:"// Agent Workflow Steps",agentState:"Agent State",workflowMaintainsSharedState:"The workflow maintains shared state between agents, including:",discoveredRepositories:"Discovered repositories",repositoryAnalyses:"Repository analyses",documentationPlans:"Documentation plans",generatedDocumentationByFormat:"Generated documentation (by format and section)",commitResults:"Commit results",githubService:"GitHub Service",langChainService:"LangChain Service",typeDefinitions:"Type Definitions",exampleUseCases:"Example use cases and workflows",example1SingleRepository:"Example 1: Single Repository",scenario:"Scenario",youWantToGenerate:"You want to generate comprehensive documentation for a single React project with multiple formats.",steps:"Steps",enterGitHubRepositoryUrl:"Enter GitHub repository URL:",selectOutputFormatsEg:"Select output formats (e.g., Markdown, MDX, HTML)",selectSectionTypesEg:"Select section types (e.g., README, Architecture, API)",watchWorkflowProgress:"Watch the workflow progress through discovery, analysis, planning, and writing",reviewGeneratedDocumentationSwitch:"Review generated documentation, switch between formats and sections",clickCommitToReposWhenReady:'Click "Commit to Repos" when ready to commit',example2MultipleRepositories:"Example 2: Multiple Repositories",youManageMultipleMicroservices:"You manage multiple microservices and want to document them all at once with consistent formatting.",clickSelectRepositories:'Click "Select repositories" and choose multiple repos from your GitHub account',selectOutputFormatsEgOpenAPI:"Select output formats (e.g., Markdown + OpenAPI for API docs)",monitorWorkflowProgress:"Monitor workflow progress for each repository",reviewEachRepositoryDocumentation:"Review each repository's documentation in separate tabs",switchBetweenFormatsSectionsForEach:"Switch between formats and sections for each repo",commitAllRepositoriesAtOnce:'Commit all repositories at once with "Commit to Repos"',example3AutoUpdateWorkflow:"Example 3: Auto-Update Workflow",youWantDocumentationToAutoUpdate:"You want documentation to automatically update when code changes.",selectRepositoriesInMultiRepoMode:"Select repositories in multi-repo mode",enableAutoUpdateForEach:"Enable auto-update for each repository (bell icon)",toggleGlobalAutoUpdateSwitch:"Toggle global auto-update switch",documentationWillAutoUpdate:"Documentation will auto-update on every push/merge to main",example4UsingAiAssistant:"Example 4: Using AI Assistant",youWantToImproveDocumentation:"You want to improve the generated documentation with AI help.",examplePrompts:"Example Prompts",addSectionExplainingInstallation:'"Add a section explaining the installation process"',makeApiDocumentationMoreDetailed:'"Make the API documentation section more detailed"',fixAllGrammarErrors:'"Fix all grammar errors"',restructureDocumentationForBetterFlow:'"Restructure the documentation for better flow"',needHelp:"Need Help?",wereHereToHelp:"We're here to help! If you're experiencing issues or have questions about GitScribe, here are the best ways to get support.",contactOptions:"Contact Options",emailSupport:"Email Support",getDirectHelpViaEmail:"Get direct help via email",githubIssues:"GitHub Issues",reportBugsOrRequestFeatures:"Report bugs or request features",openAnIssue:"Open an issue",commonIssues:"Common Issues",openaiApiKeyError:"OpenAI API Key Error",addOpenAiKeyInSettings:'Add your OpenAI API key in the Settings panel. Click the Settings icon, enter your key, and click "Save Changes".',githubRateLimiting:"GitHub Rate Limiting",addGitHubTokenInSettings:"Add a GitHub Personal Access Token in the Settings panel to increase rate limits and access private repositories.",requiredScopeRepo:"Required scope:",workflowNotStarting:"Workflow Not Starting",ensureYouHaveSelected:'Ensure you have selected at least one output format and one section type. The "Run Workflow" button requires both to be enabled.',documentationNotCommitting:"Documentation Not Committing",makeSureGitHubTokenHasRepoScope:"Make sure your GitHub token has the",checkOutComprehensiveDocumentation:"Check out our comprehensive documentation for detailed guides and API references.",howWeProtectAndHandle:"How we protect and handle your data",lastUpdated:"Last updated:",introduction:"Introduction",gitScribeCommittedToPrivacy:'GitScribe ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you use our service.',informationWeCollect:"Information We Collect",personalInformation:"Personal Information",weMayCollectPersonalInfo:"We may collect personal information such as email addresses when you create an account or contact us for support.",githubTokens:"GitHub Tokens",githubTokensStoredLocally:"GitHub Personal Access Tokens are stored locally in your browser's localStorage. We do not transmit or store these tokens on our servers.",usageData:"Usage Data",weMayCollectUsageData:"We may collect information about how you use our service, including repository URLs and documentation generation preferences.",howWeUseYourInformation:"How We Use Your Information",toProvideAndImprove:"To provide and improve our documentation generation service",toProcessYourRequests:"To process your requests and generate documentation",toCommunicateWithYou:"To communicate with you about your account or support requests",toAnalyzeUsagePatterns:"To analyze usage patterns and improve our service",dataSecurity:"Data Security",weImplementSecurityMeasures:"We implement appropriate security measures to protect your information. GitHub tokens are stored locally in your browser and never transmitted to our servers. All API communications are encrypted using HTTPS.",thirdPartyServices:"Third-Party Services",weUseFollowingThirdParty:"We use the following third-party services:",openaiForAiPowered:"OpenAI: For AI-powered documentation generation using GPT models",githubForRepositoryAccess:"GitHub: For repository access, file operations, and commits via GitHub API",localStorageForStoring:"LocalStorage: For storing user preferences, tokens, and project history locally in your browser",allDataStoredLocally:"All data is stored locally in your browser. GitHub tokens and API keys are never transmitted to our servers.",yourRights:"Your Rights",youHaveRightToAccess:"You have the right to access, update, or delete your personal information. You can manage your account settings or contact us at",contactUsPrivacy:"Contact Us",ifYouHaveQuestionsPrivacy:"If you have questions about this Privacy Policy, please contact us at",termsAndConditions:"Terms and conditions for using GitScribe",agreementToTerms:"Agreement to Terms",byAccessingOrUsing:'By accessing or using GitScribe ("the Service"), you agree to be bound by these Terms of Service. If you disagree with any part of these terms, you may not access the Service.',useOfService:"Use of Service",eligibility:"Eligibility",youMustBeAtLeast18:"You must be at least 18 years old or have parental consent to use this Service.",accountResponsibility:"Account Responsibility",youAreResponsibleForMaintaining:"You are responsible for maintaining the security of your account and any API keys or tokens you use with the Service.",acceptableUse:"Acceptable Use",youAgreeNotTo:"You agree not to:",useServiceForIllegalPurpose:"Use the Service for any illegal purpose",violateLawsOrRegulations:"Violate any laws or regulations",infringeOnIntellectualProperty:"Infringe on intellectual property rights",transmitMaliciousCode:"Transmit malicious code or viruses",attemptUnauthorizedAccess:"Attempt to gain unauthorized access to the Service",apiUsageAndCosts:"API Usage and Costs",gitScribeUsesOpenAIApi:"GitScribe uses OpenAI's API for AI-powered features. You are responsible for:",youAreResponsibleFor:"You are responsible for:",providingYourOwnOpenAiKey:"Providing your own OpenAI API key",allCostsAssociated:"All costs associated with API usage",managingYourApiKeySecurity:"Managing your API key security",intellectualProperty:"Intellectual Property",serviceOwnedByGitScribe:"The Service and its original content, features, and functionality are owned by GitScribe and are protected by international copyright, trademark, and other intellectual property laws.",limitationOfLiability:"Limitation of Liability",gitScribeProvidedAsIs:'GitScribe is provided "as is" without warranties of any kind. We are not liable for any damages arising from your use of the Service, including but not limited to data loss, documentation errors, or API costs.',changesToTerms:"Changes to Terms",weReserveRightToModify:"We reserve the right to modify these terms at any time. Continued use of the Service after changes constitutes acceptance of the new terms.",contactTerms:"Contact",forQuestionsAboutTerms:"For questions about these Terms, contact us at",howWeUseCookies:"How we use cookies and similar technologies",whatAreCookies:"What Are Cookies",cookiesAreSmallTextFiles:"Cookies are small text files stored on your device when you visit a website. They help websites remember your preferences and improve your browsing experience.",howWeUseCookiesTitle:"How We Use Cookies",essentialCookies:"Essential Cookies",theseCookiesAreNecessary:"These cookies are necessary for the Service to function. They include authentication tokens and session information.",preferenceCookies:"Preference Cookies",weUseLocalStorageToStore:"We use localStorage to store your preferences, such as GitHub tokens and UI settings. This data is stored locally in your browser and never transmitted to our servers.",analyticsCookies:"Analytics Cookies",weMayUseAnalyticsCookies:"We may use analytics cookies to understand how users interact with our Service and improve our features.",localStorageUsage:"LocalStorage Usage",gitScribeUsesBrowserLocalStorage:"GitScribe uses browser localStorage (not cookies) to store:",githubPersonalAccessTokensEncrypted:"GitHub Personal Access Tokens (encrypted locally)",userPreferencesAndSettings:"User preferences and settings",autoFollowRepositoryConfigurations:"Auto-follow repository configurations",thisDataRemainsOnDevice:"This data remains on your device and is never shared with third parties.",managingCookies:"Managing Cookies",youCanControlCookies:"You can control cookies through your browser settings. However, disabling essential cookies may affect the functionality of the Service.",toClearLocalStorageData:"To clear localStorage data, you can use your browser's developer tools or clear browsing data.",thirdPartyCookies:"Third-Party Cookies",weMayUseThirdPartyServices:"We may use third-party services that set their own cookies. These services include:",analyticsProviders:"Analytics providers (if applicable)",contactCookiePolicy:"Contact",forQuestionsAboutCookiePolicy:"For questions about our Cookie Policy, contact us at",pageNotFound:"Page Not Found",theRequestedPageCouldNotBeFound:"The requested page could not be found",thePageYoureLookingForDoesntExist:"The page you're looking for doesn't exist.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architecture",sectionApiReference:"API Reference",sectionComponents:"Components",sectionTestingCicd:"Testing & CI/CD",sectionChangelog:"Changelog",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",aiPoweredDocumentationGenerationForGitHub:"AI-powered documentation generation for GitHub repositories",requiredForAiPoweredDocumentationGeneration:"Required for AI-powered documentation generation.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Please provide a commit message",githubTokenRequiredForCommitting:"GitHub token is required for committing files",documentationNotFoundForRepository:"Documentation not found for this repository. Please generate documentation first.",successfullyCommittedToRepository:"Successfully committed documentation to 1 repository!",successfullyCommittedToRepositories:"Successfully committed documentation to {count} repositories!",failedToCommitToRepository:"Failed to commit to 1 repository",failedToCommitToRepositories:"Failed to commit to {count} repositories",failedToCommitDocumentation:"Failed to commit documentation",documentationHelper:"Documentation helper",clearConversationHistoryConfirm:"Clear conversation history?",readyToHelp:"Ready to help!",iCanHelpEditDocumentation:"I can help you edit and improve your documentation",editSections:"Edit sections",improveClarity:"Improve clarity",fixGrammar:"Fix grammar",aiIsThinking:"AI is thinking...",send:"Send",beSpecificForBetterResults:"Be specific for better results",pressEnterToSend:"Press Enter to send",errorEditingDocumentation:"Error editing documentation",unknownErrorOccurred:"Unknown error occurred",workflowFailed:"Workflow failed",viewCommit:"View commit",repositoryQualityScores:"Repository Quality Scores",folderStructureRefactorProposals:"Folder Structure Refactor Proposals",recommendedStructure:"Recommended Structure:",proposedMoves:"Proposed Moves",moreMoves:"more moves...",warnings:"Warnings",generatedRepositoryBadges:"Generated Repository Badges",badgeMarkdownCopiedToClipboard:"Badge markdown copied to clipboard!",copyBadgeMarkdown:"Copy Badge Markdown",pdfExportFailed:"PDF export failed"},fr:{aiPoweredGeneration:"Gnration de documentation alimente par IA",sourceSelection:"Slection de Source",clickToCollapse:"Cliquez pour rduire",clickToExpand:"Cliquez pour dvelopper",formats:"Formats",sections:"Sections",selectAtLeastOne:"Slectionnez au moins un format et une section",token:"Jeton",add:"Ajouter",change:"Changer",hide:"Masquer",openaiKey:"Cl OpenAI",saveChanges:"Enregistrer les Modifications",edit:"Modifier",save:"Enregistrer",editDocumentation:"Modifier la Documentation",editDocumentationPlaceholder:"Modifiez votre documentation ici...",runWorkflow:"Excuter le Workflow",startWritingDocumentation:"Commencer  crire la Documentation",generating:"Gnration...",documentation:"Documentation",noDocumentation:"Aucune documentation gnre pour le moment",export:"Exporter",commit:"Valider",settings:"Paramtres",statistics:"Statistiques",qualityScores:"Scores de Qualit",refactorProposals:"Propositions de Refactorisation",badges:"Badges",pdfExport:"Export PDF",clear:"Effacer",formatsLocked:"Les formats et sections sont verrouills aprs gnration.",runNewWorkflow:"Excutez un nouveau workflow pour les modifier.",agentWorkflow:"Workflow d'Agent",useAiAgents:"Utiliser des agents IA pour le pipeline automatis",singleRepo:"Dpt Unique",multiRepo:"Multi-Dpts",githubUrl:"URL GitHub",selectRepos:"Slectionner les Dpts",selectAtLeastOneRepo:"Veuillez slectionner au moins un dpt",selectAtLeastOneFormat:"Veuillez slectionner au moins un format de sortie",selectAtLeastOneSection:"Veuillez slectionner au moins un type de section de documentation",pleaseProvideUrl:"Veuillez fournir une URL GitHub",reviewAndCommit:'Examinez la documentation ci-dessous, puis cliquez sur "Valider dans les Dpts" si vous souhaitez la valider.',commitToRepos:"Valider dans les Dpts",committing:"Validation...",clearDocumentation:"Effacer la documentation pour modifier les formats/sections",toChangeFormats:"pour modifier les formats/sections",gitScribe:"GitScribe",aiPowered:"ALIMENT PAR IA",aiPoweredDocumentationTitle:"Documentation Alimente par IA pour les Dpts GitHub",aiPoweredDocumentationDescription:"Gnrez automatiquement une documentation complte  partir d'un ou plusieurs dpts GitHub. Aliment par des agents IA qui analysent, planifient et rdigent la documentation pour votre base de code.",githubIntegration:"Intgration GitHub",githubIntegrationDescription:"Gnrer de la documentation  partir de n'importe quel dpt GitHub",multiRepoSupport:"Support Multi-Dpts",multiRepoSupportDescription:"Gnrer de la documentation pour plusieurs dpts simultanment",autoCommitExport:"Validation & Export Automatiques",autoCommitExportDescription:"Valider automatiquement la documentation dans les dpts ou la tlcharger en Markdown",readyToStart:"Prt  commencer?",generateDocumentationFromRepos:"Gnrer de la documentation  partir de dpts GitHub",noAccountNeeded:"Aucun compte requis - Commencez immdiatement!",startImmediately:"Commencez immdiatement!",whyChooseOurTool:"Pourquoi Choisir Notre Outil de Documentation",whyChooseOurToolDescription:"Rationalisez votre flux de travail de documentation avec une gnration alimente par IA",aiAgentWorkflows:"Workflows d'Agents IA",aiAgentWorkflowsDescription:"Systme d'agents automatis qui dcouvre, analyse, planifie et rdige la documentation pour vos dpts.",autoUpdateFollow:"Mise  Jour & Suivi Automatiques",autoUpdateFollowDescription:"Dtecter automatiquement les changements et rgnrer la documentation lorsque les dpts sont mis  jour.",githubIntegrationFeature:"Intgration GitHub",githubIntegrationFeatureDescription:"Intgration de validation transparente et accs direct aux dpts pour votre flux de travail de documentation.",readyToGetStarted:"Prt  commencer?",joinDevelopers:"Rejoignez les dveloppeurs et les quipes qui automatisent leur flux de travail de documentation",startGeneratingDocumentation:"Commencer  Gnrer la Documentation",footerDescription:"Gnration de documentation alimente par IA pour les dpts GitHub avec support multi-dpts, workflows d'agents et fonctionnalits de mise  jour automatique.",madeWith:"Fait avec",forDevelopers:"pour les dveloppeurs",features:"Fonctionnalits",resources:"Ressources",connect:"Se Connecter",contactUs:"Nous Contacter",Donate:"Faire un don",buyMeACoffee:"Offrez-moi un caf",supportGitScribe:"Soutenez GitScribe",supportGitScribeDevelopment:"Aidez-nous  continuer  dvelopper et amliorer GitScribe",ifYouFindGitScribeUseful:"Si vous trouvez GitScribe utile et souhaitez soutenir son dveloppement, pensez  nous offrir un caf!",whySupport:"Pourquoi soutenir GitScribe?",gitScribeIsFreeAndOpenSource:"GitScribe est gratuit et open-source, construit avec passion pour la communaut des dveloppeurs.",yourSupportHelpsUs:"Votre soutien nous aide :",newFeatures:"Nouvelles Fonctionnalits",developNewFeaturesAndImprovements:"Dvelopper de nouvelles fonctionnalits et amliorations bases sur les commentaires des utilisateurs",maintenanceAndUpdates:"Maintenance & Mises  Jour",keepGitScribeRunningSmoothly:"Maintenir GitScribe en bon fonctionnement avec des mises  jour rgulires et des corrections de bugs",freeAndOpenSource:"Gratuit & Open Source",maintainFreeAccessForEveryone:"Maintenir l'accs gratuit pour tous tout en amliorant l'outil",otherWaysToSupport:"Autres Faons de Soutenir",starOnGitHub:"toile sur GitHub",starringOurRepository:"toiler notre dpt aide les autres  dcouvrir GitScribe",visitGitHub:"Visiter GitHub",shareFeedback:"Partager des Commentaires",letUsKnowWhatYouThink:"Faites-nous savoir ce que vous pensez et comment nous pouvons nous amliorer",thankYou:"Merci!",everyContributionMatters:"Chaque contribution compte, aussi petite soit-elle.",whetherThroughDonations:"Que ce soit par des dons, des toiles GitHub ou des commentaires,",weAppreciateYourSupport:"nous apprcions votre soutien pour rendre GitScribe meilleur pour tous.",allRightsReserved:"Tous droits rservs",privacyPolicy:"Politique de Confidentialit",termsOfService:"Conditions d'Utilisation",cookiePolicy:"Politique des Cookies",overview:"Aperu",gettingStarted:"Pour Commencer",supportedFormats:"Formats Pris en Charge",repositoryAccess:"Accs au Dpt",fileAnalysis:"Analyse de Fichiers",codeUnderstanding:"Comprhension du Code",createGitHubToken:"Crer un Jeton d'Accs Personnel GitHub",addTokenToGitScribe:"Ajouter le Jeton  GitScribe",startGenerating:"Commencer la Gnration",requiredScopes:"Portes requises",forPrivateRepos:"pour les dpts privs et les commits",forPublicRepos:"Pour les dpts publics, un jeton est facultatif mais recommand pour viter les limites de dbit",enterRepositoryUrl:"Entrez l'URL de votre dpt",chooseOutputFormats:"Choisissez les formats de sortie et les types de sections",clickRunWorkflow:'Cliquez sur "Excuter le Workflow"',selectMultipleRepositories:"Slectionner Plusieurs Dpts",aiPoweredAnalysis:"Analyse alimente par IA",automaticallyAnalyze:"Analyser automatiquement",connectToAnyRepository:"Se connecter  n'importe quel dpt GitHub",usingPersonalAccessToken:"en utilisant votre Jeton d'Accs Personnel",goToGitHubSettings:"Allez dans les Paramtres GitHub",developerSettings:"Paramtres du dveloppeur",personalAccessTokens:"Jetons d'accs personnels",tokensClassic:"Jetons (classique)",enterYourToken:"Entrez votre jeton",githubTokenField:"dans le champ Jeton GitHub",documentationEditorSettings:"dans les paramtres de l'diteur de documentation",clickSaveChanges:'Cliquez sur "Enregistrer les Modifications"',persistIt:"pour le conserver",egOwnerRepo:"par ex., propritaire/dpt",thenClickRunWorkflow:'puis cliquez sur "Excuter le Workflow"',startAiAgentWorkflow:"pour dmarrer le workflow de l'agent IA",youCanUseAnyOfTheseFormats:"Vous pouvez utiliser l'un de ces formats pour spcifier un dpt",toSpecifyRepository:"pour spcifier un dpt",seamlesslyConnectWithGitHub:"Connectez-vous facilement  GitHub pour gnrer de la documentation  partir de vos dpts",generateDocumentationFromRepositories:"gnrer de la documentation  partir de vos dpts",gitScribeIntegratesDirectly:"GitScribe s'intgre directement avec l'API GitHub",accessYourRepositories:"pour accder  vos dpts",generateComprehensiveDocumentation:"et gnrer une documentation complte",whetherPublicOrPrivate:"Que vous travailliez avec des dpts publics ou privs",ourIntegrationMakesItEasy:"notre intgration facilite",documentYourCodebase:"la documentation de votre base de code",connectToAnyGitHubRepository:"Se connecter  n'importe quel dpt GitHub",automaticallyAnalyzeRepository:"Analyser automatiquement le dpt",repositoryStructure:"structure du dpt",codeFiles:"fichiers de code",configuration:"et configuration",aiPoweredAnalysisOfCodebase:"Analyse alimente par IA de votre base de code",generateAccurateDocumentation:"pour gnrer une documentation prcise",tokenOptionalButRecommended:"Pour les dpts publics, un jeton est facultatif mais recommand",avoidRateLimits:"pour viter les limites de dbit",multiRepoSupportTitle:"Support Multi-Dpts",generateDocumentationForMultiple:"Gnrer de la documentation pour plusieurs",simultaneously:"simultanment",selectMultipleRepositoriesTitle:"Slectionner Plusieurs Dpts",batchProcessing:"Traitement par Lots",unifiedDocumentation:"Documentation Unifie",individualDocumentation:"Documentation Individuelle",aiPoweredGenerationTitle:"Gnration Alimente par IA",aiPoweredGenerationDescription:"Exploitez l'IA avance pour crer une documentation complte et prcise",exportCommitTitle:"Export & Commit",exportCommitDescription:"Exporter la documentation ou la committer directement dans vos dpts",documentationTitle:"Documentation",apiReferenceTitle:"Rfrence API",examplesTitle:"Exemples",supportTitle:"Support",privacyPolicyTitle:"Politique de Confidentialit",termsOfServiceTitle:"Conditions d'Utilisation",cookiePolicyTitle:"Politique des Cookies",assistantGreeting:"Salut! Je suis votre assistant IA. Je peux vous aider  modifier et amliorer votre documentation! ",assistantCapabilities:"Je peux:",assistantRewriteSections:"Rcrire des sections",assistantImproveClarity:"Amliorer la clart et la lisibilit",assistantFixGrammar:"Corriger la grammaire et l'orthographe",assistantAddRemoveContent:"Ajouter ou supprimer du contenu",assistantRestructure:"Restructurer la documentation",assistantFormatText:"Mieux formater le texte",assistantTellMeWhatToChange:"Dites-moi simplement ce que vous aimeriez changer!",assistantErrorNoDocumentation:"Le mode d'dition de documentation ncessite que la documentation soit charge. Veuillez d'abord gnrer la documentation.",assistantErrorUnknown:"Dsol, j'ai rencontr une erreur",assistantErrorApiKey:"Erreur de configuration: La cl API OpenAI est manquante. Veuillez vrifier vos variables d'environnement.",assistantErrorParse:`J'ai eu du mal  comprendre cette demande. Pourriez-vous essayer de la reformuler? Par exemple:
 "Ajouter une section de tarification"
 "Changer la couleur principale en bleu"
 "Mettre  jour le titre principal"`,assistantErrorNetwork:"Erreur rseau: Veuillez vrifier votre connexion Internet et ressayer.",assistantPlaceholderLoading:"L'IA gnre votre demande...",assistantPlaceholderReady:"Demandez-moi n'importe quoi sur votre documentation...",assistantTitleSend:"Envoyer le message",assistantTitleType:"Tapez un message  envoyer",assistantClearConversation:"Effacer la conversation",selectRepositories:"Slectionner les Dpts",selected:"slectionn",close:"Fermer",searchRepositories:"Rechercher des dpts...",visibility:"Visibilit:",all:"Tous",public:"Public",private:"Priv",refresh:"Actualiser",loadingRepositories:"Chargement des dpts...",noRepositoriesMatch:"Aucun dpt ne correspond  votre recherche.",noRepositoriesFound:"Aucun dpt trouv.",lastPushed:"Dernire mise  jour:",repositoriesSelected:"dpts slectionns",repositorySelected:"dpt slectionn",noRepositoriesSelected:"Aucun dpt slectionn",clearAll:"Tout Effacer",done:"Termin",repositoryDiscovery:"Dcouverte de Dpt",repositoryAnalysis:"Analyse de Dpt",qualityAnalysis:"Analyse de Qualit",refactorProposal:"Proposition de Refactorisation",documentationPlanning:"Planification de Documentation",documentationWriting:"Rdaction de Documentation",gitOperations:"Oprations Git",complete:"Termin",running:"En cours...",processing:"Traitement:",completed:" Termin",error:"Erreur:",automatedPipeline:"Pipeline automatis de gnration de documentation",outputFormats:"Formats de Sortie",sectionTypes:"Types de Sections",pleaseSelectAtLeastOneRepository:"Veuillez slectionner au moins un dpt",noWorkflowState:"Aucun tat de workflow disponible",noDocumentationToCommit:"Aucune documentation  committer",commitFailed:"chec du commit",generatedFeatures:"Fonctionnalits Gnres",workflowComplete:"Workflow Termin!",generatedDocumentationFor:"Documentation gnre pour",repository:"dpt",repositories:"dpts",committedTo:"Committ dans",backTo:"Retour ",cancel:"Annuler",branch:"Branche",commitMessage:"Message de Commit",scrollToTop:"Faire dfiler vers le haut",hideAiAssistant:"Masquer l'Assistant IA",showAiAssistant:"Afficher l'Assistant IA",enableAutoUpdate:"Activer la mise  jour automatique lors du push/merge",disableAutoUpdate:"Dsactiver la mise  jour automatique",format:"Format:",section:"Section:",addDocumentation:"Ajouter de la documentation",ownerRepoOrGithub:"propritaire/dpt ou github.com/propritaire/dpt",ownerRepoPlaceholder:"propritaire/dpt",keyFeatures:"Fonctionnalits Cls",selectAndProcessMultiple:"Slectionner et traiter plusieurs dpts en une seule opration",eachRepositoryGetsOwn:"Chaque dpt obtient son propre fichier de documentation ddi",batchCommit:"Commit par Lots",commitToAllSelected:"Committer la documentation dans tous les dpts slectionns en un clic",howToUse:"Comment Utiliser",selectMultipleReposStep:"1. Slectionner Plusieurs Dpts",clickSelectReposButton:'Cliquez sur le bouton "Slectionner les dpts" pour parcourir et slectionner parmi vos dpts GitHub. Vous pouvez rechercher et filtrer par visibilit.',browseAndSelectFromGitHub:"parcourir et slectionner parmi vos dpts GitHub",searchAndFilterByVisibility:"Vous pouvez rechercher et filtrer par visibilit",chooseOutputFormatsSections:"2. Choisir les Formats de Sortie et Sections",selectOneOrMoreFormats:"Slectionnez un ou plusieurs formats de sortie",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"et types de sections de documentation",readmeArchitectureApi:"(README, Architecture, API, etc.)",runWorkflowStep:"3. Excuter le Workflow",clickRunWorkflowToStart:`Cliquez sur "Excuter le Workflow" pour dmarrer le workflow de l'agent IA`,systemWillProcessEachRepo:"Le systme traitera chaque dpt",throughDiscoveryAnalysisPlanning:" travers les tapes de dcouverte, analyse, planification et rdaction",reviewCommitStep:"4. Examiner et Committer",reviewDocumentationInTabs:"Examinez la documentation dans des onglets spars pour chaque dpt",switchBetweenFormatsSections:"Basculez entre les formats et sections",whenReadyClickCommitToRepos:'Lorsque vous tes prt, cliquez sur "Committer dans les Dpts"',commitAllAtOnce:"pour tout committer en une fois",benefits:"Avantages",saveTimeProcessingMultiple:"Gagnez du temps en traitant plusieurs dpts simultanment",maintainConsistentFormat:"Maintenez un format de documentation cohrent entre les projets",easyManagementWithTabs:"Gestion facile avec interface  onglets pour chaque dpt",batchCommitFunctionality:"Fonctionnalit de commit par lots pour un workflow efficace",aiModels:"Modles IA",gitScribeSupportsMultipleModels:"GitScribe prend en charge plusieurs modles OpenAI",chooseBasedOnNeeds:"Choisissez selon vos besoins",speedCostQuality:"pour la vitesse, le cot et la qualit",gpt4oMiniRecommended:"GPT-4o Mini (Recommand)",fastAndCostEffective:"Rapide et rentable pour la plupart des tches de documentation",bestBalanceSpeedQuality:"Meilleur quilibre entre vitesse et qualit",gpt4o:"GPT-4o",mostAdvancedModel:"Modle le plus avanc",complexCodebases:"pour les bases de code complexes",highestQualityHigherCost:"Qualit maximale, cot plus lev",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Performance et prcision quilibres",goodForLargeRepos:"Bon pour les grands dpts",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Rapide et conomique",simpleProjects:"pour les projets simples",lowestCostOption:"Option la moins chre",youCanChangeModel:"Vous pouvez changer le modle",settingsPanel:"dans le panneau Paramtres",realtimeCostEstimation:"Estimation des cots en temps rel",statisticsSidebar:"est affich dans la barre latrale Statistiques",aiAssistant:"Assistant IA",aiAssistantFeature:"La fonctionnalit Assistant IA vous permet",interactivelyEditImprove:"de modifier et amliorer votre documentation de manire interactive",rewriteSectionsForClarity:"Rcrire des sections pour plus de clart",fixGrammarSpellingErrors:"Corriger les erreurs de grammaire et d'orthographe",addRemoveContentBasedOnNeeds:"Ajouter ou supprimer du contenu selon vos besoins",restructureDocumentation:"Restructurer la documentation pour un meilleur flux",formatTextImproveReadability:"Formater le texte et amliorer la lisibilit",costEstimation:"Estimation des Cots",gitScribeProvidesRealtime:"GitScribe fournit une estimation des cots en temps rel",basedOn:"bas sur",selectedAiModelPricing:"Tarification du modle IA slectionn",estimatedTokenUsage:"Utilisation estime des tokens",documentationLengthComplexity:"Longueur et complexit de la documentation",costsDisplayedInStatistics:"Les cots sont affichs",duringGeneration:"pendant la gnration",github:"GitHub",exportDocumentation:"Exporter la Documentation",downloadGeneratedDocumentation:"Tlchargez votre documentation gnre dans plusieurs formats pour une utilisation dans des sites de documentation, wikis ou systmes de contrle de version.",exportFormats:"Formats d'Export",markdownStandardFormat:"Markdown - Format .md standard pour GitHub, GitLab et sites de documentation",markdownMermaidDescription:"Markdown + Mermaid - Markdown avec diagrammes gnrs par IA",mdxDescription:"MDX - Markdown avec composants JSX pour une documentation interactive",openapiDescription:"OpenAPI - Format YAML pour la documentation API",htmlDescription:"HTML - Pages HTML entirement stylises prtes pour le dploiement",eachFormatGenerated:"Chaque format est gnr avec un contenu spcifique  la section adapt aux types de sections slectionns.",commitToRepository:"Valider dans le Dpt",automaticallyCommitDocumentation:"Validez automatiquement la documentation gnre directement dans vos dpts GitHub. Parfait pour garder la documentation synchronise avec votre base de code.",howItWorks:"Comment a Marche",runWorkflowGenerate:"Excutez le workflow pour gnrer la documentation pour votre/vos dpt(s)",reviewGeneratedDocumentation:"Examinez la documentation gnre dans la visionneuse",clickCommitToRepos:'Cliquez sur le bouton "Valider dans les Dpts" (apparat aprs la fin du workflow)',enterCommitMessage:'Entrez un message de commit (par ex., "docs: Ajouter une documentation complte")',specifyTargetBranch:"Spcifiez la branche cible (par dfaut: main)",documentationCommitted:"La documentation est valide avec le format et les types de sections slectionns",workflowStopsAfterGeneration:"Le workflow s'arrte aprs la gnration, vous permettant de rviser avant de valider.",controlOverCommits:"Cela garantit que vous avez le contrle sur ce qui est valid dans vos dpts.",whenWorkingWithMultiple:"Lorsque vous travaillez avec plusieurs dpts, chaque dpt reoit ses propres fichiers de documentation ddis bass sur vos formats et sections slectionns.",eachRepositoryReceives:"Chaque dpt reoit ses propres fichiers de documentation ddis bass sur vos formats et sections slectionns.",commitOperationProcesses:"L'opration de commit traite tous les dpts slectionns par lots.",documentationStoredSeparately:"La documentation de chaque dpt est stocke sparment et valide dans le bon dpt.",autoUpdateFeature:"Fonctionnalit de Mise  Jour Automatique",enableAutoUpdateDescription:"Activez la mise  jour automatique pour rgnrer et valider automatiquement la documentation lorsque votre dpt reoit de nouveaux commits ou fusions vers la branche principale.",automaticUpdates:"Mises  Jour Automatiques",monitorsRepositories:"Surveille les dpts toutes les 5 minutes",detectsPushesMerges:"Dtecte les push et fusions vers la branche principale",automaticallyRegenerates:"Rgnre automatiquement la documentation",commitsUpdatedDocumentation:"Valide la documentation mise  jour avec horodatage",multiRepoOverview:"Le support multi-dpts de GitScribe vous permet de traiter plusieurs dpts GitHub  la fois, conomisant du temps et des efforts lors de la documentation de plusieurs projets.",completeGuideToUsing:"Guide complet pour utiliser GitScribe",welcomeToGitScribe:"Bienvenue sur GitScribe! Un outil de gnration de documentation aliment par IA qui cre automatiquement une documentation complte pour vos dpts GitHub en utilisant des workflows d'agents IA avancs.",aiPoweredDocumentationTool:"Outil de gnration de documentation aliment par IA",quickStart:"Dmarrage Rapide",addOpenAiKey:"Ajoutez votre cl API OpenAI dans les paramtres",optionalAddGitHubToken:"(Optionnel) Ajoutez un Token d'Accs Personnel GitHub pour les dpts privs",enterRepositoryUrlOrSelect:"Entrez une URL de dpt GitHub ou slectionnez plusieurs dpts",clickRunWorkflowStart:`Cliquez sur "Excuter le Workflow" pour dmarrer le workflow de l'agent IA`,reviewEditCommit:"Examinez la documentation gnre, modifiez avec l'Assistant IA et validez",coreFeatures:"Fonctionnalits Principales",directIntegration:"Intgration directe avec l'API GitHub pour l'accs aux dpts et les commits",processMultipleRepos:"Traiter plusieurs dpts simultanment avec des oprations par lots",intelligentAgentSystem:"Systme d'agents intelligent pour la gnration automatise de documentation",multipleOutputFormats:"Plusieurs formats de sortie et commits GitHub directs",outputFormatsDescription:"GitScribe prend en charge plusieurs formats de documentation pour rpondre  diffrents besoins:",standardMarkdownFormat:"Format markdown standard pour GitHub, GitLab et sites de documentation",markdownWithDiagrams:"Markdown avec diagrammes Mermaid gnrs par IA pour l'architecture et les flux",markdownWithJsx:"Markdown avec composants JSX pour une documentation interactive",yamlFormatForApi:"Format YAML pour la documentation API avec spcifications d'endpoints",fullyStyledHtml:"Pages HTML entirement stylises prtes pour le dploiement",documentationSections:"Sections de Documentation",generateDifferentTypes:"Gnrer diffrents types de sections de documentation:",readmeDescription:"README - Aperu du projet, installation, utilisation et fonctionnalits",architectureDescription:"Architecture - Conception du systme, structure des composants et flux de donnes",apiReferenceDescription:"Rfrence API - Documentation des endpoints, schmas de requte/rponse",componentsDescription:"Composants - Documentation des composants avec props et exemples d'utilisation",testingCicdDescription:"Tests & CI/CD - Configuration des tests, pipeline CI/CD et dploiement",changelogDescription:"Changelog - Historique des versions et notes de version",aiAgentWorkflow:"Workflow d'Agent IA",gitScribeUsesIntelligent:"GitScribe utilise un systme d'agents intelligent qui traite les dpts  travers plusieurs tapes:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Valide et dcouvre les dpts",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analyse la structure, la pile technologique et la complexit",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Cre un plan de documentation structur",docsWriter:"DocsWriter",generatesDocumentation:"- Gnre la documentation dans les formats slectionns",gitOps:"GitOps",commitsDocumentation:"- Valide la documentation dans les dpts",learnMore:"En Savoir Plus",exploreOtherPages:"Explorez les autres pages de cette section de documentation pour des informations dtailles sur chaque fonctionnalit et comment les utiliser efficacement.",aiPoweredOverview:"GitScribe utilise les modles de langage avancs d'OpenAI pour analyser votre base de code et gnrer une documentation complte et bien structure. Notre IA comprend le contexte du code, les relations et les meilleures pratiques pour crer une documentation  la fois prcise et lisible.",gitScribeUsesOpenAI:"GitScribe utilise les modles de langage avancs d'OpenAI",completeApiDocumentation:"Documentation API complte pour les dveloppeurs",agentWorkflowSystem:"Systme de Workflow d'Agents",gitScribeUsesLangGraph:"GitScribe utilise un systme d'agents de style LangGraph pour la gnration automatise de documentation:",agentWorkflowSteps:"// tapes du Workflow d'Agents",agentState:"tat de l'Agent",workflowMaintainsSharedState:"Le workflow maintient un tat partag entre les agents, incluant:",discoveredRepositories:"Dpts dcouverts",repositoryAnalyses:"Analyses de dpts",documentationPlans:"Plans de documentation",generatedDocumentationByFormat:"Documentation gnre (par format et section)",commitResults:"Rsultats des commits",githubService:"Service GitHub",langChainService:"Service LangChain",typeDefinitions:"Dfinitions de Types",exampleUseCases:"Cas d'utilisation et workflows d'exemple",example1SingleRepository:"Exemple 1: Dpt Unique",scenario:"Scnario",youWantToGenerate:"Vous souhaitez gnrer une documentation complte pour un projet React unique avec plusieurs formats.",steps:"tapes",enterGitHubRepositoryUrl:"Entrez l'URL du dpt GitHub:",selectOutputFormatsEg:"Slectionnez les formats de sortie (par ex., Markdown, MDX, HTML)",selectSectionTypesEg:"Slectionnez les types de sections (par ex., README, Architecture, API)",watchWorkflowProgress:"Suivez la progression du workflow  travers la dcouverte, l'analyse, la planification et la rdaction",reviewGeneratedDocumentationSwitch:"Examinez la documentation gnre, basculez entre les formats et sections",clickCommitToReposWhenReady:'Cliquez sur "Committer dans les Dpts" lorsque vous tes prt  committer',example2MultipleRepositories:"Exemple 2: Plusieurs Dpts",youManageMultipleMicroservices:"Vous grez plusieurs microservices et souhaitez les documenter tous en mme temps avec un formatage cohrent.",clickSelectRepositories:'Cliquez sur "Slectionner les dpts" et choisissez plusieurs dpts de votre compte GitHub',selectOutputFormatsEgOpenAPI:"Slectionnez les formats de sortie (par ex., Markdown + OpenAPI pour la documentation API)",monitorWorkflowProgress:"Surveillez la progression du workflow pour chaque dpt",reviewEachRepositoryDocumentation:"Examinez la documentation de chaque dpt dans des onglets spars",switchBetweenFormatsSectionsForEach:"Basculez entre les formats et sections pour chaque dpt",commitAllRepositoriesAtOnce:'Committer tous les dpts en une fois avec "Committer dans les Dpts"',example3AutoUpdateWorkflow:"Exemple 3: Workflow de Mise  Jour Automatique",youWantDocumentationToAutoUpdate:"Vous souhaitez que la documentation se mette  jour automatiquement lorsque le code change.",selectRepositoriesInMultiRepoMode:"Slectionnez les dpts en mode multi-dpts",enableAutoUpdateForEach:"Activez la mise  jour automatique pour chaque dpt (icne de cloche)",toggleGlobalAutoUpdateSwitch:"Basculez l'interrupteur de mise  jour automatique globale",documentationWillAutoUpdate:"La documentation se mettra  jour automatiquement  chaque push/merge vers main",example4UsingAiAssistant:"Exemple 4: Utilisation de l'Assistant IA",youWantToImproveDocumentation:"Vous souhaitez amliorer la documentation gnre avec l'aide de l'IA.",examplePrompts:"Exemples de Prompts",addSectionExplainingInstallation:`"Ajouter une section expliquant le processus d'installation"`,makeApiDocumentationMoreDetailed:'"Rendre la section de documentation API plus dtaille"',fixAllGrammarErrors:'"Corriger toutes les erreurs de grammaire"',restructureDocumentationForBetterFlow:'"Restructurer la documentation pour un meilleur flux"',needHelp:"Besoin d'Aide?",wereHereToHelp:"Nous sommes l pour vous aider! Si vous rencontrez des problmes ou avez des questions sur GitScribe, voici les meilleures faons d'obtenir de l'aide.",contactOptions:"Options de Contact",emailSupport:"Support par Email",getDirectHelpViaEmail:"Obtenez de l'aide directe par email",githubIssues:"Problmes GitHub",reportBugsOrRequestFeatures:"Signaler des bugs ou demander des fonctionnalits",openAnIssue:"Ouvrir un problme",commonIssues:"Problmes Courants",openaiApiKeyError:"Erreur de Cl API OpenAI",addOpenAiKeyInSettings:`Ajoutez votre cl API OpenAI dans le panneau Paramtres. Cliquez sur l'icne Paramtres, entrez votre cl et cliquez sur "Enregistrer les Modifications".`,githubRateLimiting:"Limitation de Dbit GitHub",addGitHubTokenInSettings:"Ajoutez un Token d'Accs Personnel GitHub dans le panneau Paramtres pour augmenter les limites de dbit et accder aux dpts privs.",requiredScopeRepo:"Porte requise:",workflowNotStarting:"Workflow Ne Dmarre Pas",ensureYouHaveSelected:`Assurez-vous d'avoir slectionn au moins un format de sortie et un type de section. Le bouton "Excuter le Workflow" ncessite que les deux soient activs.`,documentationNotCommitting:"Documentation Ne Committe Pas",makeSureGitHubTokenHasRepoScope:"Assurez-vous que votre token GitHub a la",checkOutComprehensiveDocumentation:"Consultez notre documentation complte pour des guides dtaills et des rfrences API.",howWeProtectAndHandle:"Comment nous protgeons et grons vos donnes",lastUpdated:"Dernire mise  jour:",introduction:"Introduction",gitScribeCommittedToPrivacy:`GitScribe ("nous", "notre" ou "nos") s'engage  protger votre vie prive. Cette Politique de Confidentialit explique comment nous collectons, utilisons et protgeons vos informations lorsque vous utilisez notre service.`,informationWeCollect:"Informations que Nous Collectons",personalInformation:"Informations Personnelles",weMayCollectPersonalInfo:"Nous pouvons collecter des informations personnelles telles que les adresses email lorsque vous crez un compte ou nous contactez pour obtenir de l'aide.",githubTokens:"Tokens GitHub",githubTokensStoredLocally:"Les Tokens d'Accs Personnel GitHub sont stocks localement dans le localStorage de votre navigateur. Nous ne transmettons ni ne stockons ces tokens sur nos serveurs.",usageData:"Donnes d'Utilisation",weMayCollectUsageData:"Nous pouvons collecter des informations sur la faon dont vous utilisez notre service, y compris les URLs des dpts et les prfrences de gnration de documentation.",howWeUseYourInformation:"Comment Nous Utilisons Vos Informations",toProvideAndImprove:"Pour fournir et amliorer notre service de gnration de documentation",toProcessYourRequests:"Pour traiter vos demandes et gnrer de la documentation",toCommunicateWithYou:"Pour communiquer avec vous concernant votre compte ou vos demandes d'aide",toAnalyzeUsagePatterns:"Pour analyser les modles d'utilisation et amliorer notre service",dataSecurity:"Scurit des Donnes",weImplementSecurityMeasures:"Nous mettons en place des mesures de scurit appropries pour protger vos informations. Les tokens GitHub sont stocks localement dans votre navigateur et ne sont jamais transmis  nos serveurs. Toutes les communications API sont cryptes en utilisant HTTPS.",thirdPartyServices:"Services Tiers",weUseFollowingThirdParty:"Nous utilisons les services tiers suivants:",openaiForAiPowered:"OpenAI: Pour la gnration de documentation alimente par IA en utilisant les modles GPT",githubForRepositoryAccess:"GitHub: Pour l'accs aux dpts, les oprations sur fichiers et les commits via l'API GitHub",localStorageForStoring:"LocalStorage: Pour stocker les prfrences utilisateur, tokens et historique de projet localement dans votre navigateur",allDataStoredLocally:"Toutes les donnes sont stockes localement dans votre navigateur. Les tokens GitHub et les cls API ne sont jamais transmis  nos serveurs.",yourRights:"Vos Droits",youHaveRightToAccess:"Vous avez le droit d'accder, de mettre  jour ou de supprimer vos informations personnelles. Vous pouvez grer les paramtres de votre compte ou nous contacter ",contactUsPrivacy:"Nous Contacter",ifYouHaveQuestionsPrivacy:"Si vous avez des questions concernant cette Politique de Confidentialit, veuillez nous contacter ",termsAndConditions:"Termes et conditions d'utilisation de GitScribe",agreementToTerms:"Acceptation des Termes",byAccessingOrUsing:`En accdant ou en utilisant GitScribe ("le Service"), vous acceptez d'tre li par ces Conditions d'Utilisation. Si vous n'tes pas d'accord avec une partie de ces termes, vous ne pouvez pas accder au Service.`,useOfService:"Utilisation du Service",eligibility:"ligibilit",youMustBeAtLeast18:"Vous devez avoir au moins 18 ans ou avoir le consentement parental pour utiliser ce Service.",accountResponsibility:"Responsabilit du Compte",youAreResponsibleForMaintaining:"Vous tes responsable de maintenir la scurit de votre compte et de toutes les cls API ou tokens que vous utilisez avec le Service.",acceptableUse:"Utilisation Acceptable",youAgreeNotTo:"Vous acceptez de ne pas:",useServiceForIllegalPurpose:"Utiliser le Service  des fins illgales",violateLawsOrRegulations:"Violer toute loi ou rglementation",infringeOnIntellectualProperty:"Porter atteinte aux droits de proprit intellectuelle",transmitMaliciousCode:"Transmettre du code malveillant ou des virus",attemptUnauthorizedAccess:"Tenter d'obtenir un accs non autoris au Service",apiUsageAndCosts:"Utilisation et Cots de l'API",gitScribeUsesOpenAIApi:"GitScribe utilise l'API d'OpenAI pour les fonctionnalits alimentes par IA. Vous tes responsable de:",youAreResponsibleFor:"Vous tes responsable de:",providingYourOwnOpenAiKey:"Fournir votre propre cl API OpenAI",allCostsAssociated:"Tous les cots associs  l'utilisation de l'API",managingYourApiKeySecurity:"Grer la scurit de votre cl API",intellectualProperty:"Proprit Intellectuelle",serviceOwnedByGitScribe:"Le Service et son contenu original, fonctionnalits et fonctionnalits sont la proprit de GitScribe et sont protgs par les lois internationales sur le droit d'auteur, les marques de commerce et autres lois sur la proprit intellectuelle.",limitationOfLiability:"Limitation de Responsabilit",gitScribeProvidedAsIs:`GitScribe est fourni "tel quel" sans garanties d'aucune sorte. Nous ne sommes pas responsables des dommages rsultant de votre utilisation du Service, y compris mais sans s'y limiter, la perte de donnes, les erreurs de documentation ou les cots de l'API.`,changesToTerms:"Modifications des Termes",weReserveRightToModify:"Nous nous rservons le droit de modifier ces termes  tout moment. L'utilisation continue du Service aprs les modifications constitue une acceptation des nouveaux termes.",contactTerms:"Contact",forQuestionsAboutTerms:"Pour des questions concernant ces Termes, contactez-nous ",howWeUseCookies:"Comment nous utilisons les cookies et technologies similaires",whatAreCookies:"Que Sont les Cookies",cookiesAreSmallTextFiles:"Les cookies sont de petits fichiers texte stocks sur votre appareil lorsque vous visitez un site web. Ils aident les sites web  se souvenir de vos prfrences et  amliorer votre exprience de navigation.",howWeUseCookiesTitle:"Comment Nous Utilisons les Cookies",essentialCookies:"Cookies Essentiels",theseCookiesAreNecessary:"Ces cookies sont ncessaires au fonctionnement du Service. Ils incluent les tokens d'authentification et les informations de session.",preferenceCookies:"Cookies de Prfrence",weUseLocalStorageToStore:"Nous utilisons localStorage pour stocker vos prfrences, telles que les tokens GitHub et les paramtres de l'interface utilisateur. Ces donnes sont stockes localement dans votre navigateur et ne sont jamais transmises  nos serveurs.",analyticsCookies:"Cookies d'Analyse",weMayUseAnalyticsCookies:"Nous pouvons utiliser des cookies d'analyse pour comprendre comment les utilisateurs interagissent avec notre Service et amliorer nos fonctionnalits.",localStorageUsage:"Utilisation de LocalStorage",gitScribeUsesBrowserLocalStorage:"GitScribe utilise le localStorage du navigateur (pas les cookies) pour stocker:",githubPersonalAccessTokensEncrypted:"Tokens d'Accs Personnel GitHub (crypts localement)",userPreferencesAndSettings:"Prfrences et paramtres utilisateur",autoFollowRepositoryConfigurations:"Configurations de suivi automatique des dpts",thisDataRemainsOnDevice:"Ces donnes restent sur votre appareil et ne sont jamais partages avec des tiers.",managingCookies:"Gestion des Cookies",youCanControlCookies:"Vous pouvez contrler les cookies via les paramtres de votre navigateur. Cependant, dsactiver les cookies essentiels peut affecter la fonctionnalit du Service.",toClearLocalStorageData:"Pour effacer les donnes localStorage, vous pouvez utiliser les outils de dveloppement de votre navigateur ou effacer les donnes de navigation.",thirdPartyCookies:"Cookies Tiers",weMayUseThirdPartyServices:"Nous pouvons utiliser des services tiers qui dfinissent leurs propres cookies. Ces services incluent:",analyticsProviders:"Fournisseurs d'analyse (le cas chant)",contactCookiePolicy:"Contact",forQuestionsAboutCookiePolicy:"Pour des questions concernant notre Politique des Cookies, contactez-nous ",pageNotFound:"Page Non Trouve",theRequestedPageCouldNotBeFound:"La page demande n'a pas pu tre trouve",thePageYoureLookingForDoesntExist:"La page que vous recherchez n'existe pas.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architecture",sectionApiReference:"Rfrence API",sectionComponents:"Composants",sectionTestingCicd:"Tests & CI/CD",sectionChangelog:"Changelog",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",aiPoweredDocumentationGenerationForGitHub:"Gnration de documentation alimente par IA pour les dpts GitHub",requiredForAiPoweredDocumentationGeneration:"Requis pour la gnration de documentation alimente par IA.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Veuillez fournir un message de commit",githubTokenRequiredForCommitting:"Le token GitHub est requis pour committer les fichiers",documentationNotFoundForRepository:"Documentation introuvable pour ce dpt. Veuillez d'abord gnrer la documentation.",successfullyCommittedToRepository:"Documentation committe avec succs dans 1 dpt!",successfullyCommittedToRepositories:"Documentation committe avec succs dans {count} dpts!",failedToCommitToRepository:"chec du commit dans 1 dpt",failedToCommitToRepositories:"chec du commit dans {count} dpts",failedToCommitDocumentation:"chec du commit de la documentation",documentationHelper:"Assistant de documentation",clearConversationHistoryConfirm:"Effacer l'historique de conversation?",readyToHelp:"Prt  aider!",iCanHelpEditDocumentation:"Je peux vous aider  modifier et amliorer votre documentation",editSections:"Modifier les sections",improveClarity:"Amliorer la clart",fixGrammar:"Corriger la grammaire",aiIsThinking:"L'IA rflchit...",send:"Envoyer",beSpecificForBetterResults:"Soyez spcifique pour de meilleurs rsultats",pressEnterToSend:"Appuyez sur Entre pour envoyer",errorEditingDocumentation:"Erreur lors de l'dition de la documentation",unknownErrorOccurred:"Une erreur inconnue s'est produite",workflowFailed:"Le workflow a chou",viewCommit:"Voir le commit",repositoryQualityScores:"Scores de Qualit des Dpts",folderStructureRefactorProposals:"Propositions de Refactorisation de la Structure de Dossiers",recommendedStructure:"Structure Recommande:",proposedMoves:"Dplacements Proposs",moreMoves:"plus de dplacements...",warnings:"Avertissements",generatedRepositoryBadges:"Badges de Dpt Gnrs",badgeMarkdownCopiedToClipboard:"Markdown du badge copi dans le presse-papiers!",copyBadgeMarkdown:"Copier le Markdown du Badge",pdfExportFailed:"chec de l'export PDF"},de:{aiPoweredGeneration:"KI-gesttzte Dokumentationsgenerierung",sourceSelection:"Quellenauswahl",clickToCollapse:"Zum Reduzieren klicken",clickToExpand:"Zum Erweitern klicken",formats:"Formate",sections:"Abschnitte",selectAtLeastOne:"Whlen Sie mindestens ein Format und einen Abschnitt",token:"Token",add:"Hinzufgen",change:"ndern",hide:"Ausblenden",openaiKey:"OpenAI-Schlssel",saveChanges:"nderungen Speichern",edit:"Bearbeiten",save:"Speichern",editDocumentation:"Dokumentation Bearbeiten",editDocumentationPlaceholder:"Bearbeiten Sie Ihre Dokumentation hier...",runWorkflow:"Workflow Ausfhren",startWritingDocumentation:"Dokumentation Schreiben Beginnen",generating:"Wird generiert...",documentation:"Dokumentation",noDocumentation:"Noch keine Dokumentation generiert",export:"Exportieren",commit:"bernehmen",settings:"Einstellungen",statistics:"Statistiken",qualityScores:"Qualittsbewertungen",refactorProposals:"Refaktorisierungsvorschlge",badges:"Abzeichen",pdfExport:"PDF-Export",clear:"Lschen",formatsLocked:"Formate und Abschnitte sind nach der Generierung gesperrt.",runNewWorkflow:"Fhren Sie einen neuen Workflow aus, um sie zu ndern.",agentWorkflow:"Agent-Workflow",useAiAgents:"KI-Agenten fr automatisierte Pipeline verwenden",singleRepo:"Einzelnes Repository",multiRepo:"Multi-Repository",githubUrl:"GitHub-URL",selectRepos:"Repositories Auswhlen",selectAtLeastOneRepo:"Bitte whlen Sie mindestens ein Repository aus",selectAtLeastOneFormat:"Bitte whlen Sie mindestens ein Ausgabeformat aus",selectAtLeastOneSection:"Bitte whlen Sie mindestens einen Dokumentationsabschnittstyp aus",pleaseProvideUrl:"Bitte geben Sie eine GitHub-URL an",reviewAndCommit:'berprfen Sie die Dokumentation unten und klicken Sie dann auf "In Repositories bernehmen", wenn Sie sie bernehmen mchten.',commitToRepos:"In Repositories bernehmen",committing:"Wird bernommen...",clearDocumentation:"Dokumentation lschen, um Formate/Abschnitte zu ndern",toChangeFormats:"um Formate/Abschnitte zu ndern",gitScribe:"GitScribe",aiPowered:"KI-GESTTZT",aiPoweredDocumentationTitle:"KI-gesttzte Dokumentation fr GitHub-Repositories",aiPoweredDocumentationDescription:"Generieren Sie automatisch umfassende Dokumentation aus einzelnen oder mehreren GitHub-Repositories. Angetrieben von KI-Agenten, die Dokumentation fr Ihre Codebasis analysieren, planen und schreiben.",githubIntegration:"GitHub-Integration",githubIntegrationDescription:"Generieren Sie Dokumentation aus jedem GitHub-Repository",multiRepoSupport:"Multi-Repository-Untersttzung",multiRepoSupportDescription:"Generieren Sie Dokumentation fr mehrere Repositories gleichzeitig",autoCommitExport:"Automatische bernahme & Export",autoCommitExportDescription:"Automatisch Dokumentation in Repositories bernehmen oder als Markdown herunterladen",readyToStart:"Bereit zu starten?",generateDocumentationFromRepos:"Generieren Sie Dokumentation aus GitHub-Repositories",noAccountNeeded:"Kein Konto erforderlich - Sofort starten!",startImmediately:"Sofort starten!",whyChooseOurTool:"Warum Unser Dokumentationstool Whlen",whyChooseOurToolDescription:"Optimieren Sie Ihren Dokumentations-Workflow mit KI-gesttzter Generierung",aiAgentWorkflows:"KI-Agent-Workflows",aiAgentWorkflowsDescription:"Automatisiertes Agentensystem, das Dokumentation fr Ihre Repositories entdeckt, analysiert, plant und schreibt.",autoUpdateFollow:"Automatische Aktualisierung & Verfolgung",autoUpdateFollowDescription:"Automatisch nderungen erkennen und Dokumentation neu generieren, wenn Repositories aktualisiert werden.",githubIntegrationFeature:"GitHub-Integration",githubIntegrationFeatureDescription:"Nahtlose Commit-Integration und direkter Repository-Zugriff fr Ihren Dokumentations-Workflow.",readyToGetStarted:"Bereit zu starten?",joinDevelopers:"Treten Sie Entwicklern und Teams bei, die ihren Dokumentations-Workflow automatisieren",startGeneratingDocumentation:"Dokumentation Generieren Starten",footerDescription:"KI-gesttzte Dokumentationsgenerierung fr GitHub-Repositories mit Multi-Repository-Untersttzung, Agent-Workflows und Auto-Update-Funktionen.",madeWith:"Gemacht mit",forDevelopers:"fr Entwickler",features:"Funktionen",resources:"Ressourcen",connect:"Verbinden",contactUs:"Kontaktieren Sie uns",Donate:"Spenden",buyMeACoffee:"Kauf mir einen Kaffee",supportGitScribe:"GitScribe untersttzen",supportGitScribeDevelopment:"Helfen Sie uns, GitScribe weiterzuentwickeln und zu verbessern",ifYouFindGitScribeUseful:"Wenn Sie GitScribe ntzlich finden und dessen Entwicklung untersttzen mchten, erwgen Sie, uns einen Kaffee zu kaufen!",whySupport:"Warum GitScribe untersttzen?",gitScribeIsFreeAndOpenSource:"GitScribe ist kostenlos und Open-Source, mit Leidenschaft fr die Entwicklergemeinschaft gebaut.",yourSupportHelpsUs:"Ihre Untersttzung hilft uns:",newFeatures:"Neue Funktionen",developNewFeaturesAndImprovements:"Neue Funktionen und Verbesserungen basierend auf Benutzerfeedback entwickeln",maintenanceAndUpdates:"Wartung & Updates",keepGitScribeRunningSmoothly:"GitScribe mit regelmigen Updates und Fehlerbehebungen reibungslos am Laufen halten",freeAndOpenSource:"Kostenlos & Open Source",maintainFreeAccessForEveryone:"Kostenlosen Zugang fr alle aufrechterhalten und gleichzeitig das Tool verbessern",otherWaysToSupport:"Andere Wege zur Untersttzung",starOnGitHub:"Auf GitHub bewerten",starringOurRepository:"Das Bewerten unseres Repositories hilft anderen, GitScribe zu entdecken",visitGitHub:"GitHub besuchen",shareFeedback:"Feedback teilen",letUsKnowWhatYouThink:"Lassen Sie uns wissen, was Sie denken und wie wir uns verbessern knnen",thankYou:"Vielen Dank!",everyContributionMatters:"Jeder Beitrag zhlt, egal wie klein.",whetherThroughDonations:"Ob durch Spenden, GitHub-Bewertungen oder Feedback,",weAppreciateYourSupport:"wir schtzen Ihre Untersttzung, um GitScribe fr alle besser zu machen.",allRightsReserved:"Alle Rechte vorbehalten",privacyPolicy:"Datenschutzrichtlinie",termsOfService:"Nutzungsbedingungen",cookiePolicy:"Cookie-Richtlinie",overview:"bersicht",gettingStarted:"Erste Schritte",supportedFormats:"Untersttzte Formate",repositoryAccess:"Repository-Zugriff",fileAnalysis:"Dateianalyse",codeUnderstanding:"Code-Verstndnis",createGitHubToken:"GitHub Personal Access Token erstellen",addTokenToGitScribe:"Token zu GitScribe hinzufgen",startGenerating:"Generierung starten",requiredScopes:"Erforderliche Berechtigungen",forPrivateRepos:"fr private Repositories und Commits",forPublicRepos:"Fr ffentliche Repositories ist ein Token optional, aber empfohlen, um Rate-Limits zu vermeiden",enterRepositoryUrl:"Geben Sie Ihre Repository-URL ein",chooseOutputFormats:"Whlen Sie Ausgabeformate und Abschnittstypen",clickRunWorkflow:'Klicken Sie auf "Workflow Ausfhren"',selectMultipleRepositories:"Mehrere Repositories Auswhlen",aiPoweredAnalysis:"KI-gesttzte Analyse",automaticallyAnalyze:"Automatisch analysieren",connectToAnyRepository:"Verbinden Sie sich mit jedem GitHub-Repository",usingPersonalAccessToken:"mit Ihrem Personal Access Token",goToGitHubSettings:"Gehen Sie zu GitHub-Einstellungen",developerSettings:"Entwicklereinstellungen",personalAccessTokens:"Personal Access Tokens",tokensClassic:"Tokens (klassisch)",enterYourToken:"Geben Sie Ihren Token ein",githubTokenField:"im GitHub-Token-Feld",documentationEditorSettings:"in den Dokumentations-Editor-Einstellungen",clickSaveChanges:'Klicken Sie auf "nderungen Speichern"',persistIt:"um es zu speichern",egOwnerRepo:"z.B. Eigentmer/Repository",thenClickRunWorkflow:'dann klicken Sie auf "Workflow Ausfhren"',startAiAgentWorkflow:"um den KI-Agent-Workflow zu starten",youCanUseAnyOfTheseFormats:"Sie knnen eines dieser Formate verwenden, um ein Repository anzugeben",toSpecifyRepository:"um ein Repository anzugeben",seamlesslyConnectWithGitHub:"Verbinden Sie sich nahtlos mit GitHub, um Dokumentation aus Ihren Repositories zu generieren",generateDocumentationFromRepositories:"Dokumentation aus Ihren Repositories generieren",gitScribeIntegratesDirectly:"GitScribe integriert sich direkt mit der GitHub-API",accessYourRepositories:"um auf Ihre Repositories zuzugreifen",generateComprehensiveDocumentation:"und umfassende Dokumentation zu generieren",whetherPublicOrPrivate:"Ob Sie mit ffentlichen oder privaten Repositories arbeiten",ourIntegrationMakesItEasy:"unsere Integration macht es einfach",documentYourCodebase:"Ihre Codebasis zu dokumentieren",connectToAnyGitHubRepository:"Verbinden Sie sich mit jedem GitHub-Repository",automaticallyAnalyzeRepository:"Repository automatisch analysieren",repositoryStructure:"Repository-Struktur",codeFiles:"Codedateien",configuration:"und Konfiguration",aiPoweredAnalysisOfCodebase:"KI-gesttzte Analyse Ihrer Codebasis",generateAccurateDocumentation:"um genaue Dokumentation zu generieren",tokenOptionalButRecommended:"Fr ffentliche Repositories ist ein Token optional, aber empfohlen",avoidRateLimits:"um Rate-Limits zu vermeiden",multiRepoSupportTitle:"Multi-Repository-Untersttzung",generateDocumentationForMultiple:"Generieren Sie Dokumentation fr mehrere",simultaneously:"gleichzeitig",selectMultipleRepositoriesTitle:"Mehrere Repositories Auswhlen",batchProcessing:"Stapelverarbeitung",unifiedDocumentation:"Einheitliche Dokumentation",individualDocumentation:"Individuelle Dokumentation",aiPoweredGenerationTitle:"KI-gesttzte Generierung",aiPoweredGenerationDescription:"Nutzen Sie fortschrittliche KI, um umfassende, genaue Dokumentation zu erstellen",exportCommitTitle:"Export & Commit",exportCommitDescription:"Exportieren Sie Dokumentation oder committen Sie direkt in Ihre Repositories",documentationTitle:"Dokumentation",apiReferenceTitle:"API-Referenz",examplesTitle:"Beispiele",supportTitle:"Support",privacyPolicyTitle:"Datenschutzrichtlinie",termsOfServiceTitle:"Nutzungsbedingungen",cookiePolicyTitle:"Cookie-Richtlinie",assistantGreeting:"Hallo! Ich bin Ihr KI-Assistent. Ich kann Ihnen beim Bearbeiten und Verbessern Ihrer Dokumentation helfen! ",assistantCapabilities:"Ich kann:",assistantRewriteSections:"Abschnitte umschreiben",assistantImproveClarity:"Klarheit und Lesbarkeit verbessern",assistantFixGrammar:"Grammatik und Rechtschreibung korrigieren",assistantAddRemoveContent:"Inhalte hinzufgen oder entfernen",assistantRestructure:"Dokumentation umstrukturieren",assistantFormatText:"Text besser formatieren",assistantTellMeWhatToChange:"Sagen Sie mir einfach, was Sie ndern mchten!",assistantErrorNoDocumentation:"Der Dokumentationsbearbeitungsmodus erfordert, dass die Dokumentation geladen ist. Bitte generieren Sie zuerst die Dokumentation.",assistantErrorUnknown:"Entschuldigung, es ist ein Fehler aufgetreten",assistantErrorApiKey:"Konfigurationsfehler: OpenAI API-Schlssel fehlt. Bitte berprfen Sie Ihre Umgebungsvariablen.",assistantErrorParse:`Ich hatte Schwierigkeiten, diese Anfrage zu verstehen. Knnten Sie versuchen, sie umzuformulieren? Zum Beispiel:
 "Fgen Sie einen Preisabschnitt hinzu"
 "ndern Sie die Hauptfarbe zu blau"
 "Aktualisieren Sie den Haupttitel"`,assistantErrorNetwork:"Netzwerkfehler: Bitte berprfen Sie Ihre Internetverbindung und versuchen Sie es erneut.",assistantPlaceholderLoading:"KI generiert Ihre Anfrage...",assistantPlaceholderReady:"Fragen Sie mich alles ber Ihre Dokumentation...",assistantTitleSend:"Nachricht senden",assistantTitleType:"Geben Sie eine Nachricht ein, um sie zu senden",assistantClearConversation:"Konversation lschen",selectRepositories:"Repositories Auswhlen",selected:"ausgewhlt",close:"Schlieen",searchRepositories:"Repositories suchen...",visibility:"Sichtbarkeit:",all:"Alle",public:"ffentlich",private:"Privat",refresh:"Aktualisieren",loadingRepositories:"Repositories werden geladen...",noRepositoriesMatch:"Keine Repositories entsprechen Ihrer Suche.",noRepositoriesFound:"Keine Repositories gefunden.",lastPushed:"Zuletzt aktualisiert:",repositoriesSelected:"Repositories ausgewhlt",repositorySelected:"Repository ausgewhlt",noRepositoriesSelected:"Keine Repositories ausgewhlt",clearAll:"Alle Lschen",done:"Fertig",repositoryDiscovery:"Repository-Entdeckung",repositoryAnalysis:"Repository-Analyse",qualityAnalysis:"Qualittsanalyse",refactorProposal:"Refaktorisierungsvorschlag",documentationPlanning:"Dokumentationsplanung",documentationWriting:"Dokumentationserstellung",gitOperations:"Git-Operationen",complete:"Abgeschlossen",running:"Luft...",processing:"Verarbeitung:",completed:" Abgeschlossen",error:"Fehler:",automatedPipeline:"Automatisierte Dokumentationsgenerierungs-Pipeline",outputFormats:"Ausgabeformate",sectionTypes:"Abschnittstypen",pleaseSelectAtLeastOneRepository:"Bitte whlen Sie mindestens ein Repository aus",noWorkflowState:"Kein Workflow-Zustand verfgbar",noDocumentationToCommit:"Keine Dokumentation zum Committen",commitFailed:"Commit fehlgeschlagen",generatedFeatures:"Generierte Funktionen",workflowComplete:"Workflow Abgeschlossen!",generatedDocumentationFor:"Dokumentation generiert fr",repository:"Repository",repositories:"Repositories",committedTo:"Committet in",backTo:"Zurck zu",cancel:"Abbrechen",branch:"Branch",commitMessage:"Commit-Nachricht",scrollToTop:"Nach oben scrollen",hideAiAssistant:"KI-Assistenten ausblenden",showAiAssistant:"KI-Assistenten anzeigen",enableAutoUpdate:"Automatische Aktualisierung bei Push/Merge aktivieren",disableAutoUpdate:"Automatische Aktualisierung deaktivieren",format:"Format:",section:"Abschnitt:",addDocumentation:"Dokumentation hinzufgen",ownerRepoOrGithub:"Eigentmer/Repository oder github.com/Eigentmer/Repository",ownerRepoPlaceholder:"Eigentmer/Repository",keyFeatures:"Hauptfunktionen",selectAndProcessMultiple:"Mehrere Repositories in einem einzigen Vorgang auswhlen und verarbeiten",eachRepositoryGetsOwn:"Jedes Repository erhlt seine eigene dedizierte Dokumentationsdatei",batchCommit:"Stapel-Commit",commitToAllSelected:"Dokumentation mit einem Klick in alle ausgewhlten Repositories committen",howToUse:"So Verwenden Sie Es",selectMultipleReposStep:"1. Mehrere Repositories Auswhlen",clickSelectReposButton:'Klicken Sie auf die Schaltflche "Repositories auswhlen", um in Ihren GitHub-Repositories zu suchen und auszuwhlen. Sie knnen nach Sichtbarkeit suchen und filtern.',browseAndSelectFromGitHub:"in Ihren GitHub-Repositories suchen und auswhlen",searchAndFilterByVisibility:"Sie knnen nach Sichtbarkeit suchen und filtern",chooseOutputFormatsSections:"2. Ausgabeformate & Abschnitte Whlen",selectOneOrMoreFormats:"Whlen Sie ein oder mehrere Ausgabeformate",markdownMdxOpenapiHtml:"(Markdown, MDX, OpenAPI, HTML)",documentationSectionTypes:"und Dokumentationsabschnittstypen",readmeArchitectureApi:"(README, Architektur, API, etc.)",runWorkflowStep:"3. Workflow Ausfhren",clickRunWorkflowToStart:'Klicken Sie auf "Workflow Ausfhren", um den KI-Agent-Workflow zu starten',systemWillProcessEachRepo:"Das System verarbeitet jedes Repository",throughDiscoveryAnalysisPlanning:"durch Entdeckungs-, Analyse-, Planungs- und Schreibphasen",reviewCommitStep:"4. berprfen & Committen",reviewDocumentationInTabs:"berprfen Sie die Dokumentation in separaten Tabs fr jedes Repository",switchBetweenFormatsSections:"Zwischen Formaten und Abschnitten wechseln",whenReadyClickCommitToRepos:'Wenn Sie bereit sind, klicken Sie auf "In Repositories Committen"',commitAllAtOnce:"um alles auf einmal zu committen",benefits:"Vorteile",saveTimeProcessingMultiple:"Sparen Sie Zeit, indem Sie mehrere Repositories gleichzeitig verarbeiten",maintainConsistentFormat:"Konsistentes Dokumentationsformat ber Projekte hinweg beibehalten",easyManagementWithTabs:"Einfache Verwaltung mit Tab-Interface fr jedes Repository",batchCommitFunctionality:"Stapel-Commit-Funktionalitt fr effizienten Workflow",aiModels:"KI-Modelle",gitScribeSupportsMultipleModels:"GitScribe untersttzt mehrere OpenAI-Modelle",chooseBasedOnNeeds:"Whlen Sie basierend auf Ihren Bedrfnissen",speedCostQuality:"fr Geschwindigkeit, Kosten und Qualitt",gpt4oMiniRecommended:"GPT-4o Mini (Empfohlen)",fastAndCostEffective:"Schnell und kosteneffektiv fr die meisten Dokumentationsaufgaben",bestBalanceSpeedQuality:"Beste Balance aus Geschwindigkeit und Qualitt",gpt4o:"GPT-4o",mostAdvancedModel:"Fortgeschrittenstes Modell",complexCodebases:"fr komplexe Codebasen",highestQualityHigherCost:"Hchste Qualitt, hhere Kosten",gpt4Turbo:"GPT-4 Turbo",balancedPerformanceAccuracy:"Ausgewogene Leistung und Genauigkeit",goodForLargeRepos:"Gut fr groe Repositories",gpt35Turbo:"GPT-3.5 Turbo",fastAndEconomical:"Schnell und wirtschaftlich",simpleProjects:"fr einfache Projekte",lowestCostOption:"Gnstigste Option",youCanChangeModel:"Sie knnen das Modell ndern",settingsPanel:"im Einstellungsbereich",realtimeCostEstimation:"Echtzeit-Kostenschtzung",statisticsSidebar:"wird in der Statistik-Sidebar angezeigt",aiAssistant:"KI-Assistent",aiAssistantFeature:"Die KI-Assistent-Funktion ermglicht es Ihnen",interactivelyEditImprove:"Ihre Dokumentation interaktiv zu bearbeiten und zu verbessern",rewriteSectionsForClarity:"Abschnitte fr bessere Klarheit umschreiben",fixGrammarSpellingErrors:"Grammatik- und Rechtschreibfehler korrigieren",addRemoveContentBasedOnNeeds:"Inhalte basierend auf Ihren Bedrfnissen hinzufgen oder entfernen",restructureDocumentation:"Dokumentation fr besseren Fluss umstrukturieren",formatTextImproveReadability:"Text formatieren und Lesbarkeit verbessern",costEstimation:"Kostenschtzung",gitScribeProvidesRealtime:"GitScribe bietet Echtzeit-Kostenschtzung",basedOn:"basierend auf",selectedAiModelPricing:"Preisgestaltung des ausgewhlten KI-Modells",estimatedTokenUsage:"Geschtzter Token-Verbrauch",documentationLengthComplexity:"Dokumentationslnge und -komplexitt",costsDisplayedInStatistics:"Kosten werden angezeigt",duringGeneration:"whrend der Generierung",github:"GitHub",exportDocumentation:"Dokumentation Exportieren",downloadGeneratedDocumentation:"Laden Sie Ihre generierte Dokumentation in mehreren Formaten fr die Verwendung in Dokumentationsseiten, Wikis oder Versionskontrollsystemen herunter.",exportFormats:"Exportformate",markdownStandardFormat:"Markdown - Standard .md Format fr GitHub, GitLab und Dokumentationsseiten",markdownMermaidDescription:"Markdown + Mermaid - Markdown mit KI-generierten Diagrammen",mdxDescription:"MDX - Markdown mit JSX-Komponenten fr interaktive Dokumentation",openapiDescription:"OpenAPI - YAML-Format fr API-Dokumentation",htmlDescription:"HTML - Vollstndig gestylte HTML-Seiten bereit fr die Bereitstellung",eachFormatGenerated:"Jedes Format wird mit abschnittsspezifischem Inhalt generiert, der auf die ausgewhlten Abschnittstypen zugeschnitten ist.",commitToRepository:"In Repository Committen",automaticallyCommitDocumentation:"Committen Sie automatisch generierte Dokumentation direkt in Ihre GitHub-Repositories. Perfekt, um die Dokumentation mit Ihrer Codebasis synchron zu halten.",howItWorks:"Wie Es Funktioniert",runWorkflowGenerate:"Fhren Sie den Workflow aus, um Dokumentation fr Ihr(e) Repository(s) zu generieren",reviewGeneratedDocumentation:"berprfen Sie die generierte Dokumentation im Viewer",clickCommitToRepos:'Klicken Sie auf die Schaltflche "In Repositories Committen" (erscheint nach Abschluss des Workflows)',enterCommitMessage:'Geben Sie eine Commit-Nachricht ein (z.B. "docs: Umfassende Dokumentation hinzufgen")',specifyTargetBranch:"Geben Sie den Zielbranch an (Standard: main)",documentationCommitted:"Die Dokumentation wird mit dem ausgewhlten Format und den Abschnittstypen committet",workflowStopsAfterGeneration:"Der Workflow stoppt nach der Generierung, sodass Sie vor dem Committen berprfen knnen.",controlOverCommits:"Dies stellt sicher, dass Sie die Kontrolle darber haben, was in Ihre Repositories committet wird.",whenWorkingWithMultiple:"Bei der Arbeit mit mehreren Repositories erhlt jedes Repository seine eigenen dedizierten Dokumentationsdateien basierend auf Ihren ausgewhlten Formaten und Abschnitten.",eachRepositoryReceives:"Jedes Repository erhlt seine eigenen dedizierten Dokumentationsdateien basierend auf Ihren ausgewhlten Formaten und Abschnitten.",commitOperationProcesses:"Die Commit-Operation verarbeitet alle ausgewhlten Repositories stapelweise.",documentationStoredSeparately:"Die Dokumentation jedes Repositories wird separat gespeichert und im richtigen Repository committet.",autoUpdateFeature:"Auto-Update-Funktion",enableAutoUpdateDescription:"Aktivieren Sie Auto-Update, um die Dokumentation automatisch zu regenerieren und zu committen, wenn Ihr Repository neue Commits oder Merges zur Hauptbranch erhlt.",automaticUpdates:"Automatische Updates",monitorsRepositories:"berwacht Repositories alle 5 Minuten",detectsPushesMerges:"Erkennt Pushes und Merges zur Hauptbranch",automaticallyRegenerates:"Regeneriert automatisch die Dokumentation",commitsUpdatedDocumentation:"Committet aktualisierte Dokumentation mit Zeitstempel",multiRepoOverview:"Die Multi-Repository-Untersttzung von GitScribe ermglicht es Ihnen, mehrere GitHub-Repositories gleichzeitig zu verarbeiten und spart Zeit und Aufwand bei der Dokumentation mehrerer Projekte.",completeGuideToUsing:"Vollstndiger Leitfaden zur Verwendung von GitScribe",welcomeToGitScribe:"Willkommen bei GitScribe! Ein KI-gesttztes Dokumentationsgenerierungstool, das automatisch umfassende Dokumentation fr Ihre GitHub-Repositories mit fortgeschrittenen KI-Agent-Workflows erstellt.",aiPoweredDocumentationTool:"KI-gesttztes Dokumentationsgenerierungstool",quickStart:"Schnellstart",addOpenAiKey:"Fgen Sie Ihren OpenAI API-Schlssel in den Einstellungen hinzu",optionalAddGitHubToken:"(Optional) Fgen Sie ein GitHub Personal Access Token fr private Repos hinzu",enterRepositoryUrlOrSelect:"Geben Sie eine GitHub-Repository-URL ein oder whlen Sie mehrere Repositories aus",clickRunWorkflowStart:'Klicken Sie auf "Workflow Ausfhren", um den KI-Agent-Workflow zu starten',reviewEditCommit:"berprfen Sie die generierte Dokumentation, bearbeiten Sie sie mit dem KI-Assistenten und committen Sie",coreFeatures:"Kernfunktionen",directIntegration:"Direkte Integration mit der GitHub-API fr Repository-Zugriff und Commits",processMultipleRepos:"Verarbeiten Sie mehrere Repositories gleichzeitig mit Stapeloperationen",intelligentAgentSystem:"Intelligentes Agentensystem fr automatisierte Dokumentationsgenerierung",multipleOutputFormats:"Mehrere Ausgabeformate und direkte GitHub-Commits",outputFormatsDescription:"GitScribe untersttzt mehrere Dokumentationsformate fr verschiedene Bedrfnisse:",standardMarkdownFormat:"Standard-Markdown-Format fr GitHub, GitLab und Dokumentationsseiten",markdownWithDiagrams:"Markdown mit KI-generierten Mermaid-Diagrammen fr Architektur und Flows",markdownWithJsx:"Markdown mit JSX-Komponenten fr interaktive Dokumentation",yamlFormatForApi:"YAML-Format fr API-Dokumentation mit Endpoint-Spezifikationen",fullyStyledHtml:"Vollstndig gestylte HTML-Seiten bereit fr die Bereitstellung",documentationSections:"Dokumentationsabschnitte",generateDifferentTypes:"Generieren Sie verschiedene Arten von Dokumentationsabschnitten:",readmeDescription:"README - Projektbersicht, Installation, Verwendung und Funktionen",architectureDescription:"Architektur - Systemdesign, Komponentenstruktur und Datenfluss",apiReferenceDescription:"API-Referenz - Endpoint-Dokumentation, Request/Response-Schemas",componentsDescription:"Komponenten - Komponentendokumentation mit Props und Verwendungsbeispielen",testingCicdDescription:"Tests & CI/CD - Test-Setup, CI/CD-Pipeline und Bereitstellung",changelogDescription:"Changelog - Versionsverlauf und Release-Notes",aiAgentWorkflow:"KI-Agent-Workflow",gitScribeUsesIntelligent:"GitScribe verwendet ein intelligentes Agentensystem, das Repositories in mehreren Phasen verarbeitet:",repoDiscovery:"RepoDiscovery",validatesAndDiscovers:"- Validiert und entdeckt Repositories",repoAnalysis:"RepoAnalysis",analyzesStructure:"- Analysiert Struktur, Tech-Stack und Komplexitt",docsPlanner:"DocsPlanner",createsStructuredPlan:"- Erstellt einen strukturierten Dokumentationsplan",docsWriter:"DocsWriter",generatesDocumentation:"- Generiert Dokumentation in ausgewhlten Formaten",gitOps:"GitOps",commitsDocumentation:"- Committet Dokumentation in Repositories",learnMore:"Mehr Erfahren",exploreOtherPages:"Erkunden Sie die anderen Seiten in diesem Dokumentationsabschnitt fr detaillierte Informationen zu jeder Funktion und wie Sie sie effektiv verwenden.",aiPoweredOverview:"GitScribe nutzt die fortgeschrittenen Sprachmodelle von OpenAI, um Ihre Codebasis zu analysieren und umfassende, gut strukturierte Dokumentation zu generieren. Unsere KI versteht Code-Kontext, Beziehungen und Best Practices, um Dokumentation zu erstellen, die sowohl genau als auch lesbar ist.",gitScribeUsesOpenAI:"GitScribe nutzt die fortgeschrittenen Sprachmodelle von OpenAI",completeApiDocumentation:"Vollstndige API-Dokumentation fr Entwickler",agentWorkflowSystem:"Agent-Workflow-System",gitScribeUsesLangGraph:"GitScribe nutzt ein LangGraph-hnliches Agentensystem fr die automatisierte Dokumentationsgenerierung:",agentWorkflowSteps:"// Agent-Workflow-Schritte",agentState:"Agent-Status",workflowMaintainsSharedState:"Der Workflow verwaltet einen gemeinsamen Status zwischen Agenten, einschlielich:",discoveredRepositories:"Entdeckte Repositories",repositoryAnalyses:"Repository-Analysen",documentationPlans:"Dokumentationsplne",generatedDocumentationByFormat:"Generierte Dokumentation (nach Format und Abschnitt)",commitResults:"Commit-Ergebnisse",githubService:"GitHub-Service",langChainService:"LangChain-Service",typeDefinitions:"Typdefinitionen",exampleUseCases:"Beispiel-Anwendungsflle und Workflows",example1SingleRepository:"Beispiel 1: Einzelnes Repository",scenario:"Szenario",youWantToGenerate:"Sie mchten umfassende Dokumentation fr ein einzelnes React-Projekt mit mehreren Formaten generieren.",steps:"Schritte",enterGitHubRepositoryUrl:"GitHub-Repository-URL eingeben:",selectOutputFormatsEg:"Ausgabeformate auswhlen (z.B. Markdown, MDX, HTML)",selectSectionTypesEg:"Abschnittstypen auswhlen (z.B. README, Architektur, API)",watchWorkflowProgress:"Beobachten Sie den Workflow-Fortschritt durch Entdeckung, Analyse, Planung und Schreiben",reviewGeneratedDocumentationSwitch:"berprfen Sie die generierte Dokumentation, wechseln Sie zwischen Formaten und Abschnitten",clickCommitToReposWhenReady:'Klicken Sie auf "In Repositories Committen", wenn Sie bereit sind zu committen',example2MultipleRepositories:"Beispiel 2: Mehrere Repositories",youManageMultipleMicroservices:"Sie verwalten mehrere Microservices und mchten sie alle auf einmal mit konsistentem Format dokumentieren.",clickSelectRepositories:'Klicken Sie auf "Repositories auswhlen" und whlen Sie mehrere Repos aus Ihrem GitHub-Konto aus',selectOutputFormatsEgOpenAPI:"Ausgabeformate auswhlen (z.B. Markdown + OpenAPI fr API-Dokumentation)",monitorWorkflowProgress:"berwachen Sie den Workflow-Fortschritt fr jedes Repository",reviewEachRepositoryDocumentation:"berprfen Sie die Dokumentation jedes Repositories in separaten Tabs",switchBetweenFormatsSectionsForEach:"Wechseln Sie zwischen Formaten und Abschnitten fr jedes Repo",commitAllRepositoriesAtOnce:'Committen Sie alle Repositories auf einmal mit "In Repositories Committen"',example3AutoUpdateWorkflow:"Beispiel 3: Auto-Update-Workflow",youWantDocumentationToAutoUpdate:"Sie mchten, dass die Dokumentation automatisch aktualisiert wird, wenn sich der Code ndert.",selectRepositoriesInMultiRepoMode:"Repositories im Multi-Repo-Modus auswhlen",enableAutoUpdateForEach:"Auto-Update fr jedes Repository aktivieren (Glocken-Symbol)",toggleGlobalAutoUpdateSwitch:"Globalen Auto-Update-Schalter umschalten",documentationWillAutoUpdate:"Die Dokumentation wird bei jedem Push/Merge zu main automatisch aktualisiert",example4UsingAiAssistant:"Beispiel 4: KI-Assistent verwenden",youWantToImproveDocumentation:"Sie mchten die generierte Dokumentation mit KI-Hilfe verbessern.",examplePrompts:"Beispiel-Prompts",addSectionExplainingInstallation:'"Fgen Sie einen Abschnitt hinzu, der den Installationsprozess erklrt"',makeApiDocumentationMoreDetailed:'"Machen Sie den API-Dokumentationsabschnitt detaillierter"',fixAllGrammarErrors:'"Korrigieren Sie alle Grammatikfehler"',restructureDocumentationForBetterFlow:'"Strukturieren Sie die Dokumentation fr einen besseren Fluss um"',needHelp:"Brauchen Sie Hilfe?",wereHereToHelp:"Wir sind hier, um zu helfen! Wenn Sie Probleme haben oder Fragen zu GitScribe haben, finden Sie hier die besten Mglichkeiten, Untersttzung zu erhalten.",contactOptions:"Kontaktoptionen",emailSupport:"E-Mail-Support",getDirectHelpViaEmail:"Erhalten Sie direkte Hilfe per E-Mail",githubIssues:"GitHub-Issues",reportBugsOrRequestFeatures:"Fehler melden oder Funktionen anfordern",openAnIssue:"Ein Issue ffnen",commonIssues:"Hufige Probleme",openaiApiKeyError:"OpenAI API-Schlssel-Fehler",addOpenAiKeyInSettings:'Fgen Sie Ihren OpenAI API-Schlssel im Einstellungsbereich hinzu. Klicken Sie auf das Einstellungssymbol, geben Sie Ihren Schlssel ein und klicken Sie auf "nderungen Speichern".',githubRateLimiting:"GitHub-Ratenbegrenzung",addGitHubTokenInSettings:"Fgen Sie ein GitHub Personal Access Token im Einstellungsbereich hinzu, um Ratenbegrenzungen zu erhhen und auf private Repositories zuzugreifen.",requiredScopeRepo:"Erforderlicher Bereich:",workflowNotStarting:"Workflow startet nicht",ensureYouHaveSelected:'Stellen Sie sicher, dass Sie mindestens ein Ausgabeformat und einen Abschnittstyp ausgewhlt haben. Die Schaltflche "Workflow Ausfhren" erfordert, dass beide aktiviert sind.',documentationNotCommitting:"Dokumentation wird nicht committet",makeSureGitHubTokenHasRepoScope:"Stellen Sie sicher, dass Ihr GitHub-Token den",checkOutComprehensiveDocumentation:"Schauen Sie sich unsere umfassende Dokumentation fr detaillierte Anleitungen und API-Referenzen an.",howWeProtectAndHandle:"Wie wir Ihre Daten schtzen und verwalten",lastUpdated:"Zuletzt aktualisiert:",introduction:"Einfhrung",gitScribeCommittedToPrivacy:'GitScribe ("wir", "unser" oder "uns") ist dem Schutz Ihrer Privatsphre verpflichtet. Diese Datenschutzrichtlinie erklrt, wie wir Ihre Informationen sammeln, verwenden und schtzen, wenn Sie unseren Service nutzen.',informationWeCollect:"Informationen, die wir sammeln",personalInformation:"Persnliche Informationen",weMayCollectPersonalInfo:"Wir knnen persnliche Informationen wie E-Mail-Adressen sammeln, wenn Sie ein Konto erstellen oder uns fr Support kontaktieren.",githubTokens:"GitHub-Tokens",githubTokensStoredLocally:"GitHub Personal Access Tokens werden lokal im localStorage Ihres Browsers gespeichert. Wir bertragen oder speichern diese Tokens nicht auf unseren Servern.",usageData:"Nutzungsdaten",weMayCollectUsageData:"Wir knnen Informationen darber sammeln, wie Sie unseren Service nutzen, einschlielich Repository-URLs und Dokumentationsgenerierungsprferenzen.",howWeUseYourInformation:"Wie wir Ihre Informationen verwenden",toProvideAndImprove:"Um unseren Dokumentationsgenerierungsservice bereitzustellen und zu verbessern",toProcessYourRequests:"Um Ihre Anfragen zu verarbeiten und Dokumentation zu generieren",toCommunicateWithYou:"Um mit Ihnen ber Ihr Konto oder Support-Anfragen zu kommunizieren",toAnalyzeUsagePatterns:"Um Nutzungsmuster zu analysieren und unseren Service zu verbessern",dataSecurity:"Datensicherheit",weImplementSecurityMeasures:"Wir implementieren angemessene Sicherheitsmanahmen zum Schutz Ihrer Informationen. GitHub-Tokens werden lokal in Ihrem Browser gespeichert und niemals an unsere Server bertragen. Alle API-Kommunikationen werden mit HTTPS verschlsselt.",thirdPartyServices:"Drittanbieter-Services",weUseFollowingThirdParty:"Wir verwenden die folgenden Drittanbieter-Services:",openaiForAiPowered:"OpenAI: Fr KI-gesttzte Dokumentationsgenerierung mit GPT-Modellen",githubForRepositoryAccess:"GitHub: Fr Repository-Zugriff, Dateioperationen und Commits ber die GitHub-API",localStorageForStoring:"LocalStorage: Zum lokalen Speichern von Benutzereinstellungen, Tokens und Projektverlauf in Ihrem Browser",allDataStoredLocally:"Alle Daten werden lokal in Ihrem Browser gespeichert. GitHub-Tokens und API-Schlssel werden niemals an unsere Server bertragen.",yourRights:"Ihre Rechte",youHaveRightToAccess:"Sie haben das Recht, auf Ihre persnlichen Informationen zuzugreifen, sie zu aktualisieren oder zu lschen. Sie knnen Ihre Kontoeinstellungen verwalten oder uns kontaktieren unter",contactUsPrivacy:"Kontaktieren Sie uns",ifYouHaveQuestionsPrivacy:"Wenn Sie Fragen zu dieser Datenschutzrichtlinie haben, kontaktieren Sie uns bitte unter",termsAndConditions:"Nutzungsbedingungen fr GitScribe",agreementToTerms:"Zustimmung zu den Bedingungen",byAccessingOrUsing:'Durch den Zugriff auf oder die Nutzung von GitScribe ("der Service") stimmen Sie zu, an diese Nutzungsbedingungen gebunden zu sein. Wenn Sie mit einem Teil dieser Bedingungen nicht einverstanden sind, drfen Sie mglicherweise nicht auf den Service zugreifen.',useOfService:"Nutzung des Services",eligibility:"Berechtigung",youMustBeAtLeast18:"Sie mssen mindestens 18 Jahre alt sein oder die Zustimmung der Eltern haben, um diesen Service zu nutzen.",accountResponsibility:"Kontoverantwortung",youAreResponsibleForMaintaining:"Sie sind verantwortlich fr die Sicherheit Ihres Kontos und aller API-Schlssel oder Tokens, die Sie mit dem Service verwenden.",acceptableUse:"Akzeptable Nutzung",youAgreeNotTo:"Sie stimmen zu, nicht:",useServiceForIllegalPurpose:"Den Service fr illegale Zwecke zu nutzen",violateLawsOrRegulations:"Gesetze oder Vorschriften zu verletzen",infringeOnIntellectualProperty:"Geistiges Eigentum zu verletzen",transmitMaliciousCode:"Bsartigen Code oder Viren zu bertragen",attemptUnauthorizedAccess:"Unbefugten Zugriff auf den Service zu erlangen",apiUsageAndCosts:"API-Nutzung und Kosten",gitScribeUsesOpenAIApi:"GitScribe nutzt die OpenAI-API fr KI-gesttzte Funktionen. Sie sind verantwortlich fr:",youAreResponsibleFor:"Sie sind verantwortlich fr:",providingYourOwnOpenAiKey:"Bereitstellung Ihres eigenen OpenAI API-Schlssels",allCostsAssociated:"Alle mit der API-Nutzung verbundenen Kosten",managingYourApiKeySecurity:"Verwaltung der Sicherheit Ihres API-Schlssels",intellectualProperty:"Geistiges Eigentum",serviceOwnedByGitScribe:"Der Service und sein ursprnglicher Inhalt, Funktionen und Funktionalitt gehren GitScribe und sind durch internationale Urheberrechts-, Marken- und andere Gesetze zum geistigen Eigentum geschtzt.",limitationOfLiability:"Haftungsbeschrnkung",gitScribeProvidedAsIs:'GitScribe wird "wie besehen" ohne Gewhrleistung jeglicher Art bereitgestellt. Wir haften nicht fr Schden, die aus Ihrer Nutzung des Services entstehen, einschlielich, aber nicht beschrnkt auf Datenverlust, Dokumentationsfehler oder API-Kosten.',changesToTerms:"nderungen der Bedingungen",weReserveRightToModify:"Wir behalten uns das Recht vor, diese Bedingungen jederzeit zu ndern. Die fortgesetzte Nutzung des Services nach nderungen stellt eine Annahme der neuen Bedingungen dar.",contactTerms:"Kontakt",forQuestionsAboutTerms:"Bei Fragen zu diesen Bedingungen kontaktieren Sie uns unter",howWeUseCookies:"Wie wir Cookies und hnliche Technologien verwenden",whatAreCookies:"Was sind Cookies",cookiesAreSmallTextFiles:"Cookies sind kleine Textdateien, die auf Ihrem Gert gespeichert werden, wenn Sie eine Website besuchen. Sie helfen Websites, sich an Ihre Prferenzen zu erinnern und Ihr Browsing-Erlebnis zu verbessern.",howWeUseCookiesTitle:"Wie wir Cookies verwenden",essentialCookies:"Wesentliche Cookies",theseCookiesAreNecessary:"Diese Cookies sind fr die Funktionalitt des Services erforderlich. Sie umfassen Authentifizierungstokens und Sitzungsinformationen.",preferenceCookies:"Prferenz-Cookies",weUseLocalStorageToStore:"Wir verwenden localStorage, um Ihre Prferenzen zu speichern, wie z.B. GitHub-Tokens und UI-Einstellungen. Diese Daten werden lokal in Ihrem Browser gespeichert und niemals an unsere Server bertragen.",analyticsCookies:"Analyse-Cookies",weMayUseAnalyticsCookies:"Wir knnen Analyse-Cookies verwenden, um zu verstehen, wie Benutzer mit unserem Service interagieren und unsere Funktionen zu verbessern.",localStorageUsage:"LocalStorage-Nutzung",gitScribeUsesBrowserLocalStorage:"GitScribe verwendet Browser-LocalStorage (nicht Cookies) zum Speichern von:",githubPersonalAccessTokensEncrypted:"GitHub Personal Access Tokens (lokal verschlsselt)",userPreferencesAndSettings:"Benutzereinstellungen und Prferenzen",autoFollowRepositoryConfigurations:"Auto-Follow-Repository-Konfigurationen",thisDataRemainsOnDevice:"Diese Daten verbleiben auf Ihrem Gert und werden niemals mit Dritten geteilt.",managingCookies:"Cookies verwalten",youCanControlCookies:"Sie knnen Cookies ber Ihre Browser-Einstellungen steuern. Das Deaktivieren wesentlicher Cookies kann jedoch die Funktionalitt des Services beeintrchtigen.",toClearLocalStorageData:"Um LocalStorage-Daten zu lschen, knnen Sie die Entwicklertools Ihres Browsers verwenden oder Browsing-Daten lschen.",thirdPartyCookies:"Drittanbieter-Cookies",weMayUseThirdPartyServices:"Wir knnen Drittanbieter-Services verwenden, die ihre eigenen Cookies setzen. Diese Services umfassen:",analyticsProviders:"Analyse-Anbieter (falls zutreffend)",contactCookiePolicy:"Kontakt",forQuestionsAboutCookiePolicy:"Bei Fragen zu unserer Cookie-Richtlinie kontaktieren Sie uns unter",pageNotFound:"Seite nicht gefunden",theRequestedPageCouldNotBeFound:"Die angeforderte Seite konnte nicht gefunden werden",thePageYoureLookingForDoesntExist:"Die Seite, die Sie suchen, existiert nicht.",formatMarkdown:"Markdown",formatMarkdownMermaid:"Markdown + Mermaid",formatMdx:"MDX",formatOpenapi:"OpenAPI",formatHtml:"HTML",sectionReadme:"README",sectionArchitecture:"Architektur",sectionApiReference:"API-Referenz",sectionComponents:"Komponenten",sectionTestingCicd:"Tests & CI/CD",sectionChangelog:"Changelog",sectionReadmeShort:"README",sectionArchitectureShort:"ARCH",sectionApiReferenceShort:"API",sectionComponentsShort:"COMP",sectionTestingCicdShort:"TEST",sectionChangelogShort:"CHG",aiPoweredDocumentationGenerationForGitHub:"KI-gesttzte Dokumentationsgenerierung fr GitHub-Repositories",requiredForAiPoweredDocumentationGeneration:"Erforderlich fr KI-gesttzte Dokumentationsgenerierung.",functionFetchUserRepos:"fetchUserRepos",functionCreateOrUpdateFile:"createOrUpdateFile",functionCallLangChain:"callLangChain",typeSimpleRepo:"SimpleRepo",typeDocOutputFormat:"DocOutputFormat",typeDocSectionType:"DocSectionType",pleaseProvideCommitMessage:"Bitte geben Sie eine Commit-Nachricht an",githubTokenRequiredForCommitting:"GitHub-Token ist fr das Committen von Dateien erforderlich",documentationNotFoundForRepository:"Dokumentation fr dieses Repository nicht gefunden. Bitte generieren Sie zuerst die Dokumentation.",successfullyCommittedToRepository:"Dokumentation erfolgreich in 1 Repository committet!",successfullyCommittedToRepositories:"Dokumentation erfolgreich in {count} Repositories committet!",failedToCommitToRepository:"Fehler beim Committen in 1 Repository",failedToCommitToRepositories:"Fehler beim Committen in {count} Repositories",failedToCommitDocumentation:"Fehler beim Committen der Dokumentation",documentationHelper:"Dokumentationsassistent",clearConversationHistoryConfirm:"Konversationsverlauf lschen?",readyToHelp:"Bereit zu helfen!",iCanHelpEditDocumentation:"Ich kann Ihnen beim Bearbeiten und Verbessern Ihrer Dokumentation helfen",editSections:"Abschnitte bearbeiten",improveClarity:"Klarheit verbessern",fixGrammar:"Grammatik korrigieren",aiIsThinking:"KI denkt nach...",send:"Senden",beSpecificForBetterResults:"Seien Sie spezifisch fr bessere Ergebnisse",pressEnterToSend:"Drcken Sie Enter zum Senden",errorEditingDocumentation:"Fehler beim Bearbeiten der Dokumentation",unknownErrorOccurred:"Unbekannter Fehler aufgetreten",workflowFailed:"Workflow fehlgeschlagen",viewCommit:"Commit anzeigen",repositoryQualityScores:"Repository-Qualittsbewertungen",folderStructureRefactorProposals:"Ordnerstruktur-Refaktorisierungsvorschlge",recommendedStructure:"Empfohlene Struktur:",proposedMoves:"Vorgeschlagene Verschiebungen",moreMoves:"weitere Verschiebungen...",warnings:"Warnungen",generatedRepositoryBadges:"Generierte Repository-Badges",badgeMarkdownCopiedToClipboard:"Badge-Markdown in die Zwischenablage kopiert!",copyBadgeMarkdown:"Badge-Markdown kopieren",pdfExportFailed:"PDF-Export fehlgeschlagen"}};function VL(t,e="en"){var n;return((n=Eb[e])==null?void 0:n[t])||Eb.en[t]||t}function ma(t){return e=>VL(e,t)}function Sv({onNavigate:t}){const e=new Date().getFullYear(),[n,r]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en");P.useEffect(()=>{const a=()=>{const l=localStorage.getItem("selectedLanguage");l&&r(l)};window.addEventListener("storage",a);const o=setInterval(a,100);return()=>{window.removeEventListener("storage",a),clearInterval(o)}},[]);const s=ma(n),i=(a,o)=>{a.preventDefault(),t?t(o):window.dispatchEvent(new CustomEvent("navigate",{detail:o}))};return u.jsx("footer",{className:"bg-white border-t border-gray-100",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[u.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[u.jsxs("div",{className:"md:col-span-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-full",children:u.jsx(Cd,{className:"w-5 h-5 text-white"})}),u.jsx("span",{className:"text-lg font-bold text-gray-900",children:s("gitScribe")})]}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s("footerDescription")}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[u.jsx("span",{children:s("madeWith")}),u.jsx(Qi,{className:"w-4 h-4 text-red-500 fill-red-500"}),u.jsx("span",{children:s("forDevelopers")})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-sm uppercase tracking-wide",children:s("features")}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"github-integration"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("githubIntegration")})}),u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"multi-repo-support"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("multiRepoSupport")})}),u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"ai-powered-generation"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("aiPoweredGeneration")})}),u.jsx("li",{children:u.jsxs("a",{href:"#",onClick:a=>i(a,"export-commit"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:[s("export")," & ",s("commit")]})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-sm uppercase tracking-wide",children:s("resources")}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"documentation-page"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("documentation")})}),u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"api-reference"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("apiReferenceTitle")})}),u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"examples"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("examplesTitle")})}),u.jsx("li",{children:u.jsx("a",{href:"#",onClick:a=>i(a,"support"),className:"text-gray-600 hover:text-orange-600 transition-colors",children:s("supportTitle")})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-sm uppercase tracking-wide",children:s("connect")}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors",children:[u.jsx(hs,{className:"w-4 h-4"}),u.jsx("span",{children:s("github")})]})}),u.jsx("li",{children:u.jsxs("a",{href:"mailto:support@GitScribe.com",className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors",children:[u.jsx(ny,{className:"w-4 h-4"}),u.jsx("span",{children:s("contactUs")})]})}),u.jsx("li",{children:u.jsxs("a",{href:"#",onClick:a=>i(a,"Donate"),className:"flex items-center gap-2 text-gray-600 hover:text-orange-600 transition-colors",children:[u.jsx(Qi,{className:"w-4 h-4"}),u.jsx("span",{children:s("Donate")})]})})]})]})]}),u.jsxs("div",{className:"pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",e," ",s("gitScribe"),". ",s("allRightsReserved"),"."]}),u.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[u.jsx("a",{href:"#",onClick:a=>i(a,"privacy-policy"),className:"hover:text-orange-600 transition-colors",children:s("privacyPolicy")}),u.jsx("a",{href:"#",onClick:a=>i(a,"terms-of-service"),className:"hover:text-orange-600 transition-colors",children:s("termsOfService")}),u.jsx("a",{href:"#",onClick:a=>i(a,"cookie-policy"),className:"hover:text-orange-600 transition-colors",children:s("cookiePolicy")})]})]})]})})}function HL({onGenerate:t}){const[e,n]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en");P.useEffect(()=>{localStorage.setItem("selectedLanguage",e),window.dispatchEvent(new Event("languageChanged"))},[e]);const r=ma(e);return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsx(Fe.header,{className:"bg-white border-b border-gray-100 sticky top-0 z-50",initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[u.jsxs(Fe.div,{className:"flex items-center gap-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[u.jsx(Fe.div,{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-full",whileHover:{scale:1.1,rotate:360},transition:{duration:.5},children:u.jsx(Cd,{className:"w-6 h-6 text-white"})}),u.jsx("span",{className:"text-xl font-bold text-gray-900",children:r("gitScribe")})]}),u.jsx(Fe.div,{className:"flex items-center gap-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:u.jsxs(Fe.select,{value:e,onChange:s=>n(s.target.value),className:"px-3 py-2 text-sm font-semibold rounded-xl bg-white/80 backdrop-blur-sm text-slate-700 hover:bg-white border border-slate-200 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md cursor-pointer",title:"Translate page",whileHover:{scale:1.05},whileTap:{scale:.95},children:[u.jsx("option",{value:"en",children:" EN"}),u.jsx("option",{value:"fr",children:" FR"}),u.jsx("option",{value:"de",children:" DE"})]})})]})}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4",children:[u.jsx("section",{className:"py-20",children:u.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[u.jsxs(Fe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},children:[u.jsxs(Fe.div,{className:"mb-6 flex items-center gap-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2,duration:.5},children:[u.jsx(Fe.div,{className:"h-1 w-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full",initial:{width:0},animate:{width:48},transition:{delay:.3,duration:.5}}),u.jsx("span",{className:"text-orange-600 font-semibold text-sm",children:r("aiPowered")})]}),u.jsx(Fe.h1,{className:"text-6xl font-black text-gray-900 mb-6 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:r("aiPoweredDocumentationTitle")}),u.jsx(Fe.p,{className:"text-xl text-gray-600 mb-8 leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},children:r("aiPoweredDocumentationDescription")}),u.jsx(Fe.div,{className:"space-y-4 mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},children:[{icon:Cd,title:r("githubIntegration"),desc:r("githubIntegrationDescription")},{icon:Qi,title:r("multiRepoSupport"),desc:r("multiRepoSupportDescription")},{icon:Tb,title:r("autoCommitExport"),desc:r("autoCommitExportDescription")}].map((s,i)=>u.jsxs(Fe.div,{className:"flex items-start gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+i*.1,duration:.5},whileHover:{x:5,transition:{duration:.2}},children:[u.jsx(Fe.div,{className:"p-2 bg-orange-100 rounded-lg",whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:u.jsx(s.icon,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-900",children:s.title}),u.jsx("p",{className:"text-gray-600",children:s.desc})]})]},i))})]}),u.jsxs(Fe.div,{className:"relative",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut",delay:.2},children:[u.jsx(Fe.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-100 to-red-100 rounded-3xl blur-2xl opacity-50",animate:{scale:[1,1.05,1],opacity:[.5,.6,.5]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),u.jsxs(Fe.div,{className:"relative bg-white rounded-3xl shadow-2xl p-8 border border-orange-100",whileHover:{scale:1.02,y:-5},transition:{type:"spring",stiffness:300},children:[u.jsxs(Fe.div,{className:"text-center mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:[u.jsx(Fe.div,{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full mx-auto mb-4 flex items-center justify-center",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,repeatDelay:2},children:u.jsx(Rt,{className:"w-8 h-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r("readyToStart")}),u.jsx("p",{className:"text-gray-600 mt-1",children:r("generateDocumentationFromRepos")}),u.jsxs(Fe.div,{className:"mt-3 inline-flex items-center gap-2 px-3 py-1 bg-orange-50 border border-orange-200 rounded-full text-xs text-orange-700",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4},whileHover:{scale:1.05},children:[u.jsx("span",{children:""}),u.jsx("span",{children:r("noAccountNeeded")})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs(Fe.button,{onClick:t,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2",whileHover:{scale:1.05,boxShadow:"0 10px 30px rgba(249, 115, 22, 0.4)"},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[u.jsx(Fe.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:u.jsx(Rt,{className:"w-5 h-5"})}),r("startWritingDocumentation")]}),u.jsxs(Fe.p,{className:"text-xs text-gray-500 text-center mt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:[" ",r("aiPoweredDocumentationGenerationForGitHub")]})]})]})]})]})}),u.jsxs("section",{className:"py-20 border-t border-gray-100",children:[u.jsxs(Fe.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},children:[u.jsx("h2",{className:"text-4xl font-black text-gray-900 mb-4",children:r("whyChooseOurTool")}),u.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:r("whyChooseOurToolDescription")})]}),u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:GE,title:r("aiAgentWorkflows"),desc:r("aiAgentWorkflowsDescription"),color:"orange"},{icon:OL,title:r("autoUpdateFollow"),desc:r("autoUpdateFollowDescription"),color:"red"},{icon:Tb,title:r("githubIntegrationFeature"),desc:r("githubIntegrationFeatureDescription"),color:"orange"}].map((s,i)=>u.jsxs(Fe.div,{className:"group",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{delay:i*.2,duration:.6},whileHover:{y:-10,transition:{duration:.3}},children:[u.jsx(Fe.div,{className:`relative mb-6 h-40 bg-gradient-to-br from-${s.color}-50 to-${s.color==="orange"?"red":"orange"}-50 rounded-2xl overflow-hidden flex items-center justify-center`,whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:u.jsx(Fe.div,{animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,delay:i*.5},children:u.jsx(s.icon,{className:`w-16 h-16 text-${s.color}-400`})})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s.title}),u.jsx("p",{className:"text-gray-600",children:s.desc})]},i))})]}),u.jsx("section",{className:"py-20",children:u.jsxs(Fe.div,{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-3xl p-12 text-center text-white relative overflow-hidden",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},children:[u.jsxs("div",{className:"absolute inset-0 opacity-10",children:[u.jsx(Fe.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},children:u.jsx(Cd,{className:"w-32 h-32 absolute top-0 right-0"})}),u.jsx(Fe.div,{animate:{rotate:[360,0],scale:[1,1.2,1]},transition:{rotate:{duration:25,repeat:1/0,ease:"linear"},scale:{duration:5,repeat:1/0,ease:"easeInOut"}},children:u.jsx(Qi,{className:"w-24 h-24 absolute bottom-0 left-0"})})]}),u.jsxs(Fe.div,{className:"relative z-10",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2,duration:.6},children:[u.jsx("h2",{className:"text-4xl font-black mb-4",children:r("readyToGetStarted")}),u.jsx("p",{className:"text-orange-100 text-lg mb-8 max-w-2xl mx-auto",children:r("joinDevelopers")}),u.jsxs(Fe.button,{onClick:t,className:"bg-white text-orange-600 px-8 py-4 rounded-xl font-bold text-lg inline-block flex items-center gap-2 mx-auto",whileHover:{scale:1.05,boxShadow:"0 10px 40px rgba(255, 255, 255, 0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4,duration:.5},children:[u.jsx(Fe.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},children:u.jsx(Rt,{className:"w-5 h-5"})}),r("startGeneratingDocumentation")]})]})]})}),u.jsx(Sv,{onNavigate:s=>{window.dispatchEvent(new CustomEvent("navigate",{detail:s}))}})]})]})}const WL="modulepreload",qL=function(t){return"/"+t},Cb={},vh=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=qL(l),l in Cb)return;Cb[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":WL,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Nb({model:t="gpt-4o-mini",documentation:e,onUpdateDocumentation:n}){const[r,s]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en");P.useEffect(()=>{const w=p=>{p.key==="selectedLanguage"&&p.newValue&&s(p.newValue)};window.addEventListener("storage",w);const x=()=>{const p=localStorage.getItem("selectedLanguage");p&&p!==r&&s(p)};window.addEventListener("languageChanged",x);const v=()=>{const p=localStorage.getItem("selectedLanguage");p&&p!==r&&s(p)};return window.addEventListener("focus",v),()=>{window.removeEventListener("storage",w),window.removeEventListener("languageChanged",x),window.removeEventListener("focus",v)}},[r]);const i=ma(r),[a,o]=P.useState([]),l=P.useCallback(()=>{e&&n&&o([{role:"assistant",content:`${i("assistantGreeting")}

${i("assistantCapabilities")}
- ${i("assistantRewriteSections")}
- ${i("assistantImproveClarity")}
- ${i("assistantFixGrammar")}
- ${i("assistantAddRemoveContent")}
- ${i("assistantRestructure")}
- ${i("assistantFormatText")}

${i("assistantTellMeWhatToChange")}`,timestamp:Date.now()}])},[e,n,i]);P.useEffect(()=>{a.length===0&&e&&n&&l()},[a.length,e,n,l]);const[c,d]=P.useState(""),[h,m]=P.useState(!1),f=P.useRef(null);P.useEffect(()=>{var w;(w=f.current)==null||w.scrollIntoView({behavior:"smooth"})},[a]);const y=async()=>{if(!c.trim()||h)return;const w=c.trim();d(""),o(x=>[...x,{role:"user",content:w,timestamp:Date.now()}]),m(!0);try{if(e&&n){const x=await KL(w,e,t,i);x.updatedDocumentation&&n(x.updatedDocumentation),o(v=>[...v,{role:"assistant",content:x.message,timestamp:Date.now()}]),m(!1);return}o(x=>[...x,{role:"assistant",content:i("assistantErrorNoDocumentation"),timestamp:Date.now()}]),m(!1)}catch(x){console.error("Assistant error:",x);const v=x.message||i("unknownErrorOccurred");let p=`${i("assistantErrorUnknown")}: ${v}`;v.includes("API key")?p=i("assistantErrorApiKey"):v.includes("parse")||v.includes("JSON")?p=i("assistantErrorParse"):(v.includes("timeout")||v.includes("network"))&&(p=i("assistantErrorNetwork")),o(g=>[...g,{role:"assistant",content:p,timestamp:Date.now()}])}finally{m(!1)}};return u.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-slate-50 via-white to-blue-50/30 overflow-hidden",children:[u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border-b border-white/50 p-4 flex items-center justify-between flex-shrink-0 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl blur opacity-30"}),u.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-600 p-2 rounded-xl",children:u.jsx(Rt,{className:"w-5 h-5 text-white"})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 text-base",children:i("aiAssistant")}),u.jsx("p",{className:"text-xs text-slate-500",children:i("documentationHelper")})]})]}),a.length>1&&u.jsx("button",{onClick:()=>{confirm(i("clearConversationHistoryConfirm"))&&l()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-500 hover:text-slate-700",title:i("assistantClearConversation"),children:u.jsx(xt,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 overscroll-contain scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:[a.length===0&&u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center max-w-sm",children:[u.jsxs("div",{className:"relative mx-auto w-20 h-20 mb-4",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-500 rounded-full blur-xl opacity-30"}),u.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-red-600 p-4 rounded-full",children:u.jsx(Rt,{className:"w-10 h-10 text-white"})})]}),u.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-2",children:i("readyToHelp")}),u.jsx("p",{className:"text-sm text-slate-500 mb-4",children:i("iCanHelpEditDocumentation")}),u.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[u.jsxs("span",{className:"px-3 py-1.5 bg-orange-50 text-orange-700 rounded-lg text-xs font-medium",children:[" ",i("editSections")]}),u.jsxs("span",{className:"px-3 py-1.5 bg-red-50 text-red-700 rounded-lg text-xs font-medium",children:[" ",i("improveClarity")]}),u.jsxs("span",{className:"px-3 py-1.5 bg-orange-50 text-orange-700 rounded-lg text-xs font-medium",children:[" ",i("fixGrammar")]})]})]})}),a.map((w,x)=>u.jsx("div",{className:`flex ${w.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:u.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 shadow-lg ${w.role==="user"?"bg-gradient-to-br from-orange-600 to-red-600 text-white":"bg-white/90 backdrop-blur-sm border border-slate-200/50 text-slate-800"}`,children:[w.role==="assistant"&&u.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-200/50",children:[u.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center",children:u.jsx(Rt,{className:"w-3.5 h-3.5 text-white"})}),u.jsx("span",{className:"text-xs font-semibold text-slate-600",children:i("aiAssistant")})]}),u.jsx("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:w.content.split(`
`).map((v,p)=>{var g;if(v.match(/^#{1,3}\s+/)){const _=((g=v.match(/^#+/))==null?void 0:g[0].length)||1,k=v.replace(/^#+\s+/,""),E=_===1?"text-base font-bold mt-3 mb-2 text-slate-800":_===2?"text-sm font-semibold mt-2 mb-1 text-slate-700":"text-sm font-medium mt-1 text-slate-600";return u.jsx("div",{className:E,children:k},p)}if(v.includes(" **Changes Made:**"))return u.jsx("div",{className:"mt-3 pt-3 border-t border-slate-300/50",children:u.jsxs("strong",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("span",{children:v.replace(/\*\*/g,"")})]})},p);if(v.trim().match(/^(||||||)/))return u.jsxs("div",{className:"mt-2 font-medium text-slate-700 flex items-start gap-2",children:[u.jsx("span",{className:"text-lg",children:v.trim().charAt(0)}),u.jsx("span",{children:v.trim().substring(1).trim()})]},p);if(v.includes("**")){const _=v.split(/(\*\*[^*]+\*\*)/g);return u.jsx("div",{className:"my-1",children:_.map((k,E)=>k.startsWith("**")&&k.endsWith("**")?u.jsx("strong",{className:"font-semibold text-slate-900",children:k.slice(2,-2)},E):u.jsx("span",{children:k},E))},p)}return v.trim().startsWith("")||v.trim().startsWith("-")?u.jsxs("div",{className:"ml-4 text-slate-700 my-1 flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-500 mt-1 font-bold",children:""}),u.jsx("span",{children:v.trim().substring(1).trim()})]},p):u.jsx("div",{className:"my-1 text-slate-700",children:v||""},p)})})]})},x)),h&&u.jsx("div",{className:"flex justify-start animate-in fade-in",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-slate-200/50 rounded-2xl px-4 py-3 shadow-lg",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),u.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Rt,{className:"w-4 h-4 text-orange-600 animate-pulse"}),u.jsx("span",{className:"text-sm font-medium text-slate-700",children:i("aiIsThinking")})]})]})})}),u.jsx("div",{ref:f})]}),u.jsxs("div",{className:"p-4 bg-white/80 backdrop-blur-xl border-t border-white/50 flex-shrink-0 shadow-lg",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"flex-1 relative",children:u.jsx("input",{type:"text",value:c,onChange:w=>d(w.target.value),onKeyPress:w=>{w.key==="Enter"&&!w.shiftKey&&!h&&c.trim()&&(w.preventDefault(),y())},placeholder:i(h?"assistantPlaceholderLoading":"assistantPlaceholderReady"),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 disabled:bg-slate-50 disabled:cursor-not-allowed transition-all text-sm",disabled:h})}),u.jsx("button",{onClick:y,disabled:h||!c.trim(),className:"px-5 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl hover:shadow-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center gap-2 font-medium shadow-lg",title:c.trim()?i("assistantTitleSend"):i("assistantTitleType"),children:h?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),u.jsx("span",{className:"text-sm hidden sm:inline",children:i("generating")})]}):u.jsxs(u.Fragment,{children:[u.jsx(zL,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:i("send")})]})})]}),u.jsxs("div",{className:"mt-2 text-xs text-slate-500 flex items-center gap-4 flex-wrap",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsx("span",{children:i("beSpecificForBetterResults")})]}),u.jsxs("span",{className:"hidden sm:inline flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsx("span",{children:i("pressEnterToSend")})]})]})]})]})}async function KL(t,e,n="gpt-4o-mini",r){const{callLangChain:s}=await vh(async()=>{const{callLangChain:o}=await Promise.resolve().then(()=>OW);return{callLangChain:o}},void 0),i=`You are a helpful AI assistant specialized in editing and improving documentation. Your role is to help users edit, improve, and refine their documentation text.

YOUR CAPABILITIES:
- Rewrite sections for better clarity
- Improve grammar, spelling, and style
- Add missing information
- Remove unnecessary content
- Restructure documentation for better flow
- Format text properly
- Make content more professional and readable

YOUR APPROACH:
- Preserve the original structure and meaning
- Make improvements while keeping the user's intent
- Be clear about what changes you made
- Maintain markdown formatting
- Keep technical accuracy`,a=`The user wants to edit their documentation. Here's their request:

"${t}"

Current documentation:
\`\`\`
${e}
\`\`\`

Please:
1. Understand what the user wants to change
2. Edit the documentation accordingly
3. Return the complete updated documentation
4. Explain briefly what you changed

Return your response in this format:
<explanation>
Brief explanation of what you changed
</explanation>

<documentation>
[Complete updated documentation here]
</documentation>`;try{const o=await s(a,i,n,.7),l=o.match(/<explanation>([\s\S]*?)<\/explanation>/),c=o.match(/<documentation>([\s\S]*?)<\/documentation>/),d=l?l[1].trim():"I've updated your documentation.",h=c?c[1].trim():e;return{message:d,updatedDocumentation:h}}catch(o){return{message:r?`${r("errorEditingDocumentation")}: ${o.message}`:`Error editing documentation: ${o.message}`,updatedDocumentation:e}}}function pm(t){const e=[/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)(?:\/tree\/([^\/]+))?/,/^github\.com\/([^\/]+)\/([^\/]+)(?:\/tree\/([^\/]+))?/,/^([^\/]+)\/([^\/]+)$/];for(const n of e){const r=t.trim().match(n);if(r)return{owner:r[1],repo:r[2],branch:r[3]||"main"}}return null}function ZL(t){try{localStorage.setItem("github_token",t),console.log("GitHub token stored successfully")}catch(e){throw console.error("Failed to store GitHub token:",e),new Error("Could not store GitHub token in localStorage")}}function Mt(){try{const t=localStorage.getItem("github_token");if(t)return t}catch{console.warn("Could not access localStorage for GitHub token")}return null}function fa(t){const e=new Headers;if(e.set("Accept","application/vnd.github.v3+json"),t){const n=t.trim().replace(/[^\x00-\x7F]/g,"");n&&e.set("Authorization",`token ${n}`)}return e}async function ys(t,e,n="",r="main",s){try{const i=s||Mt(),a=fa(i),o=n?`contents/${n}`:"contents",l=`https://api.github.com/repos/${t}/${e}/${o}?ref=${r}`,c=await fetch(l,{headers:a});if(!c.ok){if(c.status===404)return[];throw new Error(`Failed to list contents: ${c.status} ${c.statusText}`)}const d=await c.json();return Array.isArray(d)?d.map(h=>({name:h.name,type:h.type==="file"?"file":"dir",path:h.path,size:h.size})):d.type==="file"?[{name:d.name,type:"file",path:d.path,size:d.size}]:[]}catch(i){throw console.error("Error listing GitHub contents:",i),new Error(`Failed to list repository contents: ${i.message}`)}}async function VE(t,e,n="",r="main",s,i=3){if(i<=0)return[];const a=[];try{const o=await ys(t,e,n,r,s);for(const l of o)if(l.type==="file")a.push(l.path);else if(l.type==="dir"&&!l.name.startsWith(".")&&l.name!=="node_modules"){const c=await VE(t,e,l.path,r,s,i-1);a.push(...c)}}catch(o){console.warn(`Failed to list files in ${n}:`,o)}return a}async function HE(t,e,n="",r="main",s,i="",a=!0,o=10,l=0){if(l>=o)return"";try{const d=(await ys(t,e,n,r,s)).filter(f=>!(f.name.startsWith(".")&&f.name!==".github"&&f.name!==".vscode"||f.name==="node_modules"||f.name==="dist"||f.name==="build"));if(d.length===0)return"";let h="";const m=d.sort((f,y)=>f.type!==y.type?f.type==="dir"?-1:1:f.name.localeCompare(y.name));for(let f=0;f<m.length;f++){const y=m[f],w=f===m.length-1,x=w?" ":" ",v=w?"    ":"   ";if(h+=`${i}${x}${y.name}
`,y.type==="dir"){const p=await HE(t,e,y.path,r,s,i+v,w,o,l+1);h+=p}}return h}catch(c){return console.warn(`Failed to generate directory tree for ${n}:`,c),""}}async function ps(t,e,n,r="main",s){try{const i=s||Mt();if(i)try{const d=`https://api.github.com/repos/${t}/${e}/contents/${n}?ref=${r}`;console.log("Fetching GitHub file via API:",d);const h=fa(i),m=await fetch(d,{method:"GET",headers:h});if(m.ok){const f=await m.json();if(f.content&&f.encoding==="base64"){const y=atob(f.content.replace(/\s/g,""));return console.log(`Successfully fetched ${n} via API, length: ${y.length}`),y}}else if(m.status===404)return r==="master"?(console.log("Trying main branch instead of master"),ps(t,e,n,"main",s)):(console.log(`File not found: ${n} (404)`),null);console.warn("GitHub API request failed, falling back to raw URL")}catch(d){console.warn("GitHub API request error, falling back to raw URL:",d)}const a=`https://raw.githubusercontent.com/${t}/${e}/${r}/${n}`;console.log("Fetching GitHub file via raw URL:",a);const o=new Headers;if(o.set("Accept","application/json, text/plain, */*"),i){const d=i.trim().replace(/[^\x00-\x7F]/g,"");d&&o.set("Authorization",`token ${d}`)}const l=await fetch(a,{method:"GET",headers:o});if(console.log("GitHub file response status:",l.status,l.statusText),!l.ok){if(l.status===404)return r==="master"?(console.log("Trying main branch instead of master"),ps(t,e,n,"main",s)):(console.log(`File not found: ${n} (404)`),null);throw l.status===403?new Error("Rate limited or repository is private. Try using a GitHub personal access token."):new Error(`Failed to fetch file: ${l.status} ${l.statusText}`)}const c=await l.text();return console.log(`Successfully fetched ${n}, length: ${c.length}`),c}catch(i){throw console.error("Error fetching GitHub file:",i),i.message?i:new Error(`Network error: ${i.message||"Failed to fetch from GitHub"}`)}}async function WE(t){const e=Mt();if(!e)throw new Error("GitHub token is required.");const{visibility:n="all",affiliation:r,perPage:s=100,page:i=1}=t||{},a=fa(e),o=new URLSearchParams({per_page:s.toString(),page:i.toString()});n!=="all"&&o.append("visibility",n),r&&o.append("affiliation",r);try{const l=`https://api.github.com/user/repos?${o.toString()}`,c=await fetch(l,{headers:a});if(!c.ok)throw c.status===401?new Error("Invalid or expired GitHub token. Please check your token."):c.status===403?new Error("Rate limited or insufficient permissions. Please check your token permissions."):new Error(`Failed to fetch repositories: ${c.status} ${c.statusText}`);return(await c.json()).map(h=>({id:h.id,name:h.name,fullName:h.full_name,owner:h.owner.login,private:h.private,htmlUrl:h.html_url,description:h.description||void 0,defaultBranch:h.default_branch||"main",lastPushedAt:h.pushed_at||void 0,language:h.language||void 0}))}catch(l){throw console.error("Error fetching user repositories:",l),l.message?l:new Error(`Failed to fetch repositories: ${l.message||"Unknown error"}`)}}async function YL(t,e,n,r="main",s){const i=s||Mt();if(!i)throw new Error("GitHub token is required for file operations.");const a=fa(i);try{const o=`https://api.github.com/repos/${t}/${e}/contents/${n}?ref=${r}`,l=await fetch(o,{headers:a});if(l.status===404)return null;if(!l.ok)throw new Error(`Failed to get file SHA: ${l.status} ${l.statusText}`);return(await l.json()).sha||null}catch(o){throw console.error("Error getting file SHA:",o),o.message&&o.message.includes("Failed to get file SHA")?o:new Error(`Failed to get file SHA: ${o.message||"Unknown error"}`)}}async function qE(t,e,n,r,s,i="main",a,o){const l=a||Mt();if(!l)throw new Error("GitHub token is required for file operations.");const c=await YL(t,e,n,i,l),d=btoa(unescape(encodeURIComponent(r))),h=fa(l);h.set("Content-Type","application/json");const m={message:s,content:d,branch:i};c&&(m.sha=c);try{const f=`https://api.github.com/repos/${t}/${e}/contents/${n}`,y=await fetch(f,{method:"PUT",headers:h,body:JSON.stringify(m)});if(!y.ok){const x=await y.json().catch(()=>({}));throw y.status===409?new Error("File was modified by another commit. Please try again."):y.status===403?new Error("Insufficient permissions. Token needs repo scope."):new Error(`Failed to create/update file: ${y.status} ${y.statusText}. ${x.message||""}`)}const w=await y.json();return{commit:{sha:w.commit.sha,html_url:w.commit.html_url}}}catch(f){throw console.error("Error creating/updating file:",f),f.message&&f.message.includes("Failed to create/update file")?f:new Error(`Failed to create/update file: ${f.message||"Unknown error"}`)}}async function Ib(t,e,n="main",r){var a;const s=r||Mt();if(!s)throw new Error("GitHub token is required to check commits.");const i=fa(s);try{const o=`https://api.github.com/repos/${t}/${e}/git/ref/heads/${n}`,l=await fetch(o,{headers:i});if(!l.ok)throw new Error(`Failed to get branch ref: ${l.status} ${l.statusText}`);return((a=(await l.json()).object)==null?void 0:a.sha)||null}catch(o){throw console.error("Error getting latest commit SHA:",o),new Error(`Failed to get latest commit SHA: ${o.message||"Unknown error"}`)}}async function JL(t,e,n,r){var a,o,l;const s=r||Mt();if(!s)throw new Error("GitHub token is required to check commits.");const i=fa(s);try{const c=`https://api.github.com/repos/${t}/${e}/git/commits/${n}`,d=await fetch(c,{headers:i});if(!d.ok)throw new Error(`Failed to get commit info: ${d.status} ${d.statusText}`);const h=await d.json(),m=((a=h.parents)==null?void 0:a.length)>1||!1;return{message:h.message||"",isMerge:m,author:((o=h.author)==null?void 0:o.name)||"Unknown",date:((l=h.author)==null?void 0:l.date)||new Date().toISOString()}}catch(c){throw console.error("Error getting commit info:",c),new Error(`Failed to get commit info: ${c.message||"Unknown error"}`)}}function XL({selectedRepos:t,onSelectionChange:e,onClose:n}){const[r,s]=P.useState([]),[i,a]=P.useState(!1),[o,l]=P.useState(""),[c,d]=P.useState(""),[h,m]=P.useState("all"),[f]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en"),y=ma(f);P.useEffect(()=>{w()},[h]);const w=async()=>{a(!0),l("");try{const g=await WE({visibility:h,perPage:100});s(g)}catch(g){l(g.message||"Failed to load repositories"),console.error("Error loading repos:",g)}finally{a(!1)}},x=g=>{const _=t.some(k=>k.id===g.id);e(_?t.filter(k=>k.id!==g.id):[...t,g])},v=g=>t.some(_=>_.id===g.id),p=r.filter(g=>g.name.toLowerCase().includes(c.toLowerCase())||g.fullName.toLowerCase().includes(c.toLowerCase())||g.description&&g.description.toLowerCase().includes(c.toLowerCase()));return u.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6 max-w-4xl w-full max-h-[80vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(hs,{className:"w-5 h-5 text-gray-700"}),u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:y("selectRepositories")}),t.length>0&&u.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[t.length," ",y("selected")]})]}),n&&u.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",title:y("close"),children:u.jsx(xt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"mb-4 space-y-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx(UL,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",placeholder:y("searchRepositories"),value:c,onChange:g=>d(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:y("visibility")}),u.jsx("div",{className:"flex gap-2",children:["all","public","private"].map(g=>u.jsx("button",{onClick:()=>m(g),className:`px-3 py-1 text-sm rounded-lg transition-colors ${h===g?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y(g==="all"?"all":g==="public"?"public":"private")},g))}),u.jsx("button",{onClick:w,disabled:i,className:"ml-auto px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:y("refresh")})]})]}),o&&u.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[u.jsx(AL,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:o})]}),i&&u.jsxs("div",{className:"flex items-center justify-center py-12",children:[u.jsx(ty,{className:"w-6 h-6 text-blue-500 animate-spin"}),u.jsx("span",{className:"ml-2 text-gray-600",children:y("loadingRepositories")})]}),!i&&!o&&u.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-lg",children:p.length===0?u.jsx("div",{className:"p-8 text-center text-gray-500",children:y(c?"noRepositoriesMatch":"noRepositoriesFound")}):u.jsx("div",{className:"divide-y divide-gray-200",children:p.map(g=>{const _=v(g);return u.jsx("div",{onClick:()=>x(g),className:`p-4 cursor-pointer transition-colors hover:bg-gray-50 ${_?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`mt-1 w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${_?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:_&&u.jsx(IL,{className:"w-3 h-3 text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),g.private&&u.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:y("private")}),g.language&&u.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:g.language})]}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.fullName}),g.description&&u.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:g.description}),g.lastPushedAt&&u.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[y("lastPushed")," ",new Date(g.lastPushedAt).toLocaleDateString()]})]})]})},g.id)})})}),u.jsxs("div",{className:"mt-4 flex items-center justify-between pt-4 border-t border-gray-200",children:[u.jsx("div",{className:"text-sm text-gray-600",children:t.length>0?`${t.length} ${t.length!==1?y("repositories"):y("repository")} ${y("selected")}`:y("noRepositoriesSelected")}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>e([]),disabled:t.length===0,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y("clearAll")}),n&&u.jsx("button",{onClick:n,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:y("done")})]})]})]})}var Q=(t=>(t.DISCOVERY="discovery",t.ANALYSIS="analysis",t.QUALITY="quality",t.REFACTOR="refactor",t.PLANNING="planning",t.WRITING="writing",t.GITOPS="gitops",t.COMPLETE="complete",t))(Q||{});async function QL(t){console.log("[RepoDiscovery] Starting repository discovery...");const e={currentStep:Q.DISCOVERY,progress:{current:0,total:1,currentAgent:"RepoDiscovery"}};try{if(t.selectedRepos&&t.selectedRepos.length>0){console.log("[RepoDiscovery] Validating",t.selectedRepos.length,"selected repositories");const n=[];for(const r of t.selectedRepos)try{r.fullName&&r.owner&&r.name&&n.push(r)}catch(s){console.warn(`[RepoDiscovery] Invalid repo: ${r.fullName}`,s)}n.length>0?(e.discoveredRepos=n,e.completedSteps=new Set([Q.DISCOVERY]),e.progress={current:1,total:1,currentAgent:"RepoDiscovery"},console.log("[RepoDiscovery] Validated",n.length,"repositories")):(e.completedSteps=new Set([Q.DISCOVERY]),e.errors=new Map([["discovery","No valid repositories found"]]),console.warn("[RepoDiscovery] No valid repositories after validation"))}else try{const n=await WE({perPage:100});n&&n.length>0?(e.discoveredRepos=n,e.completedSteps=new Set([Q.DISCOVERY]),e.progress={current:1,total:1,currentAgent:"RepoDiscovery"},console.log("[RepoDiscovery] Discovered",n.length,"user repositories")):(e.completedSteps=new Set([Q.DISCOVERY]),e.errors=new Map([["discovery","No repositories found"]]),console.warn("[RepoDiscovery] No repositories found"))}catch(n){console.error("[RepoDiscovery] Failed to fetch user repos:",n),e.completedSteps=new Set([Q.DISCOVERY]),e.errors=new Map([["discovery",n.message||"Failed to discover repositories"]])}}catch(n){console.error("[RepoDiscovery] Error:",n),e.completedSteps=new Set([Q.DISCOVERY]),e.errors=new Map([["discovery",n.message||"Discovery failed"]])}return e}function zu(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function _e(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function R(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let KE=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return KE=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function ry(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const sy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class he extends Error{}class Kt extends he{constructor(e,n,r,s){super(`${Kt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new gm({message:r,cause:sy(n)});const i=n==null?void 0:n.error;return e===400?new ZE(e,i,r,s):e===401?new YE(e,i,r,s):e===403?new JE(e,i,r,s):e===404?new XE(e,i,r,s):e===409?new QE(e,i,r,s):e===422?new eC(e,i,r,s):e===429?new tC(e,i,r,s):e>=500?new nC(e,i,r,s):new Kt(e,i,r,s)}}class $n extends Kt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class gm extends Kt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class ym extends gm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ZE extends Kt{}class YE extends Kt{}class JE extends Kt{}class XE extends Kt{}class QE extends Kt{}class eC extends Kt{}class tC extends Kt{}class nC extends Kt{}class rC extends he{constructor(){super("Could not parse response content as the length limit was reached")}}class sC extends he{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class cl extends Error{constructor(e){super(e)}}const e4=/^[a-z][a-z0-9+.-]*:/i,t4=t=>e4.test(t);let yn=t=>(yn=Array.isArray,yn(t)),Rb=yn;function iC(t){return typeof t!="object"?{}:t??{}}function n4(t){if(!t)return!0;for(const e in t)return!1;return!0}function r4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ep(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const s4=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new he(`${t} must be an integer`);if(e<0)throw new he(`${t} must be a positive integer`);return e},i4=t=>{try{return JSON.parse(t)}catch{return}},Lc=t=>new Promise(e=>setTimeout(e,t)),Aa="6.9.1",a4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function o4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const l4=()=>{var n;const t=o4();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":Pb(Deno.build.os),"X-Stainless-Arch":jb(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":Pb(globalThis.process.platform??"unknown"),"X-Stainless-Arch":jb(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=c4();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function c4(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const jb=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Pb=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ob;const u4=()=>Ob??(Ob=l4());function d4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function aC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function oC(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return aC({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function lC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function h4(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const m4=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),cC="RFC3986",uC=t=>String(t),$b={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:uC},f4="RFC1738";let iy=(t,e)=>(iy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),iy(t,e));const jr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),tp=1024,p4=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=tp){const l=i.length>=tp?i.slice(o,o+tp):i,c=[];for(let d=0;d<l.length;++d){let h=l.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===f4&&(h===40||h===41)){c[c.length]=l.charAt(d);continue}if(h<128){c[c.length]=jr[h];continue}if(h<2048){c[c.length]=jr[192|h>>6]+jr[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=jr[224|h>>12]+jr[128|h>>6&63]+jr[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|l.charCodeAt(d)&1023),c[c.length]=jr[240|h>>18]+jr[128|h>>12&63]+jr[128|h>>6&63]+jr[128|h&63]}a+=c.join("")}return a};function g4(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Db(t,e){if(yn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const dC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},hC=function(t,e){Array.prototype.push.apply(t,yn(e)?e:[e])};let Mb;const Ct={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:p4,encodeValuesOnly:!1,format:cC,formatter:uC,indices:!1,serializeDate(t){return(Mb??(Mb=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function y4(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const np={};function mC(t,e,n,r,s,i,a,o,l,c,d,h,m,f,y,w,x,v){let p=t,g=v,_=0,k=!1;for(;(g=g.get(np))!==void 0&&!k;){const $=g.get(t);if(_+=1,typeof $<"u"){if($===_)throw new RangeError("Cyclic object value");k=!0}typeof g.get(np)>"u"&&(_=0)}if(typeof c=="function"?p=c(e,p):p instanceof Date?p=m==null?void 0:m(p):n==="comma"&&yn(p)&&(p=Db(p,function($){return $ instanceof Date?m==null?void 0:m($):$})),p===null){if(i)return l&&!w?l(e,Ct.encoder,x,"key",f):e;p=""}if(y4(p)||g4(p)){if(l){const $=w?e:l(e,Ct.encoder,x,"key",f);return[(y==null?void 0:y($))+"="+(y==null?void 0:y(l(p,Ct.encoder,x,"value",f)))]}return[(y==null?void 0:y(e))+"="+(y==null?void 0:y(String(p)))]}const E=[];if(typeof p>"u")return E;let C;if(n==="comma"&&yn(p))w&&l&&(p=Db(p,l)),C=[{value:p.length>0?p.join(",")||null:void 0}];else if(yn(c))C=c;else{const $=Object.keys(p);C=d?$.sort(d):$}const b=o?String(e).replace(/\./g,"%2E"):String(e),O=r&&yn(p)&&p.length===1?b+"[]":b;if(s&&yn(p)&&p.length===0)return O+"[]";for(let $=0;$<C.length;++$){const L=C[$],ge=typeof L=="object"&&typeof L.value<"u"?L.value:p[L];if(a&&ge===null)continue;const ot=h&&o?L.replace(/\./g,"%2E"):L,K=yn(p)?typeof n=="function"?n(O,ot):O:O+(h?"."+ot:"["+ot+"]");v.set(t,_);const B=new WeakMap;B.set(np,v),hC(E,mC(ge,K,n,r,s,i,a,o,n==="comma"&&w&&yn(p)?null:l,c,d,h,m,f,y,w,x,B))}return E}function v4(t=Ct){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ct.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=cC;if(typeof t.format<"u"){if(!iy($b,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=$b[n];let s=Ct.filter;(typeof t.filter=="function"||yn(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in dC?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ct.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ct.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ct.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ct.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ct.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ct.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ct.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ct.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ct.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ct.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ct.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ct.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ct.strictNullHandling}}function w4(t,e={}){let n=t;const r=v4(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):yn(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=dC[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let m=0;m<s.length;++m){const f=s[m];r.skipNulls&&n[f]===null||hC(a,mC(n[f],f,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const d=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}function x4(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let Lb;function kv(t){let e;return(Lb??(e=new globalThis.TextEncoder,Lb=e.encode.bind(e)))(t)}let Fb;function Ub(t){let e;return(Fb??(e=new globalThis.TextDecoder,Fb=e.decode.bind(e)))(t)}var Nn,In;class vm{constructor(){Nn.set(this,void 0),In.set(this,void 0),_e(this,Nn,new Uint8Array),_e(this,In,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kv(e):e;_e(this,Nn,x4([R(this,Nn,"f"),n]));const r=[];let s;for(;(s=_4(R(this,Nn,"f"),R(this,In,"f")))!=null;){if(s.carriage&&R(this,In,"f")==null){_e(this,In,s.index);continue}if(R(this,In,"f")!=null&&(s.index!==R(this,In,"f")+1||s.carriage)){r.push(Ub(R(this,Nn,"f").subarray(0,R(this,In,"f")-1))),_e(this,Nn,R(this,Nn,"f").subarray(R(this,In,"f"))),_e(this,In,null);continue}const i=R(this,In,"f")!==null?s.preceding-1:s.preceding,a=Ub(R(this,Nn,"f").subarray(0,i));r.push(a),_e(this,Nn,R(this,Nn,"f").subarray(s.index)),_e(this,In,null)}return r}flush(){return R(this,Nn,"f").length?this.decode(`
`):[]}}Nn=new WeakMap,In=new WeakMap;vm.NEWLINE_CHARS=new Set([`
`,"\r"]);vm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _4(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function b4(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const wh={off:0,error:200,warn:300,info:400,debug:500},zb=(t,e,n)=>{if(t){if(r4(wh,t))return t;Vt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(wh))}`)}};function ul(){}function Bu(t,e,n){return!e||wh[t]>wh[n]?ul:e[t].bind(e)}const S4={error:ul,warn:ul,info:ul,debug:ul};let Bb=new WeakMap;function Vt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return S4;const r=Bb.get(e);if(r&&r[0]===n)return r[1];const s={error:Bu("error",e,n),warn:Bu("warn",e,n),info:Bu("info",e,n),debug:Bu("debug",e,n)};return Bb.set(e,[n,s]),s}const Mi=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var tl;class Ur{constructor(e,n,r){this.iterator=e,tl.set(this,void 0),this.controller=n,_e(this,tl,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Vt(r):console;async function*a(){if(s)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of k4(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(d){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),d}if(c&&c.error)throw new Kt(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Kt(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(ry(l))return;throw l}finally{o||n.abort()}}return new Ur(a,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const o=new vm,l=lC(e);for await(const c of l)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*a(){if(s)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(ry(l))return;throw l}finally{o||n.abort()}}return new Ur(a,n,r)}[(tl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new Ur(()=>s(e),this.controller,R(this,tl,"f")),new Ur(()=>s(n),this.controller,R(this,tl,"f"))]}toReadableStream(){const e=this;let n;return aC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const a=kv(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*k4(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new he("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new he("Attempted to iterate over a response with no body");const n=new A4,r=new vm,s=lC(t.body);for await(const i of T4(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*T4(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?kv(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=b4(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class A4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=E4(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function E4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function fC(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{var h;if(e.options.stream)return Vt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ur.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(h=o==null?void 0:o.split(";")[0])==null?void 0:h.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const m=await n.json();return pC(m,n)}return await n.text()})();return Vt(t).debug(`[${r}] response parsed`,Mi({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}function pC(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var dl;class wm extends Promise{constructor(e,n,r=fC){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,dl.set(this,void 0),_e(this,dl,e)}_thenUnwrap(e){return new wm(R(this,dl,"f"),this.responsePromise,async(n,r)=>pC(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(R(this,dl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}dl=new WeakMap;var Gu;class Tv{constructor(e,n,r,s){Gu.set(this,void 0),_e(this,Gu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new he("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await R(this,Gu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Gu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class C4 extends wm{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await fC(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class xm extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class kt extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...iC(this.options.query),after:n}}:null}}class xh extends Tv{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...iC(this.options.query),after:e}}:null}}const gC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ll(t,e,n){return gC(),new File(t,e??"unknown_file",n)}function Nd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Av=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Gb=async(t,e)=>ay(t.body)?{...t,body:await yC(t.body,e)}:t,ca=async(t,e)=>({...t,body:await yC(t.body,e)}),Vb=new WeakMap;function N4(t){const e=typeof t=="function"?t:t.fetch,n=Vb.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return Vb.set(e,r),r}const yC=async(t,e)=>{if(!await N4(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>oy(n,r,s))),n},vC=t=>t instanceof Blob&&"name"in t,I4=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Av(t)||vC(t)),ay=t=>{if(I4(t))return!0;if(Array.isArray(t))return t.some(ay);if(t&&typeof t=="object"){for(const e in t)if(ay(t[e]))return!0}return!1},oy=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ll([await n.blob()],Nd(n)));else if(Av(n))t.append(e,Ll([await new Response(oC(n)).blob()],Nd(n)));else if(vC(n))t.append(e,n,Nd(n));else if(Array.isArray(n))await Promise.all(n.map(r=>oy(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>oy(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},wC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",R4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wC(t),j4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function P4(t,e,n){if(gC(),t=await t,R4(t))return t instanceof File?t:Ll([await t.arrayBuffer()],t.name);if(j4(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ll(await ly(s),e,n)}const r=await ly(t);if(e||(e=Nd(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Ll(r,e,n)}async function ly(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(wC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Av(t))for await(const r of t)e.push(...await ly(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${O4(t)}`)}return e}function O4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ue{constructor(e){this._client=e}}function xC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Hb=Object.freeze(Object.create(null)),$4=(t=xC)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],a=n.reduce((d,h,m)=>{var w;/[?#]/.test(h)&&(s=!0);const f=r[m];let y=(s?encodeURIComponent:t)(""+f);return m!==r.length&&(f==null||typeof f=="object"&&f.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(f.hasOwnProperty??Hb)??Hb))==null?void 0:w.toString))&&(y=f+"",i.push({start:d.length+h.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(f).slice(8,-1)} is not a valid path parameter`})),d+h+(m===r.length?"":y)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,h)=>d.start-h.start),i.length>0){let d=0;const h=i.reduce((m,f)=>{const y=" ".repeat(f.start-d),w="^".repeat(f.length);return d=f.start+f.length,m+y+w},"");throw new he(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${a}
${h}`)}return a},V=$4(xC);let _C=class extends ue{list(e,n={},r){return this._client.getAPIList(V`/chat/completions/${e}/messages`,kt,{query:n,...r})}};function _h(t){return t!==void 0&&"function"in t&&t.function!==void 0}function D4(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function Ev(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Fc(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function M4(t,e){return!e||!bC(e)?{...t,choices:t.choices.map(n=>(SC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Cv(t,e)}function Cv(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new rC;if(r.finish_reason==="content_filter")throw new sC;return SC(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>F4(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?L4(e,r.message.content):null}}});return{...t,choices:n}}function L4(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function F4(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return _h(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Fc(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function U4(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return _h(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return _h(n)&&(Fc(n)||(n==null?void 0:n.function.strict)||!1)}function bC(t){var e;return Ev(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Fc(n)||n.type==="function"&&n.function.strict===!0))??!1}function SC(t){for(const e of t||[])if(e.type!=="function")throw new he(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function z4(t){for(const e of t??[]){if(e.type!=="function")throw new he(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new he(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const bh=t=>(t==null?void 0:t.role)==="assistant",kC=t=>(t==null?void 0:t.role)==="tool";var cy,Id,Rd,hl,ml,jd,fl,os,pl,Sh,kh,Ea,TC;class Nv{constructor(){cy.add(this),this.controller=new AbortController,Id.set(this,void 0),Rd.set(this,()=>{}),hl.set(this,()=>{}),ml.set(this,void 0),jd.set(this,()=>{}),fl.set(this,()=>{}),os.set(this,{}),pl.set(this,!1),Sh.set(this,!1),kh.set(this,!1),Ea.set(this,!1),_e(this,Id,new Promise((e,n)=>{_e(this,Rd,e,"f"),_e(this,hl,n,"f")})),_e(this,ml,new Promise((e,n)=>{_e(this,jd,e,"f"),_e(this,fl,n,"f")})),R(this,Id,"f").catch(()=>{}),R(this,ml,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},R(this,cy,"m",TC).bind(this))},0)}_connected(){this.ended||(R(this,Rd,"f").call(this),this._emit("connect"))}get ended(){return R(this,pl,"f")}get errored(){return R(this,Sh,"f")}get aborted(){return R(this,kh,"f")}abort(){this.controller.abort()}on(e,n){return(R(this,os,"f")[e]||(R(this,os,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=R(this,os,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(R(this,os,"f")[e]||(R(this,os,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{_e(this,Ea,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){_e(this,Ea,!0),await R(this,ml,"f")}_emit(e,...n){if(R(this,pl,"f"))return;e==="end"&&(_e(this,pl,!0),R(this,jd,"f").call(this));const r=R(this,os,"f")[e];if(r&&(R(this,os,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!R(this,Ea,"f")&&!(r!=null&&r.length)&&Promise.reject(s),R(this,hl,"f").call(this,s),R(this,fl,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!R(this,Ea,"f")&&!(r!=null&&r.length)&&Promise.reject(s),R(this,hl,"f").call(this,s),R(this,fl,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Id=new WeakMap,Rd=new WeakMap,hl=new WeakMap,ml=new WeakMap,jd=new WeakMap,fl=new WeakMap,os=new WeakMap,pl=new WeakMap,Sh=new WeakMap,kh=new WeakMap,Ea=new WeakMap,cy=new WeakSet,TC=function(e){if(_e(this,Sh,!0),e instanceof Error&&e.name==="AbortError"&&(e=new $n),e instanceof $n)return _e(this,kh,!0),this._emit("abort",e);if(e instanceof he)return this._emit("error",e);if(e instanceof Error){const n=new he(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new he(String(e)))};function B4(t){return typeof t.parse=="function"}var sn,uy,Th,dy,hy,my,AC,EC;const G4=10;class CC extends Nv{constructor(){super(...arguments),sn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),kC(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(bh(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new he("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),R(this,sn,"m",uy).call(this)}async finalMessage(){return await this.done(),R(this,sn,"m",Th).call(this)}async finalFunctionToolCall(){return await this.done(),R(this,sn,"m",dy).call(this)}async finalFunctionToolCallResult(){return await this.done(),R(this,sn,"m",hy).call(this)}async totalUsage(){return await this.done(),R(this,sn,"m",my).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=R(this,sn,"m",Th).call(this);n&&this._emit("finalMessage",n);const r=R(this,sn,"m",uy).call(this);r&&this._emit("finalContent",r);const s=R(this,sn,"m",dy).call(this);s&&this._emit("finalFunctionToolCall",s);const i=R(this,sn,"m",hy).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",R(this,sn,"m",my).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),R(this,sn,"m",AC).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Cv(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var f,y,w;const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&i.type==="function"&&((f=i==null?void 0:i.function)==null?void 0:f.name),{maxChatCompletions:c=G4}=r||{},d=n.tools.map(x=>{if(Fc(x)){if(!x.$callback)throw new he("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),h={};for(const x of d)x.type==="function"&&(h[x.function.name||x.function.function.name]=x.function);const m="tools"in n?d.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<c;++x){const p=(y=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:y.message;if(!p)throw new he("missing message in ChatCompletion response");if(!((w=p.tool_calls)!=null&&w.length))return;for(const g of p.tool_calls){if(g.type!=="function")continue;const _=g.id,{name:k,arguments:E}=g.function,C=h[k];if(C){if(l&&l!==k){const L=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(h).map(ge=>JSON.stringify(ge)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:L});continue}let b;try{b=B4(C)?await C.parse(E):E}catch(L){const ge=L instanceof Error?L.message:String(L);this._addMessage({role:s,tool_call_id:_,content:ge});continue}const O=await C.function(b,this),$=R(this,sn,"m",EC).call(this,O);if(this._addMessage({role:s,tool_call_id:_,content:$}),l)return}}}}sn=new WeakSet,uy=function(){return R(this,sn,"m",Th).call(this).content??null},Th=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(bh(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new he("stream ended without producing a ChatCompletionMessage with role=assistant")},dy=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(bh(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},hy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(kC(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},my=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},AC=function(e){if(e.n!=null&&e.n>1)throw new he("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},EC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Iv extends CC{static runTools(e,n,r){const s=new Iv,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),bh(e)&&e.content&&this._emit("content",e.content)}}const NC=1,IC=2,RC=4,jC=8,PC=16,OC=32,$C=64,DC=128,MC=256,LC=DC|MC,FC=PC|OC|LC|$C,UC=NC|IC|FC,zC=RC|jC,V4=UC|zC,$t={STR:NC,NUM:IC,ARR:RC,OBJ:jC,NULL:PC,BOOL:OC,NAN:$C,INFINITY:DC,MINUS_INFINITY:MC,INF:LC,SPECIAL:FC,ATOM:UC,COLLECTION:zC,ALL:V4};class H4 extends Error{}class W4 extends Error{}function q4(t,e=$t.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return K4(t.trim(),e)}const K4=(t,e)=>{const n=t.length;let r=0;const s=m=>{throw new H4(`${m} at position ${r}`)},i=m=>{throw new W4(`${m} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||$t.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||$t.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||$t.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||$t.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||$t.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||$t.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),o=()=>{const m=r;let f=!1;for(r++;r<n&&(t[r]!=='"'||f&&t[r-1]==="\\");)f=t[r]==="\\"?!f:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(f)))}catch(y){i(String(y))}else if($t.STR&e)try{return JSON.parse(t.substring(m,r-Number(f))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&$t.OBJ&e)return m;const f=o();h(),r++;try{const y=a();Object.defineProperty(m,f,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if($t.OBJ&e)return m;throw y}h(),t[r]===","&&r++}}catch{if($t.OBJ&e)return m;s("Expected '}' at end of object")}return r++,m},c=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(a()),h(),t[r]===","&&r++}catch{if($t.ARR&e)return m;s("Expected ']' at end of array")}return r++,m},d=()=>{if(r===0){t==="-"&&$t.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(f){if($t.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(f))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!($t.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&$t.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(y){i(String(y))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},Wb=t=>q4(t,$t.ALL^$t.NUM);var Et,as,ba,Us,rp,Vu,sp,ip,ap,Hu,op,qb;class yc extends CC{constructor(e){super(),Et.add(this),as.set(this,void 0),ba.set(this,void 0),Us.set(this,void 0),_e(this,as,e),_e(this,ba,[])}get currentChatCompletionSnapshot(){return R(this,Us,"f")}static fromReadableStream(e){const n=new yc(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new yc(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),R(this,Et,"m",rp).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)R(this,Et,"m",sp).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new $n;return this._addChatCompletion(R(this,Et,"m",Hu).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),R(this,Et,"m",rp).call(this),this._connected();const s=Ur.fromReadableStream(e,this.controller);let i;for await(const o of s)i&&i!==o.id&&this._addChatCompletion(R(this,Et,"m",Hu).call(this)),R(this,Et,"m",sp).call(this,o),i=o.id;if((a=s.controller.signal)!=null&&a.aborted)throw new $n;return this._addChatCompletion(R(this,Et,"m",Hu).call(this))}[(as=new WeakMap,ba=new WeakMap,Us=new WeakMap,Et=new WeakSet,rp=function(){this.ended||_e(this,Us,void 0)},Vu=function(n){let r=R(this,ba,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},R(this,ba,"f")[n.index]=r,r)},sp=function(n){var s,i,a,o,l,c,d,h,m,f,y,w,x,v,p;if(this.ended)return;const r=R(this,Et,"m",qb).call(this,n);this._emit("chunk",n,r);for(const g of n.choices){const _=r.choices[g.index];g.delta.content!=null&&((s=_.message)==null?void 0:s.role)==="assistant"&&((i=_.message)!=null&&i.content)&&(this._emit("content",g.delta.content,_.message.content),this._emit("content.delta",{delta:g.delta.content,snapshot:_.message.content,parsed:_.message.parsed})),g.delta.refusal!=null&&((a=_.message)==null?void 0:a.role)==="assistant"&&((o=_.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:g.delta.refusal,snapshot:_.message.refusal}),((l=g.logprobs)==null?void 0:l.content)!=null&&((c=_.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=g.logprobs)==null?void 0:d.content,snapshot:((h=_.logprobs)==null?void 0:h.content)??[]}),((m=g.logprobs)==null?void 0:m.refusal)!=null&&((f=_.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(y=g.logprobs)==null?void 0:y.refusal,snapshot:((w=_.logprobs)==null?void 0:w.refusal)??[]});const k=R(this,Et,"m",Vu).call(this,_);_.finish_reason&&(R(this,Et,"m",ap).call(this,_),k.current_tool_call_index!=null&&R(this,Et,"m",ip).call(this,_,k.current_tool_call_index));for(const E of g.delta.tool_calls??[])k.current_tool_call_index!==E.index&&(R(this,Et,"m",ap).call(this,_),k.current_tool_call_index!=null&&R(this,Et,"m",ip).call(this,_,k.current_tool_call_index)),k.current_tool_call_index=E.index;for(const E of g.delta.tool_calls??[]){const C=(x=_.message.tool_calls)==null?void 0:x[E.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(v=C.function)==null?void 0:v.name,index:E.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((p=E.function)==null?void 0:p.arguments)??""}):(C==null||C.type,void 0))}}},ip=function(n,r){var a,o,l;if(R(this,Et,"m",Vu).call(this,n).done_tool_calls.has(r))return;const i=(a=n.message.tool_calls)==null?void 0:a[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const c=(l=(o=R(this,as,"f"))==null?void 0:o.tools)==null?void 0:l.find(d=>_h(d)&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Fc(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},ap=function(n){var s,i;const r=R(this,Et,"m",Vu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=R(this,Et,"m",op).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Hu=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const n=R(this,Us,"f");if(!n)throw new he("request ended without sending any chunks");return _e(this,Us,void 0),_e(this,ba,[]),Z4(n,R(this,as,"f"))},op=function(){var r;const n=(r=R(this,as,"f"))==null?void 0:r.response_format;return Ev(n)?n:null},qb=function(n){var r,s,i,a;let o=R(this,Us,"f");const{choices:l,...c}=n;o?Object.assign(o,c):o=_e(this,Us,{...c,choices:[]});for(const{delta:d,finish_reason:h,index:m,logprobs:f=null,...y}of n.choices){let w=o.choices[m];if(w||(w=o.choices[m]={finish_reason:h,index:m,message:{},logprobs:f,...y}),f)if(!w.logprobs)w.logprobs=Object.assign({},f);else{const{content:E,refusal:C,...b}=f;Object.assign(w.logprobs,b),E&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...E)),C&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...C))}if(h&&(w.finish_reason=h,R(this,as,"f")&&bC(R(this,as,"f")))){if(h==="length")throw new rC;if(h==="content_filter")throw new sC}if(Object.assign(w,y),!d)continue;const{content:x,refusal:v,function_call:p,role:g,tool_calls:_,...k}=d;if(Object.assign(w.message,k),v&&(w.message.refusal=(w.message.refusal||"")+v),g&&(w.message.role=g),p&&(w.message.function_call?(p.name&&(w.message.function_call.name=p.name),p.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=p.arguments)):w.message.function_call=p),x&&(w.message.content=(w.message.content||"")+x,!w.message.refusal&&R(this,Et,"m",op).call(this)&&(w.message.parsed=Wb(w.message.content))),_){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:E,id:C,type:b,function:O,...$}of _){const L=(a=w.message.tool_calls)[E]??(a[E]={});Object.assign(L,$),C&&(L.id=C),b&&(L.type=b),O&&(L.function??(L.function={name:O.name??"",arguments:""})),O!=null&&O.name&&(L.function.name=O.name),O!=null&&O.arguments&&(L.function.arguments+=O.arguments,U4(R(this,as,"f"),L)&&(L.function.parsed_arguments=Wb(L.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ur(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Z4(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:c,finish_reason:d,index:h,logprobs:m,...f})=>{if(!d)throw new he(`missing finish_reason for choice ${h}`);const{content:y=null,function_call:w,tool_calls:x,...v}=c,p=c.role;if(!p)throw new he(`missing role for choice ${h}`);if(w){const{arguments:g,name:_}=w;if(g==null)throw new he(`missing function_call.arguments for choice ${h}`);if(!_)throw new he(`missing function_call.name for choice ${h}`);return{...f,message:{content:y,function_call:{arguments:g,name:_},role:p,refusal:c.refusal??null},finish_reason:d,index:h,logprobs:m}}return x?{...f,index:h,finish_reason:d,logprobs:m,message:{...v,role:p,content:y,refusal:c.refusal??null,tool_calls:x.map((g,_)=>{const{function:k,type:E,id:C,...b}=g,{arguments:O,name:$,...L}=k||{};if(C==null)throw new he(`missing choices[${h}].tool_calls[${_}].id
${Wu(t)}`);if(E==null)throw new he(`missing choices[${h}].tool_calls[${_}].type
${Wu(t)}`);if($==null)throw new he(`missing choices[${h}].tool_calls[${_}].function.name
${Wu(t)}`);if(O==null)throw new he(`missing choices[${h}].tool_calls[${_}].function.arguments
${Wu(t)}`);return{...b,id:C,type:E,function:{...L,name:$,arguments:O}}})}}:{...f,message:{...v,content:y,role:p,refusal:c.refusal??null},finish_reason:d,index:h,logprobs:m}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return M4(l,e)}function Wu(t){return JSON.stringify(t)}class Ah extends yc{static fromReadableStream(e){const n=new Ah(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Ah(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let Rv=class extends ue{constructor(){super(...arguments),this.messages=new _C(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(V`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(V`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",kt,{query:e,...n})}delete(e,n){return this._client.delete(V`/chat/completions/${e}`,n)}parse(e,n){return z4(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Cv(r,e))}runTools(e,n){return e.stream?Ah.runTools(this._client,e,n):Iv.runTools(this._client,e,n)}stream(e,n){return yc.createChatCompletion(this._client,e,n)}};Rv.Messages=_C;class jv extends ue{constructor(){super(...arguments),this.completions=new Rv(this._client)}}jv.Completions=Rv;const BC=Symbol("brand.privateNullableHeaders");function*Y4(t){if(!t)return;if(BC in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Rb(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Rb(r[1])?r[1]:[r[1]];let a=!1;for(const o of i)o!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,o])}}const se=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,a]of Y4(r)){const o=i.toLowerCase();s.has(o)||(e.delete(i),s.add(o)),a===null?(e.delete(i),n.add(o)):(e.append(i,a),n.delete(o))}}return{[BC]:!0,values:e,nulls:n}};class GC extends ue{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:se([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class VC extends ue{create(e,n){return this._client.post("/audio/transcriptions",ca({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class HC extends ue{create(e,n){return this._client.post("/audio/translations",ca({body:e,...n,__metadata:{model:e.model}},this._client))}}class Uc extends ue{constructor(){super(...arguments),this.transcriptions=new VC(this._client),this.translations=new HC(this._client),this.speech=new GC(this._client)}}Uc.Transcriptions=VC;Uc.Translations=HC;Uc.Speech=GC;class WC extends ue{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(V`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",kt,{query:e,...n})}cancel(e,n){return this._client.post(V`/batches/${e}/cancel`,n)}}class qC extends ue{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/assistants/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/assistants/${e}`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",kt,{query:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/assistants/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let KC=class extends ue{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class ZC extends ue{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let _m=class extends ue{constructor(){super(...arguments),this.sessions=new KC(this._client),this.transcriptionSessions=new ZC(this._client)}};_m.Sessions=KC;_m.TranscriptionSessions=ZC;class YC extends ue{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(V`/chatkit/sessions/${e}/cancel`,{...n,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let JC=class extends ue{retrieve(e,n){return this._client.get(V`/chatkit/threads/${e}`,{...n,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",xh,{query:e,...n,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/chatkit/threads/${e}`,{...n,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(V`/chatkit/threads/${e}/items`,xh,{query:n,...r,headers:se([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class bm extends ue{constructor(){super(...arguments),this.sessions=new YC(this._client),this.threads=new JC(this._client)}}bm.Sessions=YC;bm.Threads=JC;class XC extends ue{create(e,n,r){return this._client.post(V`/threads/${e}/messages`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(V`/threads/${s}/messages/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/messages/${e}`,{body:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/threads/${e}/messages`,kt,{query:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(V`/threads/${s}/messages/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class QC extends ue{retrieve(e,n,r){const{thread_id:s,run_id:i,...a}=n;return this._client.get(V`/threads/${s}/runs/${i}/steps/${e}`,{query:a,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(V`/threads/${s}/runs/${e}/steps`,kt,{query:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const J4=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var lp={};const Sa=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=lp==null?void 0:lp[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var Ht,qi,fy,Mr,Pd,yr,Ki,Za,zi,Eh,jn,Od,$d,Fl,gl,yl,Kb,Zb,Yb,Jb,Xb,Qb,eS;class Ul extends Nv{constructor(){super(...arguments),Ht.add(this),fy.set(this,[]),Mr.set(this,{}),Pd.set(this,{}),yr.set(this,void 0),Ki.set(this,void 0),Za.set(this,void 0),zi.set(this,void 0),Eh.set(this,void 0),jn.set(this,void 0),Od.set(this,void 0),$d.set(this,void 0),Fl.set(this,void 0)}[(fy=new WeakMap,Mr=new WeakMap,Pd=new WeakMap,yr=new WeakMap,Ki=new WeakMap,Za=new WeakMap,zi=new WeakMap,Eh=new WeakMap,jn=new WeakMap,Od=new WeakMap,$d=new WeakMap,Fl=new WeakMap,Ht=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new qi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Ur.fromReadableStream(e,this.controller);for await(const a of s)R(this,Ht,"m",gl).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new $n;return this._addRun(R(this,Ht,"m",yl).call(this))}toReadableStream(){return new Ur(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new qi;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.submitToolOutputs(n,a,{...s,signal:this.controller.signal});this._connected();for await(const c of o)R(this,Ht,"m",gl).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new $n;return this._addRun(R(this,Ht,"m",yl).call(this))}static createThreadAssistantStream(e,n,r){const s=new qi;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new qi;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return R(this,Od,"f")}currentRun(){return R(this,$d,"f")}currentMessageSnapshot(){return R(this,yr,"f")}currentRunStepSnapshot(){return R(this,Fl,"f")}async finalRunSteps(){return await this.done(),Object.values(R(this,Mr,"f"))}async finalMessages(){return await this.done(),Object.values(R(this,Pd,"f"))}async finalRun(){if(await this.done(),!R(this,Ki,"f"))throw Error("Final run was not received.");return R(this,Ki,"f")}async _createThreadAssistantStream(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of a)R(this,Ht,"m",gl).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new $n;return this._addRun(R(this,Ht,"m",yl).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const c of o)R(this,Ht,"m",gl).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new $n;return this._addRun(R(this,Ht,"m",yl).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(ep(i)&&ep(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!ep(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}qi=Ul,gl=function(e){if(!this.ended)switch(_e(this,Od,e),R(this,Ht,"m",Yb).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":R(this,Ht,"m",eS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":R(this,Ht,"m",Zb).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":R(this,Ht,"m",Kb).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},yl=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");if(!R(this,Ki,"f"))throw Error("Final run has not been received");return R(this,Ki,"f")},Kb=function(e){const[n,r]=R(this,Ht,"m",Xb).call(this,e,R(this,yr,"f"));_e(this,yr,n),R(this,Pd,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=R(this,Za,"f")){if(R(this,zi,"f"))switch(R(this,zi,"f").type){case"text":this._emit("textDone",R(this,zi,"f").text,R(this,yr,"f"));break;case"image_file":this._emit("imageFileDone",R(this,zi,"f").image_file,R(this,yr,"f"));break}_e(this,Za,s.index)}_e(this,zi,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(R(this,Za,"f")!==void 0){const s=e.data.content[R(this,Za,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,R(this,yr,"f"));break;case"text":this._emit("textDone",s.text,R(this,yr,"f"));break}}R(this,yr,"f")&&this._emit("messageDone",e.data),_e(this,yr,void 0)}},Zb=function(e){const n=R(this,Ht,"m",Jb).call(this,e);switch(_e(this,Fl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==R(this,Eh,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(R(this,jn,"f")&&this._emit("toolCallDone",R(this,jn,"f")),_e(this,Eh,i.index),_e(this,jn,n.step_details.tool_calls[i.index]),R(this,jn,"f")&&this._emit("toolCallCreated",R(this,jn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_e(this,Fl,void 0),e.data.step_details.type=="tool_calls"&&R(this,jn,"f")&&(this._emit("toolCallDone",R(this,jn,"f")),_e(this,jn,void 0)),this._emit("runStepDone",e.data,n);break}},Yb=function(e){R(this,fy,"f").push(e),this._emit("event",e)},Jb=function(e){switch(e.event){case"thread.run.step.created":return R(this,Mr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=R(this,Mr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=qi.accumulateDelta(n,r.delta);R(this,Mr,"f")[e.data.id]=s}return R(this,Mr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":R(this,Mr,"f")[e.data.id]=e.data;break}if(R(this,Mr,"f")[e.data.id])return R(this,Mr,"f")[e.data.id];throw new Error("No snapshot available")},Xb=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=R(this,Ht,"m",Qb).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Qb=function(e,n){return qi.accumulateDelta(n,e)},eS=function(e){switch(_e(this,$d,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":_e(this,Ki,e.data),R(this,jn,"f")&&(this._emit("toolCallDone",R(this,jn,"f")),_e(this,jn,void 0));break}};let Pv=class extends ue{constructor(){super(...arguments),this.steps=new QC(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(V`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(V`/threads/${s}/runs/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/runs/${e}`,{body:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/threads/${e}/runs`,kt,{query:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(V`/threads/${s}/runs/${e}/cancel`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Ul.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i;const s=se([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await Lc(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Ul.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(V`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Ul.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Pv.Steps=QC;class Sm extends ue{constructor(){super(...arguments),this.runs=new Pv(this._client),this.messages=new XC(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/threads/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/threads/${e}`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(V`/threads/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Ul.createThreadAssistantStream(e,this._client.beta.threads,n)}}Sm.Runs=Pv;Sm.Messages=XC;class Oo extends ue{constructor(){super(...arguments),this.realtime=new _m(this._client),this.chatkit=new bm(this._client),this.assistants=new qC(this._client),this.threads=new Sm(this._client)}}Oo.Realtime=_m;Oo.ChatKit=bm;Oo.Assistants=qC;Oo.Threads=Sm;class eN extends ue{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class tN extends ue{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(V`/containers/${s}/files/${e}/content`,{...r,headers:se([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let Ov=class extends ue{constructor(){super(...arguments),this.content=new tN(this._client)}create(e,n,r){return this._client.post(V`/containers/${e}/files`,ca({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(V`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(V`/containers/${e}/files`,kt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(V`/containers/${s}/files/${e}`,{...r,headers:se([{Accept:"*/*"},r==null?void 0:r.headers])})}};Ov.Content=tN;class $v extends ue{constructor(){super(...arguments),this.files=new Ov(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(V`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",kt,{query:e,...n})}delete(e,n){return this._client.delete(V`/containers/${e}`,{...n,headers:se([{Accept:"*/*"},n==null?void 0:n.headers])})}}$v.Files=Ov;class nN extends ue{create(e,n,r){const{include:s,...i}=n;return this._client.post(V`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(V`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(V`/conversations/${e}/items`,xh,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(V`/conversations/${s}/items/${e}`,r)}}class Dv extends ue{constructor(){super(...arguments),this.items=new nN(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(V`/conversations/${e}`,n)}update(e,n,r){return this._client.post(V`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(V`/conversations/${e}`,n)}}Dv.Items=nN;let rN=class extends ue{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&Vt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(Vt(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=J4(l)}),a)))}};class sN extends ue{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(V`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(V`/evals/${s}/runs/${e}/output_items`,kt,{query:i,...r})}}class Mv extends ue{constructor(){super(...arguments),this.outputItems=new sN(this._client)}create(e,n,r){return this._client.post(V`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(V`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(V`/evals/${e}/runs`,kt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(V`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(V`/evals/${s}/runs/${e}`,r)}}Mv.OutputItems=sN;class Lv extends ue{constructor(){super(...arguments),this.runs=new Mv(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(V`/evals/${e}`,n)}update(e,n,r){return this._client.post(V`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",kt,{query:e,...n})}delete(e,n){return this._client.delete(V`/evals/${e}`,n)}}Lv.Runs=Mv;let iN=class extends ue{create(e,n){return this._client.post("/files",ca({body:e,...n},this._client))}retrieve(e,n){return this._client.get(V`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",kt,{query:e,...n})}delete(e,n){return this._client.delete(V`/files/${e}`,n)}content(e,n){return this._client.get(V`/files/${e}/content`,{...n,headers:se([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await Lc(n),a=await this.retrieve(e),Date.now()-i>r)throw new ym({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class aN extends ue{}let oN=class extends ue{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Fv extends ue{constructor(){super(...arguments),this.graders=new oN(this._client)}}Fv.Graders=oN;class lN extends ue{create(e,n,r){return this._client.getAPIList(V`/fine_tuning/checkpoints/${e}/permissions`,xm,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(V`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(V`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Uv=class extends ue{constructor(){super(...arguments),this.permissions=new lN(this._client)}};Uv.Permissions=lN;class cN extends ue{list(e,n={},r){return this._client.getAPIList(V`/fine_tuning/jobs/${e}/checkpoints`,kt,{query:n,...r})}}class zv extends ue{constructor(){super(...arguments),this.checkpoints=new cN(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(V`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",kt,{query:e,...n})}cancel(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(V`/fine_tuning/jobs/${e}/events`,kt,{query:n,...r})}pause(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(V`/fine_tuning/jobs/${e}/resume`,n)}}zv.Checkpoints=cN;class $o extends ue{constructor(){super(...arguments),this.methods=new aN(this._client),this.jobs=new zv(this._client),this.checkpoints=new Uv(this._client),this.alpha=new Fv(this._client)}}$o.Methods=aN;$o.Jobs=zv;$o.Checkpoints=Uv;$o.Alpha=Fv;class uN extends ue{}class Bv extends ue{constructor(){super(...arguments),this.graderModels=new uN(this._client)}}Bv.GraderModels=uN;class dN extends ue{createVariation(e,n){return this._client.post("/images/variations",ca({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ca({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class hN extends ue{retrieve(e,n){return this._client.get(V`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",xm,e)}delete(e,n){return this._client.delete(V`/models/${e}`,n)}}class mN extends ue{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class fN extends ue{accept(e,n,r){return this._client.post(V`/realtime/calls/${e}/accept`,{body:n,...r,headers:se([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(V`/realtime/calls/${e}/hangup`,{...n,headers:se([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(V`/realtime/calls/${e}/refer`,{body:n,...r,headers:se([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(V`/realtime/calls/${e}/reject`,{body:n,...r,headers:se([{Accept:"*/*"},r==null?void 0:r.headers])})}}class pN extends ue{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class km extends ue{constructor(){super(...arguments),this.clientSecrets=new pN(this._client),this.calls=new fN(this._client)}}km.ClientSecrets=pN;km.Calls=fN;function X4(t,e){return!e||!e5(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:gN(t,e)}function gN(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:r5(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:Q4(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||py(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function Q4(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function e5(t){var e;return!!Ev((e=t.text)==null?void 0:e.format)}function t5(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function n5(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function r5(t,e){const n=n5(t.tools??[],e.name);return{...e,...e,parsed_arguments:t5(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function py(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ka,qu,zs,Ku,tS,nS,rS,sS;class Gv extends Nv{constructor(e){super(),ka.add(this),qu.set(this,void 0),zs.set(this,void 0),Ku.set(this,void 0),_e(this,qu,e)}static createResponse(e,n,r){const s=new Gv(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var o;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),R(this,ka,"m",tS).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of i)R(this,ka,"m",nS).call(this,l,a);if((o=i.controller.signal)!=null&&o.aborted)throw new $n;return R(this,ka,"m",rS).call(this)}[(qu=new WeakMap,zs=new WeakMap,Ku=new WeakMap,ka=new WeakSet,tS=function(){this.ended||_e(this,zs,void 0)},nS=function(n,r){if(this.ended)return;const s=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},i=R(this,ka,"m",sS).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new he(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new he(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new he(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new he(`missing output at index ${n.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:s(n.type,n);break}},rS=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const n=R(this,zs,"f");if(!n)throw new he("request ended without sending any events");_e(this,zs,void 0);const r=s5(n,R(this,qu,"f"));return _e(this,Ku,r),r},sS=function(n){var s;let r=R(this,zs,"f");if(!r){if(n.type!=="response.created")throw new he(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=_e(this,zs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);const a=i.type,o=n.part;a==="message"&&o.type!=="reasoning_text"?i.content.push(o):a==="reasoning"&&o.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(o));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);if(i.type==="message"){const a=i.content[n.content_index];if(!a)throw new he(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new he(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new he(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const a=(s=i.content)==null?void 0:s[n.content_index];if(!a)throw new he(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new he(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{_e(this,zs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=R(this,Ku,"f");if(!e)throw new he("stream ended without producing a ChatCompletion");return e}}function s5(t,e){return X4(t,e)}class yN extends ue{list(e,n={},r){return this._client.getAPIList(V`/responses/${e}/input_items`,kt,{query:n,...r})}}class vN extends ue{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Tm extends ue{constructor(){super(...arguments),this.inputItems=new yN(this._client),this.inputTokens=new vN(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&py(r),r))}retrieve(e,n={},r){return this._client.get(V`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&py(s),s))}delete(e,n){return this._client.delete(V`/responses/${e}`,{...n,headers:se([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>gN(r,e))}stream(e,n){return Gv.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(V`/responses/${e}/cancel`,n)}}Tm.InputItems=yN;Tm.InputTokens=vN;class wN extends ue{create(e,n,r){return this._client.post(V`/uploads/${e}/parts`,ca({body:n,...r},this._client))}}class Vv extends ue{constructor(){super(...arguments),this.parts=new wN(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(V`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(V`/uploads/${e}/complete`,{body:n,...r})}}Vv.Parts=wN;const i5=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class xN extends ue{create(e,n,r){return this._client.post(V`/vector_stores/${e}/file_batches`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(V`/vector_stores/${s}/file_batches/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(V`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(V`/vector_stores/${s}/file_batches/${e}/files`,kt,{query:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i;const s=se([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await Lc(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,a=Math.min(i,n.length),o=this._client,l=n.values(),c=[...r];async function d(m){for(let f of m){const y=await o.files.create({file:f,purpose:"assistants"},s);c.push(y.id)}}const h=Array(a).fill(l).map(d);return await i5(h),await this.createAndPoll(e,{file_ids:c})}}class _N extends ue{create(e,n,r){return this._client.post(V`/vector_stores/${e}/files`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(V`/vector_stores/${s}/files/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(V`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(V`/vector_stores/${e}/files`,kt,{query:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(V`/vector_stores/${s}/files/${e}`,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){var i;const s=se([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await Lc(l);break;case"failed":case"completed":return o}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(V`/vector_stores/${s}/files/${e}/content`,xm,{...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Am extends ue{constructor(){super(...arguments),this.files=new _N(this._client),this.fileBatches=new xN(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(V`/vector_stores/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(V`/vector_stores/${e}`,{body:n,...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",kt,{query:e,...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(V`/vector_stores/${e}`,{...n,headers:se([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(V`/vector_stores/${e}/search`,xm,{body:n,method:"post",...r,headers:se([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Am.Files=_N;Am.FileBatches=xN;class bN extends ue{create(e,n){return this._client.post("/videos",Gb({body:e,...n},this._client))}retrieve(e,n){return this._client.get(V`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",xh,{query:e,...n})}delete(e,n){return this._client.delete(V`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(V`/videos/${e}/content`,{query:n,...r,headers:se([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(V`/videos/${e}/remix`,Gb({body:n,...r},this._client))}}var Ca,SN,Dd;class kN extends ue{constructor(){super(...arguments),Ca.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");R(this,Ca,"m",SN).call(this,r);const i=se([n]).values,a=R(this,Ca,"m",Dd).call(this,i,"webhook-signature"),o=R(this,Ca,"m",Dd).call(this,i,"webhook-timestamp"),l=R(this,Ca,"m",Dd).call(this,i,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new cl("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-c>s)throw new cl("Webhook timestamp is too old");if(c>d+s)throw new cl("Webhook timestamp is too new");const h=a.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),f=l?`${l}.${o}.${e}`:`${o}.${e}`,y=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of h)try{const x=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",y,x,new TextEncoder().encode(f)))return}catch{continue}throw new cl("The given webhook signature does not match the expected signature")}}Ca=new WeakSet,SN=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Dd=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var gy,Hv,Md,TN;class Ce{constructor({baseURL:e=Sa("OPENAI_BASE_URL"),apiKey:n=Sa("OPENAI_API_KEY"),organization:r=Sa("OPENAI_ORG_ID")??null,project:s=Sa("OPENAI_PROJECT_ID")??null,webhookSecret:i=Sa("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(gy.add(this),Md.set(this,void 0),this.completions=new eN(this),this.chat=new jv(this),this.embeddings=new rN(this),this.files=new iN(this),this.images=new dN(this),this.audio=new Uc(this),this.moderations=new mN(this),this.models=new hN(this),this.fineTuning=new $o(this),this.graders=new Bv(this),this.vectorStores=new Am(this),this.webhooks=new kN(this),this.beta=new Oo(this),this.batches=new WC(this),this.uploads=new Vv(this),this.responses=new Tm(this),this.realtime=new km(this),this.conversations=new Dv(this),this.evals=new Lv(this),this.containers=new $v(this),this.videos=new bN(this),n===void 0)throw new he("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:s,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&a4())throw new he(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??Hv.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=zb(o.logLevel,"ClientOptions.logLevel",this)??zb(Sa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??d4(),_e(this,Md,m4),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return se([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return w4(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${KE()}`}makeStatusError(e,n,r,s){return Kt.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof he?r:new he(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new he(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!R(this,gy,"m",TN).call(this)&&r||this.baseURL,i=t4(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return n4(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new wm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var v,p;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:a,url:o,timeout:l}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(a,{url:o,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if(Vt(this).debug(`[${c}] sending request`,Mi({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:a.headers})),(v=s.signal)!=null&&v.aborted)throw new $n;const m=new AbortController,f=await this.fetchWithTimeout(o,a,l,m).catch(sy),y=Date.now();if(f instanceof globalThis.Error){const g=`retrying, ${n} attempts remaining`;if((p=s.signal)!=null&&p.aborted)throw new $n;const _=ry(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(n)return Vt(this).info(`[${c}] connection ${_?"timed out":"failed"} - ${g}`),Vt(this).debug(`[${c}] connection ${_?"timed out":"failed"} (${g})`,Mi({retryOfRequestLogID:r,url:o,durationMs:y-h,message:f.message})),this.retryRequest(s,n,r??c);throw Vt(this).info(`[${c}] connection ${_?"timed out":"failed"} - error; no more retries left`),Vt(this).debug(`[${c}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Mi({retryOfRequestLogID:r,url:o,durationMs:y-h,message:f.message})),_?new ym:new gm({cause:f})}const w=[...f.headers.entries()].filter(([g])=>g==="x-request-id").map(([g,_])=>", "+g+": "+JSON.stringify(_)).join(""),x=`[${c}${d}${w}] ${a.method} ${o} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${y-h}ms`;if(!f.ok){const g=await this.shouldRetry(f);if(n&&g){const O=`retrying, ${n} attempts remaining`;return await h4(f.body),Vt(this).info(`${x} - ${O}`),Vt(this).debug(`[${c}] response error (${O})`,Mi({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:y-h})),this.retryRequest(s,n,r??c,f.headers)}const _=g?"error; no more retries left":"error; not retryable";Vt(this).info(`${x} - ${_}`);const k=await f.text().catch(O=>sy(O).message),E=i4(k),C=E?void 0:k;throw Vt(this).debug(`[${c}] response error (${_})`,Mi({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:C,durationMs:Date.now()-h})),this.makeStatusError(f.status,E,C,f.headers)}return Vt(this).info(x),Vt(this).debug(`[${c}] response start`,Mi({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:y-h})),{response:f,options:s,controller:m,requestLogID:c,retryOfRequestLogID:r,startTime:h}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new C4(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:a,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,d={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...o};a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const a=s==null?void 0:s.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(i=l)}const o=s==null?void 0:s.get("retry-after");if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Lc(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:a,defaultBaseURL:o}=r,l=this.buildURL(i,a,o);"timeout"in r&&s4("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:d}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=se([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...u4(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=se([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oC(e)}:R(this,Md,"f").call(this,{body:e,headers:r})}}Hv=Ce,Md=new WeakMap,gy=new WeakSet,TN=function(){return this.baseURL!=="https://api.openai.com/v1"};Ce.OpenAI=Hv;Ce.DEFAULT_TIMEOUT=6e5;Ce.OpenAIError=he;Ce.APIError=Kt;Ce.APIConnectionError=gm;Ce.APIConnectionTimeoutError=ym;Ce.APIUserAbortError=$n;Ce.NotFoundError=XE;Ce.ConflictError=QE;Ce.RateLimitError=tC;Ce.BadRequestError=ZE;Ce.AuthenticationError=YE;Ce.InternalServerError=nC;Ce.PermissionDeniedError=JE;Ce.UnprocessableEntityError=eC;Ce.InvalidWebhookSignatureError=cl;Ce.toFile=P4;Ce.Completions=eN;Ce.Chat=jv;Ce.Embeddings=rN;Ce.Files=iN;Ce.Images=dN;Ce.Audio=Uc;Ce.Moderations=mN;Ce.Models=hN;Ce.FineTuning=$o;Ce.Graders=Bv;Ce.VectorStores=Am;Ce.Webhooks=kN;Ce.Beta=Oo;Ce.Batches=WC;Ce.Uploads=Vv;Ce.Responses=Tm;Ce.Realtime=km;Ce.Conversations=Dv;Ce.Evals=Lv;Ce.Containers=$v;Ce.Videos=bN;function AN(t){if(!t||typeof t!="object")return t;let e;return t.constructor.name===ym.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===$n.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="AbortError"):"status"in t&&t.status===400&&"message"in t&&typeof t.message=="string"&&t.message.includes("tool_calls")?e=zu(t,"INVALID_TOOL_RESULTS"):"status"in t&&t.status===401?e=zu(t,"MODEL_AUTHENTICATION"):"status"in t&&t.status===429?e=zu(t,"MODEL_RATE_LIMIT"):"status"in t&&t.status===404?e=zu(t,"MODEL_NOT_FOUND"):e=t,e}var a5=Object.defineProperty,De=(t,e)=>{for(var n in e)a5(t,n,{get:e[n],enumerable:!0})};function Jr(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Wv(t){return Jr(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function qv(t){return Jr(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function o5(t){return Jr(t)&&t.source_type==="text"&&"text"in t&&typeof t.text=="string"}function EN(t){return Jr(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function CN(t){if(Jr(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function yy(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const n=e[0].trim(),r=e[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const s={};for(const i of t.split(";").slice(1)){const a=i.split("=");if(a.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const o=a[0].trim(),l=a[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);s[o]=l}return{type:n,subtype:r,parameters:s}}function vc({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const s=e?Uint8Array.from(atob(n[2]),i=>i.charCodeAt(0)):n[2];return{mime_type:r,data:s}}}function Kv(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function NN(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var l5=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const c5=Yk(l5);var IN={exports:{}};const u5=/[\p{Lu}]/u,d5=/[\p{Ll}]/u,iS=/^[\p{Lu}](?![\p{Lu}])/gu,RN=/([\p{Alpha}\p{N}_]|$)/u,jN=/[_.\- ]+/,h5=new RegExp("^"+jN.source),aS=new RegExp(jN.source+RN.source,"gu"),oS=new RegExp("\\d+"+RN.source,"gu"),m5=(t,e,n)=>{let r=!1,s=!1,i=!1;for(let a=0;a<t.length;a++){const o=t[a];r&&u5.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,i=s,s=!0,a++):s&&i&&d5.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),i=s,s=!1,r=!0):(r=e(o)===o&&n(o)!==o,i=s,s=n(o)===o&&e(o)!==o)}return t},f5=(t,e)=>(iS.lastIndex=0,t.replace(iS,n=>e(n))),p5=(t,e)=>(aS.lastIndex=0,oS.lastIndex=0,t.replace(aS,(n,r)=>e(r)).replace(oS,n=>e(n))),PN=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(i=>i.trim()).filter(i=>i.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),r=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=m5(t,n,r)),t=t.replace(h5,""),e.preserveConsecutiveUppercase?t=f5(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),p5(t,r))};IN.exports=PN;IN.exports.default=PN;function g5(t,e){return(e==null?void 0:e[t])||c5(t)}function y5(t,e,n){const r={};for(const s in t)Object.hasOwn(t,s)&&(r[e(s,n)]=t[s]);return r}var v5={};De(v5,{Serializable:()=>yo,get_lc_unique_name:()=>Zv});function lS(t){return Array.isArray(t)?[...t]:{...t}}function w5(t,e){const n=lS(t);for(const[r,s]of Object.entries(e)){const[i,...a]=r.split(".").reverse();let o=n;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=lS(o[l]),o=o[l]}o[i]!==void 0&&(o[i]={lc:1,type:"secret",id:[s]})}return n}function Zv(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var yo=class ON{constructor(e,...n){T(this,"lc_serializable",!1);T(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(r)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Zv(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof ON||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((s,i)=>(s[i]=i in this?this[i]:this.lc_kwargs[i],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(n,Reflect.get(s,"lc_secrets",this)),Object.assign(r,Reflect.get(s,"lc_attributes",this));return Object.keys(n).forEach(s=>{let i=this,a=r;const[o,...l]=s.split(".").reverse();for(const c of l.reverse()){if(!(c in i)||i[c]===void 0)return;(!(c in a)||a[c]===void 0)&&(typeof i[c]=="object"&&i[c]!=null?a[c]={}:Array.isArray(i[c])&&(a[c]=[])),i=i[c],a=a[c]}o in i&&i[o]!==void 0&&(a[o]=a[o]||i[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:y5(Object.keys(n).length?w5(r,n):r,g5,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function me(t,e){return Se(t)&&t.type===e}function Se(t){return typeof t=="object"&&t!==null}function qr(t){return Array.isArray(t)}function re(t){return typeof t=="string"}function vr(t){return typeof t=="number"}function Yv(t){return t instanceof Uint8Array}function cS(t){try{return JSON.parse(t)}catch{return}}const wc=t=>t();function x5(t){if(t.type==="char_location"&&re(t.document_title)&&vr(t.start_char_index)&&vr(t.end_char_index)&&re(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="page_location"&&re(t.document_title)&&vr(t.start_page_number)&&vr(t.end_page_number)&&re(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="content_block_location"&&re(t.document_title)&&vr(t.start_block_index)&&vr(t.end_block_index)&&re(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:r,citedText:s}}if(t.type==="web_search_result_location"&&re(t.url)&&re(t.title)&&re(t.encrypted_index)&&re(t.cited_text)){const{url:e,title:n,encrypted_index:r,cited_text:s,...i}=t;return{...i,type:"citation",source:"url",url:e,title:n,startIndex:Number(r),endIndex:Number(r),citedText:s}}if(t.type==="search_result_location"&&re(t.source)&&re(t.title)&&vr(t.start_block_index)&&vr(t.end_block_index)&&re(t.cited_text)){const{source:e,title:n,start_block_index:r,end_block_index:s,cited_text:i,...a}=t;return{...a,type:"citation",source:"search",url:e,title:n??void 0,startIndex:r,endIndex:s,citedText:i}}}function $N(t){if(me(t,"document")&&Se(t.source)&&"type"in t.source){if(t.source.type==="base64"&&re(t.source.media_type)&&re(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&re(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&re(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&re(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(me(t,"image")&&Se(t.source)&&"type"in t.source){if(t.source.type==="base64"&&re(t.source.media_type)&&re(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&re(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&re(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function _5(t){function*e(){for(const n of t){const r=$N(n);r?yield r:yield n}}return Array.from(e())}function uS(t){function*e(){var r;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n){if(me(s,"text")&&re(s.text)){const{text:i,citations:a,...o}=s;if(qr(a)&&a.length){const l=a.reduce((c,d)=>{const h=x5(d);return h?[...c,h]:c},[]);yield{...o,type:"text",text:i,annotations:l};continue}else{yield{...o,type:"text",text:i};continue}}else if(me(s,"thinking")&&re(s.thinking)){const{thinking:i,signature:a,...o}=s;yield{...o,type:"reasoning",reasoning:i,signature:a};continue}else if(me(s,"redacted_thinking")){yield{type:"non_standard",value:s};continue}else if(me(s,"tool_use")&&re(s.name)&&re(s.id)){yield{type:"tool_call",id:s.id,name:s.name,args:s.input};continue}else if(me(s,"input_json_delta")){if(S5(t)&&((r=t.tool_call_chunks)!=null&&r.length)){const i=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:i.id,name:i.name,args:i.args,index:i.index};continue}}else if(me(s,"server_tool_use")&&re(s.name)&&re(s.id)){const{name:i,id:a}=s;if(i==="web_search"){const o=wc(()=>{if(typeof s.input=="string")return s.input;if(Se(s.input)&&re(s.input.query))return s.input.query;if(re(s.partial_json)){const l=cS(s.partial_json);if(l!=null&&l.query)return l.query}return""});yield{id:a,type:"server_tool_call",name:"web_search",args:{query:o}};continue}else if(s.name==="code_execution"){const o=wc(()=>{if(typeof s.input=="string")return s.input;if(Se(s.input)&&re(s.input.code))return s.input.code;if(re(s.partial_json)){const l=cS(s.partial_json);if(l!=null&&l.code)return l.code}return""});yield{id:a,type:"server_tool_call",name:"code_execution",args:{code:o}};continue}}else if(me(s,"web_search_tool_result")&&re(s.tool_use_id)&&qr(s.content)){const{content:i,tool_use_id:a}=s,o=i.reduce((l,c)=>me(c,"web_search_result")?[...l,c.url]:l,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:a,status:"success",output:{urls:o}};continue}else if(me(s,"code_execution_tool_result")&&re(s.tool_use_id)&&Se(s.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(me(s,"mcp_tool_use")){yield{id:s.id,type:"server_tool_call",name:"mcp_tool_use",args:s.input};continue}else if(me(s,"mcp_tool_result")&&re(s.tool_use_id)&&Se(s.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:s.tool_use_id,status:"success",output:s.content};continue}else if(me(s,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:s.input};continue}else if(me(s,"search_result")){yield{id:s.id,type:"non_standard",value:s};continue}else if(me(s,"tool_result")){yield{id:s.id,type:"non_standard",value:s};continue}else{const i=$N(s);if(i){yield i;continue}}yield{type:"non_standard",value:s}}}return Array.from(e())}const b5={translateContent:uS,translateContentChunk:uS};function S5(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function k5(t){return Wv(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:qv(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:EN(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function T5(t){return t.map(k5)}function A5(t){return!!(me(t,"image_url")&&Se(t.image_url)||me(t,"input_audio")&&Se(t.input_audio)||me(t,"file")&&Se(t.file))}function E5(t){if(me(t,"image_url")&&Se(t.image_url)&&re(t.image_url.url)){const e=vc({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(me(t,"input_audio")&&Se(t.input_audio)&&re(t.input_audio.data)&&re(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(me(t,"file")&&Se(t.file)&&re(t.file.data)){const e=vc({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(re(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function C5(t){const e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Jv(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function N5(t){const e=[];typeof t.content=="string"?e.push({type:"text",text:t.content}):e.push(...Jv(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function Jv(t){const e=[];for(const n of t)A5(n)?e.push(E5(n)):e.push(n);return e}function I5(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:r,end_index:s}=t;return{type:"citation",url:e,title:n,startIndex:r,endIndex:s}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:r}=t;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:e}}return t}function DN(t){function*e(){var r;Se((r=t.additional_kwargs)==null?void 0:r.reasoning)&&qr(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((i,a)=>Se(a)&&re(a.text)?`${i}${a.text}`:i,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const s of n)if(me(s,"text")){const{text:i,annotations:a,...o}=s;Array.isArray(a)?yield{...o,type:"text",text:String(i),annotations:a.map(I5)}:yield{...o,type:"text",text:String(i)}}for(const s of t.tool_calls??[])yield{type:"tool_call",id:s.id,name:s.name,args:s.args};if(Se(t.additional_kwargs)&&qr(t.additional_kwargs.tool_outputs))for(const s of t.additional_kwargs.tool_outputs){if(me(s,"web_search_call")){yield{id:s.id,type:"server_tool_call",name:"web_search",args:{query:s.query}};continue}else if(me(s,"file_search_call")){yield{id:s.id,type:"server_tool_call",name:"file_search",args:{query:s.query}};continue}else if(me(s,"computer_call")){yield{type:"non_standard",value:s};continue}else if(me(s,"code_interpreter_call")){if(re(s.code)&&(yield{id:s.id,type:"server_tool_call",name:"code_interpreter",args:{code:s.code}}),qr(s.outputs)){const i=wc(()=>{if(s.status!=="in_progress"){if(s.status==="completed")return 0;if(s.status==="incomplete")return 127;if(s.status!=="interpreting"&&s.status==="failed")return 1}});for(const a of s.outputs)if(me(a,"logs")){yield{type:"server_tool_call_result",toolCallId:s.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:i??0,stderr:[0,void 0].includes(i)?void 0:String(a.logs),stdout:[0,void 0].includes(i)?String(a.logs):void 0}};continue}}continue}else if(me(s,"mcp_call")){yield{id:s.id,type:"server_tool_call",name:"mcp_call",args:s.input};continue}else if(me(s,"mcp_list_tools")){yield{id:s.id,type:"server_tool_call",name:"mcp_list_tools",args:s.input};continue}else if(me(s,"mcp_approval_request")){yield{type:"non_standard",value:s};continue}else if(me(s,"image_generation_call")){yield{type:"non_standard",value:s};continue}Se(s)&&(yield{type:"non_standard",value:s})}}return Array.from(e())}function R5(t){function*e(){yield*DN(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const j5={translateContent:t=>typeof t.content=="string"?C5(t):DN(t),translateContentChunk:t=>typeof t.content=="string"?N5(t):R5(t)};function P5(t,e="pretty"){return e==="pretty"?O5(t):JSON.stringify(t)}function O5(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),s="=".repeat(r),i=n.length%2===0?s:`${s}=`;if(e.push(`${s}${n}${i}`),t.type==="ai"){const a=t;if(a.tool_calls&&a.tool_calls.length>0){e.push("Tool Calls:");for(const o of a.tool_calls){e.push(`  ${o.name} (${o.id})`),e.push(` Call ID: ${o.id}`),e.push("  Args:");for(const[l,c]of Object.entries(o.args))e.push(`    ${l}: ${c}`)}}}if(t.type==="tool"){const a=t;a.name&&e.push(`Name: ${a.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const cp=Symbol.for("langchain.message");function As(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>Jr(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?zc(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>Jr(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function MN(t,e){return t==="error"||e==="error"?"error":"success"}function $5(t,e){function n(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>n(a,s+1));const i={};for(const a of Object.keys(r))i[a]=n(r[a],s+1);return i}return JSON.stringify(n(t,0),null,2)}var Zk,Ps=class extends yo{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);T(this,"lc_namespace",["langchain_core","messages"]);T(this,"lc_serializable",!0);T(this,Zk,!0);T(this,"id");T(this,"name");T(this,"content");T(this,"additional_kwargs");T(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[T5,Jv,_5].reduce((s,i)=>i(s),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&cp in e&&e[cp]===!0&&NN(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(Zk=cp,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=$5(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return P5(this,e)}};function D5(t){return Array.isArray(t)&&t.every(e=>typeof e.index=="number")}function en(t={},e={}){const n={...t};for(const[r,s]of Object.entries(e))if(n[r]==null)n[r]=s;else{if(s==null)continue;if(typeof n[r]!=typeof s||Array.isArray(n[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;["id","name","output_version","model_provider"].includes(r)?n[r]=s:n[r]+=s}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=en(n[r],s);else if(Array.isArray(n[r]))n[r]=zc(n[r],s);else{if(n[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function zc(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&r!==null&&"index"in r&&typeof r.index=="number"){const s=n.findIndex(i=>{const a=typeof i=="object",o="index"in i&&i.index===r.index,l="id"in i&&"id"in r&&(i==null?void 0:i.id)===(r==null?void 0:r.id),c=!("id"in i)||!(i!=null&&i.id)||!("id"in r)||!(r!=null&&r.id);return a&&o&&(l||c)});s!==-1&&typeof n[s]=="object"&&n[s]!==null?n[s]=en(n[s],r):n.push(r)}else{if(typeof r=="object"&&r!==null&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function LN(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return zc(t,e);if(typeof t=="object"&&typeof e=="object")return en(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}var ki=class FN extends Ps{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===FN.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function UN(t){return typeof t.role=="string"}function Qs(t){return typeof(t==null?void 0:t._getType)=="function"}function Xv(t){return ki.isInstance(t)}function zN(t,e){return en(t??{},e??{})}function BN(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function M5(t,e){const n={...BN(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function L5(t,e){const n={...BN(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function GN(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:M5(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:L5(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var F5={};De(F5,{ToolMessage:()=>Xr,ToolMessageChunk:()=>Bc,defaultToolCallParser:()=>ew,isDirectToolOutput:()=>Qv,isToolMessage:()=>VN,isToolMessageChunk:()=>HN});function Qv(t){return t!=null&&typeof t=="object"&&"lc_direct_tool_output"in t&&t.lc_direct_tool_output===!0}var Xr=class extends Ps{constructor(e,n,r){const s=typeof e=="string"||Array.isArray(e)?{content:e,name:r,tool_call_id:n}:e;super(s);T(this,"lc_direct_tool_output",!0);T(this,"type","tool");T(this,"status");T(this,"tool_call_id");T(this,"metadata");T(this,"artifact");this.tool_call_id=s.tool_call_id,this.artifact=s.artifact,this.status=s.status,this.metadata=s.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Bc=class extends ki{constructor(e){super(e);T(this,"type","tool");T(this,"tool_call_id");T(this,"status");T(this,"artifact");this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const n=this.constructor;return new n({content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),artifact:LN(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:MN(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function ew(t){const e=[],n=[];for(const r of t)if(r.function){const s=r.function.name;try{const i=JSON.parse(r.function.arguments);e.push({name:s||"",args:i||{},id:r.id})}catch{n.push({name:s,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}function VN(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function HN(t){return t._getType()==="tool"}function vy(t,e=Em){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let r=t.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const s=r.indexOf("```");let i=r;return s!==-1&&(i=r.substring(0,s)),e(i.trim())}function Em(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,s=!1;for(let i of t){if(r)i==='"'&&!s?r=!1:i===`
`&&!s?i="\\n":i==="\\"?s=!s:s=!1;else if(i==='"')r=!0,s=!1;else if(i==="{")n.push("}");else if(i==="[")n.push("]");else if(i==="}"||i==="]")if(n&&n[n.length-1]===i)n.pop();else return null;e+=i}r&&(e+='"');for(let i=n.length-1;i>=0;i-=1)e+=n[i];try{return JSON.parse(e)}catch{return null}}function tw(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function U5(t){if(Se(t.document)&&Se(t.document.source)){const e=Se(t.document)&&re(t.document.format)?t.document.format:"",n=tw(e);if(Se(t.document.source)){if(Se(t.document.source.s3Location)&&re(t.document.source.s3Location.uri))return{type:"file",mimeType:n,fileId:t.document.source.s3Location.uri};if(Yv(t.document.source.bytes))return{type:"file",mimeType:n,data:t.document.source.bytes};if(re(t.document.source.text))return{type:"file",mimeType:n,data:Buffer.from(t.document.source.text).toString("base64")};if(qr(t.document.source.content)){const r=t.document.source.content.reduce((s,i)=>Se(i)&&re(i.text)?s+i.text:s,"");return{type:"file",mimeType:n,data:r}}}}return{type:"non_standard",value:t}}function z5(t){if(me(t,"image")&&Se(t.image)){const e=Se(t.image)&&re(t.image.format)?t.image.format:"",n=tw(e);if(Se(t.image.source)){if(Se(t.image.source.s3Location)&&re(t.image.source.s3Location.uri))return{type:"image",mimeType:n,fileId:t.image.source.s3Location.uri};if(Yv(t.image.source.bytes))return{type:"image",mimeType:n,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function B5(t){if(me(t,"video")&&Se(t.video)){const e=Se(t.video)&&re(t.video.format)?t.video.format:"",n=tw(e);if(Se(t.video.source)){if(Se(t.video.source.s3Location)&&re(t.video.source.s3Location.uri))return{type:"video",mimeType:n,fileId:t.video.source.s3Location.uri};if(Yv(t.video.source.bytes))return{type:"video",mimeType:n,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function dS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(me(r,"citations_content")&&Se(r.citationsContent)){const s=qr(r.citationsContent.content)?r.citationsContent.content.reduce((a,o)=>Se(o)&&re(o.text)?a+o.text:a,""):"",i=qr(r.citationsContent.citations)?r.citationsContent.citations.reduce((a,o)=>{if(Se(o)){const l=qr(o.sourceContent)?o.sourceContent.reduce((d,h)=>Se(h)&&re(h.text)?d+h.text:d,""):"",c=wc(()=>{if(Se(o.location)){const d=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Se(d))return{source:vr(d.documentIndex)?d.documentIndex.toString():void 0,startIndex:vr(d.start)?d.start:void 0,endIndex:vr(d.end)?d.end:void 0}}return{}});a.push({type:"citation",citedText:l,...c})}return a},[]):[];yield{type:"text",text:s,annotations:i};continue}else if(me(r,"document")&&Se(r.document)){yield U5(r);continue}else if(me(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(me(r,"image")&&Se(r.image)){yield z5(r);continue}else if(me(r,"reasoning_content")&&re(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(me(r,"text")&&re(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(me(r,"tool_call"))continue;if(me(r,"video")&&Se(r.video)){yield B5(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(e())}const G5={translateContent:dS,translateContentChunk:dS};function hS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"text")&&re(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"inlineData")&&Se(r.inlineData)&&re(r.inlineData.mimeType)&&re(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(me(r,"functionCall")&&Se(r.functionCall)&&re(r.functionCall.name)&&Se(r.functionCall.args)){yield{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(me(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(me(r,"fileData")&&Se(r.fileData)&&re(r.fileData.mimeType)&&re(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(me(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(me(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const V5={translateContent:hS,translateContentChunk:hS};function mS(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(me(r,"reasoning")&&re(r.reasoning)){const s=wc(()=>{var a;const i=n.indexOf(r);if(qr((a=t.additional_kwargs)==null?void 0:a.signatures)&&i>=0)return t.additional_kwargs.signatures.at(i)});re(s)?yield{type:"reasoning",reasoning:r.reasoning,signature:s}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(me(r,"text")&&re(r.text)){yield{type:"text",text:r.text};continue}else if(me(r,"image_url")){if(re(r.image_url))if(r.image_url.startsWith("data:")){const s=/^data:([^;]+);base64,(.+)$/,i=r.image_url.match(s);i?yield{type:"image",data:i[2],mimeType:i[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(me(r,"media")&&re(r.mimeType)&&re(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const H5={translateContent:mS,translateContentChunk:mS};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",b5],["bedrock-converse",G5],["google-genai",V5],["google-vertexai",H5],["openai",j5]]));function WN(t){return globalThis.lc_block_translators_registry.get(t)}var Cn=class extends Ps{constructor(e){var r;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const s=(r=n.additional_kwargs)==null?void 0:r.tool_calls,i=n.tool_calls;s!=null&&s.length>0&&(i===void 0||i.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(s!=null&&i===void 0){const[a,o]=ew(s);n.tool_calls=a??[],n.invalid_tool_calls=o??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.contentBlocks.push(...n.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const a=n.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>{var l;return!((l=n.tool_calls)!=null&&l.some(c=>c.id===o.id&&c.name===o.name))});a.length>0&&(n.tool_calls=a.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(n);T(this,"type","ai");T(this,"tool_calls",[]);T(this,"invalid_tool_calls",[]);T(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=WN(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(r=>!e.some(s=>s.id===r.id&&s.name===r.name));e.push(...n.map(r=>({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function Cm(t){return t._getType()==="ai"}function wy(t){return t._getType()==="ai"}var ts=class extends ki{constructor(e){var r,s;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const a=(e.tool_call_chunks??[]).reduce((c,d)=>{const h=c.findIndex(([m])=>"id"in d&&d.id&&"index"in d&&d.index!==void 0?d.id===m.id&&d.index===m.index:"id"in d&&d.id?d.id===m.id:"index"in d&&d.index!==void 0?d.index===m.index:!1);return h!==-1?c[h].push(d):c.push([d]),c},[]),o=[],l=[];for(const c of a){let d=null;const h=((r=c[0])==null?void 0:r.name)??"",m=c.map(w=>w.args||"").join(""),f=m.length?m:"{}",y=(s=c[0])==null?void 0:s.id;try{if(d=Em(f),!y||d===null||typeof d!="object"||Array.isArray(d))throw new Error("Malformed tool call chunk args.");o.push({name:h,args:d,id:y,type:"tool_call"})}catch{l.push({name:h,args:f,id:y,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:o,invalid_tool_calls:l,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);T(this,"type","ai");T(this,"tool_calls",[]);T(this,"invalid_tool_calls",[]);T(this,"tool_call_chunks",[]);T(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=WN(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(r=>r.type==="tool_call").map(r=>r.id);for(const r of this.tool_calls)r.id&&!n.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:zN(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const s=zc(this.tool_call_chunks,e.tool_call_chunks);s!==void 0&&s.length>0&&(n.tool_call_chunks=s)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=GN(this.usage_metadata,e.usage_metadata));const r=this.constructor;return new r(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}},pa=class qN extends Ps{constructor(n,r){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:r});super(n);T(this,"type","generic");T(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return qN}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},Gc=class extends ki{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);T(this,"type","generic");T(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function W5(t){return t._getType()==="generic"}function q5(t){return t._getType()==="generic"}var Nm=class extends Ps{constructor(e){super(e);T(this,"type","function");T(this,"name");this.name=e.name}static lc_name(){return"FunctionMessage"}},Vc=class extends ki{constructor(){super(...arguments);T(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function K5(t){return t._getType()==="function"}function Z5(t){return t._getType()==="function"}var ns=class extends Ps{constructor(e){super(e);T(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},Hc=class extends ki{constructor(e){super(e);T(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function Y5(t){return t.getType()==="human"}function J5(t){return t.getType()==="human"}var Es=class Ld extends Ps{constructor(n){super(n);T(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new Ld({...this,content:As(this.content,n)});if(Ld.isInstance(n))return new Ld({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:As(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},gi=class extends ki{constructor(e){super(e);T(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:As(this.content,e.content),additional_kwargs:en(this.additional_kwargs,e.additional_kwargs),response_metadata:en(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function X5(t){return t._getType()==="system"}function Q5(t){return t._getType()==="system"}var Ch=class extends Ps{constructor(e){super({...e,content:[]});T(this,"type","remove");T(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}};function KN(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function zl(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}function e3(t){return!!(t&&typeof t=="object"&&"toolCall"in t&&t.toolCall!=null&&typeof t.toolCall=="object"&&"id"in t.toolCall&&typeof t.toolCall.id=="string")}var Nh=class extends Error{constructor(e,n){super(e);T(this,"output");this.output=n}};const ZN=t=>t();function t3(t){return zl(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function n3(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function up(t){let e,n;if(n3(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...s}=t;e=r,n=s}if(e==="human"||e==="user")return new ns(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...s}=n;if(!Array.isArray(r))return new Cn(n);const i=r.map(t3);return new Cn({...s,tool_calls:i})}else{if(e==="system")return new Es(n);if(e==="developer")return new Es({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new Xr({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new Ch({...n,id:n.id});throw KN(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Bl(t){if(typeof t=="string")return new ns(t);if(Qs(t))return t;if(Array.isArray(t)){const[e,n]=t;return up({type:e,content:n})}else if(UN(t)){const{role:e,...n}=t;return up({...n,type:e})}else return up(t)}function nw(t,e="Human",n="AI"){const r=[];for(const s of t){let i;if(s._getType()==="human")i=e;else if(s._getType()==="ai")i=n;else if(s._getType()==="system")i="System";else if(s._getType()==="tool")i="Tool";else if(s._getType()==="generic")i=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const a=s.name?`${s.name}, `:"",o=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);r.push(`${i}: ${a}${o}`)}return r.join(`
`)}function r3(t){if(t.data!==void 0)return t;{const e=t;return{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}}}}function rw(t){const e=r3(t);switch(e.type){case"human":return new ns(e.data);case"ai":return new Cn(e.data);case"system":return new Es(e.data);case"function":if(e.data.name===void 0)throw new Error("Name must be defined for function messages");return new Nm(e.data);case"tool":if(e.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new Xr(e.data);case"generic":if(e.data.role===void 0)throw new Error("Role must be defined for chat messages");return new pa(e.data);default:throw new Error(`Got unexpected type: ${e.type}`)}}function s3(t){return t.map(rw)}function i3(t){return t.map(e=>e.toDict())}function Ih(t){var n;const e=t._getType();if(e==="human")return new Hc({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new ts({...r})}else{if(e==="system")return new gi({...t});if(e==="function")return new Vc({...t});if(pa.isInstance(t))return new Gc({...t});throw new Error("Unknown message type.")}}const YN=Symbol.for("ls:tracing_async_local_storage"),Gl=Symbol.for("lc:context_variables"),a3=t=>{globalThis[YN]=t},xc=()=>globalThis[YN];var dp={},o3={};De(o3,{getEnv:()=>sw,getEnvironmentVariable:()=>Kr,getRuntimeEnvironment:()=>tI,isBrowser:()=>JN,isDeno:()=>Im,isJsDom:()=>QN,isNode:()=>eI,isWebWorker:()=>XN});const JN=()=>typeof window<"u"&&typeof window.document<"u",XN=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",QN=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),Im=()=>typeof Deno<"u",eI=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Im(),sw=()=>{let t;return JN()?t="browser":eI()?t="node":XN()?t="webworker":QN()?t="jsdom":Im()?t="deno":t="other",t};let hp;function tI(){return hp===void 0&&(hp={library:"langchain-js",runtime:sw()}),hp}function Kr(t){try{return typeof process<"u"?dp==null?void 0:dp[t]:Im()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const l3=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Vl(t){return typeof t=="string"&&l3.test(t)}function c3(t){if(!Vl(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var zt=[];for(var mp=0;mp<256;++mp)zt.push((mp+256).toString(16).slice(1));function iw(t,e=0){return(zt[t[e+0]]+zt[t[e+1]]+zt[t[e+2]]+zt[t[e+3]]+"-"+zt[t[e+4]]+zt[t[e+5]]+"-"+zt[t[e+6]]+zt[t[e+7]]+"-"+zt[t[e+8]]+zt[t[e+9]]+"-"+zt[t[e+10]]+zt[t[e+11]]+zt[t[e+12]]+zt[t[e+13]]+zt[t[e+14]]+zt[t[e+15]]).toLowerCase()}var Zu,u3=new Uint8Array(16);function nI(){if(!Zu&&(Zu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zu(u3)}function d3(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var h3="6ba7b810-9dad-11d1-80b4-00c04fd430c8",m3="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function f3(t,e,n){function r(s,i,a,o){var l;if(typeof s=="string"&&(s=d3(s)),typeof i=="string"&&(i=c3(i)),((l=i)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,a){o=o||0;for(var d=0;d<16;++d)a[o+d]=c[d];return a}return iw(c)}try{r.name=t}catch{}return r.DNS=h3,r.URL=m3,r}var p3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const fS={randomUUID:p3};function wn(t,e,n){if(fS.randomUUID&&!e&&!t)return fS.randomUUID();t=t||{};var r=t.random||(t.rng||nI)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iw(r)}function g3(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function fp(t,e){return t<<e|t>>>32-e}function y3(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),o=new Array(a),l=0;l<a;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];o[l]=c}o[a-1][14]=(t.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<a;++h){for(var m=new Uint32Array(80),f=0;f<16;++f)m[f]=o[h][f];for(var y=16;y<80;++y)m[y]=fp(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);for(var w=n[0],x=n[1],v=n[2],p=n[3],g=n[4],_=0;_<80;++_){var k=Math.floor(_/20),E=fp(w,5)+g3(k,x,v,p)+g+e[k]+m[_]>>>0;g=p,p=v,v=fp(x,30)>>>0,x=w,w=E}n[0]=n[0]+w>>>0,n[1]=n[1]+x>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+p>>>0,n[4]=n[4]+g>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var vl=f3("v5",80,y3),pS=null,gS=null,or=0;function v3(t,e,n){t=t||{};var r=e&&n||0,s=e||new Uint8Array(16),i=t.random||(t.rng||nI)(),a=t.msecs!==void 0?t.msecs:Date.now(),o=t.seq!==void 0?t.seq:null,l=gS,c=pS;return a>or&&t.msecs===void 0&&(or=a,o!==null&&(l=null,c=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,c=o&524287),(l===null||c===null)&&(l=i[6]&127,l=l<<8|i[7],c=i[8]&63,c=c<<8|i[9],c=c<<5|i[10]>>>3),a+1e4>or&&o===null?++c>524287&&(c=0,++l>4095&&(l=0,or++)):or=a,gS=l,pS=c,s[r++]=or/1099511627776&255,s[r++]=or/4294967296&255,s[r++]=or/16777216&255,s[r++]=or/65536&255,s[r++]=or/256&255,s[r++]=or&255,s[r++]=l>>>4&15|112,s[r++]=l&255,s[r++]=c>>>13&63|128,s[r++]=c>>>5&255,s[r++]=c<<3&255|i[10]&7,s[r++]=i[11],s[r++]=i[12],s[r++]=i[13],s[r++]=i[14],s[r++]=i[15],e||iw(s)}var w3={};De(w3,{BaseCallbackHandler:()=>Wc,callbackHandlerPrefersStreaming:()=>aw,isBaseCallbackHandler:()=>rI});var x3=class{};function aw(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var Wc=class extends x3{constructor(e){super();T(this,"lc_serializable",!1);T(this,"lc_kwargs");T(this,"ignoreLLM",!1);T(this,"ignoreChain",!1);T(this,"ignoreAgent",!1);T(this,"ignoreRetriever",!1);T(this,"ignoreCustomEvent",!1);T(this,"raiseError",!1);T(this,"awaitHandlers",Kr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Zv(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return yo.prototype.toJSON.call(this)}toJSONNotImplemented(){return yo.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends Wc{constructor(){super();T(this,"name",wn());Object.assign(this,e)}}return new n}};const rI=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},_3="gen_ai.operation.name",b3="gen_ai.system",yS="gen_ai.request.model",S3="gen_ai.response.model",vS="gen_ai.usage.input_tokens",wS="gen_ai.usage.output_tokens",xS="gen_ai.usage.total_tokens",k3="gen_ai.request.max_tokens",T3="gen_ai.request.temperature",A3="gen_ai.request.top_p",E3="gen_ai.request.frequency_penalty",C3="gen_ai.request.presence_penalty",N3="gen_ai.response.finish_reasons",I3="gen_ai.prompt",R3="gen_ai.completion",j3="gen_ai.request.extra_query",P3="gen_ai.request.extra_body",O3="gen_ai.serialized.name",$3="gen_ai.serialized.signature",D3="gen_ai.serialized.doc",M3="gen_ai.response.id",L3="gen_ai.response.service_tier",F3="gen_ai.response.system_fingerprint",U3="gen_ai.usage.input_token_details",z3="gen_ai.usage.output_token_details",B3="langsmith.trace.session_id",G3="langsmith.trace.session_name",V3="langsmith.span.kind",H3="langsmith.trace.name",W3="langsmith.metadata",_S="langsmith.span.tags",q3="langsmith.request.streaming",K3="langsmith.request.headers",Z3=(...t)=>fetch(...t),sI=Symbol.for("ls:fetch_implementation"),Y3=()=>{const t=globalThis[sI];return t?typeof t=="function"&&"Headers"in t&&"Request"in t&&"Response"in t:!1},J3=t=>async(...e)=>{if(t||xn("DEBUG")==="true"){const[r,s]=e;console.log(` ${(s==null?void 0:s.method)||"GET"} ${r}`)}const n=await(globalThis[sI]??Z3)(...e);return(t||xn("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},iI=()=>xn("PROJECT")??Qr("LANGCHAIN_SESSION")??"default",bS={};function xy(t){bS[t]||(console.warn(t),bS[t]=!0)}const X3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Te(t,e){if(!X3.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function Q3(t){const e=typeof t=="string"?Date.parse(t):t;return v3({msecs:e,seq:0})}const aI="0.3.82";var Hl={};let Pr;const eF=()=>typeof window<"u"&&typeof window.document<"u",tF=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",nF=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),oI=()=>typeof Deno<"u",rF=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!oI(),lI=()=>Pr||(typeof Bun<"u"?Pr="bun":eF()?Pr="browser":rF()?Pr="node":tF()?Pr="webworker":nF()?Pr="jsdom":oI()?Pr="deno":Pr="other",Pr);let pp;function cI(){if(pp===void 0){const t=lI(),e=iF();pp={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:aI,...e}}return pp}function uI(){const t=sF(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,s]of Object.entries(t))typeof s=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[r]=s);return e}function sF(){const t={};try{if(typeof process<"u"&&Hl)for(const[e,n]of Object.entries(Hl))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function Qr(t){try{return typeof process<"u"?Hl==null?void 0:Hl[t]:void 0}catch{return}}function xn(t){return Qr(`LANGSMITH_${t}`)||Qr(`LANGCHAIN_${t}`)}let gp;function iF(){if(gp!==void 0)return gp;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=Qr(n);r!==void 0&&(e[n]=r)}return gp=e,e}function dI(){return Qr("OTEL_ENABLED")==="true"||xn("OTEL_ENABLED")==="true"}class aF{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&dI()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class oF{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new aF})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class lF{active(){return{}}with(e,n){return n()}}const yp=Symbol.for("ls:otel_trace"),vp=Symbol.for("ls:otel_context"),SS=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),cF=new oF,uF=new lF;class dF{getTraceInstance(){return globalThis[yp]??cF}getContextInstance(){return globalThis[vp]??uF}initializeGlobalInstances(e){globalThis[yp]===void 0&&(globalThis[yp]=e.trace),globalThis[vp]===void 0&&(globalThis[vp]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[SS]=e}getDefaultOTLPTracerComponents(){return globalThis[SS]??void 0}}const ow=new dF;function hI(){return ow.getTraceInstance()}function hF(){return ow.getContextInstance()}function mF(){return ow.getDefaultOTLPTracerComponents()}const fF={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function pF(t){return fF[t]||t}class gF{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const s=this.createSpanForRun(r,r.run,n.get(r.id));s&&!r.run.end_time&&this.spans.set(r.id,s)}else this.updateSpanForRun(r,r.run)}catch(s){console.error(`Error processing operation ${r.id}:`,s)}}createSpanForRun(e,n,r){const s=r&&hI().getSpan(r);if(s)try{return this.finishSpanSetup(s,n,e)}catch(i){console.error(`Failed to create span for run ${e.id}:`,i);return}}finishSpanSetup(e,n,r){return this.setSpanAttributes(e,n,r),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,n,e),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const s=n.end_time;s&&(r.end(new Date(s)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const s=r.invocation_params;if(s.model)return s.model;if(s.model_name)return s.model_name}}}setSpanAttributes(e,n,r){var o;if("run_type"in n&&n.run_type){e.setAttribute(V3,n.run_type);const l=pF(n.run_type||"chain");e.setAttribute(_3,l)}"name"in n&&n.name&&e.setAttribute(H3,n.name),"session_id"in n&&n.session_id&&e.setAttribute(B3,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(G3,n.session_name),this.setGenAiSystem(e,n);const s=this.extractModelName(n);s&&e.setAttribute(yS,s),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(vS,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(wS,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(xS,n.total_tokens),this.setInvocationParameters(e,n);const i=((o=n.extra)==null?void 0:o.metadata)||{};for(const[l,c]of Object.entries(i))c!=null&&e.setAttribute(`${W3}.${l}`,String(c));const a=n.tags;if(a&&Array.isArray(a)?e.setAttribute(_S,a.join(", ")):a&&e.setAttribute(_S,String(a)),"serialized"in n&&typeof n.serialized=="object"){const l=n.serialized;l.name&&e.setAttribute(O3,String(l.name)),l.signature&&e.setAttribute($3,String(l.signature)),l.doc&&e.setAttribute(D3,String(l.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,n){let r="langchain";const s=this.extractModelName(n);if(s){const i=s.toLowerCase();i.includes("anthropic")||i.startsWith("claude")?r="anthropic":i.includes("bedrock")?r="aws.bedrock":i.includes("azure")&&i.includes("openai")?r="az.ai.openai":i.includes("azure")&&i.includes("inference")?r="az.ai.inference":i.includes("cohere")?r="cohere":i.includes("deepseek")?r="deepseek":i.includes("gemini")?r="gemini":i.includes("groq")?r="groq":i.includes("watson")||i.includes("ibm")?r="ibm.watsonx.ai":i.includes("mistral")?r="mistral_ai":i.includes("gpt")||i.includes("openai")?r="openai":i.includes("perplexity")||i.includes("sonar")?r="perplexity":i.includes("vertex")?r="vertex_ai":(i.includes("xai")||i.includes("grok"))&&(r="xai")}e.setAttribute(b3,r)}setInvocationParameters(e,n){var s,i;if(!((i=(s=n.extra)==null?void 0:s.metadata)!=null&&i.invocation_params))return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(k3,r.max_tokens),r.temperature!==void 0&&e.setAttribute(T3,r.temperature),r.top_p!==void 0&&e.setAttribute(A3,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(E3,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(C3,r.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(yS,r.model),r.stream!==void 0&&e.setAttribute(q3,r.stream),r.extra_headers&&e.setAttribute(K3,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(j3,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(P3,JSON.stringify(r.extra_body))),e.setAttribute(I3,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,s=this.getUnifiedRunTokens(r);if(s&&(e.setAttribute(vS,s[0]),e.setAttribute(wS,s[1]),e.setAttribute(xS,s[0]+s[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(S3,String(r.model)),r.id&&e.setAttribute(M3,r.id),r.choices&&Array.isArray(r.choices)){const i=r.choices.map(a=>a.finish_reason).filter(a=>a).map(String);i.length>0&&e.setAttribute(N3,i.join(", "))}if(r.service_tier&&e.setAttribute(L3,r.service_tier),r.system_fingerprint&&e.setAttribute(F3,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const i=r.usage_metadata;i.input_token_details&&e.setAttribute(U3,JSON.stringify(i.input_token_details)),i.output_token_details&&e.setAttribute(z3,JSON.stringify(i.output_token_details))}}e.setAttribute(R3,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const r=Object.keys(e);for(const a of r){const o=e[a];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const s=e.generations||[];if(!Array.isArray(s))return null;const i=Array.isArray(s[0])?s.flat():s;for(const a of i)if(typeof a=="object"&&a.message&&typeof a.message=="object"&&a.message.kwargs&&typeof a.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const yF=Object.prototype.toString,vF=t=>yF.call(t)==="[object Error]",wF=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function xF(t){if(!(t&&vF(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:wF.has(n)}function _F(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Yu(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let bF=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function SF(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let s=Math.round(r*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function kS(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function kF({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:s}){var f,y,w;const i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof bF)throw i.originalError;const a=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:i,attemptNumber:e,retriesLeft:a,retriesConsumed:n});if(await s.onFailedAttempt(l),kS(r,o)<=0)throw i;const c=await s.shouldConsumeRetry(l),d=kS(r,o);if(d<=0||a<=0)throw i;if(i instanceof TypeError&&!xF(i)){if(c)throw i;return(f=s.signal)==null||f.throwIfAborted(),!1}if(!await s.shouldRetry(l))throw i;if(!c)return(y=s.signal)==null||y.throwIfAborted(),!1;const h=SF(n,s),m=Math.min(h,d);return m>0&&await new Promise((x,v)=>{var _,k;const p=()=>{var E;clearTimeout(g),(E=s.signal)==null||E.removeEventListener("abort",p),v(s.signal.reason)},g=setTimeout(()=>{var E;(E=s.signal)==null||E.removeEventListener("abort",p),x()},m);s.unref&&((_=g.unref)==null||_.call(g)),(k=s.signal)==null||k.addEventListener("abort",p,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function TF(t,e={}){var i,a,o;if(e={...e},_F(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Yu("factor",e.factor,{min:0,allowInfinity:!1}),Yu("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Yu("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Yu("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(i=e.signal)==null||i.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(a=e.signal)==null||a.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await kF({error:l,attemptNumber:n,retriesConsumed:r,startTime:s,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var mI={},fI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function i(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new s(d,h||l,m),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],f]:l._events[y].push(f):(l._events[y]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,y=new Array(f);m<f;m++)y[m]=h[m].fn;return y},o.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,d,h,m,f,y){var w=n?n+c:c;if(!this._events[w])return!1;var x=this._events[w],v=arguments.length,p,g;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,m),!0;case 5:return x.fn.call(x.context,d,h,m,f),!0;case 6:return x.fn.call(x.context,d,h,m,f,y),!0}for(g=1,p=new Array(v-1);g<v;g++)p[g-1]=arguments[g];x.fn.apply(x.context,p)}else{var _=x.length,k;for(g=0;g<_;g++)switch(x[g].once&&this.removeListener(c,x[g].fn,void 0,!0),v){case 1:x[g].fn.call(x[g].context);break;case 2:x[g].fn.call(x[g].context,d);break;case 3:x[g].fn.call(x[g].context,d,h);break;case 4:x[g].fn.call(x[g].context,d,h,m);break;default:if(!p)for(k=1,p=new Array(v-1);k<v;k++)p[k-1]=arguments[k];x[g].fn.apply(x[g].context,p)}}return!0},o.prototype.on=function(c,d,h){return i(this,c,d,h,!1)},o.prototype.once=function(c,d,h){return i(this,c,d,h,!0)},o.prototype.removeListener=function(c,d,h,m){var f=n?n+c:c;if(!this._events[f])return this;if(!d)return a(this,f),this;var y=this._events[f];if(y.fn)y.fn===d&&(!m||y.once)&&(!h||y.context===h)&&a(this,f);else{for(var w=0,x=[],v=y.length;w<v;w++)(y[w].fn!==d||m&&!y[w].once||h&&y[w].context!==h)&&x.push(y[w]);x.length?this._events[f]=x.length===1?x[0]:x:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(fI);var AF=fI.exports,Rm={exports:{}},EF=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const CF=EF;class pI extends Error{constructor(e){super(e),this.name="TimeoutError"}}const gI=(t,e,n)=>new Promise((r,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const i=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){s(l)}return}const a=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new pI(a);typeof t.cancel=="function"&&t.cancel(),s(o)},e);CF(t.then(r,s),()=>{clearTimeout(i)})});Rm.exports=gI;Rm.exports.default=gI;Rm.exports.TimeoutError=pI;var NF=Rm.exports,lw={},cw={};Object.defineProperty(cw,"__esModule",{value:!0});function IF(t,e,n){let r=0,s=t.length;for(;s>0;){const i=s/2|0;let a=r+i;n(t[a],e)<=0?(r=++a,s-=i+1):s=i}return r}cw.default=IF;Object.defineProperty(lw,"__esModule",{value:!0});const RF=cw;class jF{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const s=RF.default(this._queue,r,(i,a)=>a.priority-i.priority);this._queue.splice(s,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}lw.default=jF;Object.defineProperty(mI,"__esModule",{value:!0});const PF=AF,yI=NF,OF=lw,Ju=()=>{},$F=new yI.TimeoutError;class DF extends PF{constructor(e){var n,r,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Ju,this._resolveIdle=Ju,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:OF.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Ju,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Ju,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,s)=>{const i=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&n.timeout===void 0?e():yI.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&s($F)});r(await a)}catch(a){s(a)}this._next()};this._queue.enqueue(i,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var vs=mI.default=DF;const MF=[408,425,429,500,502,503,504];let TS=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,"default"in vs?this.queue=new vs.default({concurrency:this.maxConcurrency}):this.queue=new vs({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...r){const s=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&s>0&&this.queueSizeBytes+s>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${s} bytes.`));s>0&&(this.queueSizeBytes+=s);const i=this.onFailedResponseHook;let a=this.queue.add(()=>TF(()=>n(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(o.message.startsWith("Cancel")||o.message.startsWith("TimeoutError")||o.name==="TimeoutError"||o.message.startsWith("AbortError")||(o==null?void 0:o.code)==="ECONNABORTED")throw o;const l=o==null?void 0:o.response;if(i&&await i(l))return;const c=(l==null?void 0:l.status)??(o==null?void 0:o.status);if(c&&!MF.includes(+c))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return s>0&&(a=a.finally(()=>{this.queueSizeBytes-=s})),e.signal?Promise.race([a,new Promise((o,l)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):a}};function AS(t){return typeof(t==null?void 0:t._getType)=="function"}function ES(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var _y={exports:{}};const LF="2.0.0",vI=256,FF=Number.MAX_SAFE_INTEGER||9007199254740991,UF=16,zF=vI-6,BF=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var jm={MAX_LENGTH:vI,MAX_SAFE_COMPONENT_LENGTH:UF,MAX_SAFE_BUILD_LENGTH:zF,MAX_SAFE_INTEGER:FF,RELEASE_TYPES:BF,SEMVER_SPEC_VERSION:LF,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},wp={};const GF=typeof process=="object"&&wp&&wp.NODE_DEBUG&&/\bsemver\b/i.test(wp.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Pm=GF;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=jm,i=Pm;e=t.exports={};const a=e.re=[],o=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],d=e.t={};let h=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",s],[m,r]],y=x=>{for(const[v,p]of f)x=x.split(`${v}*`).join(`${v}{0,${p}}`).split(`${v}+`).join(`${v}{1,${p}}`);return x},w=(x,v,p)=>{const g=y(v),_=h++;i(x,_,v),d[x]=_,l[_]=v,c[_]=g,a[_]=new RegExp(v,p?"g":void 0),o[_]=new RegExp(g,p?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),w("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${m}+`),w("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),w("FULL",`^${l[d.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),w("LOOSE",`^${l[d.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),w("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),w("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",l[d.COERCE],!0),w("COERCERTLFULL",l[d.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_y,_y.exports);var qc=_y.exports;const VF=Object.freeze({loose:!0}),HF=Object.freeze({}),WF=t=>t?typeof t!="object"?VF:t:HF;var uw=WF;const CS=/^[0-9]+$/,wI=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;const n=CS.test(t),r=CS.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},qF=(t,e)=>wI(e,t);var xI={compareIdentifiers:wI,rcompareIdentifiers:qF};const Xu=Pm,{MAX_LENGTH:NS,MAX_SAFE_INTEGER:Qu}=jm,{safeRe:ed,t:td}=qc,KF=uw,{compareIdentifiers:xp}=xI;let ZF=class $r{constructor(e,n){if(n=KF(n),e instanceof $r){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>NS)throw new TypeError(`version is longer than ${NS} characters`);Xu("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?ed[td.LOOSE]:ed[td.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Qu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Qu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Qu||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Qu)return i}return s}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Xu("SemVer.compare",this.version,this.options,e),!(e instanceof $r)){if(typeof e=="string"&&e===this.version)return 0;e=new $r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof $r||(e=new $r(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof $r||(e=new $r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],s=e.prerelease[n];if(Xu("prerelease compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return xp(r,s)}while(++n)}compareBuild(e){e instanceof $r||(e=new $r(e,this.options));let n=0;do{const r=this.build[n],s=e.build[n];if(Xu("build compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return xp(r,s)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const s=`-${n}`.match(this.options.loose?ed[td.PRERELEASELOOSE]:ed[td.PRERELEASE]);if(!s||s[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];r===!1&&(i=[n]),xp(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var hn=ZF;const IS=hn,YF=(t,e,n=!1)=>{if(t instanceof IS)return t;try{return new IS(t,e)}catch(r){if(!n)return null;throw r}};var Do=YF;const JF=Do,XF=(t,e)=>{const n=JF(t,e);return n?n.version:null};var QF=XF;const eU=Do,tU=(t,e)=>{const n=eU(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var nU=tU;const RS=hn,rU=(t,e,n,r,s)=>{typeof n=="string"&&(s=r,r=n,n=void 0);try{return new RS(t instanceof RS?t.version:t,n).inc(e,r,s).version}catch{return null}};var sU=rU;const jS=Do,iU=(t,e)=>{const n=jS(t,null,!0),r=jS(e,null,!0),s=n.compare(r);if(s===0)return null;const i=s>0,a=i?n:r,o=i?r:n,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(o.compareMain(a)===0)return o.minor&&!o.patch?"minor":"patch"}const d=l?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"};var aU=iU;const oU=hn,lU=(t,e)=>new oU(t,e).major;var cU=lU;const uU=hn,dU=(t,e)=>new uU(t,e).minor;var hU=dU;const mU=hn,fU=(t,e)=>new mU(t,e).patch;var pU=fU;const gU=Do,yU=(t,e)=>{const n=gU(t,e);return n&&n.prerelease.length?n.prerelease:null};var vU=yU;const PS=hn,wU=(t,e,n)=>new PS(t,n).compare(new PS(e,n));var Cr=wU;const xU=Cr,_U=(t,e,n)=>xU(e,t,n);var bU=_U;const SU=Cr,kU=(t,e)=>SU(t,e,!0);var TU=kU;const OS=hn,AU=(t,e,n)=>{const r=new OS(t,n),s=new OS(e,n);return r.compare(s)||r.compareBuild(s)};var dw=AU;const EU=dw,CU=(t,e)=>t.sort((n,r)=>EU(n,r,e));var NU=CU;const IU=dw,RU=(t,e)=>t.sort((n,r)=>IU(r,n,e));var jU=RU;const PU=Cr,OU=(t,e,n)=>PU(t,e,n)>0;var Om=OU;const $U=Cr,DU=(t,e,n)=>$U(t,e,n)<0;var hw=DU;const MU=Cr,LU=(t,e,n)=>MU(t,e,n)===0;var _I=LU;const FU=Cr,UU=(t,e,n)=>FU(t,e,n)!==0;var bI=UU;const zU=Cr,BU=(t,e,n)=>zU(t,e,n)>=0;var mw=BU;const GU=Cr,VU=(t,e,n)=>GU(t,e,n)<=0;var fw=VU;const HU=_I,WU=bI,qU=Om,KU=mw,ZU=hw,YU=fw,JU=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return HU(t,n,r);case"!=":return WU(t,n,r);case">":return qU(t,n,r);case">=":return KU(t,n,r);case"<":return ZU(t,n,r);case"<=":return YU(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var SI=JU;const XU=hn,QU=Do,{safeRe:nd,t:rd}=qc,ez=(t,e)=>{if(t instanceof XU)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?nd[rd.COERCEFULL]:nd[rd.COERCE]);else{const l=e.includePrerelease?nd[rd.COERCERTLFULL]:nd[rd.COERCERTL];let c;for(;(c=l.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],s=n[3]||"0",i=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",o=e.includePrerelease&&n[6]?`+${n[6]}`:"";return QU(`${r}.${s}.${i}${a}${o}`,e)};var tz=ez;class nz{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(e,n)}return this}}var rz=nz,_p,$S;function Nr(){if($S)return _p;$S=1;const t=/\s+/g;class e{constructor(B,G){if(G=s(G),B instanceof e)return B.loose===!!G.loose&&B.includePrerelease===!!G.includePrerelease?B:new e(B.raw,G);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.formatted=void 0,this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=B.trim().replace(t," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(j=>!w(j[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&x(j[0])){this.set=[j];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let B=0;B<this.set.length;B++){B>0&&(this.formatted+="||");const G=this.set[B];for(let q=0;q<G.length;q++)q>0&&(this.formatted+=" "),this.formatted+=G[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(B){const q=((this.options.includePrerelease&&f)|(this.options.loose&&y))+":"+B,j=r.get(q);if(j)return j;const M=this.options.loose,U=M?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];B=B.replace(U,ge(this.options.includePrerelease)),a("hyphen replace",B),B=B.replace(l[c.COMPARATORTRIM],d),a("comparator trim",B),B=B.replace(l[c.TILDETRIM],h),a("tilde trim",B),B=B.replace(l[c.CARETTRIM],m),a("caret trim",B);let ie=B.split(" ").map(Ie=>p(Ie,this.options)).join(" ").split(/\s+/).map(Ie=>L(Ie,this.options));M&&(ie=ie.filter(Ie=>(a("loose invalid filter",Ie,this.options),!!Ie.match(l[c.COMPARATORLOOSE])))),a("range list",ie);const ee=new Map,Ae=ie.map(Ie=>new i(Ie,this.options));for(const Ie of Ae){if(w(Ie))return[Ie];ee.set(Ie.value,Ie)}ee.size>1&&ee.has("")&&ee.delete("");const Ge=[...ee.values()];return r.set(q,Ge),Ge}intersects(B,G){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>v(q,G)&&B.set.some(j=>v(j,G)&&q.every(M=>j.every(U=>M.intersects(U,G)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if(ot(this.set[G],B,this.options))return!0;return!1}}_p=e;const n=rz,r=new n,s=uw,i=$m(),a=Pm,o=hn,{safeRe:l,t:c,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:m}=qc,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:y}=jm,w=K=>K.value==="<0.0.0-0",x=K=>K.value==="",v=(K,B)=>{let G=!0;const q=K.slice();let j=q.pop();for(;G&&q.length;)G=q.every(M=>j.intersects(M,B)),j=q.pop();return G},p=(K,B)=>(K=K.replace(l[c.BUILD],""),a("comp",K,B),K=E(K,B),a("caret",K),K=_(K,B),a("tildes",K),K=b(K,B),a("xrange",K),K=$(K,B),a("stars",K),K),g=K=>!K||K.toLowerCase()==="x"||K==="*",_=(K,B)=>K.trim().split(/\s+/).map(G=>k(G,B)).join(" "),k=(K,B)=>{const G=B.loose?l[c.TILDELOOSE]:l[c.TILDE];return K.replace(G,(q,j,M,U,ie)=>{a("tilde",K,q,j,M,U,ie);let ee;return g(j)?ee="":g(M)?ee=`>=${j}.0.0 <${+j+1}.0.0-0`:g(U)?ee=`>=${j}.${M}.0 <${j}.${+M+1}.0-0`:ie?(a("replaceTilde pr",ie),ee=`>=${j}.${M}.${U}-${ie} <${j}.${+M+1}.0-0`):ee=`>=${j}.${M}.${U} <${j}.${+M+1}.0-0`,a("tilde return",ee),ee})},E=(K,B)=>K.trim().split(/\s+/).map(G=>C(G,B)).join(" "),C=(K,B)=>{a("caret",K,B);const G=B.loose?l[c.CARETLOOSE]:l[c.CARET],q=B.includePrerelease?"-0":"";return K.replace(G,(j,M,U,ie,ee)=>{a("caret",K,j,M,U,ie,ee);let Ae;return g(M)?Ae="":g(U)?Ae=`>=${M}.0.0${q} <${+M+1}.0.0-0`:g(ie)?M==="0"?Ae=`>=${M}.${U}.0${q} <${M}.${+U+1}.0-0`:Ae=`>=${M}.${U}.0${q} <${+M+1}.0.0-0`:ee?(a("replaceCaret pr",ee),M==="0"?U==="0"?Ae=`>=${M}.${U}.${ie}-${ee} <${M}.${U}.${+ie+1}-0`:Ae=`>=${M}.${U}.${ie}-${ee} <${M}.${+U+1}.0-0`:Ae=`>=${M}.${U}.${ie}-${ee} <${+M+1}.0.0-0`):(a("no pr"),M==="0"?U==="0"?Ae=`>=${M}.${U}.${ie}${q} <${M}.${U}.${+ie+1}-0`:Ae=`>=${M}.${U}.${ie}${q} <${M}.${+U+1}.0-0`:Ae=`>=${M}.${U}.${ie} <${+M+1}.0.0-0`),a("caret return",Ae),Ae})},b=(K,B)=>(a("replaceXRanges",K,B),K.split(/\s+/).map(G=>O(G,B)).join(" ")),O=(K,B)=>{K=K.trim();const G=B.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return K.replace(G,(q,j,M,U,ie,ee)=>{a("xRange",K,q,j,M,U,ie,ee);const Ae=g(M),Ge=Ae||g(U),Ie=Ge||g(ie),A=Ie;return j==="="&&A&&(j=""),ee=B.includePrerelease?"-0":"",Ae?j===">"||j==="<"?q="<0.0.0-0":q="*":j&&A?(Ge&&(U=0),ie=0,j===">"?(j=">=",Ge?(M=+M+1,U=0,ie=0):(U=+U+1,ie=0)):j==="<="&&(j="<",Ge?M=+M+1:U=+U+1),j==="<"&&(ee="-0"),q=`${j+M}.${U}.${ie}${ee}`):Ge?q=`>=${M}.0.0${ee} <${+M+1}.0.0-0`:Ie&&(q=`>=${M}.${U}.0${ee} <${M}.${+U+1}.0-0`),a("xRange return",q),q})},$=(K,B)=>(a("replaceStars",K,B),K.trim().replace(l[c.STAR],"")),L=(K,B)=>(a("replaceGTE0",K,B),K.trim().replace(l[B.includePrerelease?c.GTE0PRE:c.GTE0],"")),ge=K=>(B,G,q,j,M,U,ie,ee,Ae,Ge,Ie,A)=>(g(q)?G="":g(j)?G=`>=${q}.0.0${K?"-0":""}`:g(M)?G=`>=${q}.${j}.0${K?"-0":""}`:U?G=`>=${G}`:G=`>=${G}${K?"-0":""}`,g(Ae)?ee="":g(Ge)?ee=`<${+Ae+1}.0.0-0`:g(Ie)?ee=`<${Ae}.${+Ge+1}.0-0`:A?ee=`<=${Ae}.${Ge}.${Ie}-${A}`:K?ee=`<${Ae}.${Ge}.${+Ie+1}-0`:ee=`<=${ee}`,`${G} ${ee}`.trim()),ot=(K,B,G)=>{for(let q=0;q<K.length;q++)if(!K[q].test(B))return!1;if(B.prerelease.length&&!G.includePrerelease){for(let q=0;q<K.length;q++)if(a(K[q].semver),K[q].semver!==i.ANY&&K[q].semver.prerelease.length>0){const j=K[q].semver;if(j.major===B.major&&j.minor===B.minor&&j.patch===B.patch)return!0}return!1}return!0};return _p}var bp,DS;function $m(){if(DS)return bp;DS=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,h){if(h=n(h),d instanceof e){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),a("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(d){const h=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],m=d.match(h);if(!m)throw new TypeError(`Invalid comparator: ${d}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new o(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(a("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return i(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||i(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||i(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}bp=e;const n=uw,{safeRe:r,t:s}=qc,i=SI,a=Pm,o=hn,l=Nr();return bp}const sz=Nr(),iz=(t,e,n)=>{try{e=new sz(e,n)}catch{return!1}return e.test(t)};var Dm=iz;const az=Nr(),oz=(t,e)=>new az(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var lz=oz;const cz=hn,uz=Nr(),dz=(t,e,n)=>{let r=null,s=null,i=null;try{i=new uz(e,n)}catch{return null}return t.forEach(a=>{i.test(a)&&(!r||s.compare(a)===-1)&&(r=a,s=new cz(r,n))}),r};var hz=dz;const mz=hn,fz=Nr(),pz=(t,e,n)=>{let r=null,s=null,i=null;try{i=new fz(e,n)}catch{return null}return t.forEach(a=>{i.test(a)&&(!r||s.compare(a)===1)&&(r=a,s=new mz(r,n))}),r};var gz=pz;const Sp=hn,yz=Nr(),MS=Om,vz=(t,e)=>{t=new yz(t,e);let n=new Sp("0.0.0");if(t.test(n)||(n=new Sp("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const s=t.set[r];let i=null;s.forEach(a=>{const o=new Sp(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||MS(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!n||MS(n,i))&&(n=i)}return n&&t.test(n)?n:null};var wz=vz;const xz=Nr(),_z=(t,e)=>{try{return new xz(t,e).range||"*"}catch{return null}};var bz=_z;const Sz=hn,kI=$m(),{ANY:kz}=kI,Tz=Nr(),Az=Dm,LS=Om,FS=hw,Ez=fw,Cz=mw,Nz=(t,e,n,r)=>{t=new Sz(t,r),e=new Tz(e,r);let s,i,a,o,l;switch(n){case">":s=LS,i=Ez,a=FS,o=">",l=">=";break;case"<":s=FS,i=Cz,a=LS,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Az(t,e,r))return!1;for(let c=0;c<e.set.length;++c){const d=e.set[c];let h=null,m=null;if(d.forEach(f=>{f.semver===kz&&(f=new kI(">=0.0.0")),h=h||f,m=m||f,s(f.semver,h.semver,r)?h=f:a(f.semver,m.semver,r)&&(m=f)}),h.operator===o||h.operator===l||(!m.operator||m.operator===o)&&i(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0};var pw=Nz;const Iz=pw,Rz=(t,e,n)=>Iz(t,e,">",n);var jz=Rz;const Pz=pw,Oz=(t,e,n)=>Pz(t,e,"<",n);var $z=Oz;const US=Nr(),Dz=(t,e,n)=>(t=new US(t,n),e=new US(e,n),t.intersects(e,n));var Mz=Dz;const Lz=Dm,Fz=Cr;var Uz=(t,e,n)=>{const r=[];let s=null,i=null;const a=t.sort((d,h)=>Fz(d,h,n));for(const d of a)Lz(d,e,n)?(i=d,s||(s=d)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const o=[];for(const[d,h]of r)d===h?o.push(d):!h&&d===a[0]?o.push("*"):h?d===a[0]?o.push(`<=${h}`):o.push(`${d} - ${h}`):o.push(`>=${d}`);const l=o.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e};const zS=Nr(),gw=$m(),{ANY:kp}=gw,nl=Dm,yw=Cr,zz=(t,e,n={})=>{if(t===e)return!0;t=new zS(t,n),e=new zS(e,n);let r=!1;e:for(const s of t.set){for(const i of e.set){const a=Gz(s,i,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},Bz=[new gw(">=0.0.0-0")],BS=[new gw(">=0.0.0")],Gz=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===kp){if(e.length===1&&e[0].semver===kp)return!0;n.includePrerelease?t=Bz:t=BS}if(e.length===1&&e[0].semver===kp){if(n.includePrerelease)return!0;e=BS}const r=new Set;let s,i;for(const f of t)f.operator===">"||f.operator===">="?s=GS(s,f,n):f.operator==="<"||f.operator==="<="?i=VS(i,f,n):r.add(f.semver);if(r.size>1)return null;let a;if(s&&i){if(a=yw(s.semver,i.semver,n),a>0)return null;if(a===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const f of r){if(s&&!nl(f,String(s),n)||i&&!nl(f,String(i),n))return null;for(const y of e)if(!nl(f,String(y),n))return!1;return!0}let o,l,c,d,h=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const f of e){if(d=d||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",s){if(m&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===m.major&&f.semver.minor===m.minor&&f.semver.patch===m.patch&&(m=!1),f.operator===">"||f.operator===">="){if(o=GS(s,f,n),o===f&&o!==s)return!1}else if(s.operator===">="&&!nl(s.semver,String(f),n))return!1}if(i){if(h&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===h.major&&f.semver.minor===h.minor&&f.semver.patch===h.patch&&(h=!1),f.operator==="<"||f.operator==="<="){if(l=VS(i,f,n),l===f&&l!==i)return!1}else if(i.operator==="<="&&!nl(i.semver,String(f),n))return!1}if(!f.operator&&(i||s)&&a!==0)return!1}return!(s&&c&&!i&&a!==0||i&&d&&!s&&a!==0||m||h)},GS=(t,e,n)=>{if(!t)return e;const r=yw(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},VS=(t,e,n)=>{if(!t)return e;const r=yw(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Vz=zz;const Tp=qc,HS=jm,Hz=hn,WS=xI,Wz=Do,qz=QF,Kz=nU,Zz=sU,Yz=aU,Jz=cU,Xz=hU,Qz=pU,e6=vU,t6=Cr,n6=bU,r6=TU,s6=dw,i6=NU,a6=jU,o6=Om,l6=hw,c6=_I,u6=bI,d6=mw,h6=fw,m6=SI,f6=tz,p6=$m(),g6=Nr(),y6=Dm,v6=lz,w6=hz,x6=gz,_6=wz,b6=bz,S6=pw,k6=jz,T6=$z,A6=Mz,E6=Uz,C6=Vz;Tp.re,Tp.src,Tp.t,HS.SEMVER_SPEC_VERSION,HS.RELEASE_TYPES,WS.compareIdentifiers,WS.rcompareIdentifiers;function Bs(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[s,i]=e.split("/",2);if(!s||!i)throw new Error(`Invalid identifier format: ${t}`);return[s,i,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class N6 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function de(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}if(t.status===403)try{const a=await t.json();(a==null?void 0:a.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${t.status} ${t.statusText}`);throw o.status=t==null?void 0:t.status,o}if(r===void 0)try{r=await t.text()}catch{r=""}const s=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${r}`;if(t.status===409)throw new N6(s);const i=new Error(s);throw i.status=t.status,i}const TI="ERR_CONFLICTING_ENDPOINTS";class I6 extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:TI}),this.name="ConflictingEndpointsError"}}function R6(t){return typeof t=="object"&&t!==null&&t.code===TI}var qS="[...]",j6={result:"[Circular]"},Rh=[],Ya=[];const P6=new TextEncoder;function O6(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function sd(t){return P6.encode(t)}function AI(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function $6(t){return function(e,n){return AI(n)}}function Rn(t,e,n,r,s){var i;try{const a=JSON.stringify(t,$6(n),r);return sd(a)}catch(a){if(!((i=a.message)!=null&&i.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),sd("[Unserializable]");xn("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof s>"u"&&(s=O6()),by(t,"",0,[],void 0,0,s);let o;try{Ya.length===0?o=JSON.stringify(t,n,r):o=JSON.stringify(t,D6(n),r)}catch{return sd("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Rh.length!==0;){const l=Rh.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return sd(o)}}function Ap(t,e,n,r){var s=Object.getOwnPropertyDescriptor(r,n);s.get!==void 0?s.configurable?(Object.defineProperty(r,n,{value:t}),Rh.push([r,n,e,s])):Ya.push([e,n,t]):(r[n]=t,Rh.push([r,n,e]))}function by(t,e,n,r,s,i,a){i+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){Ap(j6,t,e,s);return}if(typeof a.depthLimit<"u"&&i>a.depthLimit){Ap(qS,t,e,s);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){Ap(qS,t,e,s);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)by(t[o],o,o,r,t,i,a);else{t=AI(t);var l=Object.keys(t);for(o=0;o<l.length;o++){var c=l[o];by(t[c],c,o,r,t,i,a)}}r.pop()}}function D6(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Ya.length>0)for(var r=0;r<Ya.length;r++){var s=Ya[r];if(s[1]===e&&s[0]===n){n=s[2],Ya.splice(r,1);break}}return t.call(this,e,n)}}function KS(t,e){const n=cI(),r=e??uI(),s=t.extra??{},i=s.metadata;return t.extra={...s,runtime:{...n,...s==null?void 0:s.runtime},metadata:{...r,...r.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??r.revision_id}:{},...i}},t}const M6=t=>{const e=(t==null?void 0:t.toString())??xn("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},L6=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function F6(t){const e=[];for await(const n of t)e.push(n);return e}function id(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const U6=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function ZS(t){return typeof t=="number"?Number(t.toFixed(4)):t}const z6=24*1024*1024,EI=1024*1024*1024,B6=1e4,G6=100,YS="https://api.smith.langchain.com";class V6{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??EI}peek(){return this.items[0]}push(e){let n;const r=new Promise(i=>{n=i}),s=Rn(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+s>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${s} bytes.`),n(),r):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:r,size:s}),this.sizeBytes+=s,r)}pop({upToSizeBytes:e,upToSize:n}){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let s=0;for(;s+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0&&r.length<n;){const a=this.items.shift();a&&(r.push(a),s+=a.size,this.sizeBytes-=a.size)}if(r.length===0&&this.items.length>0){const a=this.items.shift();r.push(a),s+=a.size,this.sizeBytes-=a.size}return[r.map(a=>({action:a.action,item:a.payload,otelContext:a.otelContext,apiKey:a.apiKey,apiUrl:a.apiUrl,size:a.size})),()=>r.forEach(a=>a.itemPromiseResolve())]}}class _c{get _fetch(){return this.fetchImplementation||J3(this.debug)}constructor(e={}){var s;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Qr("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Qr("LANGSMITH_DEBUG")==="true"});const n=_c.getDefaultClientConfig();if(this.tracingSampleRate=M6(e.tracingSamplingRate),this.apiUrl=id(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=id(e.apiKey??n.apiKey),this.webUrl=id(e.webUrl??n.webUrl),(s=this.webUrl)!=null&&s.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=id(e.workspaceId??xn("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new TS({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const r=e.maxIngestMemoryBytes??EI;this.batchIngestCaller=new TS({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...e.callerOptions??{},onFailedResponseHook:U6,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new V6(r),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,dI()&&(this.langSmithToOTELTranslator=new gF),this.cachedLSEnvVarsForMetadata=uI()}static getDefaultClientConfig(){const e=xn("API_KEY"),n=xn("ENDPOINT")??YS,r=xn("HIDE_INPUTS")==="true",s=xn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:L6(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${aI}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",s=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const a=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(a,`fetch ${e}`),a})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let s=Number(n.get("offset"))||0;const i=Number(n.get("limit"))||100;for(;;){n.set("offset",String(s)),n.set("limit",String(i));const a=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(async()=>{const c=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(c,`fetch ${e}`),c}),l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<i))break;s+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",s="runs"){const i=n?{...n}:{};for(;;){const a=JSON.stringify(i),l=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(d,`fetch ${e}`),d})).json();if(!l||!l[s])break;yield l[s];const c=l.cursors;if(!c||!c.next)break;i.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const s of e)this.filteredPostUuids.has(s.trace_id)?s.id===s.trace_id&&this.filteredPostUuids.delete(s.trace_id):r.push(s);return r}else{const r=[];for(const s of e){const i=s.trace_id??s.id;this.filteredPostUuids.has(i)||(s.id===i?this._shouldSample()?r.push(s):this.filteredPostUuids.add(i):r.push(s))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??z6}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit)??G6}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[s,i]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!s.length){i();break}const a=s.reduce((c,d)=>{const h=d.apiUrl??this.apiUrl,m=d.apiKey??this.apiKey,y=d.apiKey===this.apiKey&&d.apiUrl===this.apiUrl?"default":`${h}|${m}`;return c[y]||(c[y]=[]),c[y].push(d),c},{}),o=[];for(const[c,d]of Object.entries(a)){const h=this._processBatch(d,{apiUrl:c==="default"?void 0:c.split("|")[0],apiKey:c==="default"?void 0:c.split("|")[1]});o.push(h)}const l=Promise.all(o).finally(i);r.push(l)}return Promise.all(r)}async _processBatch(e,n){var s,i;if(!e.length)return;const r=e.reduce((a,o)=>a+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const a={runCreates:e.filter(l=>l.action==="create").map(l=>l.item),runUpdates:e.filter(l=>l.action==="update").map(l=>l.item)},o=await this._ensureServerInfo();if((s=o==null?void 0:o.batch_ingest_config)!=null&&s.use_multipart_endpoint){const l=(i=o==null?void 0:o.instance_flags)==null?void 0:i.gzip_body_enabled;await this.multipartIngestRuns(a,{...n,useGzip:l,sizeBytes:r})}else await this.batchIngestRuns(a,{...n,sizeBytes:r})}}catch(a){console.error("Error exporting batch:",a)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const s of e)s.item.id&&s.otelContext&&(n.set(s.item.id,s.otelContext),s.action==="create"?r.push({operation:"post",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}):r.push({operation:"patch",id:s.item.id,trace_id:s.item.trace_id??s.item.id,run:s.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=KS(e.item,this.cachedLSEnvVarsForMetadata);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),s=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>s)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:s})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(B6),...this.fetchOptions});return await de(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=hI(),n=hF();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(n.active(),r)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},s=e.project_name;delete e.project_name;const i=await this.prepareRunCreateOrUpdateInputs({session_name:s,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:i,otelContext:l,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const a=KS(i,this.cachedLSEnvVarsForMetadata);(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=Rn(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await de(l,"create run",!0),l})}async batchIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;let s=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),i=await Promise.all((n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(s.length>0&&i.length>0){const l=s.reduce((d,h)=>(h.id&&(d[h.id]=h),d),{}),c=[];for(const d of i)d.id!==void 0&&l[d.id]?l[d.id]={...l[d.id],...d}:c.push(d);s=Object.values(l),i=c}const a={post:s,patch:i};if(!a.post.length&&!a.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,d=a[c].reverse();let h=d.pop();for(;h!==void 0;)o[c].push(h),h=d.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(Rn(o,`Ingesting runs with ids: ${l}`),r)}}async _postBatchIngestRuns(e,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const s=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await de(s,"batch create run",!0),s})}async multipartIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;const s={};let i=[];for(const h of e??[]){const m=await this.prepareRunCreateOrUpdateInputs(h);m.id!==void 0&&m.attachments!==void 0&&(s[m.id]=m.attachments),delete m.attachments,i.push(m)}let a=[];for(const h of n??[])a.push(await this.prepareRunCreateOrUpdateInputs(h));if(i.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&a.length>0){const h=i.reduce((f,y)=>(y.id&&(f[y.id]=y),f),{}),m=[];for(const f of a)f.id!==void 0&&h[f.id]?h[f.id]={...h[f.id],...f}:m.push(f);i=Object.values(h),a=m}if(i.length===0&&a.length===0)return;const c=[],d=[];for(const[h,m]of[["post",i],["patch",a]])for(const f of m){const{inputs:y,outputs:w,events:x,extra:v,error:p,serialized:g,attachments:_,...k}=f,E={inputs:y,outputs:w,events:x,extra:v,error:p,serialized:g},C=Rn(k,`Serializing for multipart ingestion of run with id: ${k.id}`);d.push({name:`${h}.${k.id}`,payload:new Blob([C],{type:`application/json; length=${C.length}`})});for(const[b,O]of Object.entries(E)){if(O===void 0)continue;const $=Rn(O,`Serializing ${b} for multipart ingestion of run with id: ${k.id}`);d.push({name:`${h}.${k.id}.${b}`,payload:new Blob([$],{type:`application/json; length=${$.length}`})})}if(k.id!==void 0){const b=s[k.id];if(b){delete s[k.id];for(const[O,$]of Object.entries(b)){let L,ge;if(Array.isArray($)?[L,ge]=$:(L=$.mimeType,ge=$.data),O.includes(".")){console.warn(`Skipping attachment '${O}' for run ${k.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}d.push({name:`attachment.${k.id}.${O}`,payload:new Blob([ge],{type:`${L}; length=${ge.byteLength}`})})}}}c.push(`trace=${k.trace_id},id=${k.id}`)}await this._sendMultipartRequest(d,c.join("; "),r)}async _createNodeFetchBody(e,n){const r=[];for(const a of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${a.name}"\r
`,`Content-Type: ${a.payload.type}\r
\r
`])),r.push(a.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(i){const a=async o=>{typeof o=="string"?i.enqueue(r.encode(o)):i.enqueue(o)};for(const o of e){await a(`--${n}\r
`),await a(`Content-Disposition: form-data; name="${o.name}"\r
`),await a(`Content-Type: ${o.payload.type}\r
\r
`);const c=o.payload.stream().getReader();try{let d;for(;!(d=await c.read()).done;)i.enqueue(d.value)}finally{c.releaseLock()}await a(`\r
`)}await a(`--${n}--\r
`),i.close()}})}async _sendMultipartRequest(e,n,r){const s="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=Y3(),a=()=>this._createNodeFetchBody(e,s),o=()=>this._createMultipartStream(e,s),l=async c=>this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{const d=await c(),h={...this.headers,"Content-Type":`multipart/form-data; boundary=${s}`};(r==null?void 0:r.apiKey)!==void 0&&(h["x-api-key"]=r.apiKey);let m=d;r!=null&&r.useGzip&&typeof d=="object"&&"pipeThrough"in d&&(m=d.pipeThrough(new CompressionStream("gzip")),h["Content-Encoding"]="gzip");const f=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:h,body:m,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(f,"Failed to send multipart request",!0),f});try{let c,d=!1;!i&&!this.multipartStreamingDisabled&&lI()!=="bun"?(d=!0,c=await l(o)):c=await l(a),(!this.multipartStreamingDisabled||d)&&c.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==YS&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,c=await l(a))}catch(c){console.warn(`${c.message.trim()}

Context: ${n}`)}}async updateRun(e,n,r){Te(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const s={...n,id:e};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&s.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:s,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(i["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(i["x-tenant-id"]=r.workspaceId);const a=Rn(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const o=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(o,"update run",!0),o})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Te(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let s;n.session_id?s=n.session_id:r!=null&&r.projectName?s=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?s=r==null?void 0:r.projectId:s=(await this.readProject({projectName:xn("PROJECT")||"default"})).id;const i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${s}/r/${n.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var i;const n=await F6(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},s={};n.sort((a,o)=>((a==null?void 0:a.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const a of n){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);(i=a.dotted_order)!=null&&i.startsWith(e.dotted_order??"")&&a.id!==e.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),s[a.id]=a)}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(s[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:s,traceId:i,referenceExampleId:a,startTime:o,executionOrder:l,isRoot:c,runType:d,error:h,id:m,query:f,filter:y,traceFilter:w,treeFilter:x,limit:v,select:p,order:g}=e;let _=[];if(n&&(_=Array.isArray(n)?n:[n]),r){const b=Array.isArray(r)?r:[r],O=await Promise.all(b.map($=>this.readProject({projectName:$}).then(L=>L.id)));_.push(...O)}const k=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],E={session:_.length?_:null,run_type:d,reference_example:a,query:f,filter:y,trace_filter:w,tree_filter:x,execution_order:l,parent_run:s,start_time:o?o.toISOString():null,error:h,id:m,limit:v,trace:i,select:p||k,is_root:c,order:g};E.select.includes("child_run_ids")&&xy("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let C=0;for await(const b of this._getCursorPaginatedList("/runs/query",E))if(v){if(C>=v)break;if(b.length+C>v){yield*b.slice(0,v-C);break}C+=b.length,yield*b}else yield*b}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:s,filter:i,startTime:a,endTime:o,limit:l,offset:c}=e,h={session_id:n||(await this.readProject({projectName:r})).id,group_by:s,filter:i,start_time:a?a.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let m=Number(c)||0;const f="/runs/group",y=`${this.apiUrl}${f}`;for(;;){const w={...h,offset:m},x=Object.fromEntries(Object.entries(w).filter(([E,C])=>C!==void 0)),v=JSON.stringify(x),g=await(await this.caller.call(async()=>{const E=await this._fetch(y,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await de(E,`Failed to fetch ${f}`),E})).json(),{groups:_,total:k}=g;if(_.length===0)break;for(const E of _)yield E;if(m+=_.length,m>=k)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:s,projectNames:i,projectIds:a,referenceExampleIds:o,startTime:l,endTime:c,error:d,query:h,filter:m,traceFilter:f,treeFilter:y,isRoot:w,dataSourceType:x}){let v=a||[];i&&(v=[...a||[],...await Promise.all(i.map(C=>this.readProject({projectName:C}).then(b=>b.id)))]);const g=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:s,session:v,reference_example:o,start_time:l,end_time:c,error:d,query:h,filter:m,trace_filter:f,tree_filter:y,is_root:w,data_source_type:x}).filter(([C,b])=>b!==void 0)),_=JSON.stringify(g);return await(await this.caller.call(async()=>{const C=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:_});return await de(C,"get run stats"),C})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||wn()};Te(e);const s=JSON.stringify(r),a=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await de(o,"share run"),o})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){Te(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(n,"unshare run",!0),n})}async readRunSharedLink(e){Te(e);const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(s,"read run shared link"),s})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const a of n)r.append("id",a);return Te(e),await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(a,"list shared runs"),a})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Te(e);const s=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(i,"read dataset shared schema"),i})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};Te(e);const s=JSON.stringify(r),a=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await de(o,"share dataset"),o})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){Te(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(n,"unshare dataset",!0),n})}async readSharedDataset(e){return Te(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(s,"read shared dataset"),s})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const s=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(c=>s.append(o,c)):s.append(o,l)});const i=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(o,"list shared examples"),o}),a=await i.json();if(!i.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${i.status}
Message: ${Array.isArray(a.detail)?a.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${i.status} ${i.statusText}`);return a.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:s=!1,projectExtra:i=null,referenceDatasetId:a=null}){const o=s?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=i||{};r&&(c.metadata=r);const d={name:e,extra:c,description:n};a!==null&&(d.reference_dataset_id=a);const h=JSON.stringify(d);return await(await this.caller.call(async()=>{const y=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:h});return await de(y,"create project"),y})).json()}async updateProject(e,{name:n=null,description:r=null,metadata:s=null,projectExtra:i=null,endTime:a=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=i;s&&(l={...l||{},metadata:s});const c=JSON.stringify({name:n,extra:l,description:r,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{const m=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await de(m,"update project"),m})).json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),r+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");const i=await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(a,"has project"),a});try{const a=await i.json();return i.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let s="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),s+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&i.append("include_stats",r.toString());const a=await this._get(s,i);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=a[0]}else o=a;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:s,referenceDatasetName:i,includeStats:a,datasetVersion:o,referenceFree:l,metadata:c}={}){const d=new URLSearchParams;if(e!==void 0)for(const h of e)d.append("id",h);if(n!==void 0&&d.append("name",n),r!==void 0&&d.append("name_contains",r),s!==void 0)d.append("reference_dataset",s);else if(i!==void 0){const h=await this.readDataset({datasetName:i});d.append("reference_dataset",h.id)}a!==void 0&&d.append("include_stats",a.toString()),o!==void 0&&d.append("dataset_version",o),l!==void 0&&d.append("reference_free",l.toString()),c!==void 0&&d.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated("/sessions",d))yield*h}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,Te(r),await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(s,`delete session ${r} (${n})`,!0),s})}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:s,description:i,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData;return c.append("file",e,n),r.forEach(m=>{c.append("input_keys",m)}),s.forEach(m=>{c.append("output_keys",m)}),i&&c.append("description",i),a&&c.append("data_type",a),o&&c.append("name",o),await(await this.caller.call(async()=>{const m=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await de(m,"upload CSV"),m})).json()}async createDataset(e,{description:n,dataType:r,inputsSchema:s,outputsSchema:i,metadata:a}={}){const o={name:e,description:n,extra:a?{metadata:a}:void 0};r&&(o.data_type=r),s&&(o.inputs_schema_definition=s),i&&(o.outputs_schema_definition=i);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await de(h,"create dataset"),h})).json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const s=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Te(e),r+=`/${e}`;else if(n)s.append("name",n);else throw new Error("Must provide datasetName or datasetId");const i=await this._get(r,s);let a;if(Array.isArray(i)){if(i.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);a=i[0]}else a=i;return a}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:s}){let i=e;if(i===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:n})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${i}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:s,datasetNameContains:i,metadata:a}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const c of r)l.append("id",c);s!==void 0&&l.append("name",s),i!==void 0&&l.append("name_contains",i),a!==void 0&&l.append("metadata",JSON.stringify(a));for await(const c of this._getPaginated(o,l))yield*c}async updateDataset(e){const{datasetId:n,datasetName:r,...s}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const i=n??(await this.readDataset({datasetName:r})).id;Te(i);const a=JSON.stringify(s);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(l,"update dataset"),l})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:s,tag:i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;Te(a);const o=JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:i});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await de(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",s=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(s=(await this.readDataset({datasetName:n})).id),s!==void 0)Te(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const i=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(i,`delete ${r}`,!0),i})}async indexDataset({datasetId:e,datasetName:n,tag:r}){let s=e;if(!s&&!n)throw new Error("Must provide either datasetName or datasetId");if(s&&n)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:n})).id),Te(s);const a=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(l,"index dataset"),l})).json()}async similarExamples(e,n,r,{filter:s}={}){const i={limit:r,inputs:e};s!==void 0&&(i.filter=s),Te(n);const a=JSON.stringify(i);return(await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await de(c,"fetch similar examples"),c})).json()).examples}async createExample(e,n,r){var d;if(JS(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=n?r==null?void 0:r.datasetId:e.dataset_id;const i=n?r==null?void 0:r.datasetName:e.dataset_name;if(s===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:i})).id);const a=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let o;JS(e)?o=e:o={inputs:e,outputs:n,created_at:a==null?void 0:a.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const l=await this._uploadExamplesMultipart(s,[o]);return await this.readExample(((d=l.example_ids)==null?void 0:d[0])??wn())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const p=e;let g=p[0].dataset_id;const _=p[0].dataset_name;if(g===void 0&&_===void 0)throw new Error("Must provide either datasetName or datasetId");if(g!==void 0&&_!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");g===void 0&&(g=(await this.readDataset({datasetName:_})).id);const k=await this._uploadExamplesMultipart(g,p);return await Promise.all(k.example_ids.map(C=>this.readExample(C)))}const{inputs:n,outputs:r,metadata:s,splits:i,sourceRunIds:a,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:c,exampleIds:d,datasetId:h,datasetName:m}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let f=h;const y=m;if(f===void 0&&y===void 0)throw new Error("Must provide either datasetName or datasetId");if(f!==void 0&&y!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");f===void 0&&(f=(await this.readDataset({datasetName:y})).id);const w=n.map((p,g)=>({dataset_id:f,inputs:p,outputs:r==null?void 0:r[g],metadata:s==null?void 0:s[g],split:i==null?void 0:i[g],id:d==null?void 0:d[g],attachments:c==null?void 0:c[g],source_run_id:a==null?void 0:a[g],use_source_run_io:o==null?void 0:o[g],use_source_run_attachments:l==null?void 0:l[g]})),x=await this._uploadExamplesMultipart(f,w);return await Promise.all(x.example_ids.map(p=>this.readExample(p)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const s=e.map(a=>AS(a)?ES(a):a),i=AS(n)?ES(n):n;return this.createExample({input:s},{output:i},r)}async readExample(e){Te(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:s,...i}=r,a=i;return s&&(a.attachments=Object.entries(s).reduce((o,[l,c])=>(o[l.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type},o),{})),a}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:s,splits:i,inlineS3Urls:a,metadata:o,limit:l,offset:c,filter:d,includeAttachments:h}={}){let m;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)m=e;else if(n!==void 0)m=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const f=new URLSearchParams({dataset:m}),y=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;y&&f.append("as_of",y);const w=a??!0;if(f.append("inline_s3_urls",w.toString()),r!==void 0)for(const v of r)f.append("id",v);if(i!==void 0)for(const v of i)f.append("splits",v);if(o!==void 0){const v=JSON.stringify(o);f.append("metadata",v)}l!==void 0&&f.append("limit",l.toString()),c!==void 0&&f.append("offset",c.toString()),d!==void 0&&f.append("filter",d),h===!0&&["attachment_urls","outputs","metadata"].forEach(v=>f.append("select",v));let x=0;for await(const v of this._getPaginated("/examples",f)){for(const p of v){const{attachment_urls:g,..._}=p,k=_;g&&(k.attachments=Object.entries(g).reduce((E,[C,b])=>(E[C.slice(11)]={presigned_url:b.presigned_url,mime_type:b.mime_type||void 0},E),{})),yield k,x++}if(l!==void 0&&x>=l)break}}async deleteExample(e){Te(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(r,`delete ${n}`,!0),r})}async updateExample(e,n){let r;n?r=e:r=e.id,Te(r);let s;n?s={id:r,...n}:s=e;let i;return s.dataset_id!==void 0?i=s.dataset_id:i=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(i,[s])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:s}){let i;if(e?i=e:i=(await this.readDataset({datasetName:n})).id,Te(i),r&&s||!r&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const a=new URLSearchParams;return r!==void 0&&a.append("as_of",typeof r=="string"?r:r.toISOString()),s!==void 0&&a.append("tag",s),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Te(s);const i=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&i.append("as_of",a),await this._get(`/datasets/${s}/splits`,i)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:s,remove:i=!1}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:n})).id:a=e,Te(a);const o={split_name:r,examples:s.map(c=>(Te(c),c)),remove:i},l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await de(c,"update dataset splits",!0),c})}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:s,referenceExample:i}={loadChildRuns:!1}){xy("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:s});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(i=await this.readExample(a.reference_example_id));const o=await n.evaluateRun(a,i),[l,c]=await this._logEvaluationFeedback(o,a,r);return c[0]}async createFeedback(e,n,{score:r,value:s,correction:i,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:d,feedbackConfig:h,projectId:m,comparativeExperimentId:f}){var p;if(!e&&!m)throw new Error("One of runId or projectId must be provided");if(e&&m)throw new Error("Only one of runId or projectId can be provided");const y={type:l??"api",metadata:o??{}};c!==void 0&&(y==null?void 0:y.metadata)!==void 0&&!y.metadata.__run&&(y.metadata.__run={run_id:c}),(y==null?void 0:y.metadata)!==void 0&&((p=y.metadata.__run)==null?void 0:p.run_id)!==void 0&&Te(y.metadata.__run.run_id);const w={id:d??wn(),run_id:e,key:n,score:ZS(r),value:s,correction:i,comment:a,feedback_source:y,comparative_experiment_id:f,feedbackConfig:h,session_id:m},x=JSON.stringify(w),v=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const g=await this._fetch(v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await de(g,"create feedback",!0),g}),w}async updateFeedback(e,{score:n,value:r,correction:s,comment:i}){const a={};n!=null&&(a.score=ZS(n)),r!=null&&(a.value=r),s!=null&&(a.correction=s),i!=null&&(a.comment=i),Te(e);const o=JSON.stringify(a);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await de(l,"update feedback",!0),l})}async readFeedback(e){Te(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Te(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const s=new URLSearchParams;if(e)for(const i of e)Te(i),s.append("run",i);if(n)for(const i of n)s.append("key",i);if(r)for(const i of r)s.append("source",i);for await(const i of this._getPaginated("/feedback",s))yield*i}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:s}={}){const i={run_id:e,feedback_key:n,feedback_config:s};r?typeof r=="string"?i.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(i.expires_in=r):i.expires_in={hours:3};const a=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:s,description:i,metadata:a,id:o}){var h;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:i,created_at:(h=s??new Date)==null?void 0:h.toISOString(),extra:{}};a&&(l.extra.metadata=a);const c=JSON.stringify(l);return(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await de(m,"create comparative experiment"),m})).json()}async*listPresignedFeedbackTokens(e){Te(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const s=this._selectEvalResults(e),i=[];for(const a of s){let o=r||{};a.evaluatorInfo&&(o={...a.evaluatorInfo,...o});let l=null;a.targetRunId?l=a.targetRunId:n&&(l=n.id),i.push(await this.createFeedback(l,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:o,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[s,i]}async logEvaluationFeedback(e,n,r){const[s]=await this._logEvaluationFeedback(e,n,r);return s}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:s,limit:i}=e,a=new URLSearchParams;n&&n.forEach((l,c)=>{Te(l,`queueIds[${c}]`),a.append("ids",l)}),r&&a.append("name",r),s&&a.append("name_contains",s),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",a))if(yield*l,o++,i!==void 0&&o>=i)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:s,rubricInstructions:i}=e,a={name:n,description:r,id:s||wn(),rubric_instructions:i},o=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([c,d])=>d!==void 0)));return(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await de(c,"create annotation queue"),c})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,n){const{name:r,description:s,rubricInstructions:i}=n,a=JSON.stringify({name:r,description:s,rubric_instructions:i});await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(o,"update annotation queue",!0),o})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const r=JSON.stringify(n.map((s,i)=>Te(s,`runIds[${i}]`).toString()));await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await de(s,"add runs to annotation queue",!0),s})}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${Te(e,"queueId")}/run`;return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(i,"get run from annotation queue"),i})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs/${Te(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(s,"get latest commit hash"),s})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,s,i]=Bs(e),a=JSON.stringify({like:n});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${r}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(l,`${n?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(e){const[n,r,s]=Bs(e);if(await this._currentTenantIsOwner(n)){const i=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${r}/${s.substring(0,8)}?organizationId=${i.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${i.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,s=>s.repos))yield*r}async getPrompt(e){const[n,r,s]=Bs(e),i=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await de(o,"get prompt"),o)}),a=await(i==null?void 0:i.json());return a!=null&&a.repo?a.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,i,a]=Bs(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const o={repo_handle:i,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=JSON.stringify(o),c=await this.caller.call(async()=>{const h=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await de(h,"create prompt"),h}),{repo:d}=await c.json();return d}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,i,a]=Bs(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${s}/${i}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},c=JSON.stringify(l),h=await(await this.caller.call(async()=>{const m=await this._fetch(`${this.apiUrl}/commits/${s}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await de(m,"create commit"),m})).json();return this._getPromptUrl(`${s}/${i}${h.commit_hash?`:${h.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var a;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of n){const l=o.id,c={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},d=Rn(c,`Serializing body for example with id: ${l}`),h=new Blob([d],{type:"application/json"});if(r.append(l,h),o.inputs){const m=Rn(o.inputs,`Serializing inputs for example with id: ${l}`),f=new Blob([m],{type:"application/json"});r.append(`${l}.inputs`,f)}if(o.outputs){const m=Rn(o.outputs,`Serializing outputs whle updating example with id: ${l}`),f=new Blob([m],{type:"application/json"});r.append(`${l}.outputs`,f)}if(o.attachments)for(const[m,f]of Object.entries(o.attachments)){let y,w;Array.isArray(f)?[y,w]=f:(y=f.mimeType,w=f.data);const x=new Blob([w],{type:`${y}; length=${w.byteLength}`});r.append(`${l}.attachment.${m}`,x)}if(o.attachments_operations){const m=Rn(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),f=new Blob([m],{type:"application/json"});r.append(`${l}.attachments_operations`,f)}}const s=e??((a=n[0])==null?void 0:a.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${s}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await de(o,"update examples"),o})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of n){const a=(i.id??wn()).toString(),o={created_at:i.created_at,...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split},...i.source_run_id&&{source_run_id:i.source_run_id},...i.use_source_run_io&&{use_source_run_io:i.use_source_run_io},...i.use_source_run_attachments&&{use_source_run_attachments:i.use_source_run_attachments}},l=Rn(o,`Serializing body for uploaded example with id: ${a}`),c=new Blob([l],{type:"application/json"});if(r.append(a,c),i.inputs){const d=Rn(i.inputs,`Serializing inputs for uploaded example with id: ${a}`),h=new Blob([d],{type:"application/json"});r.append(`${a}.inputs`,h)}if(i.outputs){const d=Rn(i.outputs,`Serializing outputs for uploaded example with id: ${a}`),h=new Blob([d],{type:"application/json"});r.append(`${a}.outputs`,h)}if(i.attachments)for(const[d,h]of Object.entries(i.attachments)){let m,f;Array.isArray(h)?[m,f]=h:(m=h.mimeType,f=h.data);const y=new Blob([f],{type:`${m}; length=${f.byteLength}`});r.append(`${a}.attachment.${d}`,y)}}return(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await de(i,"upload examples"),i})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,s]=Bs(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const i={};if((n==null?void 0:n.description)!==void 0&&(i.description=n.description),(n==null?void 0:n.readme)!==void 0&&(i.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(i.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(i.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(i.is_archived=n.isArchived),Object.keys(i).length===0)throw new Error("No valid update options provided");const a=JSON.stringify(i);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await de(l,"update prompt"),l})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,s]=Bs(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(a,"delete prompt"),a})).json()}async pullPromptCommit(e,n){const[r,s,i]=Bs(e),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${r}/${s}/${i}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await de(l,"pull prompt commit"),l})).json();return{owner:r,repo:s,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(s=>s!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:s}=n,[i,a]=this.parseTokenOrUrl(e,r),o=new _c({apiUrl:i,apiKey:"placeholder"}),l=await o.readSharedDataset(a),c=s||l.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const d=await o.listSharedExamples(a),h=await this.createDataset(c,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:d.map(m=>m.inputs),outputs:d.flatMap(m=>m.outputs?[m.outputs]:[]),datasetId:h.id})}catch(m){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),m}}parseTokenOrUrl(e,n,r=2,s="dataset"){try{return Te(e),[n,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(o=>o!=="");if(a.length>=r){const o=a[a.length-r];return[n,o]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=mF())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function JS(t){return"dataset_id"in t||"dataset_name"in t}const H6=t=>!!["TRACING_V2","TRACING"].find(n=>xn(n)==="true"),ui=Symbol.for("lc:context_variables"),Ep=Symbol.for("langsmith:replica_trace_roots");function XS(t,e){if(ui in t)return t[ui][e]}function W6(t,e,n){const r=ui in t?t[ui]:{};r[e]=n,t[ui]=r}const rl=36,wl="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function QS(t){const n=Object.keys(t).sort().map(r=>`${r}:${t[r]??""}`).join("|");return vl(n,wl)}function q6(t){return t.replace(/[-:.]/g,"")}function CI(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function NI(t,e,n=1){const r=CI(t,n);return{dottedOrder:q6(r)+e,microsecondPrecisionDatestring:r}}class jh{constructor(e,n,r,s){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r,this.replicas=s}static fromHeader(e){const n=e.split(",");let r={},s=[],i,a;for(const o of n){const[l,c]=o.split("="),d=decodeURIComponent(c);l==="langsmith-metadata"?r=JSON.parse(d):l==="langsmith-tags"?s=d.split(","):l==="langsmith-project"?i=d:l==="langsmith-replicas"&&(a=JSON.parse(d))}return new jh(r,s,i,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class gn{constructor(e){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),K6(e)){Object.assign(this,{...e});return}const n=gn.getDefaultConfig(),{metadata:r,...s}=e,i=s.client??gn.getSharedClient(),a={...r,...(o=s==null?void 0:s.extra)==null?void 0:o.metadata};if(s.extra={...s.extra,metadata:a},"id"in s&&s.id==null&&delete s.id,Object.assign(this,{...n,...s,client:i}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=CI(this.start_time,this.execution_order)),this.id||(this.id=Q3(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=X6(this.replicas),!this.dotted_order){const{dottedOrder:l}=NI(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:iI(),child_runs:[],api_url:Qr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Qr("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return gn.sharedClient||(gn.sharedClient=new _c),gn.sharedClient}createChild(e){var d,h,m,f,y,w,x;const n=this.child_execution_order+1,r=(d=this.replicas)==null?void 0:d.map(v=>{const{reroot:p,...g}=v;return g}),s=e.replicas??r,i=new gn({...e,parent_run:this,project_name:this.project_name,replicas:s,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});ui in this&&(i[ui]=this[ui]);const a=Symbol.for("lc:child_config"),o=((h=e.extra)==null?void 0:h[a])??this.extra[a];if(Y6(o)){const v={...o},p=Z6(v.callbacks)?(f=(m=v.callbacks).copy)==null?void 0:f.call(m):void 0;p&&(Object.assign(p,{_parentRunId:i.id}),(x=(w=(y=p.handlers)==null?void 0:y.find(II))==null?void 0:w.updateFromRunTree)==null||x.call(w,i),v.callbacks=p),i.extra[a]=v}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,n),c=c.parent_run;return this.child_runs.push(i),i}async end(e,n,r=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,n,r=!0){var o,l;const s=e.extra??{};if(((o=s==null?void 0:s.runtime)==null?void 0:o.library)===void 0&&(s.runtime||(s.runtime={}),n))for(const[c,d]of Object.entries(n))s.runtime[c]||(s.runtime[c]=d);let i,a;return r?(a=((l=e.parent_run)==null?void 0:l.id)??e.parent_run_id,i=[]):(i=e.child_runs.map(c=>this._convertToCreate(c,n,r)),a=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:i,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const r=n.dotted_order.split(".");let s=null;for(let i=0;i<r.length;i++)if(r[i].slice(-rl)===e){s=i;break}if(s!==null){const i=r.slice(s+1);n.dotted_order=i.join("."),i.length>0?n.trace_id=i[0].slice(-rl):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const r=XS(this,Ep)??{};r[e]=n,W6(this,Ep,r);for(const s of this.child_runs)s._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:r,excludeChildRuns:s=!0,reroot:i=!1,distributedParentId:a,apiUrl:o,apiKey:l,workspaceId:c}=e,d=this._convertToCreate(this,r,s);if(n===this.project_name)return{...d,session_name:n};if(i){if(a)this._sliceParentId(a,d);else if(d.parent_run_id=void 0,d.dotted_order){const p=d.dotted_order.split(".");p.length>0&&(d.dotted_order=p[p.length-1],d.trace_id=d.id)}const v=QS({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});this._setReplicaTraceRoot(v,d.id)}let h;if(!i){const v=XS(this,Ep)??{},p=QS({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});if(h=v[p],h&&(d.trace_id=h,d.dotted_order)){const g=d.dotted_order.split(".");let _=null;for(let k=0;k<g.length;k++)if(g[k].slice(-rl)===h){_=k;break}if(_!==null){const k=g.slice(_);d.dotted_order=k.join(".")}}}const m=d.id,f=vl(`${m}:${n}`,wl);let y;d.trace_id?y=vl(`${d.trace_id}:${n}`,wl):y=f;let w;d.parent_run_id&&(w=vl(`${d.parent_run_id}:${n}`,wl));let x;return d.dotted_order&&(x=d.dotted_order.split(".").map(g=>{const _=g.slice(-rl),k=vl(`${_}:${n}`,wl);return g.slice(0,-rl)+k}).join(".")),{...d,id:f,trace_id:y,parent_run_id:w,dotted_order:x,session_name:n}}async postRun(e=!0){try{const n=cI();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:s,apiUrl:i,workspaceId:a,reroot:o}of this.replicas){const l=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:i,apiKey:s,workspaceId:a});await this.client.createRun(l,{apiKey:s,apiUrl:i,workspaceId:a})}else{const r=this._convertToCreate(this,n,e);await this.client.createRun(r)}if(!e){xy("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:s,apiUrl:i,workspaceId:a,updates:o,reroot:l}of this.replicas){const c=this._remapForProject({projectName:r??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:i,apiKey:s,workspaceId:a}),d={id:c.id,name:c.name,run_type:c.run_type,start_time:c.start_time,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments,...o};e!=null&&e.excludeInputs||(d.inputs=c.inputs),await this.client.updateRun(c.id,d,{apiKey:s,apiUrl:i,workspaceId:a})}else try{const r={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var c,d,h,m;const r=e==null?void 0:e.callbacks;let s,i,a,o=H6();if(r){const f=((c=r==null?void 0:r.getParentRunId)==null?void 0:c.call(r))??"",y=(d=r==null?void 0:r.handlers)==null?void 0:d.find(w=>(w==null?void 0:w.name)=="langchain_tracer");s=(h=y==null?void 0:y.getRun)==null?void 0:h.call(y,f),i=y==null?void 0:y.projectName,a=y==null?void 0:y.client,o=o||!!y}return s?new gn({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:a,tracingEnabled:o,project_name:i,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(m=s==null?void 0:s.extra)==null?void 0:m.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new gn({...n,client:a,tracingEnabled:o,project_name:i})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var d;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=r["langsmith-trace"];if(!s||typeof s!="string")return;const i=s.trim(),a=i.split(".").map(h=>{const[m,f]=h.split("Z");return{strTime:m,time:Date.parse(m+"Z"),uuid:f}}),o=a[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(d=a.at(-1))==null?void 0:d.uuid,trace_id:o,dotted_order:i};if(r.baggage&&typeof r.baggage=="string"){const h=jh.fromHeader(r.baggage);l.metadata=h.metadata,l.tags=h.tags,l.project_name=h.project_name,l.replicas=h.replicas}const c=new gn(l);return c.distributedParentId=c.id,c}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new jh((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[s,i]of Object.entries(n))e.set(s,i);return n}}Object.defineProperty(gn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function K6(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function II(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function ek(t){return Array.isArray(t)&&t.some(e=>II(e))}function Z6(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function Y6(t){var e;return t!=null&&typeof t.callbacks=="object"&&(ek((e=t.callbacks)==null?void 0:e.handlers)||ek(t.callbacks))}function J6(){const t=Qr("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof e=="object"&&e!==null){Q6(e);const n=[];for(const[r,s]of Object.entries(e)){const i=r.replace(/\/$/,"");if(typeof s=="string")n.push({apiUrl:i,apiKey:s});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof s}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(R6(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function X6(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):J6()}function Q6(t){if(Object.keys(t).length>0&&xn("ENDPOINT"))throw new I6}var e9={};De(e9,{BaseTracer:()=>Mo,isBaseTracer:()=>Na});const t9=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function Sy(t,e){if(t)return new gn({...t,start_time:t._serialized_start_time??t.start_time,parent_run:Sy(e),child_runs:t.child_runs.map(n=>Sy(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:tI()},tracingEnabled:!1})}function Cp(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Na(t){return typeof t._addRunToRunMap=="function"}var Mo=class extends Wc{constructor(e){super(...arguments);T(this,"runMap",new Map);T(this,"runTreeMap",new Map);T(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?t9(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:r}=NI(new Date(e.start_time).getTime(),e.id,e.execution_order),s={...e},i=this.getRunById(s.parent_run_id);if(s.parent_run_id!==void 0?i&&(this._addChildRun(i,s),i.child_execution_order=Math.max(i.child_execution_order,s.child_execution_order),s.trace_id=i.trace_id,i.dotted_order!==void 0&&(s.dotted_order=[i.dotted_order,n].join("."),s._serialized_start_time=r)):(s.trace_id=s.id,s.dotted_order=n,s._serialized_start_time=r),this.usesRunTreeMap){const a=Sy(s,i);a!==void 0&&this.runTreeMap.set(s.id,a)}else this.runMap.set(s.id,s);return s}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,s,i,a,o,l){const c=this._getExecutionOrder(s),d=Date.now(),h=o?{...i,metadata:o}:i,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:h??{},tags:a||[]};return this._addRunToRunMap(m)}async handleLLMStart(e,n,r,s,i,a,o,l){var d,h;const c=this.getRunById(r)??this._createRunForLLMStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,c)),await((h=this.onLLMStart)==null?void 0:h.call(this,c)),c}_createRunForChatModelStart(e,n,r,s,i,a,o,l){const c=this._getExecutionOrder(s),d=Date.now(),h=o?{...i,metadata:o}:i,m={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:h??{},tags:a||[]};return this._addRunToRunMap(m)}async handleChatModelStart(e,n,r,s,i,a,o,l){var d,h;const c=this.getRunById(r)??this._createRunForChatModelStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,c)),await((h=this.onLLMStart)==null?void 0:h.call(this,c)),c}async handleLLMEnd(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await((o=this.onLLMEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleLLMError(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await((o=this.onLLMError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForChainStart(e,n,r,s,i,a,o,l){const c=this._getExecutionOrder(s),d=Date.now(),h={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:d,serialized:e,events:[{name:"start",time:new Date(d).toISOString()}],inputs:n,execution_order:c,child_execution_order:c,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(h)}async handleChainStart(e,n,r,s,i,a,o,l){var d,h;const c=this.getRunById(r)??this._createRunForChainStart(e,n,r,s,i,a,o,l);return await((d=this.onRunCreate)==null?void 0:d.call(this,c)),await((h=this.onChainStart)==null?void 0:h.call(this,c)),c}async handleChainEnd(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Cp(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(i==null?void 0:i.inputs)!==void 0&&(a.inputs=Cp(i.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,n,r,s,i){var o;const a=this.getRunById(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(i==null?void 0:i.inputs)!==void 0&&(a.inputs=Cp(i.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,n,r,s,i,a,o){const l=this._getExecutionOrder(s),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:s,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(d)}async handleToolStart(e,n,r,s,i,a,o){var c,d;const l=this.getRunById(r)??this._createRunForToolStart(e,n,r,s,i,a,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((d=this.onToolStart)==null?void 0:d.call(this,l)),l}async handleToolEnd(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const s=r;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentAction)==null?void 0:i.call(this,r))}async handleAgentEnd(e,n){var s;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,r)))}_createRunForRetrieverStart(e,n,r,s,i,a,o){const l=this._getExecutionOrder(s),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:s,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(d)}async handleRetrieverStart(e,n,r,s,i,a,o){var c,d;const l=this.getRunById(r)??this._createRunForRetrieverStart(e,n,r,s,i,a,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((d=this.onRetrieverStart)==null?void 0:d.call(this,l)),l}async handleRetrieverEnd(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var s;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var s;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,r)))}async handleLLMNewToken(e,n,r,s,i,a){var l;const o=this.getRunById(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:a==null?void 0:a.chunk})),o}},vw={exports:{}};vw.exports;(function(t){const n=(i=0)=>a=>`\x1B[${38+i};5;${a}m`,r=(i=0)=>(a,o,l)=>`\x1B[${38+i};2;${a};${o};${l}m`;function s(){const i=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[c,d]of Object.entries(l))a[c]={open:`\x1B[${d[0]}m`,close:`\x1B[${d[1]}m`},l[c]=a[c],i.set(d[0],d[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:i,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=n(),a.color.ansi16m=r(),a.bgColor.ansi256=n(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(h=>h+h).join(""));const d=Number.parseInt(c,16);return[d>>16&255,d>>8&255,d&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:s})})(vw);var n9=vw.exports;const RI=Yk(n9);var r9={};De(r9,{ConsoleCallbackHandler:()=>ky});function tn(t,e){return`${t.open}${e}${t.close}`}function Wn(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function tk(t){return typeof t=="string"?t.trim():t==null?t:Wn(t,t.toString())}function Gs(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:pn}=RI;var ky=class extends Mo{constructor(){super(...arguments);T(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const s=this.runMap.get(r.parent_run_id);if(s)n.push(s),r=s;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((s,i,a)=>{const o=`${s.execution_order}:${s.run_type}:${s.name}`;return i===a.length-1?tn(RI.bold,o):o}).join(" > ");return tn(pn.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.green,"[chain/start]")} [${n}] Entering Chain run with input: ${Wn(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.cyan,"[chain/end]")} [${n}] [${Gs(e)}] Exiting Chain run with output: ${Wn(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.red,"[chain/error]")} [${n}] [${Gs(e)}] Chain run errored with error: ${Wn(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${tn(pn.green,"[llm/start]")} [${n}] Entering LLM run with input: ${Wn(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.cyan,"[llm/end]")} [${n}] [${Gs(e)}] Exiting LLM run with output: ${Wn(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.red,"[llm/error]")} [${n}] [${Gs(e)}] LLM run errored with error: ${Wn(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.green,"[tool/start]")} [${n}] Entering Tool run with input: "${tk(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${tn(pn.cyan,"[tool/end]")} [${n}] [${Gs(e)}] Exiting Tool run with output: "${tk((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.red,"[tool/error]")} [${n}] [${Gs(e)}] Tool run errored with error: ${Wn(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${Wn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.cyan,"[retriever/end]")} [${n}] [${Gs(e)}] Exiting Retriever run with output: ${Wn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${tn(pn.red,"[retriever/error]")} [${n}] [${Gs(e)}] Retriever run errored with error: ${Wn(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${tn(pn.blue,"[agent/action]")} [${r}] Agent selected action: ${Wn(n.actions[n.actions.length-1],"[action]")}`)}};let Np;const jI=()=>{if(Np===void 0){const t=Kr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Np=new _c(t)}return Np};let s9=class{getStore(){}run(e,n){return n()}};const Ip=Symbol.for("ls:tracing_async_local_storage"),i9=new s9;let a9=class{getInstance(){return globalThis[Ip]??i9}initializeGlobalInstance(e){globalThis[Ip]===void 0&&(globalThis[Ip]=e)}};const o9=new a9;function l9(t=!1){const e=o9.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function ww(t){return typeof t=="function"&&"langsmith:traceable"in t}var c9={};De(c9,{LangChainTracer:()=>Fd});var Fd=class PI extends Mo{constructor(n={}){super(n);T(this,"name","langchain_tracer");T(this,"projectName");T(this,"exampleId");T(this,"client");T(this,"replicas");T(this,"usesRunTreeMap",!0);const{exampleId:r,projectName:s,client:i,replicas:a}=n;this.projectName=s??iI(),this.replicas=a,this.exampleId=r,this.client=i??jI();const o=PI.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(n){}async onRunCreate(n){const r=this.getRunTreeWithTracingConfig(n.id);await(r==null?void 0:r.postRun())}async onRunUpdate(n){const r=this.getRunTreeWithTracingConfig(n.id);await(r==null?void 0:r.patchRun())}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let r=n;const s=new Set;for(;r.parent_run&&!(s.has(r.id)||(s.add(r.id),!r.parent_run));)r=r.parent_run;s.clear();const i=[r];for(;i.length>0;){const a=i.shift();!a||s.has(a.id)||(s.add(a.id),this.runTreeMap.set(a.id,a),a.child_runs&&i.push(...a.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const r=this.runTreeMap.get(n);if(r)return new gn({...r,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return l9(!0)}catch{return}}};let ea;function u9(){const t="default"in vs?vs.default:vs;return new t({autoStart:!0,concurrency:1})}function d9(){return typeof ea>"u"&&(ea=u9()),ea}async function bt(t,e){if(e===!0){const n=xc();n!==void 0?await n.run(void 0,async()=>t()):await t()}else ea=d9(),ea.add(async()=>{const n=xc();n!==void 0?await n.run(void 0,async()=>t()):await t()})}async function h9(){const t=jI();await Promise.allSettled([typeof ea<"u"?ea.onIdle():Promise.resolve(),t.awaitPendingTraceBatches()])}var m9={};De(m9,{awaitAllCallbacks:()=>h9,consumeCallback:()=>bt});const f9=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Kr(n)==="true");function OI(t){var r;const e=xc();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[Gl])==null?void 0:r[t]}const p9=Symbol("lc:configure_hooks"),g9=()=>OI(p9)||[];var y9={};De(y9,{BaseCallbackManager:()=>$I,BaseRunManager:()=>Kc,CallbackManager:()=>En,CallbackManagerForChainRun:()=>MI,CallbackManagerForLLMRun:()=>Ty,CallbackManagerForRetrieverRun:()=>DI,CallbackManagerForToolRun:()=>LI,ensureHandler:()=>bc,parseCallbackConfigArg:()=>Mm});function Mm(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}var $I=class{setHandler(t){return this.setHandlers([t])}},Kc=class{constructor(t,e,n,r,s,i,a,o){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=s,this.metadata=i,this.inheritableMetadata=a,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,r,s){await Promise.all(this.handlers.map(i=>bt(async()=>{var a;try{await((a=i.handleCustomEvent)==null?void 0:a.call(i,t,e,this.runId,this.tags,this.metadata))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleCustomEvent: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}},DI=class extends Kc{getChild(t){const e=new En(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw r}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${r}`),e.raiseError)throw t}},e.awaitHandlers)))}},Ty=class extends Kc{async handleLLMNewToken(t,e,n,r,s,i){await Promise.all(this.handlers.map(a=>bt(async()=>{var o;if(!a.ignoreLLM)try{await((o=a.handleLLMNewToken)==null?void 0:o.call(a,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMNewToken: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleLLMError(t,e,n,r,s){await Promise.all(this.handlers.map(i=>bt(async()=>{var a;if(!i.ignoreLLM)try{await((a=i.handleLLMError)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMError: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleLLMEnd(t,e,n,r,s){await Promise.all(this.handlers.map(i=>bt(async()=>{var a;if(!i.ignoreLLM)try{await((a=i.handleLLMEnd)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleLLMEnd: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}},MI=class extends Kc{getChild(t){const e=new En(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,r,s){await Promise.all(this.handlers.map(i=>bt(async()=>{var a;if(!i.ignoreChain)try{await((a=i.handleChainError)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainError: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleChainEnd(t,e,n,r,s){await Promise.all(this.handlers.map(i=>bt(async()=>{var a;if(!i.ignoreChain)try{await((a=i.handleChainEnd)==null?void 0:a.call(i,t,this.runId,this._parentRunId,this.tags,s))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainEnd: ${o}`),i.raiseError)throw o}},i.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},LI=class extends Kc{getChild(t){const e=new En(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>bt(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},En=class xl extends $I{constructor(n,r){super();T(this,"handlers",[]);T(this,"inheritableHandlers",[]);T(this,"tags",[]);T(this,"inheritableTags",[]);T(this,"metadata",{});T(this,"inheritableMetadata",{});T(this,"name","callback_manager");T(this,"_parentRunId");this.handlers=(r==null?void 0:r.handlers)??this.handlers,this.inheritableHandlers=(r==null?void 0:r.inheritableHandlers)??this.inheritableHandlers,this.tags=(r==null?void 0:r.tags)??this.tags,this.inheritableTags=(r==null?void 0:r.inheritableTags)??this.inheritableTags,this.metadata=(r==null?void 0:r.metadata)??this.metadata,this.inheritableMetadata=(r==null?void 0:r.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,r,s=void 0,i=void 0,a=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(d,h)=>{const m=h===0&&s?s:wn();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return Na(f)&&f._createRunForLLMStart(n,[d],m,this._parentRunId,a,this.tags,this.metadata,c),bt(async()=>{var y;try{await((y=f.handleLLMStart)==null?void 0:y.call(f,n,[d],m,this._parentRunId,a,this.tags,this.metadata,c))}catch(w){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${w}`),f.raiseError)throw w}},f.awaitHandlers)})),new Ty(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,r,s=void 0,i=void 0,a=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(d,h)=>{const m=h===0&&s?s:wn();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return Na(f)&&f._createRunForChatModelStart(n,[d],m,this._parentRunId,a,this.tags,this.metadata,c),bt(async()=>{var y,w;try{if(f.handleChatModelStart)await((y=f.handleChatModelStart)==null?void 0:y.call(f,n,[d],m,this._parentRunId,a,this.tags,this.metadata,c));else if(f.handleLLMStart){const x=nw(d);await((w=f.handleLLMStart)==null?void 0:w.call(f,n,[x],m,this._parentRunId,a,this.tags,this.metadata,c))}}catch(x){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${x}`),f.raiseError)throw x}},f.awaitHandlers)})),new Ty(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreChain)return Na(c)&&c._createRunForChainStart(n,r,s,this._parentRunId,this.tags,this.metadata,i,l),bt(async()=>{var d;try{await((d=c.handleChainStart)==null?void 0:d.call(c,n,r,s,this._parentRunId,this.tags,this.metadata,i,l))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainStart: ${h}`),c.raiseError)throw h}},c.awaitHandlers)})),new MI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreAgent)return Na(c)&&c._createRunForToolStart(n,r,s,this._parentRunId,this.tags,this.metadata,l),bt(async()=>{var d;try{await((d=c.handleToolStart)==null?void 0:d.call(c,n,r,s,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleToolStart: ${h}`),c.raiseError)throw h}},c.awaitHandlers)})),new LI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,r,s=wn(),i=void 0,a=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreRetriever)return Na(c)&&c._createRunForRetrieverStart(n,r,s,this._parentRunId,this.tags,this.metadata,l),bt(async()=>{var d;try{await((d=c.handleRetrieverStart)==null?void 0:d.call(c,n,r,s,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleRetrieverStart: ${h}`),c.raiseError)throw h}},c.awaitHandlers)})),new DI(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,r,s,i,a){await Promise.all(this.handlers.map(o=>bt(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,n,r,s,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}addHandler(n,r=!0){this.handlers.push(n),r&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(r=>r!==n),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==n)}setHandlers(n,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const s of n)this.addHandler(s,r)}addTags(n,r=!0){this.removeTags(n),this.tags.push(...n),r&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(r=>!n.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!n.includes(r))}addMetadata(n,r=!0){this.metadata={...this.metadata,...n},r&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const r of Object.keys(n))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(n=[],r=!0){const s=new xl(this._parentRunId);for(const i of this.handlers){const a=this.inheritableHandlers.includes(i);s.addHandler(i,a)}for(const i of this.tags){const a=this.inheritableTags.includes(i);s.addTags([i],a)}for(const i of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(i);s.addMetadata({[i]:this.metadata[i]},a)}for(const i of n)s.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||s.addHandler(i,r);return s}static fromHandlers(n){class r extends Wc{constructor(){super();T(this,"name",wn());Object.assign(this,n)}}const s=new this;return s.addHandler(new r),s}static configure(n,r,s,i,a,o,l){return this._configureSync(n,r,s,i,a,o,l)}static _configureSync(n,r,s,i,a,o,l){var f;let c;(n||r)&&(Array.isArray(n)||!n?(c=new xl,c.setHandlers((n==null?void 0:n.map(bc))??[],!0)):c=n,c=c.copy(Array.isArray(r)?r.map(bc):r==null?void 0:r.handlers,!1));const d=Kr("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),h=((f=Fd.getTraceableRunTree())==null?void 0:f.tracingEnabled)||f9(),m=h||(Kr("LANGCHAIN_TRACING")??!1);if(d||m){if(c||(c=new xl),d&&!c.handlers.some(y=>y.name===ky.prototype.name)){const y=new ky;c.addHandler(y,!0)}if(m&&!c.handlers.some(y=>y.name==="langchain_tracer")&&h){const y=new Fd;c.addHandler(y,!0)}if(h){const y=Fd.getTraceableRunTree();if(y&&c._parentRunId===void 0){c._parentRunId=y.id;const w=c.handlers.find(x=>x.name==="langchain_tracer");w==null||w.updateFromRunTree(y)}}}for(const{contextVar:y,inheritable:w=!0,handlerClass:x,envVar:v}of g9()){const p=v&&Kr(v)==="true"&&x;let g;const _=y!==void 0?OI(y):void 0;_&&rI(_)?g=_:p&&(g=new x({})),g!==void 0&&(c||(c=new xl),c.handlers.some(k=>k.name===g.name)||c.addHandler(g,w))}return(s||i)&&c&&(c.addTags(s??[]),c.addTags(i??[],!1)),(a||o)&&c&&(c.addMetadata(a??{}),c.addMetadata(o??{},!1)),c}};function bc(t){return"name"in t?t:Wc.fromMethods(t)}var FI=class{getStore(){}run(t,e){return e()}enterWith(t){}};const v9=new FI,nk=Symbol.for("lc:child_config");var w9=class{getInstance(){return xc()??v9}getRunnableConfig(){var e,n;return(n=(e=this.getInstance().getStore())==null?void 0:e.extra)==null?void 0:n[nk]}runWithConfig(t,e,n){var c;const r=En._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),s=this.getInstance(),i=s.getStore(),a=r==null?void 0:r.getParentRunId(),o=(c=r==null?void 0:r.handlers)==null?void 0:c.find(d=>(d==null?void 0:d.name)==="langchain_tracer");let l;return o&&a?l=o.getRunTreeWithTracingConfig(a):n||(l=new gn({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[nk]:t}),i!==void 0&&i[Gl]!==void 0&&(l===void 0&&(l={}),l[Gl]=i[Gl]),s.run(l,e)}initializeGlobalInstance(t){xc()===void 0&&a3(t)}};const Tr=new w9;var x9={};De(x9,{AsyncLocalStorageProviderSingleton:()=>Tr,MockAsyncLocalStorage:()=>FI,_CONTEXT_VARIABLES_KEY:()=>Gl});const Rp=25;async function Mn(t){return En._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function Ph(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const s=e[r]??[];e[r]=[...new Set(s.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const s=e.callbacks,i=n.callbacks;if(Array.isArray(i))if(!s)e.callbacks=i;else if(Array.isArray(s))e.callbacks=s.concat(i);else{const a=s.copy();for(const o of i)a.addHandler(bc(o),!0);e.callbacks=a}else if(i)if(!s)e.callbacks=i;else if(Array.isArray(s)){const a=i.copy();for(const o of s)a.addHandler(bc(o),!0);e.callbacks=a}else e.callbacks=new En(i._parentRunId,{handlers:s.handlers.concat(i.handlers),inheritableHandlers:s.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(i.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(i.inheritableTags))),metadata:{...s.metadata,...i.metadata}})}else{const s=r;e[s]=n[s]??e[s]}return e}const _9=new Set(["string","number","boolean"]);function Ue(t){var r;const e=Tr.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:i,...a}=e;n=Object.entries(a).reduce((o,[l,c])=>(c!==void 0&&(o[l]=c),o),n)}if(t&&(n=Object.entries(t).reduce((s,[i,a])=>(a!==void 0&&(s[i]=a),s),n)),n!=null&&n.configurable)for(const s of Object.keys(n.configurable))_9.has(typeof n.configurable[s])&&!((r=n.metadata)!=null&&r[s])&&(n.metadata||(n.metadata={}),n.metadata[s]=n.configurable[s]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const s=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,s])):n.signal=s,delete n.timeout}return n}function nt(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:s,configurable:i,runId:a}={}){const o=Ue(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),s!==void 0&&(o.runName=s),i!==void 0&&(o.configurable={...o.configurable,...i}),a!==void 0&&delete o.runId,o}function Cs(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function Ns(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,s)=>{n=()=>{s(Sc(e))},e.addEventListener("abort",n),e.aborted&&s(Sc(e))})]).finally(()=>e.removeEventListener("abort",n))}function Sc(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var b9={};De(b9,{AsyncGeneratorWithSetup:()=>ga,IterableReadableStream:()=>Ar,atee:()=>xw,concat:()=>yi,pipeGeneratorWithSetup:()=>UI});var Ar=class Ay extends ReadableStream{constructor(){super(...arguments);T(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const r=n.getReader();return new Ay({start(s){return i();function i(){return r.read().then(({done:a,value:o})=>{if(a){s.close();return}return s.enqueue(o),i()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(n){return new Ay({async pull(r){const{value:s,done:i}=await n.next();i&&r.close(),r.enqueue(s)},async cancel(r){await n.return(r)}})}};function xw(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(s){for(;;)if(s.length===0){const i=await t.next();for(const a of n)a.push(i)}else{if(s[0].done)return;yield s.shift().value}})}function yi(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,s]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=yi(n[r],s):n[r]=s;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var ga=class{constructor(t){T(this,"generator");T(this,"setup");T(this,"config");T(this,"signal");T(this,"firstResult");T(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,r)=>{Tr.runWithConfig(Cs(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,r):this.firstResult.then(s=>n(void 0),r)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?Tr.runWithConfig(Cs(this.config),this.signal?async()=>Ns(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function UI(t,e,n,r,...s){const i=new ga({generator:e,startSetup:n,signal:r}),a=await i.setup;return{output:t(i,a,...s),setup:a}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const S9=Object.prototype.hasOwnProperty;function Ey(t,e){return S9.call(t,e)}function Cy(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)Ey(t,n)&&e.push(n);return e}function Qn(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Ny(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Li(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function zI(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Iy(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Iy(t[n]))return!0}else if(typeof t=="object"){const n=Cy(t),r=n.length;for(var e=0;e<r;e++)if(Iy(t[n[e]]))return!0}}return!1}function rk(t,e){const n=[t];for(const r in e){const s=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof s<"u"&&n.push(`${r}: ${s}`)}return n.join(`
`)}var BI=class extends Error{constructor(t,e,n,r,s){super(rk(t,{name:e,index:n,operation:r,tree:s})),this.name=e,this.index=n,this.operation=r,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=rk(t,{name:e,index:n,operation:r,tree:s})}},GI={};De(GI,{JsonPatchError:()=>mt,_areEquals:()=>kc,applyOperation:()=>ta,applyPatch:()=>vo,applyReducer:()=>A9,deepClone:()=>k9,getValueByPointer:()=>Oh,validate:()=>VI,validator:()=>$h});const mt=BI,k9=Qn,Ja={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=Oh(n,this.path);r&&(r=Qn(r));const s=ta(n,{op:"remove",path:this.from}).removed;return ta(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=Oh(n,this.from);return ta(n,{op:"add",path:this.path,value:Qn(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:kc(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var T9={add:function(t,e,n){return Ny(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Ja.move,copy:Ja.copy,test:Ja.test,_get:Ja._get};function Oh(t,e){if(e=="")return t;var n={op:"_get",path:e};return ta(t,n),n.value}function ta(t,e,n=!1,r=!0,s=!0,i=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):$h(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=Oh(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=kc(t,e.value),a.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new mt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return a}}else{r||(t=Qn(t));const o=(e.path||"").split("/");let l=t,c=1,d=o.length,h,m,f;for(typeof n=="function"?f=n:f=$h;;){if(m=o[c],m&&m.indexOf("~")!=-1&&(m=zI(m)),s&&(m=="__proto__"||m=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(l[m]===void 0?h=o.slice(0,c).join("/"):c==d-1&&(h=e.path),h!==void 0&&f(e,0,t,h)),c++,Array.isArray(l)){if(m==="-")m=l.length;else{if(n&&!Ny(m))throw new mt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);Ny(m)&&(m=~~m)}if(c>=d){if(n&&e.op==="add"&&m>l.length)throw new mt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);const y=T9[e.op].call(e,l,m,t);if(y.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return y}}else if(c>=d){const y=Ja[e.op].call(e,l,m,t);if(y.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return y}if(l=l[m],n&&c<d&&(!l||typeof l!="object"))throw new mt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function vo(t,e,n,r=!0,s=!0){if(n&&!Array.isArray(e))throw new mt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=Qn(t));const i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=ta(t,e[a],n,!0,s,a),t=i[a].newDocument;return i.newDocument=t,i}function A9(t,e,n){const r=ta(t,e);if(r.test===!1)throw new mt("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function $h(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new mt("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Ja[t.op]){if(typeof t.path!="string")throw new mt("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new mt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new mt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new mt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Iy(t.value))throw new mt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,i=r.split("/").length;if(s!==i+1&&s!==i)throw new mt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new mt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=VI([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new mt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new mt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function VI(t,e,n){try{if(!Array.isArray(t))throw new mt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)vo(Qn(e),Qn(t),n||!0);else{n=n||$h;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(s){if(s instanceof mt)return s;throw s}}function kc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),s,i,a;if(n&&r){if(i=t.length,i!=e.length)return!1;for(s=i;s--!==0;)if(!kc(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(i=o.length,i!==Object.keys(e).length)return!1;for(s=i;s--!==0;)if(!e.hasOwnProperty(o[s]))return!1;for(s=i;s--!==0;)if(a=o[s],!kc(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}function HI(t,e,n,r,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=Cy(e),a=Cy(t),o=!1,l=a.length-1;l>=0;l--){var c=a[l],d=t[c];if(Ey(e,c)&&!(e[c]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var h=e[c];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?HI(d,h,n,r+"/"+Li(c),s):d!==h&&(s&&n.push({op:"test",path:r+"/"+Li(c),value:Qn(d)}),n.push({op:"replace",path:r+"/"+Li(c),value:Qn(h)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:r+"/"+Li(c),value:Qn(d)}),n.push({op:"remove",path:r+"/"+Li(c)}),o=!0):(s&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&i.length==a.length))for(var l=0;l<i.length;l++){var c=i[l];!Ey(t,c)&&e[c]!==void 0&&n.push({op:"add",path:r+"/"+Li(c),value:Qn(e[c])})}}}function _w(t,e,n=!1){var r=[];return HI(t,e,r,"",n),r}({...GI});var E9={};De(E9,{LogStreamCallbackHandler:()=>jy,RunLog:()=>bw,RunLogPatch:()=>ds,isLogStreamHandler:()=>WI});var ds=class{constructor(t){T(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=vo({},e);return new bw({ops:e,state:n[n.length-1].newDocument})}},bw=class Ry extends ds{constructor(n){super(n);T(this,"state");this.state=n.state}concat(n){const r=this.ops.concat(n.ops),s=vo(this.state,n.ops);return new Ry({ops:r,state:s[s.length-1].newDocument})}static fromRunLogPatch(n){const r=vo({},n.ops);return new Ry({ops:n.ops,state:r[r.length-1].newDocument})}};const WI=t=>t.name==="log_stream_tracer";async function sk(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function ik(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function C9(t){return t!==void 0&&t.message!==void 0}var jy=class extends Mo{constructor(e){super({_awaitHandler:!0,...e});T(this,"autoClose",!0);T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");T(this,"_schemaFormat","original");T(this,"rootId");T(this,"keyMapByRunId",{});T(this,"counterMapByRunName",{});T(this,"transformStream");T(this,"writer");T(this,"receiveStream");T(this,"name","log_stream_tracer");T(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ar.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new ds({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new ds({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await sk(e,this._schemaFormat)),await this.writer.write(new ds({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await sk(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await ik(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const s=new ds({ops:r});await this.writer.write(s)}finally{if(e.id===this.rootId){const n=new ds({ops:[{op:"replace",path:"/final_output",value:await ik(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const i=e.inputs.messages!==void 0;let a;i?C9(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new ts({id:`run-${e.id}`,content:n}):a=n;const o=new ds({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${s}/streamed_output/-`,value:a}]});await this.writer.write(o)}},N9={};De(N9,{ChatGenerationChunk:()=>xo,GenerationChunk:()=>wo,RUN_KEY:()=>Tc});const Tc="__run";var wo=class qI{constructor(e){T(this,"text");T(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new qI({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},xo=class KI extends wo{constructor(n){super(n);T(this,"message");this.message=n.message}concat(n){return new KI({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function ad({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const I9=t=>t.name==="event_stream_tracer";var R9=class extends Mo{constructor(e){super({_awaitHandler:!0,...e});T(this,"autoClose",!0);T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");T(this,"runInfoMap",new Map);T(this,"tappedPromises",new Map);T(this,"transformStream");T(this,"writer");T(this,"receiveStream");T(this,"name","event_stream_tracer");T(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Ar.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield r.value;return}function i(o,l){return o==="llm"&&typeof l=="string"?new wo({text:l}):l}let a=this.tappedPromises.get(e);if(a===void 0){let o;a=new Promise(l=>{o=l}),this.tappedPromises.set(e,a);try{const l={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...l,data:{chunk:i(s.runType,r.value)}},s),yield r.value;for await(const c of n)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...l,data:{chunk:i(s.runType,c)}},s),yield c}finally{o==null||o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var a,o;const n=ad(e),r=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,s);const i=`on_${r}_start`;await this.send({event:i,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},s)}async onLLMNewToken(e,n,r){const s=this.runInfoMap.get(e.id);let i,a;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?i=new ts({content:n,id:`run-${e.id}`}):i=r.chunk.message;else if(s.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?i=new wo({text:n}):i=r.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:a,data:{chunk:i},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var a,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(a=e.outputs)==null?void 0:a.generations;let i;if(n.runType==="chat_model"){for(const c of s??[]){if(i!==void 0)break;i=(o=c[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")i={generations:s==null?void 0:s.map(c=>c.map(d=>({text:d.text,generationInfo:d.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:i,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var a,o;const n=ad(e),r=e.run_type??"chain",s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:e.run_type};let i={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(i={},s.inputs={}):e.inputs.input!==void 0?(i.input=e.inputs.input,s.inputs=e.inputs.input):(i.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${r}_start`,data:i,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},s)}async onChainEnd(e){var o;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,s=e.inputs??n.inputs??{},a={output:((o=e.outputs)==null?void 0:o.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(a.input=s.input,n.inputs=s.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var s,i;const n=ad(e),r={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{}},r)}async onToolEnd(e){var s;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var i,a;const n=ad(e),s={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,s),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},s)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const s=this.runInfoMap.get(r);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:s.tags,metadata:s.metadata,data:n},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const j9=Object.prototype.toString,P9=t=>j9.call(t)==="[object Error]",O9=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function $9(t){if(!(t&&P9(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:O9.has(n)}function D9(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function od(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class M9 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function L9(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let s=Math.round(r*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function ak(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function F9({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:s}){var f,y,w;const i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof M9)throw i.originalError;const a=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,o=s.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:i,attemptNumber:e,retriesLeft:a,retriesConsumed:n});if(await s.onFailedAttempt(l),ak(r,o)<=0)throw i;const c=await s.shouldConsumeRetry(l),d=ak(r,o);if(d<=0||a<=0)throw i;if(i instanceof TypeError&&!$9(i)){if(c)throw i;return(f=s.signal)==null||f.throwIfAborted(),!1}if(!await s.shouldRetry(l))throw i;if(!c)return(y=s.signal)==null||y.throwIfAborted(),!1;const h=L9(n,s),m=Math.min(h,d);return m>0&&await new Promise((x,v)=>{var _,k;const p=()=>{var E;clearTimeout(g),(E=s.signal)==null||E.removeEventListener("abort",p),v(s.signal.reason)},g=setTimeout(()=>{var E;(E=s.signal)==null||E.removeEventListener("abort",p),x()},m);s.unref&&((_=g.unref)==null||_.call(g)),(k=s.signal)==null||k.addEventListener("abort",p,{once:!0})}),(w=s.signal)==null||w.throwIfAborted(),!0}async function Py(t,e={}){var i,a,o;if(e={...e},D9(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),od("factor",e.factor,{min:0,allowInfinity:!1}),od("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),od("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),od("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(i=e.signal)==null||i.throwIfAborted();let n=0,r=0;const s=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(a=e.signal)==null||a.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await F9({error:l,attemptNumber:n,retriesConsumed:r,startTime:s,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var U9={};De(U9,{AsyncCaller:()=>Zc});const z9=[400,401,402,403,404,405,406,407,409],B9=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&z9.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const s=new Error(t==null?void 0:t.message);throw s.name="InsufficientQuotaError",s}};var Zc=class{constructor(t){T(this,"maxConcurrency");T(this,"maxRetries");T(this,"onFailedAttempt");T(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??B9;const e="default"in vs?vs.default:vs;this.queue=new e({concurrency:this.maxConcurrency})}call(t,...e){return this.queue.add(()=>Py(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var r;return(r=this.onFailedAttempt)==null?void 0:r.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let r;return Promise.race([this.call(e,...n),new Promise((s,i)=>{var a;r=()=>{i(Sc(t.signal))},(a=t.signal)==null||a.addEventListener("abort",r)})]).finally(()=>{t.signal&&r&&t.signal.removeEventListener("abort",r)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},ZI=class extends Mo{constructor({config:e,onStart:n,onEnd:r,onError:s}){super({_awaitHandler:!0});T(this,"name","RootListenersTracer");T(this,"rootId");T(this,"config");T(this,"argOnStart");T(this,"argOnEnd");T(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Sw(t){return t?t.lc_runnable:!1}var G9=class{constructor(t){T(this,"includeNames");T(this,"includeTypes");T(this,"includeTags");T(this,"excludeNames");T(this,"excludeTypes");T(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const r=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||r.some(s=>{var i;return(i=this.includeTags)==null?void 0:i.includes(s)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var i;return!((i=this.excludeTags)!=null&&i.includes(s))})),n}};function Lo(t,e,n){function r(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,l);const c=a.prototype,d=Object.keys(c);for(let h=0;h<d.length;h++){const m=d[h];m in o||(o[m]=c[m].bind(o))}}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function a(o){var l;const c=n!=null&&n.Parent?new i:this;r(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const d of c._zod.deferred)d();return c}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:o=>{var l,c;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class Wl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const V9={};function Lm(t){return V9}function H9(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function W9(t,e){return typeof e=="bigint"?e.toString():e}function q9(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const ok=Symbol("evaluating");function lk(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==ok)return r===void 0&&(r=ok,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function YI(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function JI(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}const XI="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ck(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function K9(t){if(ck(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(ck(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Is(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Z9(t){return{}}function Y9(t,e){if(!K9(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=JI(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return YI(this,"shape",i),i},checks:[]});return Is(t,s)}function J9(t,e,n){const r=JI(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};for(const a in s)i[a]=t?new t({type:"optional",innerType:s[a]}):s[a];return YI(this,"shape",i),i},checks:[]});return Is(e,r)}function ld(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function cd(t){return typeof t=="string"?t:t==null?void 0:t.message}function Fm(t,e,n){var s,i,a,o,l,c;const r={...t,path:t.path??[]};if(!t.message){const d=cd((a=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:a.call(i,t))??cd((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??cd((l=n.customError)==null?void 0:l.call(n,t))??cd((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=d}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const QI=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,W9,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},X9=Lo("$ZodError",QI),Um=Lo("$ZodError",QI,{Parent:Error});function Q9(t){const e=[],n=t.map(r=>typeof r=="object"?r.key:r);for(const r of n)typeof r=="number"?e.push(`[${r}]`):typeof r=="symbol"?e.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?e.push(`[${JSON.stringify(r)}]`):(e.length&&e.push("."),e.push(r));return e.join("")}function eB(t){var r;const e=[],n=[...t.issues].sort((s,i)=>(s.path??[]).length-(i.path??[]).length);for(const s of n)e.push(` ${s.message}`),(r=s.path)!=null&&r.length&&e.push(`   at ${Q9(s.path)}`);return e.join(`
`)}const tB=t=>(e,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new Wl;if(a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>Fm(l,i,Lm())));throw XI(o,s==null?void 0:s.callee),o}return a.value},zm=tB(Um),nB=t=>async(e,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const o=new((s==null?void 0:s.Err)??t)(a.issues.map(l=>Fm(l,i,Lm())));throw XI(o,s==null?void 0:s.callee),o}return a.value},eR=nB(Um),rB=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Wl;return i.issues.length?{success:!1,error:new(t??X9)(i.issues.map(a=>Fm(a,s,Lm())))}:{success:!0,data:i.value}},sB=rB(Um),iB=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>Fm(a,s,Lm())))}:{success:!0,data:i.value}},aB=iB(Um),oB={major:4,minor:1,patch:13},kw=Lo("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=oB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const a of i._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,l,c)=>{let d=ld(o),h;for(const m of l){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(d)continue;const f=o.issues.length,y=m._zod.check(o);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Wl;if(h||y instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await y,o.issues.length!==f&&(d||(d=ld(o,f)))});else{if(o.issues.length===f)continue;d||(d=ld(o,f))}}return h?h.then(()=>o):o},a=(o,l,c)=>{if(ld(o))return o.aborted=!0,o;const d=i(l,r,c);if(d instanceof Promise){if(c.async===!1)throw new Wl;return d.then(h=>t._zod.parse(h,c))}return t._zod.parse(d,c)};t._zod.run=(o,l)=>{if(l.skipChecks)return t._zod.parse(o,l);if(l.direction==="backward"){const d=t._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return d instanceof Promise?d.then(h=>a(h,o,l)):a(d,o,l)}const c=t._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Wl;return c.then(d=>i(d,r,l))}return i(c,r,l)}}t["~standard"]={validate:i=>{var a;try{const o=sB(t,i);return o.success?{value:o.data}:{issues:(a=o.error)==null?void 0:a.issues}}catch{return aB(t,i).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),lB=Lo("$ZodUnknown",(t,e)=>{kw.init(t,e),t._zod.parse=n=>n}),cB=Lo("$ZodNever",(t,e)=>{kw.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function uk(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const tR=Lo("$ZodOptional",(t,e)=>{kw.init(t,e),t._zod.optin="optional",t._zod.optout="optional",lk(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),lk(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${q9(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>uk(i,n.value)):uk(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}});var dk;class nR{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function uB(){return new nR}(dk=globalThis).__zod_globalRegistry??(dk.__zod_globalRegistry=uB());const Sn=globalThis.__zod_globalRegistry;function dB(t){return new t({type:"unknown"})}function hB(t,e){return new t({type:"never",...Z9()})}class hk{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Sn,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var h,m,f;var r;const s=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,n.schemaPath.includes(e)&&(a.cycle=n.path),a.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,o);const l=(m=(h=e._zod).toJSONSchema)==null?void 0:m.call(h);if(l)o.schema=l;else{const y={...n,schemaPath:[...n.schemaPath,e],path:n.path},w=e._zod.parent;if(w)o.ref=w,this.process(w,y),this.seen.get(w).isParent=!0;else{const x=o.schema;switch(s.type){case"string":{const v=x;v.type="string";const{minimum:p,maximum:g,format:_,patterns:k,contentEncoding:E}=e._zod.bag;if(typeof p=="number"&&(v.minLength=p),typeof g=="number"&&(v.maxLength=g),_&&(v.format=i[_]??_,v.format===""&&delete v.format),E&&(v.contentEncoding=E),k&&k.size>0){const C=[...k];C.length===1?v.pattern=C[0].source:C.length>1&&(o.schema.allOf=[...C.map(b=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:b.source}))])}break}case"number":{const v=x,{minimum:p,maximum:g,format:_,multipleOf:k,exclusiveMaximum:E,exclusiveMinimum:C}=e._zod.bag;typeof _=="string"&&_.includes("int")?v.type="integer":v.type="number",typeof C=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.minimum=C,v.exclusiveMinimum=!0):v.exclusiveMinimum=C),typeof p=="number"&&(v.minimum=p,typeof C=="number"&&this.target!=="draft-4"&&(C>=p?delete v.minimum:delete v.exclusiveMinimum)),typeof E=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(v.maximum=E,v.exclusiveMaximum=!0):v.exclusiveMaximum=E),typeof g=="number"&&(v.maximum=g,typeof E=="number"&&this.target!=="draft-4"&&(E<=g?delete v.maximum:delete v.exclusiveMaximum)),typeof k=="number"&&(v.multipleOf=k);break}case"boolean":{const v=x;v.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(x.type="string",x.nullable=!0,x.enum=[null]):x.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{x.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const v=x,{minimum:p,maximum:g}=e._zod.bag;typeof p=="number"&&(v.minItems=p),typeof g=="number"&&(v.maxItems=g),v.type="array",v.items=this.process(s.element,{...y,path:[...y.path,"items"]});break}case"object":{const v=x;v.type="object",v.properties={};const p=s.shape;for(const k in p)v.properties[k]=this.process(p[k],{...y,path:[...y.path,"properties",k]});const g=new Set(Object.keys(p)),_=new Set([...g].filter(k=>{const E=s.shape[k]._zod;return this.io==="input"?E.optin===void 0:E.optout===void 0}));_.size>0&&(v.required=Array.from(_)),((f=s.catchall)==null?void 0:f._zod.def.type)==="never"?v.additionalProperties=!1:s.catchall?s.catchall&&(v.additionalProperties=this.process(s.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(v.additionalProperties=!1);break}case"union":{const v=x,p=s.discriminator!==void 0,g=s.options.map((_,k)=>this.process(_,{...y,path:[...y.path,p?"oneOf":"anyOf",k]}));p?v.oneOf=g:v.anyOf=g;break}case"intersection":{const v=x,p=this.process(s.left,{...y,path:[...y.path,"allOf",0]}),g=this.process(s.right,{...y,path:[...y.path,"allOf",1]}),_=E=>"allOf"in E&&Object.keys(E).length===1,k=[..._(p)?p.allOf:[p],..._(g)?g.allOf:[g]];v.allOf=k;break}case"tuple":{const v=x;v.type="array";const p=this.target==="draft-2020-12"?"prefixItems":"items",g=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",_=s.items.map((b,O)=>this.process(b,{...y,path:[...y.path,p,O]})),k=s.rest?this.process(s.rest,{...y,path:[...y.path,g,...this.target==="openapi-3.0"?[s.items.length]:[]]}):null;this.target==="draft-2020-12"?(v.prefixItems=_,k&&(v.items=k)):this.target==="openapi-3.0"?(v.items={anyOf:_},k&&v.items.anyOf.push(k),v.minItems=_.length,k||(v.maxItems=_.length)):(v.items=_,k&&(v.additionalItems=k));const{minimum:E,maximum:C}=e._zod.bag;typeof E=="number"&&(v.minItems=E),typeof C=="number"&&(v.maxItems=C);break}case"record":{const v=x;v.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(v.propertyNames=this.process(s.keyType,{...y,path:[...y.path,"propertyNames"]})),v.additionalProperties=this.process(s.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const v=x,p=H9(s.entries);p.every(g=>typeof g=="number")&&(v.type="number"),p.every(g=>typeof g=="string")&&(v.type="string"),v.enum=p;break}case"literal":{const v=x,p=[];for(const g of s.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");p.push(Number(g))}else p.push(g);if(p.length!==0)if(p.length===1){const g=p[0];v.type=g===null?"null":typeof g,this.target==="draft-4"||this.target==="openapi-3.0"?v.enum=[g]:v.const=g}else p.every(g=>typeof g=="number")&&(v.type="number"),p.every(g=>typeof g=="string")&&(v.type="string"),p.every(g=>typeof g=="boolean")&&(v.type="string"),p.every(g=>g===null)&&(v.type="null"),v.enum=p;break}case"file":{const v=x,p={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:_,mime:k}=e._zod.bag;g!==void 0&&(p.minLength=g),_!==void 0&&(p.maxLength=_),k?k.length===1?(p.contentMediaType=k[0],Object.assign(v,p)):v.anyOf=k.map(E=>({...p,contentMediaType:E})):Object.assign(v,p);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const v=this.process(s.innerType,y);this.target==="openapi-3.0"?(o.ref=s.innerType,x.nullable=!0):x.anyOf=[v,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,y),o.ref=s.innerType;break}case"success":{const v=x;v.type="boolean";break}case"default":{this.process(s.innerType,y),o.ref=s.innerType,x.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,y),o.ref=s.innerType,this.io==="input"&&(x._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,y),o.ref=s.innerType;let v;try{v=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}x.default=v;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const v=x,p=e._zod.pattern;if(!p)throw new Error("Pattern not found in template literal");v.type="string",v.pattern=p.source;break}case"pipe":{const v=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(v,y),o.ref=v;break}case"readonly":{this.process(s.innerType,y),o.ref=s.innerType,x.readOnly=!0;break}case"promise":{this.process(s.innerType,y),o.ref=s.innerType;break}case"optional":{this.process(s.innerType,y),o.ref=s.innerType;break}case"lazy":{const v=e._zod.innerType;this.process(v,y),o.ref=v;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(e);return c&&Object.assign(o.schema,c),this.io==="input"&&rn(e)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(e).schema}emit(e,n){var d,h,m,f,y,w;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=x=>{var k;const v=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const E=(k=r.external.registry.get(x[0]))==null?void 0:k.id,C=r.external.uri??(O=>O);if(E)return{ref:C(E)};const b=x[1].defId??x[1].schema.id??`schema${this.counter++}`;return x[1].defId=b,{defId:b,ref:`${C("__shared")}#/${v}/${b}`}}if(x[1]===s)return{ref:"#"};const g=`#/${v}/`,_=x[1].schema.id??`__schema${this.counter++}`;return{defId:_,ref:g+_}},a=x=>{if(x[1].schema.$ref)return;const v=x[1],{ref:p,defId:g}=i(x);v.def={...v.schema},g&&(v.defId=g);const _=v.schema;for(const k in _)delete _[k];_.$ref=p};if(r.cycles==="throw")for(const x of this.seen.entries()){const v=x[1];if(v.cycle)throw new Error(`Cycle detected: #/${(d=v.cycle)==null?void 0:d.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of this.seen.entries()){const v=x[1];if(e===x[0]){a(x);continue}if(r.external){const g=(h=r.external.registry.get(x[0]))==null?void 0:h.id;if(e!==x[0]&&g){a(x);continue}}if((m=this.metadataRegistry.get(x[0]))==null?void 0:m.id){a(x);continue}if(v.cycle){a(x);continue}if(v.count>1&&r.reused==="ref"){a(x);continue}}const o=(x,v)=>{const p=this.seen.get(x),g=p.def??p.schema,_={...g};if(p.ref===null)return;const k=p.ref;if(p.ref=null,k){o(k,v);const E=this.seen.get(k).schema;E.$ref&&(v.target==="draft-7"||v.target==="draft-4"||v.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(E)):(Object.assign(g,E),Object.assign(g,_))}p.isParent||this.override({zodSchema:x,jsonSchema:g,path:p.path??[]})};for(const x of[...this.seen.entries()].reverse())o(x[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),(f=r.external)!=null&&f.uri){const x=(y=r.external.registry.get(e))==null?void 0:y.id;if(!x)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(x)}Object.assign(l,s.def);const c=((w=r.external)==null?void 0:w.defs)??{};for(const x of this.seen.entries()){const v=x[1];v.def&&v.defId&&(c[v.defId]=v.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function Dh(t,e){if(t instanceof nR){const r=new hk(e),s={};for(const o of t._idmap.entries()){const[l,c]=o;r.process(c)}const i={},a={registry:t,uri:e==null?void 0:e.uri,defs:s};for(const o of t._idmap.entries()){const[l,c]=o;i[l]=r.emit(c,{...e,external:a})}if(Object.keys(s).length>0){const o=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[o]:s}}return{schemas:i}}const n=new hk(e);return n.process(t),n.emit(t,e)}function rn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return rn(r.element,n);if(r.type==="set")return rn(r.valueType,n);if(r.type==="lazy")return rn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return rn(r.innerType,n);if(r.type==="intersection")return rn(r.left,n)||rn(r.right,n);if(r.type==="record"||r.type==="map")return rn(r.keyType,n)||rn(r.valueType,n);if(r.type==="pipe")return rn(r.in,n)||rn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(rn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(rn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(rn(s,n))return!0;return!!(r.rest&&rn(r.rest,n))}return!1}function gt(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function Tt(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function mB(t){return gt(t)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Tt(t)}function zr(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(gt(t)||Tt(t))}function rR(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodLiteral"}function sR(t){return gt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="literal":!1}function fB(t){return!!(rR(t)||sR(t))}async function iR(t,e){if(gt(t))try{return{success:!0,data:await eR(t,e)}}catch(n){return{success:!1,error:n}}if(Tt(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Bm(t,e){if(gt(t))return await eR(t,e);if(Tt(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function pB(t,e){if(gt(t))try{return{success:!0,data:zm(t,e)}}catch(n){return{success:!1,error:n}}if(Tt(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function gB(t,e){if(gt(t))return zm(t,e);if(Tt(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Gm(t){var e;if(gt(t))return(e=Sn.get(t))==null?void 0:e.description;if(Tt(t)||"description"in t&&typeof t.description=="string")return t.description}function yB(t){if(!zr(t))return!1;if(Tt(t)){const e=t._def;if(e.typeName==="ZodObject"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.typeName==="ZodRecord")return!0}if(gt(t)){const e=t._zod.def;if(e.type==="object"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.type==="record")return!0}return typeof t=="object"&&t!==null&&!("shape"in t)}function Tw(t){return zr(t)?Tt(t)?t._def.typeName==="ZodString":gt(t)?t._zod.def.type==="string":!1:!1}function Aw(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodObject"}function Zr(t){return gt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Vm(t){return gt(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function vB(t){return!!(Aw(t)||Zr(t))}function Oy(t){if(Tt(t))return t.shape;if(gt(t))return t._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function wB(t,e){if(Tt(t))return t.extend(e);if(gt(t))return Y9(t,e);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function xB(t){if(Tt(t))return t.partial();if(gt(t))return J9(tR,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function Mh(t,e=!1){if(Tt(t))return t.strict();if(Zr(t)){const n=t._zod.def.shape;if(e)for(const[i,a]of Object.entries(t._zod.def.shape)){if(Zr(a)){const l=Mh(a,e);n[i]=l}else if(Vm(a)){let l=a._zod.def.element;Zr(l)&&(l=Mh(l,e)),n[i]=Is(a,{...a._zod.def,element:l})}else n[i]=a;const o=Sn.get(a);o&&Sn.add(n[i],o)}const r=Is(t,{...t._zod.def,shape:n,catchall:hB(cB)}),s=Sn.get(t);return s&&Sn.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function $y(t,e=!1){if(Aw(t))return t.passthrough();if(Zr(t)){const n=t._zod.def.shape;if(e)for(const[i,a]of Object.entries(t._zod.def.shape)){if(Zr(a)){const l=$y(a,e);n[i]=l}else if(Vm(a)){let l=a._zod.def.element;Zr(l)&&(l=$y(l,e)),n[i]=Is(a,{...a._zod.def,element:l})}else n[i]=a;const o=Sn.get(a);o&&Sn.add(n[i],o)}const r=Is(t,{...t._zod.def,shape:n,catchall:dB(lB)}),s=Sn.get(t);return s&&Sn.add(r,s),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function _B(t){if(Tt(t))try{const e=t.parse(void 0);return()=>e}catch{return}if(gt(t))try{const e=zm(t,void 0);return()=>e}catch{return}}function bB(t){return Tt(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function SB(t){return gt(t)&&t._zod.def.type==="pipe"}function _l(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(Tt(t))return bB(t)?_l(t._def.schema,e,n):t;if(gt(t)){let s=t;if(SB(t)&&(s=_l(t._zod.def.in,e,n)),e){if(Zr(s)){const a=s._zod.def.shape;for(const[o,l]of Object.entries(s._zod.def.shape))a[o]=_l(l,e,n);s=Is(s,{...s._zod.def,shape:a})}else if(Vm(s)){const a=_l(s._zod.def.element,e,n);s=Is(s,{...s._zod.def,element:a})}}const i=Sn.get(t);return i&&Sn.add(s,i),n.set(t,s),s}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function aR(t,e=!1){return _l(t,e,new WeakMap)}function kB(t,e){if(Tt(t)){const n=Oy(t),r={};for(const[s,i]of Object.entries(n))e(s,i)?r[s]=i.optional():r[s]=i;return t.extend(r)}if(gt(t)){const n=Oy(t),r={...t._zod.def.shape};for(const[a,o]of Object.entries(n))e(a,o)&&(r[a]=new tR({type:"optional",innerType:o}));const s=Is(t,{...t._zod.def,shape:r}),i=Sn.get(t);return i&&Sn.add(s,i),s}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function oR(t){return t instanceof Error&&(t.constructor.name==="ZodError"||t.constructor.name==="$ZodError")}function jp(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const TB=["*","_","`"];function AB(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function EB(t,e,n){const{firstNode:r,lastNode:s,nodeColors:i,withStyles:a=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let c=a?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const f="default",y={[f]:"{0}({1})"};r!==void 0&&(y[r]="{0}([{1}]):::first"),s!==void 0&&(y[s]="{0}([{1}]):::last");for(const[w,x]of Object.entries(t)){const v=x.name.split(":").pop()??"";let g=TB.some(k=>v.startsWith(k)&&v.endsWith(k))?`<p>${v}</p>`:v;Object.keys(x.metadata??{}).length&&(g+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([k,E])=>`${k} = ${E}`).join(`
`)}</em></small>`);const _=(y[w]??y[f]).replace("{0}",jp(w)).replace("{1}",g);c+=`	${_}
`}}const d={};for(const f of e){const y=f.source.split(":"),w=f.target.split(":"),x=y.filter((v,p)=>v===w[p]).join(":");d[x]||(d[x]=[]),d[x].push(f)}const h=new Set;function m(f,y){const w=f.length===1&&f[0].source===f[0].target;if(y&&!w){const x=y.split(":").pop();if(h.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);h.add(x),c+=`	subgraph ${x}
`}for(const x of f){const{source:v,target:p,data:g,conditional:_}=x;let k="";if(g!==void 0){let E=g;const C=E.split(" ");C.length>l&&(E=Array.from({length:Math.ceil(C.length/l)},(b,O)=>C.slice(O*l,(O+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),k=_?` -. &nbsp;${E}&nbsp; .-> `:` -- &nbsp;${E}&nbsp; --> `}else k=_?" -.-> ":" --> ";c+=`	${jp(v)}${k}${jp(p)};
`}for(const x in d)x.startsWith(`${y}:`)&&x!==y&&m(d[x],x);y&&!w&&(c+=`	end
`)}m(d[""]??[],"");for(const f in d)!f.includes(":")&&f!==""&&m(d[f],f);return a&&(c+=AB(i??{})),c}async function CB(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const r=(e==null?void 0:e.imageType)??"png",s=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${s}?bgColor=${n}&type=${r}`,a=await fetch(i);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}const NB=Symbol("Let zodToJsonSchema decide on which parser to use"),IB={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},RB=t=>({...IB,...t}),jB=t=>{const e=RB(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}},lR=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function Un(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?lR(e,t.currentPath):e.join("/")}}function cR(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Ke(t,e,n,r,s){t[e]=n,cR(t,e,r,s)}var ze;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ze||(ze={}));var mk;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(mk||(mk={}));const oe=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qs=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}},W=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Rs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Rs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n=Object.create(null),r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rs.create=t=>new Rs(t);const Dy=(t,e)=>{let n;switch(t.code){case W.invalid_type:t.received===oe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ze.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:n=`Unrecognized key(s) in object: ${ze.joinValues(t.keys,", ")}`;break;case W.invalid_union:n="Invalid input";break;case W.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ze.joinValues(t.options)}`;break;case W.invalid_enum_value:n=`Invalid enum value. Expected ${ze.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:n="Invalid function arguments";break;case W.invalid_return_type:n="Invalid function return type";break;case W.invalid_date:n="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ze.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case W.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case W.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case W.custom:n="Invalid input";break;case W.invalid_intersection_types:n="Intersection results could not be merged";break;case W.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:n="Number must be finite";break;default:n=e.defaultError,ze.assertNever(t)}return{message:n}};let PB=Dy;function OB(){return PB}const $B=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}};function X(t,e){const n=OB(),r=$B({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Dy?void 0:Dy].filter(s=>!!s)});t.common.issues.push(r)}class zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ke;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return zn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return ke;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const ke=Object.freeze({status:"aborted"}),bl=t=>({status:"dirty",value:t}),sr=t=>({status:"valid",value:t}),fk=t=>t.status==="aborted",pk=t=>t.status==="dirty",_o=t=>t.status==="valid",Lh=t=>typeof Promise<"u"&&t instanceof Promise;var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));class vi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gk=(t,e)=>{if(_o(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rs(t.common.issues);return this._error=n,this._error}}};function Re(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{const{message:l}=t;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:s}}class Le{get description(){return this._def.description}_getType(e){return qs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zn,ctx:{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Lh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return gk(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return _o(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>_o(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Lh(s)?s:Promise.resolve(s));return gk(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:W.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new So({schema:this,typeName:D.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return di.create(this,this._def)}nullable(){return ko.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yr.create(this)}promise(){return Bh.create(this,this._def)}or(e){return Uh.create([this,e],this._def)}and(e){return zh.create(this,e,this._def)}transform(e){return new So({...Re(this._def),schema:this,typeName:D.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Fy({...Re(this._def),innerType:this,defaultValue:n,typeName:D.ZodDefault})}brand(){return new sG({typeName:D.ZodBranded,type:this,...Re(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Uy({...Re(this._def),innerType:this,catchValue:n,typeName:D.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ew.create(this,e)}readonly(){return zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DB=/^c[^\s-]{8,}$/i,MB=/^[0-9a-z]+$/,LB=/^[0-9A-HJKMNP-TV-Z]{26}$/i,FB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UB=/^[a-z0-9_-]{21}$/i,zB=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BB=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,GB=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,VB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Pp;const HB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,WB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,KB=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ZB=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,YB=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,uR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",JB=new RegExp(`^${uR}$`);function dR(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function XB(t){return new RegExp(`^${dR(t)}$`)}function QB(t){let e=`${uR}T${dR(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function eG(t,e){return!!((e==="v4"||!e)&&HB.test(t)||(e==="v6"||!e)&&qB.test(t))}function tG(t,e){if(!zB.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function nG(t,e){return!!((e==="v4"||!e)&&WB.test(t)||(e==="v6"||!e)&&KB.test(t))}class ei extends Le{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return X(i,{code:W.invalid_type,expected:oe.string,received:i.parsedType}),ke}const r=new zn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?X(s,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&X(s,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")GB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"email",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Pp||(Pp=new RegExp(VB,"u")),Pp.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"emoji",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")FB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"uuid",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")UB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"nanoid",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")DB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")MB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid2",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")LB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ulid",code:W.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),X(s,{validation:"url",code:W.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"regex",code:W.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?QB(i).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?JB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?XB(i).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:W.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?BB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"duration",code:W.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?eG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ip",code:W.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?tG(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"jwt",code:W.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?nG(e.data,i.version)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cidr",code:W.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?ZB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"base64",code:W.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?YB.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"base64url",code:W.invalid_string,message:i.message}),r.dirty()):ze.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:W.invalid_string,...le.errToObj(r)})}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...le.errToObj(n)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ei.create=t=>new ei({checks:[],typeName:D.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Re(t)});function rG(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class Ac extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return X(i,{code:W.invalid_type,expected:oe.number,received:i.parsedType}),ke}let r;const s=new zn;for(const i of this._def.checks)i.kind==="int"?ze.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:W.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?rG(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:W.not_finite,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Ac({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Ac({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ac.create=t=>new Ac({checks:[],typeName:D.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class Ec extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let r;const s=new zn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),X(r,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return X(n,{code:W.invalid_type,expected:oe.bigint,received:n.parsedType}),ke}gte(e,n){return this.setLimit("min",e,!0,le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,le.toString(n))}setLimit(e,n,r,s){return new Ec({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new Ec({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ec.create=t=>new Ec({checks:[],typeName:D.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Re(t)});class yk extends Le{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.boolean,received:r.parsedType}),ke}return sr(e.data)}}yk.create=t=>new yk({typeName:D.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class Fh extends Le{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return X(i,{code:W.invalid_type,expected:oe.date,received:i.parsedType}),ke}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return X(i,{code:W.invalid_date}),ke}const r=new zn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:W.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:W.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ze.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Fh.create=t=>new Fh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:D.ZodDate,...Re(t)});class vk extends Le{_parse(e){if(this._getType(e)!==oe.symbol){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.symbol,received:r.parsedType}),ke}return sr(e.data)}}vk.create=t=>new vk({typeName:D.ZodSymbol,...Re(t)});class wk extends Le{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.undefined,received:r.parsedType}),ke}return sr(e.data)}}wk.create=t=>new wk({typeName:D.ZodUndefined,...Re(t)});class xk extends Le{_parse(e){if(this._getType(e)!==oe.null){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.null,received:r.parsedType}),ke}return sr(e.data)}}xk.create=t=>new xk({typeName:D.ZodNull,...Re(t)});class My extends Le{constructor(){super(...arguments),this._any=!0}_parse(e){return sr(e.data)}}My.create=t=>new My({typeName:D.ZodAny,...Re(t)});class _k extends Le{constructor(){super(...arguments),this._unknown=!0}_parse(e){return sr(e.data)}}_k.create=t=>new _k({typeName:D.ZodUnknown,...Re(t)});class wi extends Le{_parse(e){const n=this._getOrReturnCtx(e);return X(n,{code:W.invalid_type,expected:oe.never,received:n.parsedType}),ke}}wi.create=t=>new wi({typeName:D.ZodNever,...Re(t)});class bk extends Le{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.void,received:r.parsedType}),ke}return sr(e.data)}}bk.create=t=>new bk({typeName:D.ZodVoid,...Re(t)});class Yr extends Le{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==oe.array)return X(n,{code:W.invalid_type,expected:oe.array,received:n.parsedType}),ke;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(X(n,{code:a?W.too_big:W.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(X(n,{code:W.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(X(n,{code:W.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new vi(n,a,n.path,o)))).then(a=>zn.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new vi(n,a,n.path,o)));return zn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Yr({...this._def,minLength:{value:e,message:le.toString(n)}})}max(e,n){return new Yr({...this._def,maxLength:{value:e,message:le.toString(n)}})}length(e,n){return new Yr({...this._def,exactLength:{value:e,message:le.toString(n)}})}nonempty(e){return this.min(1,e)}}Yr.create=(t,e)=>new Yr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:D.ZodArray,...Re(e)});function Ia(t){if(t instanceof ft){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=di.create(Ia(r))}return new ft({...t._def,shape:()=>e})}else return t instanceof Yr?new Yr({...t._def,type:Ia(t.element)}):t instanceof di?di.create(Ia(t.unwrap())):t instanceof ko?ko.create(Ia(t.unwrap())):t instanceof ua?ua.create(t.items.map(e=>Ia(e))):t}class ft extends Le{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ze.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==oe.object){const c=this._getOrReturnCtx(e);return X(c,{code:W.invalid_type,expected:oe.object,received:c.parsedType}),ke}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof wi&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new vi(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof wi){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")o.length>0&&(X(s,{code:W.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of o){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new vi(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,m=await d.value;c.push({key:h,value:m,alwaysSet:d.alwaysSet})}return c}).then(c=>zn.mergeObjectSync(r,c)):zn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new ft({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ft({...this._def,unknownKeys:"strip"})}passthrough(){return new ft({...this._def,unknownKeys:"passthrough"})}extend(e){return new ft({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ft({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:D.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ft({...this._def,catchall:e})}pick(e){const n={};for(const r of ze.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ft({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ze.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new ft({...this._def,shape:()=>n})}deepPartial(){return Ia(this)}partial(e){const n={};for(const r of ze.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new ft({...this._def,shape:()=>n})}required(e){const n={};for(const r of ze.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof di;)i=i._def.innerType;n[r]=i}return new ft({...this._def,shape:()=>n})}keyof(){return hR(ze.objectKeys(this.shape))}}ft.create=(t,e)=>new ft({shape:()=>t,unknownKeys:"strip",catchall:wi.create(),typeName:D.ZodObject,...Re(e)});ft.strictCreate=(t,e)=>new ft({shape:()=>t,unknownKeys:"strict",catchall:wi.create(),typeName:D.ZodObject,...Re(e)});ft.lazycreate=(t,e)=>new ft({shape:t,unknownKeys:"strip",catchall:wi.create(),typeName:D.ZodObject,...Re(e)});class Uh extends Le{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Rs(o.ctx.common.issues));return X(n,{code:W.invalid_union,unionErrors:a}),ke}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new Rs(l));return X(n,{code:W.invalid_union,unionErrors:o}),ke}}get options(){return this._def.options}}Uh.create=(t,e)=>new Uh({options:t,typeName:D.ZodUnion,...Re(e)});function Ly(t,e){const n=qs(t),r=qs(e);if(t===e)return{valid:!0,data:t};if(n===oe.object&&r===oe.object){const s=ze.objectKeys(e),i=ze.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const l=Ly(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===oe.array&&r===oe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],l=Ly(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===oe.date&&r===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class zh extends Le{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(fk(i)||fk(a))return ke;const o=Ly(i.value,a.value);return o.valid?((pk(i)||pk(a))&&n.dirty(),{status:n.value,value:o.data}):(X(r,{code:W.invalid_intersection_types}),ke)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}zh.create=(t,e,n)=>new zh({left:t,right:e,typeName:D.ZodIntersection,...Re(n)});class ua extends Le{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.array)return X(r,{code:W.invalid_type,expected:oe.array,received:r.parsedType}),ke;if(r.data.length<this._def.items.length)return X(r,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ke;!this._def.rest&&r.data.length>this._def.items.length&&(X(r,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new vi(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>zn.mergeArray(n,a)):zn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ua({...this._def,rest:e})}}ua.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ua({items:t,typeName:D.ZodTuple,rest:null,...Re(e)})};class Sk extends Le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.map)return X(r,{code:W.invalid_type,expected:oe.map,received:r.parsedType}),ke;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:s._parse(new vi(r,o,r.path,[c,"key"])),value:i._parse(new vi(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return ke;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return ke;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}}}}Sk.create=(t,e,n)=>new Sk({valueType:e,keyType:t,typeName:D.ZodMap,...Re(n)});class Cc extends Le{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.set)return X(r,{code:W.invalid_type,expected:oe.set,received:r.parsedType}),ke;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(X(r,{code:W.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(X(r,{code:W.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const d of l){if(d.status==="aborted")return ke;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new vi(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new Cc({...this._def,minSize:{value:e,message:le.toString(n)}})}max(e,n){return new Cc({...this._def,maxSize:{value:e,message:le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Cc.create=(t,e)=>new Cc({valueType:t,minSize:null,maxSize:null,typeName:D.ZodSet,...Re(e)});class kk extends Le{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}kk.create=(t,e)=>new kk({getter:t,typeName:D.ZodLazy,...Re(e)});class Tk extends Le{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return X(n,{received:n.data,code:W.invalid_literal,expected:this._def.value}),ke}return{status:"valid",value:e.data}}get value(){return this._def.value}}Tk.create=(t,e)=>new Tk({value:t,typeName:D.ZodLiteral,...Re(e)});function hR(t,e){return new bo({values:t,typeName:D.ZodEnum,...Re(e)})}class bo extends Le{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{expected:ze.joinValues(r),received:n.parsedType,code:W.invalid_type}),ke}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{received:n.data,code:W.invalid_enum_value,options:r}),ke}return sr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return bo.create(e,{...this._def,...n})}exclude(e,n=this._def){return bo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}bo.create=hR;class Ak extends Le{_parse(e){const n=ze.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==oe.string&&r.parsedType!==oe.number){const s=ze.objectValues(n);return X(r,{expected:ze.joinValues(s),received:r.parsedType,code:W.invalid_type}),ke}if(this._cache||(this._cache=new Set(ze.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ze.objectValues(n);return X(r,{received:r.data,code:W.invalid_enum_value,options:s}),ke}return sr(e.data)}get enum(){return this._def.values}}Ak.create=(t,e)=>new Ak({values:t,typeName:D.ZodNativeEnum,...Re(e)});class Bh extends Le{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.promise&&n.common.async===!1)return X(n,{code:W.invalid_type,expected:oe.promise,received:n.parsedType}),ke;const r=n.parsedType===oe.promise?n.data:Promise.resolve(n.data);return sr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bh.create=(t,e)=>new Bh({type:t,typeName:D.ZodPromise,...Re(e)});class So extends Le{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===D.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{X(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return ke;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?ke:l.status==="dirty"||n.value==="dirty"?bl(l.value):l});{if(n.value==="aborted")return ke;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?ke:o.status==="dirty"||n.value==="dirty"?bl(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ke:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?ke:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_o(a))return ke;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>_o(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):ke);ze.assertNever(s)}}So.create=(t,e,n)=>new So({schema:t,typeName:D.ZodEffects,effect:e,...Re(n)});So.createWithPreprocess=(t,e,n)=>new So({schema:e,effect:{type:"preprocess",transform:t},typeName:D.ZodEffects,...Re(n)});class di extends Le{_parse(e){return this._getType(e)===oe.undefined?sr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}di.create=(t,e)=>new di({innerType:t,typeName:D.ZodOptional,...Re(e)});class ko extends Le{_parse(e){return this._getType(e)===oe.null?sr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ko.create=(t,e)=>new ko({innerType:t,typeName:D.ZodNullable,...Re(e)});class Fy extends Le{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Fy.create=(t,e)=>new Fy({innerType:t,typeName:D.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});class Uy extends Le{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Lh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Uy.create=(t,e)=>new Uy({innerType:t,typeName:D.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});class Ek extends Le{_parse(e){if(this._getType(e)!==oe.nan){const r=this._getOrReturnCtx(e);return X(r,{code:W.invalid_type,expected:oe.nan,received:r.parsedType}),ke}return{status:"valid",value:e.data}}}Ek.create=t=>new Ek({typeName:D.ZodNaN,...Re(t)});class sG extends Le{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ew extends Le{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ke:i.status==="dirty"?(n.dirty(),bl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ke:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Ew({in:e,out:n,typeName:D.ZodPipeline})}}class zy extends Le{_parse(e){const n=this._def.innerType._parse(e),r=s=>(_o(s)&&(s.value=Object.freeze(s.value)),s);return Lh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zy.create=(t,e)=>new zy({innerType:t,typeName:D.ZodReadonly,...Re(e)});ft.lazycreate;var D;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(D||(D={}));const Hm=ei.create,Ck=My.create;wi.create;Yr.create;const Wm=ft.create;ft.strictCreate;Uh.create;zh.create;ua.create;bo.create;Bh.create;di.create;ko.create;function iG(t,e){var r,s,i;const n={type:"array"};return(r=t.type)!=null&&r._def&&((i=(s=t.type)==null?void 0:s._def)==null?void 0:i.typeName)!==D.ZodAny&&(n.items=qe(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Ke(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Ke(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Ke(n,"minItems",t.exactLength.value,t.exactLength.message,e),Ke(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function aG(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ke(n,"minimum",r.value,r.message,e):Ke(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ke(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ke(n,"maximum",r.value,r.message,e):Ke(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ke(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ke(n,"multipleOf",r.value,r.message,e);break}return n}function oG(){return{type:"boolean"}}function mR(t,e){return qe(t.type._def,e)}const lG=(t,e)=>qe(t.innerType._def,e);function fR(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(s=>fR(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return cG(t,e)}}const cG=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Ke(n,"minimum",r.value,r.message,e);break;case"max":Ke(n,"maximum",r.value,r.message,e);break}return n};function uG(t,e){return{...qe(t.innerType._def,e),default:t.defaultValue()}}function dG(t,e){return e.effectStrategy==="input"?qe(t.schema._def,e):Un(e)}function hG(t){return{type:"string",enum:Array.from(t.values)}}const mG=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function fG(t,e){const n=[qe(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),qe(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(mG(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else r=void 0;s.push(a)}}),s.length?{allOf:s,...r}:void 0}function pG(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let Op;const lr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Op===void 0&&(Op=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Op),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function pR(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Ke(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Ke(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":cr(n,"email",r.message,e);break;case"format:idn-email":cr(n,"idn-email",r.message,e);break;case"pattern:zod":nn(n,lr.email,r.message,e);break}break;case"url":cr(n,"uri",r.message,e);break;case"uuid":cr(n,"uuid",r.message,e);break;case"regex":nn(n,r.regex,r.message,e);break;case"cuid":nn(n,lr.cuid,r.message,e);break;case"cuid2":nn(n,lr.cuid2,r.message,e);break;case"startsWith":nn(n,RegExp(`^${$p(r.value,e)}`),r.message,e);break;case"endsWith":nn(n,RegExp(`${$p(r.value,e)}$`),r.message,e);break;case"datetime":cr(n,"date-time",r.message,e);break;case"date":cr(n,"date",r.message,e);break;case"time":cr(n,"time",r.message,e);break;case"duration":cr(n,"duration",r.message,e);break;case"length":Ke(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Ke(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":nn(n,RegExp($p(r.value,e)),r.message,e);break;case"ip":r.version!=="v6"&&cr(n,"ipv4",r.message,e),r.version!=="v4"&&cr(n,"ipv6",r.message,e);break;case"base64url":nn(n,lr.base64url,r.message,e);break;case"jwt":nn(n,lr.jwt,r.message,e);break;case"cidr":r.version!=="v6"&&nn(n,lr.ipv4Cidr,r.message,e),r.version!=="v4"&&nn(n,lr.ipv6Cidr,r.message,e);break;case"emoji":nn(n,lr.emoji(),r.message,e);break;case"ulid":nn(n,lr.ulid,r.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":cr(n,"binary",r.message,e);break;case"contentEncoding:base64":Ke(n,"contentEncoding","base64",r.message,e);break;case"pattern:zod":nn(n,lr.base64,r.message,e);break}break;case"nanoid":nn(n,lr.nanoid,r.message,e);break}return n}function $p(t,e){return e.patternStrategy==="escape"?yG(t):t}const gG=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function yG(t){let e="";for(let n=0;n<t.length;n++)gG.has(t[n])||(e+="\\"),e+=t[n];return e}function cr(t,e,n,r){var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ke(t,"format",e,n,r)}function nn(t,e,n,r){var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Nk(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ke(t,"pattern",Nk(e,r),n,r)}function Nk(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,a=!1,o=!1;for(let c=0;c<r.length;c++){if(i){s+=r[c],i=!1;continue}if(n.i){if(a){if(r[c].match(/[a-z]/)){o?(s+=r[c],s+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(s+=r[c],o=!0):s+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){s+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){s+=a?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}s+=r[c],r[c]==="\\"?i=!0:a&&r[c]==="]"?a=!1:!a&&r[c]==="["&&(a=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function gR(t,e){var r,s,i,a,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===D.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,d)=>({...c,[d]:qe(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??Un(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:qe(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===D.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const{type:c,...d}=pR(t.keyType._def,e);return{...n,propertyNames:d}}else{if(((a=t.keyType)==null?void 0:a._def.typeName)===D.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===D.ZodBranded&&t.keyType._def.type._def.typeName===D.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...d}=mR(t.keyType._def,e);return{...n,propertyNames:d}}}return n}function vG(t,e){if(e.mapStrategy==="record")return gR(t,e);const n=qe(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Un(e),r=qe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Un(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function wG(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function xG(t){return t.target==="openAi"?void 0:{not:Un({...t,currentPath:[...t.currentPath,"not"]})}}function _G(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Gh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function bG(t,e){if(e.target==="openApi3")return Ik(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Gh&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=Gh[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":return i._def.value===null?[...s,"null"]:s;case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return Ik(t,e)}const Ik=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>qe(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function SG(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Gh[t.innerType._def.typeName],nullable:!0}:{type:[Gh[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=qe(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=qe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function kG(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",cR(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ke(n,"minimum",r.value,r.message,e):Ke(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ke(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ke(n,"maximum",r.value,r.message,e):Ke(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ke(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ke(n,"multipleOf",r.value,r.message,e);break}return n}function TG(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},s=[],i=t.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let c=EG(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=qe(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,c||s.push(o))}s.length&&(r.required=s);const a=AG(t,e);return a!==void 0&&(r.additionalProperties=a),r}function AG(t,e){if(t.catchall._def.typeName!=="ZodNever")return qe(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function EG(t){try{return t.isOptional()}catch{return!0}}const CG=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return qe(t.innerType._def,e);const n=qe(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Un(e)},n]}:Un(e)},NG=(t,e)=>{if(e.pipeStrategy==="input")return qe(t.in._def,e);if(e.pipeStrategy==="output")return qe(t.out._def,e);const n=qe(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=qe(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function IG(t,e){return qe(t.type._def,e)}function RG(t,e){const r={type:"array",uniqueItems:!0,items:qe(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Ke(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Ke(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function jG(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>qe(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:qe(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>qe(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function PG(t){return{not:Un(t)}}function OG(t){return Un(t)}const $G=(t,e)=>qe(t.innerType._def,e),DG=(t,e,n)=>{switch(e){case D.ZodString:return pR(t,n);case D.ZodNumber:return kG(t,n);case D.ZodObject:return TG(t,n);case D.ZodBigInt:return aG(t,n);case D.ZodBoolean:return oG();case D.ZodDate:return fR(t,n);case D.ZodUndefined:return PG(n);case D.ZodNull:return _G(n);case D.ZodArray:return iG(t,n);case D.ZodUnion:case D.ZodDiscriminatedUnion:return bG(t,n);case D.ZodIntersection:return fG(t,n);case D.ZodTuple:return jG(t,n);case D.ZodRecord:return gR(t,n);case D.ZodLiteral:return pG(t,n);case D.ZodEnum:return hG(t);case D.ZodNativeEnum:return wG(t);case D.ZodNullable:return SG(t,n);case D.ZodOptional:return CG(t,n);case D.ZodMap:return vG(t,n);case D.ZodSet:return RG(t,n);case D.ZodLazy:return()=>t.getter()._def;case D.ZodPromise:return IG(t,n);case D.ZodNaN:case D.ZodNever:return xG(n);case D.ZodEffects:return dG(t,n);case D.ZodAny:return Un(n);case D.ZodUnknown:return OG(n);case D.ZodDefault:return uG(t,n);case D.ZodBranded:return mR(t,n);case D.ZodReadonly:return $G(t,n);case D.ZodCatch:return lG(t,n);case D.ZodPipeline:return NG(t,n);case D.ZodFunction:case D.ZodVoid:case D.ZodSymbol:return;default:return(r=>{})()}};function qe(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(l!==NB)return l}if(r&&!n){const l=MG(r,e);if(l!==void 0)return l}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=DG(t,t.typeName,e),a=typeof i=="function"?qe(i(),e):i;if(a&&LG(t,e,a),e.postProcess){const l=e.postProcess(a,t,e);return s.jsonSchema=a,l}return s.jsonSchema=a,a}const MG=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:lR(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Un(e)):e.$refStrategy==="seen"?Un(e):void 0}},LG=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),FG=(t,e)=>{const n=jB(e);let r;const s=e==null?void 0:e.name,i=qe(t._def,n,!1)??Un(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function na(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(!na(t[s],e[s]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(const a of r)if(!na(t[a],e[a]))return!1;return!0}return t===e}function fr(t){return encodeURI(UG(t))}function UG(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}const zG={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},BG={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},GG={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let VG=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function ti(t,e=Object.create(null),n=VG,r=""){if(t&&typeof t=="object"&&!Array.isArray(t)){const i=t.$id||t.id;if(i){const a=new URL(i,n.href);a.hash.length>1?e[a.href]=t:(a.hash="",r===""?n=a:ti(t,e,n))}}else if(t!==!0&&t!==!1)return e;const s=n.href+(r?"#"+r:"");if(e[s]!==void 0)throw new Error(`Duplicate schema URI "${s}".`);if(e[s]=t,t===!0||t===!1)return e;if(t.__absolute_uri__===void 0&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:s}),t.$ref&&t.__absolute_ref__===void 0){const i=new URL(t.$ref,n.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:i.href})}if(t.$recursiveRef&&t.__absolute_recursive_ref__===void 0){const i=new URL(t.$recursiveRef,n.href);i.hash=i.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:i.href})}if(t.$anchor){const i=new URL("#"+t.$anchor,n.href);e[i.href]=t}for(let i in t){if(GG[i])continue;const a=`${r}/${fr(i)}`,o=t[i];if(Array.isArray(o)){if(zG[i]){const l=o.length;for(let c=0;c<l;c++)ti(o[c],e,n,`${a}/${c}`)}}else if(BG[i])for(let l in o)ti(o[l],e,n,`${a}/${fr(l)}`);else ti(o,e,n,a)}return e}const HG=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,WG=[0,31,28,31,30,31,30,31,31,30,31,30,31],qG=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,KG=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ZG=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,YG=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,JG=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,XG=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,QG=/^(?:\/(?:[^~/]|~0|~1)*)*$/,eV=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,tV=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,nV=t=>{if(t[0]==='"')return!1;const[e,n,...r]=t.split("@");return!e||!n||r.length!==0||e.length>64||n.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:n.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s))},rV=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,sV=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,iV=t=>t.length>1&&t.length<80&&(/^P\d+([.,]\d+)?W$/.test(t)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(t)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(t));function Or(t){return t.test.bind(t)}const Rk={date:yR,time:vR.bind(void 0,!1),"date-time":lV,duration:iV,uri:dV,"uri-reference":Or(ZG),"uri-template":Or(YG),url:Or(JG),email:nV,hostname:Or(KG),ipv4:Or(rV),ipv6:Or(sV),regex:mV,uuid:Or(XG),"json-pointer":Or(QG),"json-pointer-uri-fragment":Or(eV),"relative-json-pointer":Or(tV)};function aV(t){return t%4===0&&(t%100!==0||t%400===0)}function yR(t){const e=t.match(HG);if(!e)return!1;const n=+e[1],r=+e[2],s=+e[3];return r>=1&&r<=12&&s>=1&&s<=(r==2&&aV(n)?29:WG[r])}function vR(t,e){const n=e.match(qG);if(!n)return!1;const r=+n[1],s=+n[2],i=+n[3],a=!!n[5];return(r<=23&&s<=59&&i<=59||r==23&&s==59&&i==60)&&(!t||a)}const oV=/t|\s/i;function lV(t){const e=t.split(oV);return e.length==2&&yR(e[0])&&vR(!0,e[1])}const cV=/\/|:/,uV=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function dV(t){return cV.test(t)&&uV.test(t)}const hV=/[^\\]\\Z/;function mV(t){if(hV.test(t))return!1;try{return new RegExp(t,"u"),!0}catch{return!1}}function fV(t){let e=0,n=t.length,r=0,s;for(;r<n;)e++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=t.charCodeAt(r),(s&64512)==56320&&r++);return e}function st(t,e,n="2019-09",r=ti(e),s=!0,i=null,a="#",o="#",l=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:a,keyword:"false",keywordLocation:a,error:"False boolean schema."}]};const c=typeof t;let d;switch(c){case"boolean":case"number":case"string":d=c;break;case"object":t===null?d="null":Array.isArray(t)?d="array":d="object";break;default:throw new Error(`Instances of "${c}" type are not supported.`)}const{$ref:h,$recursiveRef:m,$recursiveAnchor:f,type:y,const:w,enum:x,required:v,not:p,anyOf:g,allOf:_,oneOf:k,if:E,then:C,else:b,format:O,properties:$,patternProperties:L,additionalProperties:ge,unevaluatedProperties:ot,minProperties:K,maxProperties:B,propertyNames:G,dependentRequired:q,dependentSchemas:j,dependencies:M,prefixItems:U,items:ie,additionalItems:ee,unevaluatedItems:Ae,contains:Ge,minContains:Ie,maxContains:A,minItems:S,maxItems:F,uniqueItems:N,minimum:Ne,maximum:$e,exclusiveMinimum:Ve,exclusiveMaximum:Qe,multipleOf:wt,minLength:At,maxLength:Je,pattern:Ft,__absolute_ref__:$s,__absolute_recursive_ref__:rs}=e,Y=[];if(f===!0&&i===null&&(i=e),m==="#"){const ye=i===null?r[rs]:i,ce=`${o}/$recursiveRef`,ve=st(t,i===null?e:i,n,r,s,ye,a,ce,l);ve.valid||Y.push({instanceLocation:a,keyword:"$recursiveRef",keywordLocation:ce,error:"A subschema had errors."},...ve.errors)}if(h!==void 0){const ce=r[$s||h];if(ce===void 0){let Z=`Unresolved $ref "${h}".`;throw $s&&$s!==h&&(Z+=`  Absolute URI "${$s}".`),Z+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(Z)}const ve=`${o}/$ref`,te=st(t,ce,n,r,s,i,a,ve,l);if(te.valid||Y.push({instanceLocation:a,keyword:"$ref",keywordLocation:ve,error:"A subschema had errors."},...te.errors),n==="4"||n==="7")return{valid:Y.length===0,errors:Y}}if(Array.isArray(y)){let ye=y.length,ce=!1;for(let ve=0;ve<ye;ve++)if(d===y[ve]||y[ve]==="integer"&&d==="number"&&t%1===0&&t===t){ce=!0;break}ce||Y.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y.join('", "')}".`})}else y==="integer"?(d!=="number"||t%1||t!==t)&&Y.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y}".`}):y!==void 0&&d!==y&&Y.push({instanceLocation:a,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${d}" is invalid. Expected "${y}".`});if(w!==void 0&&(d==="object"||d==="array"?na(t,w)||Y.push({instanceLocation:a,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(w)}.`}):t!==w&&Y.push({instanceLocation:a,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(w)}.`})),x!==void 0&&(d==="object"||d==="array"?x.some(ye=>na(t,ye))||Y.push({instanceLocation:a,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(x)}.`}):x.some(ye=>t===ye)||Y.push({instanceLocation:a,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(x)}.`})),p!==void 0){const ye=`${o}/not`;st(t,p,n,r,s,i,a,ye).valid&&Y.push({instanceLocation:a,keyword:"not",keywordLocation:ye,error:'Instance matched "not" schema.'})}let ss=[];if(g!==void 0){const ye=`${o}/anyOf`,ce=Y.length;let ve=!1;for(let te=0;te<g.length;te++){const Z=g[te],we=Object.create(l),fe=st(t,Z,n,r,s,f===!0?i:null,a,`${ye}/${te}`,we);Y.push(...fe.errors),ve=ve||fe.valid,fe.valid&&ss.push(we)}ve?Y.length=ce:Y.splice(ce,0,{instanceLocation:a,keyword:"anyOf",keywordLocation:ye,error:"Instance does not match any subschemas."})}if(_!==void 0){const ye=`${o}/allOf`,ce=Y.length;let ve=!0;for(let te=0;te<_.length;te++){const Z=_[te],we=Object.create(l),fe=st(t,Z,n,r,s,f===!0?i:null,a,`${ye}/${te}`,we);Y.push(...fe.errors),ve=ve&&fe.valid,fe.valid&&ss.push(we)}ve?Y.length=ce:Y.splice(ce,0,{instanceLocation:a,keyword:"allOf",keywordLocation:ye,error:"Instance does not match every subschema."})}if(k!==void 0){const ye=`${o}/oneOf`,ce=Y.length,ve=k.filter((te,Z)=>{const we=Object.create(l),fe=st(t,te,n,r,s,f===!0?i:null,a,`${ye}/${Z}`,we);return Y.push(...fe.errors),fe.valid&&ss.push(we),fe.valid}).length;ve===1?Y.length=ce:Y.splice(ce,0,{instanceLocation:a,keyword:"oneOf",keywordLocation:ye,error:`Instance does not match exactly one subschema (${ve} matches).`})}if((d==="object"||d==="array")&&Object.assign(l,...ss),E!==void 0){const ye=`${o}/if`;if(st(t,E,n,r,s,i,a,ye,l).valid){if(C!==void 0){const ve=st(t,C,n,r,s,i,a,`${o}/then`,l);ve.valid||Y.push({instanceLocation:a,keyword:"if",keywordLocation:ye,error:'Instance does not match "then" schema.'},...ve.errors)}}else if(b!==void 0){const ve=st(t,b,n,r,s,i,a,`${o}/else`,l);ve.valid||Y.push({instanceLocation:a,keyword:"if",keywordLocation:ye,error:'Instance does not match "else" schema.'},...ve.errors)}}if(d==="object"){if(v!==void 0)for(const te of v)te in t||Y.push({instanceLocation:a,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${te}".`});const ye=Object.keys(t);if(K!==void 0&&ye.length<K&&Y.push({instanceLocation:a,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${K} properties.`}),B!==void 0&&ye.length>B&&Y.push({instanceLocation:a,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${B} properties.`}),G!==void 0){const te=`${o}/propertyNames`;for(const Z in t){const we=`${a}/${fr(Z)}`,fe=st(Z,G,n,r,s,i,we,te);fe.valid||Y.push({instanceLocation:a,keyword:"propertyNames",keywordLocation:te,error:`Property name "${Z}" does not match schema.`},...fe.errors)}}if(q!==void 0){const te=`${o}/dependantRequired`;for(const Z in q)if(Z in t){const we=q[Z];for(const fe of we)fe in t||Y.push({instanceLocation:a,keyword:"dependentRequired",keywordLocation:te,error:`Instance has "${Z}" but does not have "${fe}".`})}}if(j!==void 0)for(const te in j){const Z=`${o}/dependentSchemas`;if(te in t){const we=st(t,j[te],n,r,s,i,a,`${Z}/${fr(te)}`,l);we.valid||Y.push({instanceLocation:a,keyword:"dependentSchemas",keywordLocation:Z,error:`Instance has "${te}" but does not match dependant schema.`},...we.errors)}}if(M!==void 0){const te=`${o}/dependencies`;for(const Z in M)if(Z in t){const we=M[Z];if(Array.isArray(we))for(const fe of we)fe in t||Y.push({instanceLocation:a,keyword:"dependencies",keywordLocation:te,error:`Instance has "${Z}" but does not have "${fe}".`});else{const fe=st(t,we,n,r,s,i,a,`${te}/${fr(Z)}`);fe.valid||Y.push({instanceLocation:a,keyword:"dependencies",keywordLocation:te,error:`Instance has "${Z}" but does not match dependant schema.`},...fe.errors)}}}const ce=Object.create(null);let ve=!1;if($!==void 0){const te=`${o}/properties`;for(const Z in $){if(!(Z in t))continue;const we=`${a}/${fr(Z)}`,fe=st(t[Z],$[Z],n,r,s,i,we,`${te}/${fr(Z)}`);if(fe.valid)l[Z]=ce[Z]=!0;else if(ve=s,Y.push({instanceLocation:a,keyword:"properties",keywordLocation:te,error:`Property "${Z}" does not match schema.`},...fe.errors),ve)break}}if(!ve&&L!==void 0){const te=`${o}/patternProperties`;for(const Z in L){const we=new RegExp(Z,"u"),fe=L[Z];for(const Xe in t){if(!we.test(Xe))continue;const Ti=`${a}/${fr(Xe)}`,tu=st(t[Xe],fe,n,r,s,i,Ti,`${te}/${fr(Z)}`);tu.valid?l[Xe]=ce[Xe]=!0:(ve=s,Y.push({instanceLocation:a,keyword:"patternProperties",keywordLocation:te,error:`Property "${Xe}" matches pattern "${Z}" but does not match associated schema.`},...tu.errors))}}}if(!ve&&ge!==void 0){const te=`${o}/additionalProperties`;for(const Z in t){if(ce[Z])continue;const we=`${a}/${fr(Z)}`,fe=st(t[Z],ge,n,r,s,i,we,te);fe.valid?l[Z]=!0:(ve=s,Y.push({instanceLocation:a,keyword:"additionalProperties",keywordLocation:te,error:`Property "${Z}" does not match additional properties schema.`},...fe.errors))}}else if(!ve&&ot!==void 0){const te=`${o}/unevaluatedProperties`;for(const Z in t)if(!l[Z]){const we=`${a}/${fr(Z)}`,fe=st(t[Z],ot,n,r,s,i,we,te);fe.valid?l[Z]=!0:Y.push({instanceLocation:a,keyword:"unevaluatedProperties",keywordLocation:te,error:`Property "${Z}" does not match unevaluated properties schema.`},...fe.errors)}}}else if(d==="array"){F!==void 0&&t.length>F&&Y.push({instanceLocation:a,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${t.length} > ${F}).`}),S!==void 0&&t.length<S&&Y.push({instanceLocation:a,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${t.length} < ${S}).`});const ye=t.length;let ce=0,ve=!1;if(U!==void 0){const te=`${o}/prefixItems`,Z=Math.min(U.length,ye);for(;ce<Z;ce++){const we=st(t[ce],U[ce],n,r,s,i,`${a}/${ce}`,`${te}/${ce}`);if(l[ce]=!0,!we.valid&&(ve=s,Y.push({instanceLocation:a,keyword:"prefixItems",keywordLocation:te,error:"Items did not match schema."},...we.errors),ve))break}}if(ie!==void 0){const te=`${o}/items`;if(Array.isArray(ie)){const Z=Math.min(ie.length,ye);for(;ce<Z;ce++){const we=st(t[ce],ie[ce],n,r,s,i,`${a}/${ce}`,`${te}/${ce}`);if(l[ce]=!0,!we.valid&&(ve=s,Y.push({instanceLocation:a,keyword:"items",keywordLocation:te,error:"Items did not match schema."},...we.errors),ve))break}}else for(;ce<ye;ce++){const Z=st(t[ce],ie,n,r,s,i,`${a}/${ce}`,te);if(l[ce]=!0,!Z.valid&&(ve=s,Y.push({instanceLocation:a,keyword:"items",keywordLocation:te,error:"Items did not match schema."},...Z.errors),ve))break}if(!ve&&ee!==void 0){const Z=`${o}/additionalItems`;for(;ce<ye;ce++){const we=st(t[ce],ee,n,r,s,i,`${a}/${ce}`,Z);l[ce]=!0,we.valid||(ve=s,Y.push({instanceLocation:a,keyword:"additionalItems",keywordLocation:Z,error:"Items did not match additional items schema."},...we.errors))}}}if(Ge!==void 0)if(ye===0&&Ie===void 0)Y.push({instanceLocation:a,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(Ie!==void 0&&ye<Ie)Y.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${ye}) than minContains (${Ie}).`});else{const te=`${o}/contains`,Z=Y.length;let we=0;for(let fe=0;fe<ye;fe++){const Xe=st(t[fe],Ge,n,r,s,i,`${a}/${fe}`,te);Xe.valid?(l[fe]=!0,we++):Y.push(...Xe.errors)}we>=(Ie||0)&&(Y.length=Z),Ie===void 0&&A===void 0&&we===0?Y.splice(Z,0,{instanceLocation:a,keyword:"contains",keywordLocation:te,error:"Array does not contain item matching schema."}):Ie!==void 0&&we<Ie?Y.push({instanceLocation:a,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${Ie} items matching schema. Only ${we} items were found.`}):A!==void 0&&we>A&&Y.push({instanceLocation:a,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${A} items matching schema. ${we} items were found.`})}if(!ve&&Ae!==void 0){const te=`${o}/unevaluatedItems`;for(ce;ce<ye;ce++){if(l[ce])continue;const Z=st(t[ce],Ae,n,r,s,i,`${a}/${ce}`,te);l[ce]=!0,Z.valid||Y.push({instanceLocation:a,keyword:"unevaluatedItems",keywordLocation:te,error:"Items did not match unevaluated items schema."},...Z.errors)}}if(N)for(let te=0;te<ye;te++){const Z=t[te],we=typeof Z=="object"&&Z!==null;for(let fe=0;fe<ye;fe++){if(te===fe)continue;const Xe=t[fe];(Z===Xe||we&&(typeof Xe=="object"&&Xe!==null)&&na(Z,Xe))&&(Y.push({instanceLocation:a,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${te} and ${fe}.`}),te=Number.MAX_SAFE_INTEGER,fe=Number.MAX_SAFE_INTEGER)}}}else if(d==="number"){if(n==="4"?(Ne!==void 0&&(Ve===!0&&t<=Ne||t<Ne)&&Y.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${Ve?"or equal to ":""} ${Ne}.`}),$e!==void 0&&(Qe===!0&&t>=$e||t>$e)&&Y.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${Qe?"or equal to ":""} ${$e}.`})):(Ne!==void 0&&t<Ne&&Y.push({instanceLocation:a,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${Ne}.`}),$e!==void 0&&t>$e&&Y.push({instanceLocation:a,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${$e}.`}),Ve!==void 0&&t<=Ve&&Y.push({instanceLocation:a,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${t} is less than ${Ve}.`}),Qe!==void 0&&t>=Qe&&Y.push({instanceLocation:a,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${t} is greater than or equal to ${Qe}.`})),wt!==void 0){const ye=t%wt;Math.abs(0-ye)>=11920929e-14&&Math.abs(wt-ye)>=11920929e-14&&Y.push({instanceLocation:a,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${t} is not a multiple of ${wt}.`})}}else if(d==="string"){const ye=At===void 0&&Je===void 0?0:fV(t);At!==void 0&&ye<At&&Y.push({instanceLocation:a,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${ye} < ${At}).`}),Je!==void 0&&ye>Je&&Y.push({instanceLocation:a,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${ye} > ${Je}).`}),Ft!==void 0&&!new RegExp(Ft,"u").test(t)&&Y.push({instanceLocation:a,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),O!==void 0&&Rk[O]&&!Rk[O](t)&&Y.push({instanceLocation:a,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${O}".`})}return{valid:Y.length===0,errors:Y}}class pV{constructor(e,n="2019-09",r=!0){T(this,"schema");T(this,"draft");T(this,"shortCircuit");T(this,"lookup");this.schema=e,this.draft=n,this.shortCircuit=r,this.lookup=ti(e)}validate(e){return st(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,n){n&&(e={...e,$id:n}),ti(e,this.lookup)}}var gV={};De(gV,{Validator:()=>pV,deepCompareStrict:()=>na,toJsonSchema:()=>Br,validatesOnlyStrings:()=>ql});function Br(t){if(gt(t)){const e=aR(t,!0);if(Zr(e)){const n=Mh(e,!0);return Dh(n)}else return Dh(t)}return Tt(t)?FG(t):t}function ql(t){if(!t||typeof t!="object"||Object.keys(t).length===0||Array.isArray(t))return!1;if("type"in t)return typeof t.type=="string"?t.type==="string":Array.isArray(t.type)?t.type.every(e=>e==="string"):!1;if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>typeof e=="string");if("const"in t)return typeof t.const=="string";if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(e=>ql(e));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){const e="anyOf"in t?t.anyOf:t.oneOf;return e.length>0&&e.every(n=>ql(n))}if("not"in t)return!1;if("$ref"in t&&typeof t.$ref=="string"){const e=t.$ref,n=ti(t);return n[e]?ql(n[e]):!1}return!1}var yV={};De(yV,{Graph:()=>Cw});function vV(t,e){if(t!==void 0&&!Vl(t))return t;if(Sw(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function wV(t){return Sw(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Br(t.data.schema),title:t.data.name}}}var Cw=class wR{constructor(e){T(this,"nodes",{});T(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Vl(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...wV(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const s=n??wn(),i={id:s,data:e,name:vV(n,e),metadata:r};return this.nodes[s]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const i={source:e.id,target:n.id,data:r,conditional:s};return this.edges.push(i),i}firstNode(){return jk(this)}lastNode(){return Pk(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(c=>c.id).every(Vl)&&(r="");const i=c=>r?`${r}:${c}`:c;Object.entries(e.nodes).forEach(([c,d])=>{this.nodes[i(c)]={...d,id:i(c)}});const a=e.edges.map(c=>({...c,source:i(c.source),target:i(c.target)}));this.edges=[...this.edges,...a];const o=e.firstNode(),l=e.lastNode();return[o?{id:i(o.id),data:o.data}:void 0,l?{id:i(l.id),data:l.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&jk(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&Pk(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),n=new Map;Object.values(e).forEach(s=>{n.set(s,(n.get(s)||0)+1)});const r=s=>{const i=e[s];return Vl(s)&&n.get(i)===1?i:s};return new wR({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,i])=>[r(s),{...i,id:r(s)}])),edges:this.edges.map(s=>({...s,source:r(s.source),target:r(s.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:i}=e??{},a=this.reid(),o=a.firstNode(),l=a.lastNode();return EB(a.nodes,a.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:s,wrapLabelNWords:i})}async drawMermaidPng(e){const n=this.drawMermaid(e);return CB(n,{backgroundColor:e==null?void 0:e.backgroundColor})}};function jk(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),r=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function Pk(t,e=[]){const n=new Set(t.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),r=[];for(const s of Object.values(t.nodes))!e.includes(s.id)&&!n.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function xV(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const s of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Ar.fromReadableStream(n)}function Ok(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const _V=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function By(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*$k(t,e){for(;;){const{value:n,done:r}=Tr.runWithConfig(Cs(t),e.next.bind(e),!0);if(r)break;yield n}}async function*Gy(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:s}=await Tr.runWithConfig(Cs(t),n.next.bind(e),!0);if(s)break;yield r}}function jt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var vt=class extends yo{constructor(){super(...arguments);T(this,"lc_runnable",!0);T(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new Nw({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new To({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new TR({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Ue);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:n},(s,i)=>Ue(i===0?e:r))}return Array.from({length:n},()=>Ue(e))}async batch(e,n,r){var l;const s=this._getOptionsList(n??{},e.length),i=((l=s[0])==null?void 0:l.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new Zc({maxConcurrency:i,onFailedAttempt:c=>{throw c}}),o=e.map((c,d)=>a.call(async()=>{try{return await this.invoke(c,s[d])}catch(h){if(r!=null&&r.returnExceptions)return h;throw h}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Ue(n),s=new ga({generator:this._streamIterator(e,r),config:r});return await s.setup,Ar.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Ue(e):n=Ue({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const s=Ue(r),i=await Mn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),jt(n,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let o;try{const l=e.call(this,n,s,a);o=await Ns(l,r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(jt(o,"output"))),o}async _batchWithConfig(e,n,r,s){var c;const i=this._getOptionsList(r??{},n.length),a=await Promise.all(i.map(Mn)),o=await Promise.all(a.map(async(d,h)=>{const m=await(d==null?void 0:d.handleChainStart(this.toJSON(),jt(n[h],"input"),i[h].runId,i[h].runType,void 0,void 0,i[h].runName??this.getName()));return delete i[h].runId,m}));let l;try{const d=e.call(this,n,i,o,s);l=await Ns(d,(c=i==null?void 0:i[0])==null?void 0:c.signal)}catch(d){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(d))),d}return await Promise.all(o.map(d=>d==null?void 0:d.handleChainEnd(jt(l,"output")))),l}_concatOutputChunks(e,n){return yi(e,n)}async*_transformStreamWithConfig(e,n,r){let s,i=!0,a,o=!0;const l=Ue(r),c=await Mn(l),d=this;async function*h(){for await(const f of e){if(i)if(s===void 0)s=f;else try{s=d._concatOutputChunks(s,f)}catch{s=void 0,i=!1}yield f}}let m;try{const f=await UI(n.bind(this),h(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),r==null?void 0:r.signal,l);delete l.runId,m=f.setup;const y=m==null?void 0:m.handlers.find(I9);let w=f.output;y!==void 0&&m!==void 0&&(w=y.tapOutputIterable(m.runId,w));const x=m==null?void 0:m.handlers.find(WI);x!==void 0&&m!==void 0&&(w=x.tapOutputIterable(m.runId,w));for await(const v of w)if(yield v,o)if(a===void 0)a=v;else try{a=this._concatOutputChunks(a,v)}catch{a=void 0,o=!1}}catch(f){throw await(m==null?void 0:m.handleChainError(f,void 0,void 0,void 0,{inputs:jt(s,"input")})),f}await(m==null?void 0:m.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:jt(s,"input")}))}getGraph(e){const n=new Cw,r=n.addNode({name:`${this.getName()}Input`,schema:Ck()}),s=n.addNode(this),i=n.addNode({name:`${this.getName()}Output`,schema:Ck()});return n.addEdge(r,s),n.addEdge(s,i),n}pipe(e){return new Fo({first:this,last:_r(e)})}pick(e){return this.pipe(new AR(e))}assign(e){return this.pipe(new Iw(new Uo({steps:e})))}async*transform(e,n){let r;for await(const s of e)r===void 0?r=s:r=this._concatOutputChunks(r,s);yield*this._streamIterator(r,Ue(n))}async*streamLog(e,n,r){const s=new jy({...r,autoClose:!1,_schemaFormat:"original"}),i=Ue(n);yield*this._streamLog(e,s,i)}async*_streamLog(e,n,r){const{callbacks:s}=r;if(s===void 0)r.callbacks=[n];else if(Array.isArray(s))r.callbacks=s.concat([n]);else{const l=s.copy();l.addHandler(n,!0),r.callbacks=l}const i=this.stream(e,r);async function a(){try{const l=await i;for await(const c of l){const d=new ds({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await n.writer.write(d)}}finally{await n.writer.close()}}const o=a();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let s;if(n.version==="v1")s=this._streamEventsV1(e,n,r);else if(n.version==="v2")s=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?xV(s):Ar.fromAsyncGenerator(s)}async*_streamEventsV2(e,n,r){var y;const s=new R9({...r,autoClose:!1}),i=Ue(n),a=i.runId??wn();i.runId=a;const o=i.callbacks;if(o===void 0)i.callbacks=[s];else if(Array.isArray(o))i.callbacks=o.concat(s);else{const w=o.copy();w.addHandler(s,!0),i.callbacks=w}const l=new AbortController,c=this;async function d(){let w,x=null;try{n!=null&&n.signal?"any"in AbortSignal?w=AbortSignal.any([l.signal,n.signal]):(w=n.signal,x=()=>{l.abort()},n.signal.addEventListener("abort",x,{once:!0})):w=l.signal;const v=await c.stream(e,{...i,signal:w}),p=s.tapOutputIterable(a,v);for await(const g of p)if(l.signal.aborted)break}finally{await s.finish(),w&&x&&w.removeEventListener("abort",x)}}const h=d();let m=!1,f;try{for await(const w of s){if(!m){w.data.input=e,m=!0,f=w.run_id,yield w;continue}w.run_id===f&&w.event.endsWith("_end")&&(y=w.data)!=null&&y.input&&delete w.data.input,yield w}}finally{l.abort(),await h}}async*_streamEventsV1(e,n,r){let s,i=!1;const a=Ue(n),o=a.tags??[],l=a.metadata??{},c=a.runName??this.getName(),d=new jy({...r,autoClose:!1,_schemaFormat:"streaming_events"}),h=new G9({...r}),m=this._streamLog(e,d,a);for await(const y of m){if(s?s=s.concat(y):s=bw.fromRunLogPatch(y),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;const p={...s.state},g={run_id:p.id,event:`on_${p.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};h.includeEvent(g,p.type)&&(yield g)}const w=y.ops.filter(p=>p.path.startsWith("/logs/")).map(p=>p.path.split("/")[2]),x=[...new Set(w)];for(const p of x){let g,_={};const k=s.state.logs[p];if(k.end_time===void 0?k.streamed_output.length>0?g="stream":g="start":g="end",g==="start")k.inputs!==void 0&&(_.input=k.inputs);else if(g==="end")k.inputs!==void 0&&(_.input=k.inputs),_.output=k.final_output;else if(g==="stream"){const E=k.streamed_output.length;if(E!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${E} instead. Encountered in: "${k.name}"`);_={chunk:k.streamed_output[0]},k.streamed_output=[]}yield{event:`on_${k.type}_${g}`,name:k.name,run_id:k.id,tags:k.tags,metadata:k.metadata,data:_}}const{state:v}=s;if(v.streamed_output.length>0){const p=v.streamed_output.length;if(p!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${p} instead. Encountered in: "${v.name}"`);const g={chunk:v.streamed_output[0]};v.streamed_output=[];const _={event:`on_${v.type}_stream`,run_id:v.id,tags:o,metadata:l,name:c,data:g};h.includeEvent(_,v.type)&&(yield _)}}const f=s==null?void 0:s.state;if(f!==void 0){const y={event:`on_${f.type}_end`,name:c,run_id:f.id,tags:o,metadata:l,data:{output:f.final_output}};h.includeEvent(y,f.type)&&(yield y)}}static isRunnable(e){return Sw(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new To({bound:this,config:{},configFactories:[s=>({callbacks:[new ZI({config:s,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return AV(this,e)}},To=class xR extends vt{constructor(n){super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"bound");T(this,"config");T(this,"kwargs");T(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const r=Ph(this.config,...n);return Ph(r,...this.configFactories?await Promise.all(this.configFactories.map(async s=>await s(r))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new Nw({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,r){return this.bound.invoke(n,await this._mergeConfig(r,this.kwargs))}async batch(n,r,s){const i=Array.isArray(r)?await Promise.all(r.map(async a=>this._mergeConfig(Ue(a),this.kwargs))):await this._mergeConfig(Ue(r),this.kwargs);return this.bound.batch(n,i,s)}_concatOutputChunks(n,r){return this.bound._concatOutputChunks(n,r)}async*_streamIterator(n,r){yield*this.bound._streamIterator(n,await this._mergeConfig(Ue(r),this.kwargs))}async stream(n,r){return this.bound.stream(n,await this._mergeConfig(Ue(r),this.kwargs))}async*transform(n,r){yield*this.bound.transform(n,await this._mergeConfig(Ue(r),this.kwargs))}streamEvents(n,r,s){const i=this,a=async function*(){yield*i.bound.streamEvents(n,{...await i._mergeConfig(Ue(r),i.kwargs),version:r.version},s)};return Ar.fromAsyncGenerator(a())}static isRunnableBinding(n){return n.bound&&vt.isRunnable(n.bound)}withListeners({onStart:n,onEnd:r,onError:s}){return new xR({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new ZI({config:i,onStart:n,onEnd:r,onError:s})]})]})}},bV=class _R extends vt{constructor(n){super(n);T(this,"lc_serializable",!0);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"bound");this.bound=n.bound}static lc_name(){return"RunnableEach"}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async _invoke(n,r,s){return this.bound.batch(n,nt(r,{callbacks:s==null?void 0:s.getChild()}))}withListeners({onStart:n,onEnd:r,onError:s}){return new _R({bound:this.bound.withListeners({onStart:n,onEnd:r,onError:s})})}},Nw=class extends To{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"maxAttemptNumber",3);T(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,r){const s=e>1?`retry:attempt:${e}`:void 0;return nt(n,{callbacks:r==null?void 0:r.getChild(s)})}async _invoke(e,n,r){return Py(s=>super.invoke(e,this._patchConfigForRetry(s,n,r)),{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,s){const i={};try{await Py(async a=>{const o=e.map((m,f)=>f).filter(m=>i[m.toString()]===void 0||i[m.toString()]instanceof Error),l=o.map(m=>e[m]),c=o.map(m=>this._patchConfigForRetry(a,n==null?void 0:n[m],r==null?void 0:r[m])),d=await super.batch(l,c,{...s,returnExceptions:!0});let h;for(let m=0;m<d.length;m+=1){const f=d[m],y=o[m];f instanceof Error&&h===void 0&&(h=f,h.input=l[m]),i[y.toString()]=f}if(h)throw h;return d},{onFailedAttempt:({error:a})=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((s==null?void 0:s.returnExceptions)!==!0)throw a}return Object.keys(i).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>i[parseInt(a,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}},Fo=class Sl extends vt{constructor(n){super(n);T(this,"first");T(this,"middle",[]);T(this,"last");T(this,"omitSequenceTags",!1);T(this,"lc_serializable",!0);T(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,r){var c;const s=Ue(r),i=await Mn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),jt(n,"input"),s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;let o=n,l;try{const d=[this.first,...this.middle];for(let h=0;h<d.length;h+=1){const f=d[h].invoke(o,nt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));o=await Ns(f,r==null?void 0:r.signal)}if((c=r==null?void 0:r.signal)!=null&&c.aborted)throw Sc(r.signal);l=await this.last.invoke(o,nt(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(d){throw await(a==null?void 0:a.handleChainError(d)),d}return await(a==null?void 0:a.handleChainEnd(jt(l,"output"))),l}async batch(n,r,s){var c;const i=this._getOptionsList(r??{},n.length),a=await Promise.all(i.map(Mn)),o=await Promise.all(a.map(async(d,h)=>{const m=await(d==null?void 0:d.handleChainStart(this.toJSON(),jt(n[h],"input"),i[h].runId,void 0,void 0,void 0,i[h].runName));return delete i[h].runId,m}));let l=n;try{for(let d=0;d<this.steps.length;d+=1){const m=this.steps[d].batch(l,o.map((f,y)=>{const w=f==null?void 0:f.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`);return nt(i[y],{callbacks:w})}),s);l=await Ns(m,(c=i[0])==null?void 0:c.signal)}}catch(d){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(d))),d}return await Promise.all(o.map(d=>d==null?void 0:d.handleChainEnd(jt(l,"output")))),l}_concatOutputChunks(n,r){return this.last._concatOutputChunks(n,r)}async*_streamIterator(n,r){var m;const s=await Mn(r),{runId:i,...a}=r??{},o=await(s==null?void 0:s.handleChainStart(this.toJSON(),jt(n,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),l=[this.first,...this.middle,this.last];let c=!0,d;async function*h(){yield n}try{let f=l[0].transform(h(),nt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let y=1;y<l.length;y+=1)f=await l[y].transform(f,nt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)}));for await(const y of f)if((m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield y,c)if(d===void 0)d=y;else try{d=this._concatOutputChunks(d,y)}catch{d=void 0,c=!1}}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}await(o==null?void 0:o.handleChainEnd(jt(d,"output")))}getGraph(n){const r=new Cw;let s=null;return this.steps.forEach((i,a)=>{const o=i.getGraph(n);a!==0&&o.trimFirstNode(),a!==this.steps.length-1&&o.trimLastNode(),r.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${i} has no first node`);s&&r.addEdge(s,l),s=o.lastNode()}),r}pipe(n){return Sl.isRunnableSequence(n)?new Sl({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new Sl({first:this.first,middle:[...this.middle,this.last],last:_r(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&vt.isRunnable(n)}static from([n,...r],s){let i={};return typeof s=="string"?i.name=s:s!==void 0&&(i=s),new Sl({...i,first:_r(n),middle:r.slice(0,-1).map(_r),last:_r(r[r.length-1])})}},Uo=class bR extends vt{constructor(n){super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"steps");this.steps={};for(const[r,s]of Object.entries(n.steps))this.steps[r]=_r(s)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new bR({steps:n})}async invoke(n,r){const s=Ue(r),i=await Mn(s),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:n},s.runId,void 0,void 0,void 0,s==null?void 0:s.runName));delete s.runId;const o={};try{const l=Object.entries(this.steps).map(async([c,d])=>{o[c]=await d.invoke(n,nt(s,{callbacks:a==null?void 0:a.getChild(`map:key:${c}`)}))});await Ns(Promise.all(l),r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(o)),o}async*_transform(n,r,s){const i={...this.steps},a=xw(n,Object.keys(i).length),o=new Map(Object.entries(i).map(([l,c],d)=>{const h=c.transform(a[d],nt(s,{callbacks:r==null?void 0:r.getChild(`map:key:${l}`)}));return[l,h.next().then(m=>({key:l,gen:h,result:m}))]}));for(;o.size;){const l=Promise.race(o.values()),{key:c,result:d,gen:h}=await Ns(l,s==null?void 0:s.signal);o.delete(c),d.done||(yield{[c]:d.value},o.set(c,h.next().then(m=>({key:c,gen:h,result:m}))))}}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*s(){yield n}const i=Ue(r),a=new ga({generator:this.transform(s(),i),config:i});return await a.setup,Ar.fromAsyncGenerator(a)}},SV=class SR extends vt{constructor(n){super(n);T(this,"lc_serializable",!1);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"func");if(!ww(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,r){const[s]=this._getOptionsList(r??{},1),i=await Mn(s),a=this.func(nt(s,{callbacks:i}),n);return Ns(a,s==null?void 0:s.signal)}async*_streamIterator(n,r){var a,o;const[s]=this._getOptionsList(r??{},1),i=await this.invoke(n,r);if(By(i)){for await(const l of i)(a=s==null?void 0:s.signal)==null||a.throwIfAborted(),yield l;return}if(_V(i)){for(;;){(o=s==null?void 0:s.signal)==null||o.throwIfAborted();const l=i.next();if(l.done)break;yield l.value}return}yield i}static from(n){return new SR({func:n})}};function kV(t){if(ww(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Os=class kR extends vt{constructor(n){if(ww(n.func))return SV.from(n.func);super(n);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"func");kV(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new kR({func:n})}async _invoke(n,r,s){return new Promise((i,a)=>{const o=nt(r,{callbacks:s==null?void 0:s.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Rp)-1});Tr.runWithConfig(Cs(o),async()=>{var l,c;try{let d=await this.func(n,{...o});if(d&&vt.isRunnable(d)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");d=await d.invoke(n,{...o,recursionLimit:(o.recursionLimit??Rp)-1})}else if(By(d)){let h;for await(const m of Gy(o,d))if((l=r==null?void 0:r.signal)==null||l.throwIfAborted(),h===void 0)h=m;else try{h=this._concatOutputChunks(h,m)}catch{h=m}d=h}else if(Ok(d)){let h;for(const m of $k(o,d))if((c=r==null?void 0:r.signal)==null||c.throwIfAborted(),h===void 0)h=m;else try{h=this._concatOutputChunks(h,m)}catch{h=m}d=h}i(d)}catch(d){a(d)}})})}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async*_transform(n,r,s){var l,c;let i;for await(const d of n)if(i===void 0)i=d;else try{i=this._concatOutputChunks(i,d)}catch{i=d}const a=nt(s,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((s==null?void 0:s.recursionLimit)??Rp)-1}),o=await new Promise((d,h)=>{Tr.runWithConfig(Cs(a),async()=>{try{const m=await this.func(i,{...a,config:a});d(m)}catch(m){h(m)}})});if(o&&vt.isRunnable(o)){if((s==null?void 0:s.recursionLimit)===0)throw new Error("Recursion limit reached.");const d=await o.stream(i,a);for await(const h of d)yield h}else if(By(o))for await(const d of Gy(a,o))(l=s==null?void 0:s.signal)==null||l.throwIfAborted(),yield d;else if(Ok(o))for(const d of $k(a,o))(c=s==null?void 0:s.signal)==null||c.throwIfAborted(),yield d;else yield o}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*s(){yield n}const i=Ue(r),a=new ga({generator:this.transform(s(),i),config:i});return await a.setup,Ar.fromAsyncGenerator(a)}},TV=class extends Uo{},TR=class extends vt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"runnable");T(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Ue(n),s=await Mn(r),{runId:i,...a}=r,o=await(s==null?void 0:s.handleChainStart(this.toJSON(),jt(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),l=nt(a,{callbacks:o==null?void 0:o.getChild()});return await Tr.runWithConfig(l,async()=>{var h;let d;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();try{const f=await m.invoke(e,l);return await(o==null?void 0:o.handleChainEnd(jt(f,"output"))),f}catch(f){d===void 0&&(d=f)}}throw d===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(d)),d)})}async*_streamIterator(e,n){var h;const r=Ue(n),s=await Mn(r),{runId:i,...a}=r,o=await(s==null?void 0:s.handleChainStart(this.toJSON(),jt(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName));let l,c;for(const m of this.runnables()){(h=r==null?void 0:r.signal)==null||h.throwIfAborted();const f=nt(a,{callbacks:o==null?void 0:o.getChild()});try{const y=await m.stream(e,f);c=Gy(f,y);break}catch(y){l===void 0&&(l=y)}}if(c===void 0){const m=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(m)),m}let d;try{for await(const m of c){yield m;try{d=d===void 0?d:this._concatOutputChunks(d,m)}catch{d=void 0}}}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}await(o==null?void 0:o.handleChainEnd(jt(d,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(n??{},e.length),i=await Promise.all(s.map(c=>Mn(c))),a=await Promise.all(i.map(async(c,d)=>{const h=await(c==null?void 0:c.handleChainStart(this.toJSON(),jt(e[d],"input"),s[d].runId,void 0,void 0,void 0,s[d].runName));return delete s[d].runId,h}));let o;for(const c of this.runnables()){(l=s[0].signal)==null||l.throwIfAborted();try{const d=await c.batch(e,a.map((h,m)=>nt(s[m],{callbacks:h==null?void 0:h.getChild()})),r);return await Promise.all(a.map((h,m)=>h==null?void 0:h.handleChainEnd(jt(d[m],"output")))),d}catch(d){o===void 0&&(o=d)}}throw o?(await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function _r(t){if(typeof t=="function")return new Os({func:t});if(vt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=_r(r);return new Uo({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Iw=class extends vt{constructor(e){e instanceof Uo&&(e={mapper:e});super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const s=this.mapper.getStepsKeys(),[i,a]=xw(e),o=this.mapper.transform(a,nt(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const c of i){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const d=Object.fromEntries(Object.entries(c).filter(([h])=>!s.includes(h)));Object.keys(d).length>0&&(yield d)}yield(await l).value;for await(const c of o)yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const s=Ue(n),i=new ga({generator:this.transform(r(),s),config:s});return await i.setup,Ar.fromAsyncGenerator(i)}},AR=class extends vt{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const s=Ue(n),i=new ga({generator:this.transform(r(),s),config:s});return await i.setup,Ar.fromAsyncGenerator(i)}},Vy=class extends To{constructor(e){const n=Fo.from([Os.from(async r=>{let s;if(zl(r))try{s=await Bm(this.schema,r.args)}catch{throw new Nh("Received tool input did not match expected schema",JSON.stringify(r.args))}else s=r;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});T(this,"name");T(this,"description");T(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function AV(t,e){const n=e.name??t.getName(),r=e.description??Gm(e.schema);return Tw(e.schema)?new Vy({name:n,description:r,schema:Wm({input:Hm()}).transform(s=>s.input),bound:t}):new Vy({name:n,description:r,schema:e.schema,bound:t})}const Vh=(t,e)=>{const n=[...new Set(e==null?void 0:e.map(s=>{if(typeof s=="string")return s;const i=new s({});if(!("getType"in i)||typeof i.getType!="function")throw new Error("Invalid type provided.");return i.getType()}))],r=t.getType();return n.some(s=>s===r)};function EV(t,e){return Array.isArray(t)?Dk(t,e):Os.from(n=>Dk(n,t))}function Dk(t,e={}){const{includeNames:n,excludeNames:r,includeTypes:s,excludeTypes:i,includeIds:a,excludeIds:o}=e,l=[];for(const c of t)if(!(r&&c.name&&r.includes(c.name))){{if(i&&Vh(c,i))continue;if(o&&c.id&&o.includes(c.id))continue}s||a||n?(n&&c.name&&n.some(d=>d===c.name)||s&&Vh(c,s)||a&&c.id&&a.some(d=>d===c.id))&&l.push(c):l.push(c)}return l}function CV(t){return Array.isArray(t)?Mk(t):Os.from(Mk)}function Mk(t){if(!t.length)return[];const e=[];for(const n of t){const r=n,s=e.pop();if(!s)e.push(r);else if(r.getType()==="tool"||r.getType()!==s.getType())e.push(s,r);else{const i=Ih(s),a=Ih(r),o=i.concat(a);typeof i.content=="string"&&typeof a.content=="string"&&(o.content=`${i.content}
${a.content}`),e.push(RV(o))}}return e}function NV(t,e){if(Array.isArray(t)){const n=t;if(!e)throw new Error("Options parameter is required when providing messages.");return Lk(n,e)}else{const n=t;return Os.from(r=>Lk(r,n)).withConfig({runName:"trim_messages"})}}async function Lk(t,e){const{maxTokens:n,tokenCounter:r,strategy:s="last",allowPartial:i=!1,endOn:a,startOn:o,includeSystem:l=!1,textSplitter:c}=e;if(o&&s==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&s==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let d;"getNumTokens"in r?d=async m=>(await Promise.all(m.map(y=>r.getNumTokens(y.content)))).reduce((y,w)=>y+w,0):d=async m=>r(m);let h=CR;if(c&&("splitText"in c?h=c.splitText:h=async m=>c(m)),s==="first")return ER(t,{maxTokens:n,tokenCounter:d,textSplitter:h,partialStrategy:i?"first":void 0,endOn:a});if(s==="last")return IV(t,{maxTokens:n,tokenCounter:d,textSplitter:h,allowPartial:i,includeSystem:l,startOn:o,endOn:a});throw new Error(`Unrecognized strategy: '${s}'. Must be one of 'first' or 'last'.`)}async function ER(t,e){const{maxTokens:n,tokenCounter:r,textSplitter:s,partialStrategy:i,endOn:a}=e;let o=[...t],l=0;for(let c=0;c<o.length;c+=1){const d=c>0?o.slice(0,-c):o;if(await r(d)<=n){l=o.length-c;break}}if(l<o.length&&i){let c=!1;if(Array.isArray(o[l].content)){const d=o[l];if(typeof d.content=="string")throw new Error("Expected content to be an array.");const h=d.content.length,m=i==="last"?[...d.content].reverse():d.content;for(let f=1;f<=h;f+=1){const y=i==="first"?m.slice(0,f):m.slice(-f),w=Object.fromEntries(Object.entries(d).filter(([p])=>p!=="type"&&!p.startsWith("lc_"))),x=Rw(d.getType(),{...w,content:y}),v=[...o.slice(0,l),x];if(await r(v)<=n)o=v,l+=1,c=!0;else break}c&&i==="last"&&(d.content=[...m].reverse())}if(!c){const d=o[l];let h;if(Array.isArray(d.content)&&d.content.some(m=>typeof m=="string"||m.type==="text")){const m=d.content.find(f=>f.type==="text"&&f.text);h=m==null?void 0:m.text}else typeof d.content=="string"&&(h=d.content);if(h){const m=await s(h),f=m.length;i==="last"&&m.reverse();for(let y=0;y<f-1;y+=1)if(m.pop(),d.content=m.join(""),await r([...o.slice(0,l),d])<=n){i==="last"&&(d.content=[...m].reverse().join("")),o=[...o.slice(0,l),d],l+=1;break}}}}if(a){const c=Array.isArray(a)?a:[a];for(;l>0&&!Vh(o[l-1],c);)l-=1}return o.slice(0,l)}async function IV(t,e){var d;const{allowPartial:n=!1,includeSystem:r=!1,endOn:s,startOn:i,...a}=e;let o=t.map(h=>{const m=Object.fromEntries(Object.entries(h).filter(([f])=>f!=="type"&&!f.startsWith("lc_")));return Rw(h.getType(),m,Xv(h))});if(s){const h=Array.isArray(s)?s:[s];for(;o.length>0&&!Vh(o[o.length-1],h);)o=o.slice(0,-1)}const l=r&&((d=o[0])==null?void 0:d.getType())==="system";let c=l?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return c=await ER(c,{...a,partialStrategy:n?"last":void 0,endOn:i}),l?[c[0],...c.slice(1).reverse()]:c.reverse()}const Fk={human:{message:ns,messageChunk:Hc},ai:{message:Cn,messageChunk:ts},system:{message:Es,messageChunk:gi},developer:{message:Es,messageChunk:gi},tool:{message:Xr,messageChunk:Bc},function:{message:Nm,messageChunk:Vc},generic:{message:pa,messageChunk:Gc},remove:{message:Ch,messageChunk:Ch}};function Rw(t,e,n){var i;let r,s;switch(t){case"human":n?r=new Hc(e):s=new ns(e);break;case"ai":if(n){let a={...e};"tool_calls"in a&&(a={...a,tool_call_chunks:(i=a.tool_calls)==null?void 0:i.map(o=>({...o,type:"tool_call_chunk",index:void 0,args:JSON.stringify(o.args)}))}),r=new ts(a)}else s=new Cn(e);break;case"system":n?r=new gi(e):s=new Es(e);break;case"developer":n?r=new gi({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}}):s=new Es({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in e)n?r=new Bc(e):s=new Xr(e);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(n)r=new Vc(e);else{if(!e.name)throw new Error("FunctionMessage must have a 'name' field");s=new Nm(e)}break;case"generic":if("role"in e)n?r=new Gc(e):s=new pa(e);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${t}`)}if(n&&r)return r;if(s)return s;throw new Error(`Unrecognized message type ${t}`)}function RV(t){const e=t.getType();let n;const r=Object.fromEntries(Object.entries(t).filter(([s])=>!["type","tool_call_chunks"].includes(s)&&!s.startsWith("lc_")));if(e in Fk&&(n=Rw(e,r)),!n)throw new Error(`Unrecognized message chunk class ${e}. Supported classes are ${Object.keys(Fk)}`);return n}function CR(t){const e=t.split(`
`);return Promise.resolve([...e.slice(0,-1).map(n=>`${n}
`),e[e.length-1]])}const jV=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],PV=["image","video","audio","text-plain","file"],OV=["text","reasoning",...jV,...PV];var $V={};De($V,{AIMessage:()=>Cn,AIMessageChunk:()=>ts,BaseMessage:()=>Ps,BaseMessageChunk:()=>ki,ChatMessage:()=>pa,ChatMessageChunk:()=>Gc,FunctionMessage:()=>Nm,FunctionMessageChunk:()=>Vc,HumanMessage:()=>ns,HumanMessageChunk:()=>Hc,KNOWN_BLOCK_TYPES:()=>OV,RemoveMessage:()=>Ch,SystemMessage:()=>Es,SystemMessageChunk:()=>gi,ToolMessage:()=>Xr,ToolMessageChunk:()=>Bc,_isMessageFieldWithRole:()=>UN,_mergeDicts:()=>en,_mergeLists:()=>zc,_mergeObj:()=>LN,_mergeStatus:()=>MN,coerceMessageLikeToMessage:()=>Bl,convertToChunk:()=>Ih,convertToOpenAIImageBlock:()=>CN,convertToProviderContentBlock:()=>Kv,defaultTextSplitter:()=>CR,defaultToolCallParser:()=>ew,filterMessages:()=>EV,getBufferString:()=>nw,iife:()=>ZN,isAIMessage:()=>Cm,isAIMessageChunk:()=>wy,isBase64ContentBlock:()=>qv,isBaseMessage:()=>Qs,isBaseMessageChunk:()=>Xv,isChatMessage:()=>W5,isChatMessageChunk:()=>q5,isDataContentBlock:()=>Jr,isDirectToolOutput:()=>Qv,isFunctionMessage:()=>K5,isFunctionMessageChunk:()=>Z5,isHumanMessage:()=>Y5,isHumanMessageChunk:()=>J5,isIDContentBlock:()=>EN,isMessage:()=>NN,isOpenAIToolCallArray:()=>D5,isPlainTextContentBlock:()=>o5,isSystemMessage:()=>X5,isSystemMessageChunk:()=>Q5,isToolMessage:()=>VN,isToolMessageChunk:()=>HN,isURLContentBlock:()=>Wv,mapChatMessagesToStoredMessages:()=>i3,mapStoredMessageToChatMessage:()=>rw,mapStoredMessagesToChatMessages:()=>s3,mergeContent:()=>As,mergeMessageRuns:()=>CV,mergeResponseMetadata:()=>zN,mergeUsageMetadata:()=>GN,parseBase64DataUrl:()=>vc,parseMimeType:()=>yy,trimMessages:()=>NV});const ra=t=>t();function Yc(t){return t?!!(/^o\d/.test(t??"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function DV(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function Jc(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!pa.isInstance(t))throw new Error("Invalid generic chat message");return DV(t);default:throw new Error(`Unknown message type: ${e}`)}}function MV(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:s,baseURL:i,azureADTokenProvider:a,azureOpenAIEndpoint:o}=t;if((r||a)&&s&&e)return`${s}/${e}`;if((r||a)&&o&&e)return`${o}/openai/deployments/${e}`;if(r||a){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return i}function Uk(t){return typeof Headers<"u"&&t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Headers]"}function LV(t){const e=ra(()=>{if(Uk(t))return t;if(Array.isArray(t))return new Headers(t);if(typeof t=="object"&&t!==null&&"values"in t&&Uk(t.values))return t.values;if(typeof t=="object"&&t!==null){const n=Object.entries(t).filter(([,r])=>typeof r=="string").map(([r,s])=>[r,s]);return new Headers(n)}return new Headers});return Object.fromEntries(e.entries())}function FV(){let t=sw();return(t==="node"||t==="deno")&&(t=`(${t}/${process.version}; ${process.platform}; ${process.arch})`),t}function UV(t,e=!1,n="1.0.0"){const r=LV(t),s=FV(),i=`langchainjs${e?"-azure":""}-openai`;return{...r,"User-Agent":r["User-Agent"]?`${i}/${n} (${s})${r["User-Agent"]}`:`${i}/${n} (${s})`}}function jw(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function Pw(t){return t!==void 0&&vt.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function Ow(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(zr(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function qm(t){return Ow(t)||Pw(t)||jw(t)}var zV={};De(zV,{convertToOpenAIFunction:()=>NR,convertToOpenAITool:()=>IR,isLangChainTool:()=>qm,isRunnableToolLike:()=>Pw,isStructuredTool:()=>jw,isStructuredToolParams:()=>Ow});function NR(t,e){const n=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:Br(t.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function IR(t,e){const n=typeof e=="number"?void 0:e;let r;return qm(t)?r={type:"function",function:NR(t)}:r=t,(n==null?void 0:n.strict)!==void 0&&(r.function.strict=n.strict),r}var BV={};De(BV,{extendInteropZodObject:()=>wB,getInteropZodDefaultGetter:()=>_B,getInteropZodObjectShape:()=>Oy,getSchemaDescription:()=>Gm,interopParse:()=>gB,interopParseAsync:()=>Bm,interopSafeParse:()=>pB,interopSafeParseAsync:()=>iR,interopZodObjectMakeFieldsOptional:()=>kB,interopZodObjectPartial:()=>xB,interopZodObjectPassthrough:()=>$y,interopZodObjectStrict:()=>Mh,interopZodTransformInputSchema:()=>aR,isInteropZodError:()=>oR,isInteropZodLiteral:()=>fB,isInteropZodObject:()=>vB,isInteropZodSchema:()=>zr,isShapelessZodSchema:()=>yB,isSimpleStringZodSchema:()=>Tw,isZodArrayV4:()=>Vm,isZodLiteralV3:()=>rR,isZodLiteralV4:()=>sR,isZodObjectV3:()=>Aw,isZodObjectV4:()=>Zr,isZodSchema:()=>mB,isZodSchemaV3:()=>Tt,isZodSchemaV4:()=>gt});function GV(t,e){let n;return qm(t)?n=IR(t):n=t,(e==null?void 0:e.strict)!==void 0&&(n.function.strict=e.strict),n}function VV(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function HV(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(RR(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function RR(t,e){var r;const n=[];for(const[s,i]of Object.entries(t.properties??{}))i.description&&e<2&&n.push(`// ${i.description}`),(r=t.required)!=null&&r.includes(s)?n.push(`${s}: ${Hh(i,e)},`):n.push(`${s}?: ${Hh(i,e)},`);return n.map(s=>" ".repeat(e)+s).join(`
`)}function Hh(t,e){if(VV(t))return t.anyOf.map(n=>Hh(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",RR(t,e+2),"}"].join(`
`);case"array":return t.items?`${Hh(t.items,e)}[]`:"any[]";default:return""}}function jR(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function $w(t){return"type"in t&&t.type!=="function"}function WV(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function Wh(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function PR(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function qV(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function KV(t){return t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function ZV(t){const e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function YV(t){const e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}const JV=Symbol("Let zodToJsonSchema decide on which parser to use"),zk={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},XV=t=>typeof t=="string"?{...zk,basePath:["#"],definitions:{},name:t}:{...zk,basePath:["#"],definitions:{},...t},Hy=t=>"_def"in t?t._def:t;function QV(t){if(!t)return!0;for(const e in t)return!1;return!0}const eH=t=>{const e=XV(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[Hy(s),{def:Hy(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function OR(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Ze(t,e,n,r,s){t[e]=n,OR(t,e,r,s)}function tH(){return{}}function nH(t,e){var r,s;const n={type:"array"};return((s=(r=t.type)==null?void 0:r._def)==null?void 0:s.typeName)!==D.ZodAny&&(n.items=Be(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Ze(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Ze(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Ze(n,"minItems",t.exactLength.value,t.exactLength.message,e),Ze(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function rH(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ze(n,"minimum",r.value,r.message,e):Ze(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ze(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(n,"maximum",r.value,r.message,e):Ze(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ze(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(n,"multipleOf",r.value,r.message,e);break}return n}function sH(){return{type:"boolean"}}function iH(t,e){return Be(t.type._def,e)}const aH=(t,e)=>Be(t.innerType._def,e);function $R(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>$R(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return oH(t,e)}}const oH=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Ze(n,"minimum",r.value,r.message,e);break;case"max":Ze(n,"maximum",r.value,r.message,e);break}return n};function lH(t,e){return{...Be(t.innerType._def,e),default:t.defaultValue()}}function cH(t,e,n){return e.effectStrategy==="input"?Be(t.schema._def,e,n):{}}function uH(t){return{type:"string",enum:[...t.values]}}const dH=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function hH(t,e){const n=[Be(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Be(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(dH(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else r=void 0;s.push(a)}}),s.length?{allOf:s,...r}:void 0}function mH(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let Dp;const Pi={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Dp===void 0&&(Dp=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Dp),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function DR(t,e){const n={type:"string"};function r(s){return e.patternStrategy==="escape"?fH(s):s}if(t.checks)for(const s of t.checks)switch(s.kind){case"min":Ze(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,e);break;case"max":Ze(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ur(n,"email",s.message,e);break;case"format:idn-email":ur(n,"idn-email",s.message,e);break;case"pattern:zod":dr(n,Pi.email,s.message,e);break}break;case"url":ur(n,"uri",s.message,e);break;case"uuid":ur(n,"uuid",s.message,e);break;case"regex":dr(n,s.regex,s.message,e);break;case"cuid":dr(n,Pi.cuid,s.message,e);break;case"cuid2":dr(n,Pi.cuid2,s.message,e);break;case"startsWith":dr(n,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":dr(n,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":ur(n,"date-time",s.message,e);break;case"date":ur(n,"date",s.message,e);break;case"time":ur(n,"time",s.message,e);break;case"duration":ur(n,"duration",s.message,e);break;case"length":Ze(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,s.value):s.value,s.message,e),Ze(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,s.value):s.value,s.message,e);break;case"includes":{dr(n,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&ur(n,"ipv4",s.message,e),s.version!=="v4"&&ur(n,"ipv6",s.message,e);break}case"emoji":dr(n,Pi.emoji,s.message,e);break;case"ulid":{dr(n,Pi.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ur(n,"binary",s.message,e);break}case"contentEncoding:base64":{Ze(n,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{dr(n,Pi.base64,s.message,e);break}}break}case"nanoid":dr(n,Pi.nanoid,s.message,e)}return n}const fH=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),ur=(t,e,n,r)=>{var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ze(t,"format",e,n,r)},dr=(t,e,n,r)=>{var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Bk(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ze(t,"pattern",Bk(e,r),n,r)},Bk=(t,e)=>{var c;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},s=r.i?n.source.toLowerCase():n.source;let i="",a=!1,o=!1,l=!1;for(let d=0;d<s.length;d++){if(a){i+=s[d],a=!1;continue}if(r.i){if(o){if(s[d].match(/[a-z]/)){l?(i+=s[d],i+=`${s[d-2]}-${s[d]}`.toUpperCase(),l=!1):s[d+1]==="-"&&((c=s[d+2])!=null&&c.match(/[a-z]/))?(i+=s[d],l=!0):i+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){i+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(r.m){if(s[d]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&s[d]==="."){i+=o?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}i+=s[d],s[d]==="\\"?a=!0:o&&s[d]==="]"?o=!1:!o&&s[d]==="["&&(o=!0)}try{const d=new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i};function MR(t,e){var r,s,i,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===D.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((o,l)=>({...o,[l]:Be(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Be(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===D.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const o=Object.entries(DR(t.keyType._def,e)).reduce((l,[c,d])=>c==="type"?l:{...l,[c]:d},{});return{...n,propertyNames:o}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===D.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function pH(t,e){if(e.mapStrategy==="record")return MR(t,e);const n=Be(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Be(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function gH(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function yH(){return{not:{}}}function vH(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const qh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function wH(t,e){if(e.target==="openApi3")return Gk(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in qh&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=qh[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return Gk(t,e)}const Gk=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>Be(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function xH(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:qh[t.innerType._def.typeName],nullable:!0}:{type:[qh[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Be(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Be(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function _H(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",OR(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ze(n,"minimum",r.value,r.message,e):Ze(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Ze(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(n,"maximum",r.value,r.message,e):Ze(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Ze(n,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(n,"multipleOf",r.value,r.message,e);break}return n}function bH(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":Be(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":Be(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function SH(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[s,i])=>{var l;if(i===void 0||i._def===void 0)return r;const a=[...e.currentPath,"properties",s],o=Be(i._def,{...e,currentPath:a,propertyPath:a});if(o===void 0)return r;if(e.openaiStrictMode&&i.isOptional()&&!i.isNullable()&&typeof((l=i._def)==null?void 0:l.defaultValue)>"u")throw new Error(`Zod field at \`${a.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:o},required:i.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:bH(t,e)};return n.required.length||delete n.required,n}const kH=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return Be(t.innerType._def,{...e,currentPath:e.currentPath});const n=Be(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},TH=(t,e)=>{if(e.pipeStrategy==="input")return Be(t.in._def,e);if(e.pipeStrategy==="output")return Be(t.out._def,e);const n=Be(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Be(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function AH(t,e){return Be(t.type._def,e)}function EH(t,e){const r={type:"array",uniqueItems:!0,items:Be(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Ze(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Ze(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function CH(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Be(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Be(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Be(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function NH(){return{not:{}}}function IH(){return{}}const RH=(t,e)=>Be(t.innerType._def,e);function Be(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const o=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(o!==JV)return o}if(r&&!n){const o=jH(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=OH(t,t.typeName,e,n);return i&&$H(t,e,i),s.jsonSchema=i,i}const jH=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const n=t.path.slice(e.basePath.length+1).join("_");return n!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[n]=t.def),{$ref:[...e.basePath,e.definitionPath,n].join("/")};case"relative":return{$ref:PH(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},PH=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},OH=(t,e,n,r)=>{switch(e){case D.ZodString:return DR(t,n);case D.ZodNumber:return _H(t,n);case D.ZodObject:return SH(t,n);case D.ZodBigInt:return rH(t,n);case D.ZodBoolean:return sH();case D.ZodDate:return $R(t,n);case D.ZodUndefined:return NH();case D.ZodNull:return vH(n);case D.ZodArray:return nH(t,n);case D.ZodUnion:case D.ZodDiscriminatedUnion:return wH(t,n);case D.ZodIntersection:return hH(t,n);case D.ZodTuple:return CH(t,n);case D.ZodRecord:return MR(t,n);case D.ZodLiteral:return mH(t,n);case D.ZodEnum:return uH(t);case D.ZodNativeEnum:return gH(t);case D.ZodNullable:return xH(t,n);case D.ZodOptional:return kH(t,n);case D.ZodMap:return pH(t,n);case D.ZodSet:return EH(t,n);case D.ZodLazy:return Be(t.getter()._def,n);case D.ZodPromise:return AH(t,n);case D.ZodNaN:case D.ZodNever:return yH();case D.ZodEffects:return cH(t,n,r);case D.ZodAny:return tH();case D.ZodUnknown:return IH();case D.ZodDefault:return lH(t,n);case D.ZodBranded:return iH(t,n);case D.ZodReadonly:return RH(t,n);case D.ZodCatch:return aH(t,n);case D.ZodPipeline:return TH(t,n);case D.ZodFunction:case D.ZodVoid:case D.ZodSymbol:return;default:return(s=>{})()}},$H=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),DH=(t,e)=>{const n=eH(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=Be(t._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},i=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;i!==void 0&&(s.title=i);const a=(()=>{if(QV(n.definitions))return;const l={},c=new Set;for(let d=0;d<500;d++){const h=Object.entries(n.definitions).filter(([m])=>!c.has(m));if(h.length===0)break;for(const[m,f]of h)l[m]=Be(Hy(f),{...n,currentPath:[...n.basePath,n.definitionPath,m]},!0)??{},c.add(m)}return l})(),o=r===void 0?a?{...s,[n.definitionPath]:a}:s:n.nameStrategy==="duplicate-ref"?{...s,...a||n.seenRefs.size?{[n.definitionPath]:{...a,...n.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...a,[r]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function MH(t){if(t.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${t.type?`'${t.type}'`:"undefined"}`);const e=structuredClone(t);return ls(e,[],e)}function Wy(t){if(typeof t=="boolean")return!1;if(t.type==="null")return!0;for(const e of t.oneOf??[])if(Wy(e))return!0;for(const e of t.anyOf??[])if(Wy(e))return!0;return!1}function ls(t,e,n){if(typeof t=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);if(!Fi(t))throw new TypeError(`Expected ${JSON.stringify(t)} to be an object; path=${e.join("/")}`);const r=t.$defs;if(Fi(r))for(const[m,f]of Object.entries(r))ls(f,[...e,"$defs",m],n);const s=t.definitions;if(Fi(s))for(const[m,f]of Object.entries(s))ls(f,[...e,"definitions",m],n);t.type==="object"&&!("additionalProperties"in t)&&(t.additionalProperties=!1);const a=t.required??[],o=t.properties;if(Fi(o)){for(const[m,f]of Object.entries(o))if(!Wy(f)&&!a.includes(m))throw new Error(`Zod field at \`${[...e,"properties",m].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);t.required=Object.keys(o),t.properties=Object.fromEntries(Object.entries(o).map(([m,f])=>[m,ls(f,[...e,"properties",m],n)]))}const l=t.items;Fi(l)&&(t.items=ls(l,[...e,"items"],n));const c=t.anyOf;Array.isArray(c)&&(t.anyOf=c.map((m,f)=>ls(m,[...e,"anyOf",String(f)],n)));const d=t.allOf;if(Array.isArray(d))if(d.length===1){const m=ls(d[0],[...e,"allOf","0"],n);Object.assign(t,m),delete t.allOf}else t.allOf=d.map((m,f)=>ls(m,[...e,"allOf",String(f)],n));t.default===null&&delete t.default;const h=t.$ref;if(h&&FH(t,1)){if(typeof h!="string")throw new TypeError(`Received non-string $ref - ${h}; path=${e.join("/")}`);const m=LH(n,h);if(typeof m=="boolean")throw new Error(`Expected \`$ref: ${h}\` to resolve to an object schema but got boolean`);if(!Fi(m))throw new Error(`Expected \`$ref: ${h}\` to resolve to an object but got ${JSON.stringify(m)}`);return Object.assign(t,{...m,...t}),delete t.$ref,ls(t,e,n)}return t}function LH(t,e){if(!e.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);const n=e.slice(2).split("/");let r=t;for(const s of n){if(!Fi(r))throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);const i=r[s];if(i===void 0)throw new Error(`Key ${s} not found while resolving ${e}`);r=i}return r}function Fi(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function FH(t,e){let n=0;for(const r in t)if(n++,n>e)return!0;return!1}function UH(t,e){return DH(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function zH(t){return MH(Dh(t,{target:"draft-7"}))}function BH(t){return"_zod"in t}function GH(t,e,n){return D4({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:BH(t)?zH(t):UH(t,{name:e})}},r=>t.parse(JSON.parse(r)))}const Vk=["jsonSchema","functionCalling","jsonMode"];function VH(t,e){if(typeof e<"u"&&!Vk.includes(e))throw new Error(`Invalid method: ${e}. Supported methods are: ${Vk.join(", ")}`);const n=!t.startsWith("gpt-3")&&!t.startsWith("gpt-4-")&&t!=="gpt-4";if(n&&!e)return"jsonSchema";if(!n&&e==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${t}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return e??"functionCalling"}function HH(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function WH(t,e,n){if(Tt(t))return GH(t,e,n);if(gt(t))return HH({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:Dh(t,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>zm(t,JSON.parse(r)));throw new Error("Unsupported schema response format")}function qH(t,e){if(e&&typeof e=="object"&&"images"in e&&Array.isArray(e.images)){const n=e.images.filter(r=>{var s;return typeof((s=r==null?void 0:r.image_url)==null?void 0:s.url)=="string"}).map(r=>({type:"image",url:r.image_url.url}));return[{type:"text",text:t},...n]}return t}const KH={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}};var ZH=KH,YH={};De(YH,{BasePromptValue:()=>Km,ChatPromptValue:()=>FR,ImagePromptValue:()=>JH,StringPromptValue:()=>LR});var Km=class extends yo{},LR=class extends Km{constructor(e){super({value:e});T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new ns(this.value)]}},FR=class extends Km{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return nw(this.messages)}toChatMessages(){return this.messages}},JH=class extends Km{constructor(e){"imageUrl"in e||(e={imageUrl:e});super(e);T(this,"lc_namespace",["langchain_core","prompt_values"]);T(this,"lc_serializable",!0);T(this,"imageUrl");T(this,"value");this.imageUrl=e.imageUrl}static lc_name(){return"ImagePromptValue"}toString(){return this.imageUrl.url}toChatMessages(){return[new ns({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},ae="0123456789abcdef".split(""),XH=[-2147483648,8388608,32768,128],hr=[24,16,8,0],ud=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ot=[];function Er(t,e){e?(Ot[0]=Ot[16]=Ot[1]=Ot[2]=Ot[3]=Ot[4]=Ot[5]=Ot[6]=Ot[7]=Ot[8]=Ot[9]=Ot[10]=Ot[11]=Ot[12]=Ot[13]=Ot[14]=Ot[15]=0,this.blocks=Ot):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Er.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var r,s=0,i,a=t.length,o=this.blocks;s<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(i=this.start;s<a&&i<64;++s)o[i>>>2]|=t[s]<<hr[i++&3];else for(i=this.start;s<a&&i<64;++s)r=t.charCodeAt(s),r<128?o[i>>>2]|=r<<hr[i++&3]:r<2048?(o[i>>>2]|=(192|r>>>6)<<hr[i++&3],o[i>>>2]|=(128|r&63)<<hr[i++&3]):r<55296||r>=57344?(o[i>>>2]|=(224|r>>>12)<<hr[i++&3],o[i>>>2]|=(128|r>>>6&63)<<hr[i++&3],o[i>>>2]|=(128|r&63)<<hr[i++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++s)&1023),o[i>>>2]|=(240|r>>>18)<<hr[i++&3],o[i>>>2]|=(128|r>>>12&63)<<hr[i++&3],o[i>>>2]|=(128|r>>>6&63)<<hr[i++&3],o[i>>>2]|=(128|r&63)<<hr[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Er.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=XH[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Er.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=this.blocks,c,d,h,m,f,y,w,x,v,p,g;for(c=16;c<64;++c)f=l[c-15],d=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,f=l[c-2],h=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,l[c]=l[c-16]+d+l[c-7]+h<<0;for(g=e&n,c=0;c<64;c+=4)this.first?(this.is224?(x=300032,f=l[0]-1413257819,o=f-150054599<<0,r=f+24177077<<0):(x=704751109,f=l[0]-210244248,o=f-1521486534<<0,r=f+143694565<<0),this.first=!1):(d=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),h=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),x=t&e,m=x^t&n^g,w=s&i^~s&a,f=o+h+w+ud[c]+l[c],y=d+m,o=r+f<<0,r=f+y<<0),d=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),h=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),v=r&t,m=v^r&e^x,w=a&o^~a&s,f=i+h+w+ud[c+1]+l[c+1],y=d+m,a=n+f<<0,n=f+y<<0,d=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),h=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),p=n&r,m=p^n&t^v,w=i&a^~i&o,f=s+h+w+ud[c+2]+l[c+2],y=d+m,i=e+f<<0,e=f+y<<0,d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),h=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),g=e&n,m=g^e&r^p,w=i&a^~i&o,f=s+h+w+ud[c+3]+l[c+3],y=d+m,s=t+f<<0,t=f+y<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0,this.h5=this.h5+i<<0,this.h6=this.h6+a<<0,this.h7=this.h7+o<<0};Er.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=ae[t>>>28&15]+ae[t>>>24&15]+ae[t>>>20&15]+ae[t>>>16&15]+ae[t>>>12&15]+ae[t>>>8&15]+ae[t>>>4&15]+ae[t&15]+ae[e>>>28&15]+ae[e>>>24&15]+ae[e>>>20&15]+ae[e>>>16&15]+ae[e>>>12&15]+ae[e>>>8&15]+ae[e>>>4&15]+ae[e&15]+ae[n>>>28&15]+ae[n>>>24&15]+ae[n>>>20&15]+ae[n>>>16&15]+ae[n>>>12&15]+ae[n>>>8&15]+ae[n>>>4&15]+ae[n&15]+ae[r>>>28&15]+ae[r>>>24&15]+ae[r>>>20&15]+ae[r>>>16&15]+ae[r>>>12&15]+ae[r>>>8&15]+ae[r>>>4&15]+ae[r&15]+ae[s>>>28&15]+ae[s>>>24&15]+ae[s>>>20&15]+ae[s>>>16&15]+ae[s>>>12&15]+ae[s>>>8&15]+ae[s>>>4&15]+ae[s&15]+ae[i>>>28&15]+ae[i>>>24&15]+ae[i>>>20&15]+ae[i>>>16&15]+ae[i>>>12&15]+ae[i>>>8&15]+ae[i>>>4&15]+ae[i&15]+ae[a>>>28&15]+ae[a>>>24&15]+ae[a>>>20&15]+ae[a>>>16&15]+ae[a>>>12&15]+ae[a>>>8&15]+ae[a>>>4&15]+ae[a&15];return this.is224||(l+=ae[o>>>28&15]+ae[o>>>24&15]+ae[o>>>20&15]+ae[o>>>16&15]+ae[o>>>12&15]+ae[o>>>8&15]+ae[o>>>4&15]+ae[o&15]),l};Er.prototype.toString=Er.prototype.hex;Er.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,s=this.h4,i=this.h5,a=this.h6,o=this.h7,l=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),l};Er.prototype.array=Er.prototype.digest;Er.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const UR=(...t)=>new Er(!1,!0).update(t.join("")).hex();var QH={};De(QH,{sha256:()=>UR});var e8={};De(e8,{BaseCache:()=>BR,InMemoryCache:()=>GR,defaultHashKeyEncoder:()=>zR,deserializeStoredGeneration:()=>t8,serializeGeneration:()=>n8});const zR=(...t)=>UR(t.join("_"));function t8(t){return t.message!==void 0?{text:t.text,message:rw(t.message)}:{text:t.text}}function n8(t){const e={text:t.text};return t.message!==void 0&&(e.message=t.message.toDict()),e}var BR=class{constructor(){T(this,"keyEncoder",zR)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const r8=new Map;var GR=class VR extends BR{constructor(n){super();T(this,"cache");this.cache=n??new Map}lookup(n,r){return Promise.resolve(this.cache.get(this.keyEncoder(n,r))??null)}async update(n,r,s){this.cache.set(this.keyEncoder(n,r),s)}static global(){return new VR(r8)}},Zm={};Zm.byteLength=a8;Zm.toByteArray=l8;Zm.fromByteArray=d8;var Fr=[],Kn=[],s8=typeof Uint8Array<"u"?Uint8Array:Array,Mp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ta=0,i8=Mp.length;Ta<i8;++Ta)Fr[Ta]=Mp[Ta],Kn[Mp.charCodeAt(Ta)]=Ta;Kn[45]=62;Kn[95]=63;function HR(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function a8(t){var e=HR(t),n=e[0],r=e[1];return(n+r)*3/4-r}function o8(t,e,n){return(e+n)*3/4-n}function l8(t){var e,n=HR(t),r=n[0],s=n[1],i=new s8(o8(t,r,s)),a=0,o=s>0?r-4:r,l;for(l=0;l<o;l+=4)e=Kn[t.charCodeAt(l)]<<18|Kn[t.charCodeAt(l+1)]<<12|Kn[t.charCodeAt(l+2)]<<6|Kn[t.charCodeAt(l+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=Kn[t.charCodeAt(l)]<<2|Kn[t.charCodeAt(l+1)]>>4,i[a++]=e&255),s===1&&(e=Kn[t.charCodeAt(l)]<<10|Kn[t.charCodeAt(l+1)]<<4|Kn[t.charCodeAt(l+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function c8(t){return Fr[t>>18&63]+Fr[t>>12&63]+Fr[t>>6&63]+Fr[t&63]}function u8(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(c8(r));return s.join("")}function d8(t){for(var e,n=t.length,r=n%3,s=[],i=16383,a=0,o=n-r;a<o;a+=i)s.push(u8(t,a,a+i>o?o:a+i));return r===1?(e=t[n-1],s.push(Fr[e>>2]+Fr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Fr[e>>10]+Fr[e>>4&63]+Fr[e<<2&63]+"=")),s.join("")}var h8=Object.defineProperty,m8=(t,e,n)=>e in t?h8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f8=(t,e,n)=>(m8(t,e+"",n),n);function p8(t,e){let n=Array.from({length:t.length},(r,s)=>({start:s,end:s+1}));for(;n.length>1;){let r=null;for(let s=0;s<n.length-1;s++){const i=t.slice(n[s].start,n[s+1].end),a=e.get(i.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,s])}if(r!=null){const s=r[1];n[s]={start:n[s].start,end:n[s+1].end},n.splice(s+1,1)}else break}return n}function g8(t,e){return t.length===1?[e.get(t.join(","))]:p8(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function y8(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var qy=class{constructor(t,e){T(this,"specialTokens");T(this,"inverseSpecialTokens");T(this,"patStr");T(this,"textEncoder",new TextEncoder);T(this,"textDecoder",new TextDecoder("utf-8"));T(this,"rankMap",new Map);T(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,s)=>{const[i,a,...o]=s.split(" "),l=Number.parseInt(a,10);return o.forEach((c,d)=>r[c]=l+d),r},{});for(const[r,s]of Object.entries(n)){const i=Zm.toByteArray(r);this.rankMap.set(i.join(","),s),this.textMap.set(s,i)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[s,i])=>(r[i]=this.textEncoder.encode(s),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),s=qy.specialTokenRegex(Object.keys(this.specialTokens)),i=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!a.has(c)):n);if(o.size>0){const c=qy.specialTokenRegex([...o]),d=t.match(c);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let l=0;for(;;){let c=null,d=l;for(;s.lastIndex=d,c=s.exec(t),!(c==null||a.has(c[0]));)d=c.index+1;const h=(c==null?void 0:c.index)??t.length;for(const f of t.substring(l,h).matchAll(r)){const y=this.textEncoder.encode(f[0]),w=this.rankMap.get(y.join(","));if(w!=null){i.push(w);continue}i.push(...g8(y,this.rankMap))}if(c==null)break;let m=this.specialTokens[c[0]];i.push(m),l=c.index+c[0].length}return i}decode(t){const e=[];let n=0;for(let i=0;i<t.length;++i){const a=t[i],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let s=0;for(const i of e)r.set(i,s),s+=i.length;return this.textDecoder.decode(r)}},WR=qy;f8(WR,"specialTokenRegex",t=>new RegExp(t.map(e=>y8(e)).join("|"),"g"));function v8(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var w8={};De(w8,{encodingForModel:()=>Dw,getEncoding:()=>qR});const dd={},x8=new Zc({});async function qR(t){return t in dd||(dd[t]=x8.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new WR(e)).catch(e=>{throw delete dd[t],e})),await dd[t]}async function Dw(t){return qR(v8(t))}var _8={};De(_8,{BaseLangChain:()=>Lw,BaseLanguageModel:()=>Fw,calculateMaxTokens:()=>S8,getEmbeddingContextSize:()=>b8,getModelContextSize:()=>KR,getModelNameForTiktoken:()=>Ym,isOpenAITool:()=>Mw});const Ym=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t,b8=t=>{switch(t){case"text-embedding-ada-002":return 8191;default:return 2046}},KR=t=>{switch(Ym(t)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function Mw(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const S8=async({prompt:t,modelName:e})=>{let n;try{n=(await Dw(Ym(e))).encode(t).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(t.length/4)}return KR(e)-n},k8=()=>!1;var Lw=class extends vt{constructor(e){super(e);T(this,"verbose");T(this,"callbacks");T(this,"tags");T(this,"metadata");this.verbose=e.verbose??k8(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},Fw=class extends Lw{constructor({callbacks:e,callbackManager:n,...r}){const{cache:s,...i}=r;super({callbacks:e??n,...i});T(this,"caller");T(this,"cache");T(this,"_encoding");typeof s=="object"?this.cache=s:s?this.cache=GR.global():this.cache=void 0,this.caller=new Zc(r??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(s=>typeof s=="string"?s:s.type==="text"&&"text"in s?s.text:"").join("");let r=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await Dw("modelName"in this?Ym(this.modelName):"gpt2")}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}if(this._encoding)try{r=this._encoding.encode(n).length}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new LR(e):Array.isArray(e)?new FR(e.map(Bl)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,o])=>o!==void 0).map(([a,o])=>`${a}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}},Ao=class extends vt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const r=Ue(n);return this.func&&await this.func(e,r),this._callWithConfig(s=>Promise.resolve(s),e,r)}async*transform(e,n){const r=Ue(n);let s,i=!0;for await(const a of this._transformStreamWithConfig(e,o=>o,r))if(yield a,i)if(s===void 0)s=a;else try{s=yi(s,a)}catch{s=void 0,i=!1}this.func&&s!==void 0&&await this.func(s,r)}static assign(e){return new Iw(new Uo({steps:e}))}};const T8=t=>t();function Lp(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}var A8={};De(A8,{BaseChatModel:()=>Uw,SimpleChatModel:()=>E8});function Fp(t){const e=[];for(const n of t){let r=n;if(Array.isArray(n.content))for(let s=0;s<n.content.length;s++){const i=n.content[s];(Wv(i)||qv(i))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,s),CN(i),...n.content.slice(s+1)]}))}e.push(r)}return e}var Uw=class Ui extends Fw{constructor(n){super(n);T(this,"lc_namespace",["langchain","chat_models",this._llmType()]);T(this,"disableStreaming",!1);T(this,"outputVersion");this.outputVersion=T8(()=>{const r=n.outputVersion??Kr("LC_OUTPUT_VERSION");return r&&["v0","v1"].includes(r)?r:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[r,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=r.signal,[r,s]}async invoke(n,r){const s=Ui._convertInputToPromptValue(n);return(await this.generatePrompt([s],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,r,s){throw new Error("Not implemented.")}async*_streamIterator(n,r){var s;if(this._streamResponseChunks===Ui.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,r);else{const a=Ui._convertInputToPromptValue(n).toChatMessages(),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(r),c={...o.metadata,...this.getLsParams(l)},d=await En.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},m=l.outputVersion??this.outputVersion,f=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[Fp(a)],o.runId,void 0,h,void 0,void 0,o.runName));let y,w;try{for await(const x of this._streamResponseChunks(a,l,f==null?void 0:f[0])){if(x.message.id==null){const v=(s=f==null?void 0:f.at(0))==null?void 0:s.runId;v!=null&&x.message._updateId(`run-${v}`)}x.message.response_metadata={...x.generationInfo,...x.message.response_metadata},m==="v1"?yield Lp(x.message):yield x.message,y?y=y.concat(x):y=x,wy(x.message)&&x.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}}catch(x){throw await Promise.all((f??[]).map(v=>v==null?void 0:v.handleLLMError(x))),x}await Promise.all((f??[]).map(x=>x==null?void 0:x.handleLLMEnd({generations:[[y]],llmOutput:w})))}}getLsParams(n){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:r}}async _generateUncached(n,r,s,i){var f,y;const a=n.map(w=>w.map(Bl));let o;if(i!==void 0&&i.length===a.length)o=i;else{const w={...s.metadata,...this.getLsParams(r)},x=await En.configure(s.callbacks,this.callbacks,s.tags,this.tags,w,this.metadata,{verbose:this.verbose}),v={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1};o=await(x==null?void 0:x.handleChatModelStart(this.toJSON(),a.map(Fp),s.runId,void 0,v,void 0,void 0,s.runName))}const l=r.outputVersion??this.outputVersion,c=[],d=[];if(!!(o!=null&&o[0].handlers.find(aw))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==Ui.prototype._streamResponseChunks)try{const w=await this._streamResponseChunks(a[0],r,o==null?void 0:o[0]);let x,v;for await(const p of w){if(p.message.id==null){const g=(f=o==null?void 0:o.at(0))==null?void 0:f.runId;g!=null&&p.message._updateId(`run-${g}`)}x===void 0?x=p:x=yi(x,p),wy(p.message)&&p.message.usage_metadata!==void 0&&(v={tokenUsage:{promptTokens:p.message.usage_metadata.input_tokens,completionTokens:p.message.usage_metadata.output_tokens,totalTokens:p.message.usage_metadata.total_tokens}})}if(x===void 0)throw new Error("Received empty response from chat model call.");c.push([x]),await(o==null?void 0:o[0].handleLLMEnd({generations:c,llmOutput:v}))}catch(w){throw await(o==null?void 0:o[0].handleLLMError(w)),w}else{const w=await Promise.allSettled(a.map(async(x,v)=>{const p=await this._generate(x,{...r,promptIndex:v},o==null?void 0:o[v]);if(l==="v1")for(const g of p.generations)g.message=Lp(g.message);return p}));await Promise.all(w.map(async(x,v)=>{var p,g,_;if(x.status==="fulfilled"){const k=x.value;for(const E of k.generations){if(E.message.id==null){const C=(p=o==null?void 0:o.at(0))==null?void 0:p.runId;C!=null&&E.message._updateId(`run-${C}`)}E.message.response_metadata={...E.generationInfo,...E.message.response_metadata}}return k.generations.length===1&&(k.generations[0].message.response_metadata={...k.llmOutput,...k.generations[0].message.response_metadata}),c[v]=k.generations,d[v]=k.llmOutput,(g=o==null?void 0:o[v])==null?void 0:g.handleLLMEnd({generations:[k.generations],llmOutput:k.llmOutput})}else return await((_=o==null?void 0:o[v])==null?void 0:_.handleLLMError(x.reason)),Promise.reject(x.reason)}))}const m={generations:c,llmOutput:d.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...d):void 0};return Object.defineProperty(m,Tc,{value:o?{runIds:o==null?void 0:o.map(w=>w.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:n,cache:r,llmStringKey:s,parsedOptions:i,handledOptions:a}){const o=n.map(p=>p.map(Bl)),l={...a.metadata,...this.getLsParams(i)},c=await En.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),d={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},h=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),o.map(Fp),a.runId,void 0,d,void 0,void 0,a.runName)),m=[],y=(await Promise.allSettled(o.map(async(p,g)=>{const _=Ui._convertInputToPromptValue(p).toString(),k=await r.lookup(_,s);return k==null&&m.push(g),k}))).map((p,g)=>({result:p,runManager:h==null?void 0:h[g]})).filter(({result:p})=>p.status==="fulfilled"&&p.value!=null||p.status==="rejected"),w=i.outputVersion??this.outputVersion,x=[];await Promise.all(y.map(async({result:p,runManager:g},_)=>{if(p.status==="fulfilled"){const k=p.value;return x[_]=k.map(E=>("message"in E&&Qs(E.message)&&Cm(E.message)&&(E.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},w==="v1"&&(E.message=Lp(E.message))),E.generationInfo={...E.generationInfo,tokenUsage:{}},E)),k.length&&await(g==null?void 0:g.handleLLMNewToken(k[0].text)),g==null?void 0:g.handleLLMEnd({generations:[k]},void 0,void 0,void 0,{cached:!0})}else return await(g==null?void 0:g.handleLLMError(p.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(p.reason)}));const v={generations:x,missingPromptIndices:m,startedRunManagers:h};return Object.defineProperty(v,Tc,{value:h?{runIds:h==null?void 0:h.map(p=>p.runId)}:void 0,configurable:!0}),v}async generate(n,r,s){let i;Array.isArray(r)?i={stop:r}:i=r;const a=n.map(w=>w.map(Bl)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??s,!this.cache)return this._generateUncached(a,l,o);const{cache:c}=this,d=this._getSerializedCacheKeyParametersForCall(l),{generations:h,missingPromptIndices:m,startedRunManagers:f}=await this._generateCached({messages:a,cache:c,llmStringKey:d,parsedOptions:l,handledOptions:o});let y={};if(m.length>0){const w=await this._generateUncached(m.map(x=>a[x]),l,o,f!==void 0?m.map(x=>f==null?void 0:f[x]):void 0);await Promise.all(w.generations.map(async(x,v)=>{const p=m[v];h[p]=x;const g=Ui._convertInputToPromptValue(a[p]).toString();return c.update(g,d,x)})),y=w.llmOutput??{}}return{generations:h,llmOutput:y}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,r,s){const i=n.map(a=>a.toChatMessages());return this.generate(i,r,s)}withStructuredOutput(n,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r!=null&&r.strict)throw new Error('"strict" mode is not supported for this model by default.');const s=n,i=r==null?void 0:r.name,a=Gm(s)??"A function available to call.",o=r==null?void 0:r.method,l=r==null?void 0:r.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=i??"extract",d;zr(s)?d=[{type:"function",function:{name:c,description:a,parameters:Br(s)}}]:("name"in s&&(c=s.name),d=[{type:"function",function:{name:c,description:a,parameters:s}}]);const h=this.bindTools(d),m=Os.from(x=>{if(!ts.isInstance(x))throw new Error("Input is not an AIMessageChunk.");if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");const v=x.tool_calls.find(p=>p.name===c);if(!v)throw new Error(`No tool call found with name ${c}.`);return v.args});if(!l)return h.pipe(m).withConfig({runName:"StructuredOutput"});const f=Ao.assign({parsed:(x,v)=>m.invoke(x.raw,v)}),y=Ao.assign({parsed:()=>null}),w=f.withFallbacks({fallbacks:[y]});return Fo.from([{raw:h},w]).withConfig({runName:"StructuredOutputRunnable"})}},E8=class extends Uw{async _generate(t,e,n){const r=await this._call(t,e,n),s=new Cn(r);if(typeof s.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:s.content,message:s}]}}},C8=class extends vt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"runnables");this.runnables=e.runnables}static lc_name(){return"RouterRunnable"}async invoke(e,n){const{key:r,input:s}=e,i=this.runnables[r];if(i===void 0)throw new Error(`No runnable associated with key "${r}".`);return i.invoke(s,Ue(n))}async batch(e,n,r){var m;const s=e.map(f=>f.key),i=e.map(f=>f.input);if(s.find(f=>this.runnables[f]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const o=s.map(f=>this.runnables[f]),l=this._getOptionsList(n??{},e.length),c=((m=l[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),d=c&&c>0?c:e.length,h=[];for(let f=0;f<i.length;f+=d){const y=i.slice(f,f+d).map((x,v)=>o[v].invoke(x,l[v])),w=await Promise.all(y);h.push(w)}return h.flat()}async stream(e,n){const{key:r,input:s}=e,i=this.runnables[r];if(i===void 0)throw new Error(`No runnable associated with key "${r}".`);return i.stream(s,n)}},N8=class extends vt{constructor(e){super(e);T(this,"lc_namespace",["langchain_core","runnables"]);T(this,"lc_serializable",!0);T(this,"default");T(this,"branches");this.branches=e.branches,this.default=e.default}static lc_name(){return"RunnableBranch"}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");const r=e.slice(0,-1).map(([i,a])=>[_r(i),_r(a)]),s=_r(e[e.length-1]);return new this({branches:r,default:s})}async _invoke(e,n,r){let s;for(let i=0;i<this.branches.length;i+=1){const[a,o]=this.branches[i];if(await a.invoke(e,nt(n,{callbacks:r==null?void 0:r.getChild(`condition:${i+1}`)}))){s=await o.invoke(e,nt(n,{callbacks:r==null?void 0:r.getChild(`branch:${i+1}`)}));break}}return s||(s=await this.default.invoke(e,nt(n,{callbacks:r==null?void 0:r.getChild("branch:default")}))),s}async invoke(e,n={}){return this._callWithConfig(this._invoke,e,n)}async*_streamIterator(e,n){const r=await Mn(n),s=await(r==null?void 0:r.handleChainStart(this.toJSON(),jt(e,"input"),n==null?void 0:n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));let i,a=!0,o;try{for(let l=0;l<this.branches.length;l+=1){const[c,d]=this.branches[l];if(await c.invoke(e,nt(n,{callbacks:s==null?void 0:s.getChild(`condition:${l+1}`)}))){o=await d.stream(e,nt(n,{callbacks:s==null?void 0:s.getChild(`branch:${l+1}`)}));for await(const m of o)if(yield m,a)if(i===void 0)i=m;else try{i=yi(i,m)}catch{i=void 0,a=!1}break}}if(o===void 0){o=await this.default.stream(e,nt(n,{callbacks:s==null?void 0:s.getChild("branch:default")}));for await(const l of o)if(yield l,a)if(i===void 0)i=l;else try{i=yi(i,l)}catch{i=void 0,a=!1}}}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}await(s==null?void 0:s.handleChainEnd(i??{}))}},I8=class extends To{constructor(e){let n=Os.from((a,o)=>this._enterHistory(a,o??{})).withConfig({runName:"loadHistory"});const r=e.historyMessagesKey??e.inputMessagesKey;r&&(n=Ao.assign({[r]:n}).withConfig({runName:"insertHistory"}));const s=n.pipe(e.runnable.withListeners({onEnd:(a,o)=>this._exitHistory(a,o??{})})).withConfig({runName:"RunnableWithMessageHistory"}),i=e.config??{};super({...e,config:i,bound:s});T(this,"runnable");T(this,"inputMessagesKey");T(this,"outputMessagesKey");T(this,"historyMessagesKey");T(this,"getMessageHistory");this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let n;if(typeof e=="object"&&!Array.isArray(e)&&!Qs(e)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="input",Array.isArray(e[r])&&Array.isArray(e[r][0])?n=e[r][0]:n=e[r]}else n=e;if(typeof n=="string")return[new ns(n)];if(Array.isArray(n))return n;if(Qs(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(n,null,2)}`)}_getOutputMessages(e){let n;if(!Array.isArray(e)&&!Qs(e)&&typeof e!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="output",e.generations!==void 0?n=e.generations[0][0].message:n=e[r]}else n=e;if(typeof n=="string")return[new Cn(n)];if(Array.isArray(n))return n;if(Qs(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(n,null,2)}`)}async _enterHistory(e,n){var i;const s=await((i=n==null?void 0:n.configurable)==null?void 0:i.messageHistory).getMessages();return this.historyMessagesKey===void 0?s.concat(this._getInputMessages(e)):s}async _exitHistory(e,n){var l;const r=(l=n.configurable)==null?void 0:l.messageHistory;let s;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?s=e.inputs[0]:s=e.inputs;let i=this._getInputMessages(s);if(this.historyMessagesKey===void 0){const c=await r.getMessages();i=i.slice(c.length)}const a=e.outputs;if(!a)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const o=this._getOutputMessages(a);await r.addMessages([...i,...o])}async _mergeConfig(...e){const n=await super._mergeConfig(...e);if(!n.configurable||!n.configurable.sessionId){const s={[this.inputMessagesKey??"input"]:"foo"},i={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(s)}, ${JSON.stringify(i)})`)}const{sessionId:r}=n.configurable;return n.configurable.messageHistory=await this.getMessageHistory(r),n}},R8={};De(R8,{RouterRunnable:()=>C8,Runnable:()=>vt,RunnableAssign:()=>Iw,RunnableBinding:()=>To,RunnableBranch:()=>N8,RunnableEach:()=>bV,RunnableLambda:()=>Os,RunnableMap:()=>Uo,RunnableParallel:()=>TV,RunnablePassthrough:()=>Ao,RunnablePick:()=>AR,RunnableRetry:()=>Nw,RunnableSequence:()=>Fo,RunnableToolLike:()=>Vy,RunnableWithFallbacks:()=>TR,RunnableWithMessageHistory:()=>I8,_coerceToRunnable:()=>_r,ensureConfig:()=>Ue,getCallbackManagerForConfig:()=>Mn,mergeConfigs:()=>Ph,patchConfig:()=>nt,pickRunnableConfigKeys:()=>Cs,raceWithSignal:()=>Ns});var ZR=class extends vt{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,r)=>this.parseResult([{text:n}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,r)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"})}},Jm=class extends ZR{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},ws=class extends Error{constructor(e,n,r,s=!1){super(e);T(this,"llmOutput");T(this,"observation");T(this,"sendToLLM");if(this.llmOutput=n,this.observation=r,this.sendToLLM=s,s&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");KN(this,"OUTPUT_PARSING_FAILURE")}},Xc=class extends Jm{async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},Xm=class extends Xc{constructor(e){super(e);T(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let i;if(Xv(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");i=new xo({message:s,text:s.content})}else if(Qs(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");i=new xo({message:Ih(s),text:s.content})}else i=new wo({text:s});r===void 0?r=i:r=r.concat(i);const a=await this.parsePartialResult([r]);a!=null&&!na(a,n)&&(this.diff?yield this._diff(n,a):yield a,n=a)}}getFormatInstructions(){return""}},j8={};De(j8,{applyPatch:()=>vo,compare:()=>_w});var Ky=class extends Xm{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers"]);T(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?_w(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return vy(e[0].text)}async parse(e){return vy(e,JSON.parse)}getFormatInstructions(){return""}},P8=class extends Xc{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","bytes"]);T(this,"lc_serializable",!0);T(this,"textEncoder",new TextEncoder)}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},Qc=class extends Xc{constructor(){super(...arguments);T(this,"re")}async*_transform(e){let n="";for await(const r of e)if(typeof r=="string"?n+=r:n+=r.content,this.re){const s=[...n.matchAll(this.re)];if(s.length>1){let i=0;for(const a of s.slice(0,-1))yield[a[1]],i+=(a.index??0)+a[0].length;n=n.slice(i)}}else{const s=await this.parse(n);if(s.length>1){for(const i of s.slice(0,-1))yield[i];n=s[s.length-1]}}for(const r of await this.parse(n))yield[r]}},O8=class extends Qc{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0)}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(n=>n.trim())}catch{throw new ws(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},$8=class extends Qc{constructor({length:e,separator:n}){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"length");T(this,"separator");this.length=e,this.separator=n||","}async parse(e){try{const n=e.trim().split(this.separator).map(r=>r.trim());if(this.length!==void 0&&n.length!==this.length)throw new ws(`Incorrect number of items. Expected ${this.length}, got ${n.length}.`);return n}catch(n){throw Object.getPrototypeOf(n)===ws.prototype?n:new ws(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},D8=class extends Qc{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0);T(this,"re",/\d+\.\s([^\n]+)/g)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},M8=class extends Qc{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","list"]);T(this,"lc_serializable",!0);T(this,"re",/^\s*[-*]\s([^\n]+)$/gm)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},YR=class extends Xc{constructor(){super(...arguments);T(this,"lc_namespace",["langchain_core","output_parsers","string"]);T(this,"lc_serializable",!0)}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((n,r)=>n+this._messageContentToString(r),"")}},Kh=class extends Jm{constructor(e){super(e);T(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=e}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Wm(Object.fromEntries(Object.entries(e).map(([r,s])=>[r,Hm().describe(s)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Br(this.schema))}
\`\`\`
`}async parse(e){var n,r;try{const s=e.trim(),a=(((n=s.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:n[1])||((r=s.match(/```json\s*([\s\S]*?)```/))==null?void 0:r[1])||s).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,l)=>`"${l.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Bm(this.schema,JSON.parse(a))}catch(s){throw new ws(`Failed to parse. Text: "${e}". Error: ${s}`,e)}}},JR=class extends Kh{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(t){const e=(t==null?void 0:t.interpolationDepth)??1;if(e<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Br(this.schema)).replaceAll("{","{".repeat(e)).replaceAll("}","}".repeat(e))}
\`\`\``}_schemaToInstruction(t,e=2){const n=t;if("type"in n){let r=!1,s;if(Array.isArray(n.type)){const o=n.type.findIndex(l=>l==="null");o!==-1&&(r=!0,n.type.splice(o,1)),s=n.type.join(" | ")}else s=n.type;if(n.type==="object"&&n.properties){const o=n.description?` // ${n.description}`:"";return`{
${Object.entries(n.properties).map(([c,d])=>{var m;const h=(m=n.required)!=null&&m.includes(c)?"":" (optional)";return`${" ".repeat(e)}"${c}": ${this._schemaToInstruction(d,e+2)}${h}`}).join(`
`)}
${" ".repeat(e-2)}}${o}`}if(n.type==="array"&&n.items){const o=n.description?` // ${n.description}`:"";return`array[
${" ".repeat(e)}${this._schemaToInstruction(n.items,e+2)}
${" ".repeat(e-2)}] ${o}`}const i=r?" (nullable)":"",a=n.description?` // ${n.description}`:"";return`${s}${a}${i}`}if("anyOf"in n)return n.anyOf.map(r=>this._schemaToInstruction(r,e)).join(`
${" ".repeat(e-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){const e=Wm(Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Hm().describe(r)])));return new this(e)}},L8=class extends Jm{constructor({inputSchema:e}){super(...arguments);T(this,"structuredInputParser");this.structuredInputParser=new JR(e)}async parse(e){let n;try{n=await this.structuredInputParser.parse(e)}catch(r){throw new ws(`Failed to parse. Text: "${e}". Error: ${r}`,e)}return this.outputProcessor(n)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};const F8=function(){const t={};t.parser=function(A,S){return new n(A,S)},t.SAXParser=n,t.SAXStream=c,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(A,S){if(!(this instanceof n))return new n(A,S);var F=this;s(F),F.q=F.c="",F.bufferCheckPosition=t.MAX_BUFFER_LENGTH,F.opt=S||{},F.opt.lowercase=F.opt.lowercase||F.opt.lowercasetags,F.looseCase=F.opt.lowercase?"toLowerCase":"toUpperCase",F.tags=[],F.closed=F.closedRoot=F.sawRoot=!1,F.tag=F.error=null,F.strict=!!A,F.noscript=!!(A||F.opt.noscript),F.state=b.BEGIN,F.strictEntities=F.opt.strictEntities,F.ENTITIES=F.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),F.attribList=[],F.opt.xmlns&&(F.ns=Object.create(y)),F.trackPosition=F.opt.position!==!1,F.trackPosition&&(F.position=F.line=F.column=0),$(F,"onready")}Object.create||(Object.create=function(A){function S(){}S.prototype=A;var F=new S;return F}),Object.keys||(Object.keys=function(A){var S=[];for(var F in A)A.hasOwnProperty(F)&&S.push(F);return S});function r(A){for(var S=Math.max(t.MAX_BUFFER_LENGTH,10),F=0,N=0,Ne=e.length;N<Ne;N++){var $e=A[e[N]].length;if($e>S)switch(e[N]){case"textNode":ge(A);break;case"cdata":L(A,"oncdata",A.cdata),A.cdata="";break;case"script":L(A,"onscript",A.script),A.script="";break;default:K(A,"Max buffer length exceeded: "+e[N])}F=Math.max(F,$e)}var Ve=t.MAX_BUFFER_LENGTH-F;A.bufferCheckPosition=Ve+A.position}function s(A){for(var S=0,F=e.length;S<F;S++)A[e[S]]=""}function i(A){ge(A),A.cdata!==""&&(L(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(L(A,"onscript",A.script),A.script="")}n.prototype={end:function(){B(this)},write:Ie,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){i(this)}};var a=ReadableStream;a||(a=function(){});var o=t.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function l(A,S){return new c(A,S)}function c(A,S){if(!(this instanceof c))return new c(A,S);a.apply(this),this._parser=new n(A,S),this.writable=!0,this.readable=!0;var F=this;this._parser.onend=function(){F.emit("end")},this._parser.onerror=function(N){F.emit("error",N),F._parser.error=null},this._decoder=null,o.forEach(function(N){Object.defineProperty(F,"on"+N,{get:function(){return F._parser["on"+N]},set:function(Ne){if(!Ne)return F.removeAllListeners(N),F._parser["on"+N]=Ne,Ne;F.on(N,Ne)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(A){return this._parser.write(A.toString()),this.emit("data",A),!0},c.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},c.prototype.on=function(A,S){var F=this;return!F._parser["on"+A]&&o.indexOf(A)!==-1&&(F._parser["on"+A]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,A),F.emit.apply(F,N)}),a.prototype.on.call(F,A,S)};var d="[CDATA[",h="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:f},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(A){return A===" "||A===`
`||A==="\r"||A==="	"}function _(A){return A==='"'||A==="'"}function k(A){return A===">"||g(A)}function E(A,S){return A.test(S)}function C(A,S){return!E(A,S)}var b=0;t.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(A){var S=t.ENTITIES[A],F=typeof S=="number"?String.fromCharCode(S):S;t.ENTITIES[A]=F});for(var O in t.STATE)t.STATE[t.STATE[O]]=O;b=t.STATE;function $(A,S,F){A[S]&&A[S](F)}function L(A,S,F){A.textNode&&ge(A),$(A,S,F)}function ge(A){A.textNode=ot(A.opt,A.textNode),A.textNode&&$(A,"ontext",A.textNode),A.textNode=""}function ot(A,S){return A.trim&&(S=S.trim()),A.normalize&&(S=S.replace(/\s+/g," ")),S}function K(A,S){return ge(A),A.trackPosition&&(S+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),S=new Error(S),A.error=S,$(A,"onerror",S),A}function B(A){return A.sawRoot&&!A.closedRoot&&G(A,"Unclosed root tag"),A.state!==b.BEGIN&&A.state!==b.BEGIN_WHITESPACE&&A.state!==b.TEXT&&K(A,"Unexpected end"),ge(A),A.c="",A.closed=!0,$(A,"onend"),n.call(A,A.strict,A.opt),A}function G(A,S){if(typeof A!="object"||!(A instanceof n))throw new Error("bad call to strictFail");A.strict&&K(A,S)}function q(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var S=A.tags[A.tags.length-1]||A,F=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(F.ns=S.ns),A.attribList.length=0,L(A,"onopentagstart",F)}function j(A,S){var F=A.indexOf(":"),N=F<0?["",A]:A.split(":"),Ne=N[0],$e=N[1];return S&&A==="xmlns"&&(Ne="xmlns",$e=""),{prefix:Ne,local:$e}}function M(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var S=j(A.attribName,!0),F=S.prefix,N=S.local;if(F==="xmlns")if(N==="xml"&&A.attribValue!==m)G(A,"xml: prefix must be bound to "+m+`
Actual: `+A.attribValue);else if(N==="xmlns"&&A.attribValue!==f)G(A,"xmlns: prefix must be bound to "+f+`
Actual: `+A.attribValue);else{var Ne=A.tag,$e=A.tags[A.tags.length-1]||A;Ne.ns===$e.ns&&(Ne.ns=Object.create($e.ns)),Ne.ns[N]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,L(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function U(A,S){if(A.opt.xmlns){var F=A.tag,N=j(A.tagName);F.prefix=N.prefix,F.local=N.local,F.uri=F.ns[N.prefix]||"",F.prefix&&!F.uri&&(G(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),F.uri=N.prefix);var Ne=A.tags[A.tags.length-1]||A;F.ns&&Ne.ns!==F.ns&&Object.keys(F.ns).forEach(function(ss){L(A,"onopennamespace",{prefix:ss,uri:F.ns[ss]})});for(var $e=0,Ve=A.attribList.length;$e<Ve;$e++){var Qe=A.attribList[$e],wt=Qe[0],At=Qe[1],Je=j(wt,!0),Ft=Je.prefix,$s=Je.local,rs=Ft===""?"":F.ns[Ft]||"",Y={name:wt,value:At,prefix:Ft,local:$s,uri:rs};Ft&&Ft!=="xmlns"&&!rs&&(G(A,"Unbound namespace prefix: "+JSON.stringify(Ft)),Y.uri=Ft),A.tag.attributes[wt]=Y,L(A,"onattribute",Y)}A.attribList.length=0}A.tag.isSelfClosing=!!S,A.sawRoot=!0,A.tags.push(A.tag),L(A,"onopentag",A.tag),S||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=b.SCRIPT:A.state=b.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function ie(A){if(!A.tagName){G(A,"Weird empty close tag."),A.textNode+="</>",A.state=b.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=b.SCRIPT;return}L(A,"onscript",A.script),A.script=""}var S=A.tags.length,F=A.tagName;A.strict||(F=F[A.looseCase]());for(var N=F;S--;){var Ne=A.tags[S];if(Ne.name!==N)G(A,"Unexpected close tag");else break}if(S<0){G(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=b.TEXT;return}A.tagName=F;for(var $e=A.tags.length;$e-- >S;){var Ve=A.tag=A.tags.pop();A.tagName=A.tag.name,L(A,"onclosetag",A.tagName);var Qe={};for(var wt in Ve.ns)Qe[wt]=Ve.ns[wt];var At=A.tags[A.tags.length-1]||A;A.opt.xmlns&&Ve.ns!==At.ns&&Object.keys(Ve.ns).forEach(function(Je){var Ft=Ve.ns[Je];L(A,"onclosenamespace",{prefix:Je,uri:Ft})})}S===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=b.TEXT}function ee(A){var S=A.entity,F=S.toLowerCase(),N,Ne="";return A.ENTITIES[S]?A.ENTITIES[S]:A.ENTITIES[F]?A.ENTITIES[F]:(S=F,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),N=parseInt(S,16),Ne=N.toString(16)):(S=S.slice(1),N=parseInt(S,10),Ne=N.toString(10))),S=S.replace(/^0+/,""),isNaN(N)||Ne.toLowerCase()!==S?(G(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(N))}function Ae(A,S){S==="<"?(A.state=b.OPEN_WAKA,A.startTagPosition=A.position):g(S)||(G(A,"Non-whitespace before first tag."),A.textNode=S,A.state=b.TEXT)}function Ge(A,S){var F="";return S<A.length&&(F=A.charAt(S)),F}function Ie(A){var S=this;if(this.error)throw this.error;if(S.closed)return K(S,"Cannot write after close. Assign an onready handler.");if(A===null)return B(S);typeof A=="object"&&(A=A.toString());for(var F=0,N="";N=Ge(A,F++),S.c=N,!!N;)switch(S.trackPosition&&(S.position++,N===`
`?(S.line++,S.column=0):S.column++),S.state){case b.BEGIN:if(S.state=b.BEGIN_WHITESPACE,N==="\uFEFF")continue;Ae(S,N);continue;case b.BEGIN_WHITESPACE:Ae(S,N);continue;case b.TEXT:if(S.sawRoot&&!S.closedRoot){for(var Ne=F-1;N&&N!=="<"&&N!=="&";)N=Ge(A,F++),N&&S.trackPosition&&(S.position++,N===`
`?(S.line++,S.column=0):S.column++);S.textNode+=A.substring(Ne,F-1)}N==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=b.OPEN_WAKA,S.startTagPosition=S.position):(!g(N)&&(!S.sawRoot||S.closedRoot)&&G(S,"Text data outside of root node."),N==="&"?S.state=b.TEXT_ENTITY:S.textNode+=N);continue;case b.SCRIPT:N==="<"?S.state=b.SCRIPT_ENDING:S.script+=N;continue;case b.SCRIPT_ENDING:N==="/"?S.state=b.CLOSE_TAG:(S.script+="<"+N,S.state=b.SCRIPT);continue;case b.OPEN_WAKA:if(N==="!")S.state=b.SGML_DECL,S.sgmlDecl="";else if(!g(N))if(E(w,N))S.state=b.OPEN_TAG,S.tagName=N;else if(N==="/")S.state=b.CLOSE_TAG,S.tagName="";else if(N==="?")S.state=b.PROC_INST,S.procInstName=S.procInstBody="";else{if(G(S,"Unencoded <"),S.startTagPosition+1<S.position){var $e=S.position-S.startTagPosition;N=new Array($e).join(" ")+N}S.textNode+="<"+N,S.state=b.TEXT}continue;case b.SGML_DECL:(S.sgmlDecl+N).toUpperCase()===d?(L(S,"onopencdata"),S.state=b.CDATA,S.sgmlDecl="",S.cdata=""):S.sgmlDecl+N==="--"?(S.state=b.COMMENT,S.comment="",S.sgmlDecl=""):(S.sgmlDecl+N).toUpperCase()===h?(S.state=b.DOCTYPE,(S.doctype||S.sawRoot)&&G(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):N===">"?(L(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=b.TEXT):(_(N)&&(S.state=b.SGML_DECL_QUOTED),S.sgmlDecl+=N);continue;case b.SGML_DECL_QUOTED:N===S.q&&(S.state=b.SGML_DECL,S.q=""),S.sgmlDecl+=N;continue;case b.DOCTYPE:N===">"?(S.state=b.TEXT,L(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=N,N==="["?S.state=b.DOCTYPE_DTD:_(N)&&(S.state=b.DOCTYPE_QUOTED,S.q=N));continue;case b.DOCTYPE_QUOTED:S.doctype+=N,N===S.q&&(S.q="",S.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:S.doctype+=N,N==="]"?S.state=b.DOCTYPE:_(N)&&(S.state=b.DOCTYPE_DTD_QUOTED,S.q=N);continue;case b.DOCTYPE_DTD_QUOTED:S.doctype+=N,N===S.q&&(S.state=b.DOCTYPE_DTD,S.q="");continue;case b.COMMENT:N==="-"?S.state=b.COMMENT_ENDING:S.comment+=N;continue;case b.COMMENT_ENDING:N==="-"?(S.state=b.COMMENT_ENDED,S.comment=ot(S.opt,S.comment),S.comment&&L(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+N,S.state=b.COMMENT);continue;case b.COMMENT_ENDED:N!==">"?(G(S,"Malformed comment"),S.comment+="--"+N,S.state=b.COMMENT):S.state=b.TEXT;continue;case b.CDATA:N==="]"?S.state=b.CDATA_ENDING:S.cdata+=N;continue;case b.CDATA_ENDING:N==="]"?S.state=b.CDATA_ENDING_2:(S.cdata+="]"+N,S.state=b.CDATA);continue;case b.CDATA_ENDING_2:N===">"?(S.cdata&&L(S,"oncdata",S.cdata),L(S,"onclosecdata"),S.cdata="",S.state=b.TEXT):N==="]"?S.cdata+="]":(S.cdata+="]]"+N,S.state=b.CDATA);continue;case b.PROC_INST:N==="?"?S.state=b.PROC_INST_ENDING:g(N)?S.state=b.PROC_INST_BODY:S.procInstName+=N;continue;case b.PROC_INST_BODY:if(!S.procInstBody&&g(N))continue;N==="?"?S.state=b.PROC_INST_ENDING:S.procInstBody+=N;continue;case b.PROC_INST_ENDING:N===">"?(L(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=b.TEXT):(S.procInstBody+="?"+N,S.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:E(x,N)?S.tagName+=N:(q(S),N===">"?U(S):N==="/"?S.state=b.OPEN_TAG_SLASH:(g(N)||G(S,"Invalid character in tag name"),S.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:N===">"?(U(S,!0),ie(S)):(G(S,"Forward-slash in opening tag not followed by >"),S.state=b.ATTRIB);continue;case b.ATTRIB:if(g(N))continue;N===">"?U(S):N==="/"?S.state=b.OPEN_TAG_SLASH:E(w,N)?(S.attribName=N,S.attribValue="",S.state=b.ATTRIB_NAME):G(S,"Invalid attribute name");continue;case b.ATTRIB_NAME:N==="="?S.state=b.ATTRIB_VALUE:N===">"?(G(S,"Attribute without value"),S.attribValue=S.attribName,M(S),U(S)):g(N)?S.state=b.ATTRIB_NAME_SAW_WHITE:E(x,N)?S.attribName+=N:G(S,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if(N==="=")S.state=b.ATTRIB_VALUE;else{if(g(N))continue;G(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",L(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",N===">"?U(S):E(w,N)?(S.attribName=N,S.state=b.ATTRIB_NAME):(G(S,"Invalid attribute name"),S.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(g(N))continue;_(N)?(S.q=N,S.state=b.ATTRIB_VALUE_QUOTED):(G(S,"Unquoted attribute value"),S.state=b.ATTRIB_VALUE_UNQUOTED,S.attribValue=N);continue;case b.ATTRIB_VALUE_QUOTED:if(N!==S.q){N==="&"?S.state=b.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=N;continue}M(S),S.q="",S.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:g(N)?S.state=b.ATTRIB:N===">"?U(S):N==="/"?S.state=b.OPEN_TAG_SLASH:E(w,N)?(G(S,"No whitespace between attributes"),S.attribName=N,S.attribValue="",S.state=b.ATTRIB_NAME):G(S,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!k(N)){N==="&"?S.state=b.ATTRIB_VALUE_ENTITY_U:S.attribValue+=N;continue}M(S),N===">"?U(S):S.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(S.tagName)N===">"?ie(S):E(x,N)?S.tagName+=N:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=b.SCRIPT):(g(N)||G(S,"Invalid tagname in closing tag"),S.state=b.CLOSE_TAG_SAW_WHITE);else{if(g(N))continue;C(w,N)?S.script?(S.script+="</"+N,S.state=b.SCRIPT):G(S,"Invalid tagname in closing tag."):S.tagName=N}continue;case b.CLOSE_TAG_SAW_WHITE:if(g(N))continue;N===">"?ie(S):G(S,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var Ve,Qe;switch(S.state){case b.TEXT_ENTITY:Ve=b.TEXT,Qe="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:Ve=b.ATTRIB_VALUE_QUOTED,Qe="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:Ve=b.ATTRIB_VALUE_UNQUOTED,Qe="attribValue";break}if(N===";")if(S.opt.unparsedEntities){var wt=ee(S);S.entity="",S.state=Ve,S.write(wt)}else S[Qe]+=ee(S),S.entity="",S.state=Ve;else E(S.entity.length?p:v,N)?S.entity+=N:(G(S,"Invalid character in entity name"),S[Qe]+="&"+S.entity+N,S.entity="",S.state=Ve);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&r(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||function(){var A=String.fromCharCode,S=Math.floor,F=function(){var N=16384,Ne=[],$e,Ve,Qe=-1,wt=arguments.length;if(!wt)return"";for(var At="";++Qe<wt;){var Je=Number(arguments[Qe]);if(!isFinite(Je)||Je<0||Je>1114111||S(Je)!==Je)throw RangeError("Invalid code point: "+Je);Je<=65535?Ne.push(Je):(Je-=65536,$e=(Je>>10)+55296,Ve=Je%1024+56320,Ne.push($e,Ve)),(Qe+1===wt||Ne.length>N)&&(At+=A.apply(null,Ne),Ne.length=0)}return At};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:F,configurable:!0,writable:!0}):String.fromCodePoint=F}(),t},U8=F8(),Zy=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var z8=class extends Xm{constructor(e){super(e);T(this,"tags");T(this,"lc_namespace",["langchain_core","output_parsers"]);T(this,"lc_serializable",!0);this.tags=e==null?void 0:e.tags}static lc_name(){return"XMLOutputParser"}_diff(e,n){if(n)return e?_w(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return Yy(e[0].text)}async parse(e){return Yy(e)}getFormatInstructions(){var n;return!!(this.tags&&this.tags.length>0)?Zy.replace("{tags}",((n=this.tags)==null?void 0:n.join(", "))??""):Zy}};const B8=t=>t.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),XR=t=>{if(Object.keys(t).length===0)return{};const e={};return t.children.length>0?(e[t.name]=t.children.map(XR),e):(e[t.name]=t.text??void 0,e)};function Yy(t){const e=B8(t),n=U8.parser(!0);let r={};const s=[];n.onopentag=o=>{const l={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};s.length>0?s[s.length-1].children.push(l):r=l,o.isSelfClosing||s.push(l)},n.onclosetag=()=>{if(s.length>0){const o=s.pop();s.length===0&&o&&(r=o)}},n.ontext=o=>{if(s.length>0){const l=s[s.length-1];l.text+=o}},n.onattribute=o=>{if(s.length>0){const l=s[s.length-1];l.attributes[o.name]=o.value}};const i=/```(xml)?(.*)```/s.exec(e),a=i?i[2]:e;return n.write(a).close(),r&&r.name==="?xml"&&(r=r.children[0]),XR(r)}var G8={};De(G8,{AsymmetricStructuredOutputParser:()=>L8,BaseCumulativeTransformOutputParser:()=>Xm,BaseLLMOutputParser:()=>ZR,BaseOutputParser:()=>Jm,BaseTransformOutputParser:()=>Xc,BytesOutputParser:()=>P8,CommaSeparatedListOutputParser:()=>O8,CustomListOutputParser:()=>$8,JsonMarkdownStructuredOutputParser:()=>JR,JsonOutputParser:()=>Ky,ListOutputParser:()=>Qc,MarkdownListOutputParser:()=>M8,NumberedListOutputParser:()=>D8,OutputParserException:()=>ws,StringOutputParser:()=>YR,StructuredOutputParser:()=>Kh,XMLOutputParser:()=>z8,XML_FORMAT_INSTRUCTIONS:()=>Zy,parseJsonMarkdown:()=>vy,parsePartialJson:()=>Em,parseXMLMarkdown:()=>Yy});function Qm(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=Em(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(s){throw new ws([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${s.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function QR(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Zh(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var ej=class extends Xm{constructor(e){super(e);T(this,"returnId",!1);T(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);T(this,"lc_serializable",!0);this.returnId=(e==null?void 0:e.returnId)??this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var a;const r=e[0].message;let s;if(Cm(r)&&((a=r.tool_calls)!=null&&a.length)?s=r.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(s=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>Qm(l,{returnId:this.returnId,partial:n}))),!s)return[];const i=[];for(const o of s)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};i.push(l)}return i}},Jy=class extends ej{constructor(e){super(e);T(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);T(this,"lc_serializable",!0);T(this,"returnId",!1);T(this,"keyName");T(this,"returnSingle",!1);T(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const n=await iR(this.zodSchema,e);if(n.success)return n.data;throw new ws(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=n.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(i=>i.type===this.keyName);let s=r;if(r.length)return this.returnId||(s=r.map(i=>i.args)),this.returnSingle?s[0]:s}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let s=r;return r.length?(this.returnId||(s=r.map(a=>a.args)),this.returnSingle?this._validateResult(s[0]):await Promise.all(s.map(a=>this._validateResult(a)))):void 0}},V8={};De(V8,{JsonOutputKeyToolsParser:()=>Jy,JsonOutputToolsParser:()=>ej,convertLangChainToolCallToOpenAI:()=>QR,makeInvalidToolCall:()=>Zh,parseToolCall:()=>Qm});var zw=class extends Uw{constructor(e){var r,s,i,a;super(e??{});T(this,"temperature");T(this,"topP");T(this,"frequencyPenalty");T(this,"presencePenalty");T(this,"n");T(this,"logitBias");T(this,"model","gpt-3.5-turbo");T(this,"modelKwargs");T(this,"stop");T(this,"stopSequences");T(this,"user");T(this,"timeout");T(this,"streaming",!1);T(this,"streamUsage",!0);T(this,"maxTokens");T(this,"logprobs");T(this,"topLogprobs");T(this,"apiKey");T(this,"organization");T(this,"__includeRawResponse");T(this,"client");T(this,"clientConfig");T(this,"supportsStrictToolCalling");T(this,"audio");T(this,"modalities");T(this,"reasoning");T(this,"zdrEnabled");T(this,"service_tier");T(this,"promptCacheKey");T(this,"verbosity");T(this,"defaultOptions");T(this,"lc_serializable",!0);const n=typeof((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)=="string"||typeof((s=e==null?void 0:e.configuration)==null?void 0:s.apiKey)=="function"?(i=e==null?void 0:e.configuration)==null?void 0:i.apiKey:void 0;this.apiKey=(e==null?void 0:e.apiKey)??n??Kr("OPENAI_API_KEY"),this.organization=((a=e==null?void 0:e.configuration)==null?void 0:a.organization)??Kr("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=e==null?void 0:e.reasoning,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.disableStreaming=(e==null?void 0:e.disableStreaming)===!0,this.streaming=(e==null?void 0:e.streaming)===!0,this.disableStreaming&&(this.streaming=!1),(e==null?void 0:e.streaming)===!1&&(this.disableStreaming=!0),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","verbosity"]}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}_getReasoningParams(e){if(!Yc(this.model))return;let n;return this.reasoning!==void 0&&(n={...n,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(n={...n,...e.reasoning}),n}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&zr(e.json_schema.schema)?WH(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},s=MV(r),i={...this.clientConfig,baseURL:s,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,i.defaultHeaders=UV(i.defaultHeaders),this.client=new Ce(i)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,n){return Wh(e)?YV(e.metadata.customTool):Mw(e)?(n==null?void 0:n.strict)!==void 0?{...e,function:{...e.function,strict:n.strict}}:e:GV(e,n)}bindTools(e,n){let r;return(n==null?void 0:n.strict)!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(s=>$w(s)||Wh(s)?s:this._convertChatOpenAIToolToCompletionsTool(s,{strict:r})),...n})}async stream(e,n){return super.stream(e,this._combineCallOptions(n))}async invoke(e,n){return super.invoke(e,this._combineCallOptions(n))}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let n=0,r=0,s=0;this.model==="gpt-3.5-turbo-0301"?(r=4,s=-1):(r=3,s=1);const i=await Promise.all(e.map(async a=>{var m,f,y,w,x,v;const o=await this.getNumTokens(a.content),l=await this.getNumTokens(Jc(a)),c=a.name!==void 0?s+await this.getNumTokens(a.name):0;let d=o+r+l+c;const h=a;if(h._getType()==="function"&&(d-=2),(m=h.additional_kwargs)!=null&&m.function_call&&(d+=3),(f=h==null?void 0:h.additional_kwargs.function_call)!=null&&f.name&&(d+=await this.getNumTokens((y=h.additional_kwargs.function_call)==null?void 0:y.name)),(w=h.additional_kwargs.function_call)!=null&&w.arguments)try{d+=await this.getNumTokens(JSON.stringify(JSON.parse((x=h.additional_kwargs.function_call)==null?void 0:x.arguments)))}catch(p){console.error("Error parsing function arguments",p,JSON.stringify(h.additional_kwargs.function_call)),d+=await this.getNumTokens((v=h.additional_kwargs.function_call)==null?void 0:v.arguments)}return n+=d,d}));return n+=3,{totalCount:n,countPerMessage:i}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var s;return(s=r.message.additional_kwargs)!=null&&s.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,s)=>r+s,0)}async _getEstimatedTokenCountFromPrompt(e,n,r){let s=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const i=HV(n);s+=await this.getNumTokens(i),s+=9}return n&&e.find(i=>i._getType()==="system")&&(s-=4),r==="none"?s+=1:typeof r=="object"&&(s+=await this.getNumTokens(r.name)+4),s}get profile(){return ZH[this.model]??{}}_getStructuredOutputMethod(e){const n={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((n==null?void 0:n.method)===void 0)return"jsonSchema"}else n.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return n.method}withStructuredOutput(e,n){let r,s;const{schema:i,name:a,includeRaw:o}={...n,schema:e};if((n==null?void 0:n.strict)!==void 0&&n.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");const l=VH(this.model,n==null?void 0:n.method);if(l==="jsonMode"){zr(i)?s=Kh.fromZodSchema(i):s=new Ky;const m=Br(i);r=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:a??"extract",...m}}})}else if(l==="jsonSchema"){const m={name:a??"extract",description:Gm(i),schema:i,strict:n==null?void 0:n.strict},f=Br(m.schema);if(r=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:m},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:m.name,description:m.description,...f}}}),zr(i)){const y=Kh.fromZodSchema(i);s=Os.from(w=>"parsed"in w.additional_kwargs?w.additional_kwargs.parsed:y)}else s=new Ky}else{let m=a??"extract";if(zr(i)){const f=Br(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:m,description:f.description,parameters:f}}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...f}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),s=new Jy({returnSingle:!0,keyName:m,zodSchema:i})}else{let f;typeof i.name=="string"&&typeof i.parameters=="object"&&i.parameters!=null?(f=i,m=i.name):(m=i.title??m,f={name:m,description:i.description??"",parameters:i});const y=Br(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:f}],tool_choice:{type:"function",function:{name:m}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:m,...y}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),s=new Jy({returnSingle:!0,keyName:m})}}if(!o)return r.pipe(s);const c=Ao.assign({parsed:(m,f)=>s.invoke(m.raw,f)}),d=Ao.assign({parsed:()=>null}),h=c.withFallbacks({fallbacks:[d]});return Fo.from([{raw:r},h])}};const tj={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,n;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(n=t.metadata)!=null&&n.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=vc({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const n=e.mime_type||t.mime_type||"";let r;try{r=yy(n)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=yy(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,n,r,s,i,a,o,l,c,d;if(t.source_type==="url"){if(!vc({dataUrl:t.url}))throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(n=t.metadata)!=null&&n.name?{filename:((r=t.metadata)==null?void 0:r.filename)||((s=t.metadata)==null?void 0:s.name)}:{}}}}if(t.source_type==="base64")return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(i=t.metadata)!=null&&i.filename||(a=t.metadata)!=null&&a.name||(o=t.metadata)!=null&&o.title?{filename:((l=t.metadata)==null?void 0:l.filename)||((c=t.metadata)==null?void 0:c.name)||((d=t.metadata)==null?void 0:d.title)}:{}}};if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}},H8=({message:t,rawResponse:e,includeRawResponse:n})=>{var s,i;const r=t.tool_calls;switch(t.role){case"assistant":{const a=[],o=[];for(const h of r??[])try{a.push(Qm(h,{returnId:!0}))}catch(m){o.push(Zh(h,m.message))}const l={function_call:t.function_call,tool_calls:r};n!==void 0&&(l.__raw_response=e);const c={model_provider:"openai",model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};t.audio&&(l.audio=t.audio);const d=qH(t.content||"",(i=(s=e.choices)==null?void 0:s[0])==null?void 0:i.message);return new Cn({content:d,tool_calls:a,invalid_tool_calls:o,additional_kwargs:l,response_metadata:c,id:e.id})}default:return new pa(t.content||"",t.role??"unknown")}},W8=({delta:t,rawResponse:e,includeRawResponse:n,defaultRole:r})=>{var l,c;const s=t.role??r,i=t.content??"";let a;t.function_call?a={function_call:t.function_call}:t.tool_calls?a={tool_calls:t.tool_calls}:a={},n&&(a.__raw_response=e),t.audio&&(a.audio={...t.audio,index:e.choices[0].index});const o={model_provider:"openai",usage:{...e.usage}};if(s==="user")return new Hc({content:i,response_metadata:o});if(s==="assistant"){const d=[];if(Array.isArray(t.tool_calls))for(const h of t.tool_calls)d.push({name:(l=h.function)==null?void 0:l.name,args:(c=h.function)==null?void 0:c.arguments,id:h.id,index:h.index,type:"tool_call_chunk"});return new ts({content:i,tool_call_chunks:d,additional_kwargs:a,id:e.id,response_metadata:o})}else return s==="system"?new gi({content:i,response_metadata:o}):s==="developer"?new gi({content:i,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new Vc({content:i,additional_kwargs:a,name:t.name,response_metadata:o}):s==="tool"?new Bc({content:i,additional_kwargs:a,tool_call_id:t.tool_call_id,response_metadata:o}):new Gc({content:i,role:s,response_metadata:o})},q8=t=>{if(t.type==="image"){if(t.url)return{type:"image_url",image_url:{url:t.url}};if(t.data)return{type:"image_url",image_url:{url:`data:${t.mimeType};base64,${t.data}`}}}if(t.type==="audio"&&t.data){const e=ZN(()=>{const[,n]=t.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:t.data.toString(),format:e}}}if(t.type==="file"){if(t.data)return{type:"file",file:{file_data:t.data.toString()}};if(t.fileId)return{type:"file",file:{file_id:t.fileId}}}},K8=({message:t,model:e})=>{let n=Jc(t);if(n==="system"&&Yc(e)&&(n="developer"),n==="developer")return{role:"developer",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="system")return{role:"system",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="assistant")return{role:"assistant",content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="tool"&&Xr.isInstance(t))return{role:"tool",tool_call_id:t.tool_call_id,content:t.contentBlocks.filter(s=>s.type==="text")};if(n==="function")return{role:"function",name:t.name??"",content:t.contentBlocks.filter(s=>s.type==="text").join("")};function*r(s){for(const i of s){i.type==="text"&&(yield{type:"text",text:i.text});const a=q8(i);a&&(yield a)}}return{role:"user",content:Array.from(r(t.contentBlocks))}},Hk=({messages:t,model:e})=>t.flatMap(n=>{var a,o;if("output_version"in n.response_metadata&&((a=n.response_metadata)==null?void 0:a.output_version)==="v1")return K8({message:n});let r=Jc(n);r==="system"&&Yc(e)&&(r="developer");const s=typeof n.content=="string"?n.content:n.content.map(l=>Jr(l)?Kv(l,tj):l),i={role:r,content:s};if(n.name!=null&&(i.name=n.name),n.additional_kwargs.function_call!=null&&(i.function_call=n.additional_kwargs.function_call,i.content=""),Cn.isInstance(n)&&((o=n.tool_calls)!=null&&o.length)?(i.tool_calls=n.tool_calls.map(QR),i.content=""):(n.additional_kwargs.tool_calls!=null&&(i.tool_calls=n.additional_kwargs.tool_calls),Xr.isInstance(n)&&n.tool_call_id!=null&&(i.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio){const l={role:"assistant",audio:{id:n.additional_kwargs.audio.id}};return[i,l]}return i});var Z8=class extends zw{invocationParams(t,e){var a;let n;(t==null?void 0:t.strict)!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let r={};(t==null?void 0:t.stream_options)!==void 0?r={stream_options:t.stream_options}:this.streamUsage&&(this.streaming||e!=null&&e.streaming)&&(r={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(t==null?void 0:t.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:t==null?void 0:t.functions,function_call:t==null?void 0:t.function_call,tools:(a=t==null?void 0:t.tools)!=null&&a.length?t.tools.map(o=>this._convertChatOpenAIToolToCompletionsTool(o,{strict:n})):void 0,tool_choice:jR(t==null?void 0:t.tool_choice),response_format:this._getResponseFormat(t==null?void 0:t.response_format),seed:t==null?void 0:t.seed,...r,parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,...this.audio||t!=null&&t.audio?{audio:this.audio||(t==null?void 0:t.audio)}:{},...this.modalities||t!=null&&t.modalities?{modalities:this.modalities||(t==null?void 0:t.modalities)}:{},...this.modelKwargs,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,verbosity:(t==null?void 0:t.verbosity)??this.verbosity};(t==null?void 0:t.prediction)!==void 0&&(s.prediction=t.prediction),this.service_tier!==void 0&&(s.service_tier=this.service_tier),(t==null?void 0:t.service_tier)!==void 0&&(s.service_tier=t.service_tier);const i=this._getReasoningParams(t);return i!==void 0&&i.effort!==void 0&&(s.reasoning_effort=i.effort),Yc(s.model)?s.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:s.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,s}async _generate(t,e,n){var a,o;const r={},s=this.invocationParams(e),i=Hk({messages:t,model:this.model});if(s.stream){const l=this._streamResponseChunks(t,e,n),c={};for await(const w of l){w.message.response_metadata={...w.generationInfo,...w.message.response_metadata};const x=((a=w.generationInfo)==null?void 0:a.completion)??0;c[x]===void 0?c[x]=w:c[x]=c[x].concat(w)}const d=Object.entries(c).sort(([w],[x])=>parseInt(w,10)-parseInt(x,10)).map(([w,x])=>x),{functions:h,function_call:m}=this.invocationParams(e),f=await this._getEstimatedTokenCountFromPrompt(t,h,m),y=await this._getNumTokensFromGenerations(d);return r.input_tokens=f,r.output_tokens=y,r.total_tokens=f+y,{generations:d,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{const l=await this.completionWithRetry({...s,stream:!1,messages:i},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options}),{completion_tokens:c,prompt_tokens:d,total_tokens:h,prompt_tokens_details:m,completion_tokens_details:f}=(l==null?void 0:l.usage)??{};c&&(r.output_tokens=(r.output_tokens??0)+c),d&&(r.input_tokens=(r.input_tokens??0)+d),h&&(r.total_tokens=(r.total_tokens??0)+h),((m==null?void 0:m.audio_tokens)!==null||(m==null?void 0:m.cached_tokens)!==null)&&(r.input_token_details={...(m==null?void 0:m.audio_tokens)!==null&&{audio:m==null?void 0:m.audio_tokens},...(m==null?void 0:m.cached_tokens)!==null&&{cache_read:m==null?void 0:m.cached_tokens}}),((f==null?void 0:f.audio_tokens)!==null||(f==null?void 0:f.reasoning_tokens)!==null)&&(r.output_token_details={...(f==null?void 0:f.audio_tokens)!==null&&{audio:f==null?void 0:f.audio_tokens},...(f==null?void 0:f.reasoning_tokens)!==null&&{reasoning:f==null?void 0:f.reasoning_tokens}});const y=[];for(const w of(l==null?void 0:l.choices)??[]){const v={text:((o=w.message)==null?void 0:o.content)??"",message:this._convertCompletionsMessageToBaseMessage(w.message??{role:"assistant"},l)};v.generationInfo={...w.finish_reason?{finish_reason:w.finish_reason}:{},...w.logprobs?{logprobs:w.logprobs}:{}},Cm(v.message)&&(v.message.usage_metadata=r),v.message=new Cn(Object.fromEntries(Object.entries(v.message).filter(([p])=>!p.startsWith("lc_")))),y.push(v)}return{generations:y,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}}async*_streamResponseChunks(t,e,n){var l,c,d,h,m,f,y,w,x,v;const r=Hk({messages:t,model:this.model}),s={...this.invocationParams(e,{streaming:!0}),messages:r,stream:!0};let i;const a=await this.completionWithRetry(s,e);let o;for await(const p of a){const g=(l=p==null?void 0:p.choices)==null?void 0:l[0];if(p.usage&&(o=p.usage),!g)continue;const{delta:_}=g;if(!_)continue;const k=this._convertCompletionsDeltaToBaseMessageChunk(_,p,i);i=_.role??i;const E={prompt:e.promptIndex??0,completion:g.index??0};if(typeof k.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const C={...E};g.finish_reason!=null&&(C.finish_reason=g.finish_reason,C.system_fingerprint=p.system_fingerprint,C.model_name=p.model,C.service_tier=p.service_tier),this.logprobs&&(C.logprobs=g.logprobs);const b=new xo({message:k,text:k.content,generationInfo:C});yield b,await(n==null?void 0:n.handleLLMNewToken(b.text??"",E,void 0,void 0,void 0,{chunk:b}))}if(o){const p={...((c=o.prompt_tokens_details)==null?void 0:c.audio_tokens)!==null&&{audio:(d=o.prompt_tokens_details)==null?void 0:d.audio_tokens},...((h=o.prompt_tokens_details)==null?void 0:h.cached_tokens)!==null&&{cache_read:(m=o.prompt_tokens_details)==null?void 0:m.cached_tokens}},g={...((f=o.completion_tokens_details)==null?void 0:f.audio_tokens)!==null&&{audio:(y=o.completion_tokens_details)==null?void 0:y.audio_tokens},...((w=o.completion_tokens_details)==null?void 0:w.reasoning_tokens)!==null&&{reasoning:(x=o.completion_tokens_details)==null?void 0:x.reasoning_tokens}};yield new xo({message:new ts({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(p).length>0&&{input_token_details:p},...Object.keys(g).length>0&&{output_token_details:g}}}),text:""})}if((v=e.signal)!=null&&v.aborted)throw new Error("AbortError")}async completionWithRetry(t,e){const n=this._getClientOptions(e),r=t.response_format&&t.response_format.type==="json_schema";return this.caller.call(async()=>{try{return r&&!t.stream?await this.client.chat.completions.parse(t,n):await this.client.chat.completions.create(t,n)}catch(s){throw AN(s)}})}_convertCompletionsDeltaToBaseMessageChunk(t,e,n){return W8({delta:t,rawResponse:e,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(t,e){return H8({message:t,rawResponse:e,includeRawResponse:this.__includeRawResponse})}};const Xa="__openai_function_call_ids__",nj=t=>{var r,s,i,a;const e={...((r=t==null?void 0:t.input_tokens_details)==null?void 0:r.cached_tokens)!=null&&{cache_read:(s=t==null?void 0:t.input_tokens_details)==null?void 0:s.cached_tokens}},n={...((i=t==null?void 0:t.output_tokens_details)==null?void 0:i.reasoning_tokens)!=null&&{reasoning:(a=t==null?void 0:t.output_tokens_details)==null?void 0:a.reasoning_tokens}};return{input_tokens:(t==null?void 0:t.input_tokens)??0,output_tokens:(t==null?void 0:t.output_tokens)??0,total_tokens:(t==null?void 0:t.total_tokens)??0,input_token_details:e,output_token_details:n}},rj=t=>{if(t.error){const o=new Error(t.error.message);throw o.name=t.error.code,o}let e;const n=[],r=[],s=[],i={model_provider:"openai",model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,status:t.status,user:t.user,service_tier:t.service_tier,model_name:t.model},a={};for(const o of t.output)if(o.type==="message")e=o.id,n.push(...o.content.flatMap(l=>l.type==="output_text"?("parsed"in l&&l.parsed!=null&&(a.parsed=l.parsed),{type:"text",text:l.text,annotations:l.annotations}):l.type==="refusal"?(a.refusal=l.refusal,[]):l));else if(o.type==="function_call"){const l={function:{name:o.name,arguments:o.arguments},id:o.call_id};try{r.push(Qm(l,{returnId:!0}))}catch(c){let d;typeof c=="object"&&c!=null&&"message"in c&&typeof c.message=="string"&&(d=c.message),s.push(Zh(l,d))}a[Xa]??(a[Xa]={}),o.id&&(a[Xa][o.call_id]=o.id)}else if(o.type==="reasoning")a.reasoning=o;else if(o.type==="custom_tool_call"){const l=qV(o);l?r.push(l):s.push(Zh(o,"Malformed custom tool call"))}else a.tool_outputs??(a.tool_outputs=[]),a.tool_outputs.push(o);return new Cn({id:e,content:n,tool_calls:r,invalid_tool_calls:s,usage_metadata:nj(t.usage),additional_kwargs:a,response_metadata:i})},Y8=t=>{const e=(t.summary.length>1?t.summary.reduce((n,r)=>{const s=n[n.length-1];return s.index===r.index?s.text+=r.text:n.push(r),n},[{...t.summary[0]}]):t.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([r])=>r!=="index")));return{...t,summary:e}},J8=t=>{var l,c;const e=[];let n={},r;const s=[],i={model_provider:"openai"},a={};let o;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[t.annotation],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")o=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")s.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.call_id,index:t.output_index}),a[Xa]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(t.item.type))a.tool_outputs=[t.item];else if(t.type==="response.created")i.id=t.response.id,i.model_name=t.response.model,i.model=t.response.model;else if(t.type==="response.completed"){const d=rj(t.response);r=nj(t.response.usage),((c=(l=t.response.text)==null?void 0:l.format)==null?void 0:c.type)==="json_schema"&&(a.parsed??(a.parsed=JSON.parse(d.text)));for(const[h,m]of Object.entries(t.response))h!=="id"&&(i[h]=m)}else if(t.type==="response.function_call_arguments.delta"||t.type==="response.custom_tool_call_input.delta")s.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")n={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")a.refusal=t.refusal;else if(t.type==="response.output_item.added"&&"item"in t&&t.item.type==="reasoning"){const d=t.item.summary?t.item.summary.map((h,m)=>({...h,index:m})):void 0;a.reasoning={id:t.item.id,type:t.item.type,...d?{summary:d}:{}}}else if(t.type==="response.reasoning_summary_part.added")a.reasoning={type:"reasoning",summary:[{...t.part,index:t.summary_index}]};else if(t.type==="response.reasoning_summary_text.delta")a.reasoning={type:"reasoning",summary:[{text:t.delta,type:"summary_text",index:t.summary_index}]};else return t.type==="response.image_generation_call.partial_image",null;return new xo({text:e.map(d=>d.text).join(""),message:new ts({id:o,content:e,tool_call_chunks:s,usage_metadata:r,additional_kwargs:a,response_metadata:i}),generationInfo:n})},X8=t=>{var r;const e=Cn.isInstance(t)&&((r=t.response_metadata)==null?void 0:r.model_provider)==="openai";function*n(){const s=ra(()=>{try{const p=Jc(t);return p==="system"||p==="developer"||p==="assistant"||p==="user"?p:"assistant"}catch{return"assistant"}});let i;const a=new Set,o=new Set,l=new Map,c=new Map;function*d(){if(!i)return;const p=i.content;(typeof p=="string"&&p.length>0||Array.isArray(p)&&p.length>0)&&(yield i),i=void 0}const h=p=>{i||(i={type:"message",role:s,content:[]}),typeof i.content=="string"?i.content=i.content.length>0?[{type:"input_text",text:i.content},...p]:[...p]:i.content.push(...p)},m=p=>{if(typeof p=="string")return p;try{return JSON.stringify(p??{})}catch{return"{}"}},f=p=>{const g=ra(()=>{var k;const _=(k=p.metadata)==null?void 0:k.detail;return _==="low"||_==="high"||_==="auto"?_:"auto"});if(p.fileId)return{type:"input_image",detail:g,file_id:p.fileId};if(p.url)return{type:"input_image",detail:g,image_url:p.url};if(p.data){const _=typeof p.data=="string"?p.data:Buffer.from(p.data).toString("base64"),k=p.mimeType??"image/png";return{type:"input_image",detail:g,image_url:`data:${k};base64,${_}`}}},y=p=>{var _,k,E;const g=((_=p.metadata)==null?void 0:_.filename)??((k=p.metadata)==null?void 0:k.name)??((E=p.metadata)==null?void 0:E.title);if(p.fileId&&typeof g=="string")return{type:"input_file",file_id:p.fileId,...g?{filename:g}:{}};if(p.url&&typeof g=="string")return{type:"input_file",file_url:p.url,...g?{filename:g}:{}};if(p.data&&typeof g=="string"){const C=typeof p.data=="string"?p.data:Buffer.from(p.data).toString("base64");return{type:"input_file",file_data:`data:${p.mimeType??"application/octet-stream"};base64,${C}`,...g?{filename:g}:{}}}},w=p=>{const g=ra(()=>{if(Array.isArray(p.summary)){const E=p.summary,C=(E==null?void 0:E.map(b=>b==null?void 0:b.text).filter(b=>typeof b=="string"))??[];if(C.length>0)return C}return p.reasoning?[p.reasoning]:[]}),_=g.length>0?g.map(E=>({type:"summary_text",text:E})):[{type:"summary_text",text:""}],k={type:"reasoning",id:p.id??"",summary:_};return p.reasoning&&(k.content=[{type:"reasoning_text",text:p.reasoning}]),k},x=p=>({type:"function_call",name:p.name??"",call_id:p.id??"",arguments:m(p.args)}),v=p=>{const g=m(p.output),_=p.status==="success"?"completed":p.status==="error"?"incomplete":void 0;return{type:"function_call_output",call_id:p.toolCallId??"",output:g,..._?{status:_}:{}}};for(const p of t.contentBlocks)if(p.type==="text")h([{type:"input_text",text:p.text}]);else if(p.type!=="invalid_tool_call"){if(p.type==="reasoning")yield*d(),yield w(p);else if(p.type==="tool_call"){yield*d();const g=p.id??"";g&&(a.add(g),l.delete(g)),yield x(p)}else if(p.type==="tool_call_chunk"){if(p.id){const g=l.get(p.id)??{name:p.name,args:[]};p.name&&(g.name=p.name),p.args&&g.args.push(p.args),l.set(p.id,g)}}else if(p.type==="server_tool_call"){yield*d();const g=p.id??"";g&&(o.add(g),c.delete(g)),yield x(p)}else if(p.type==="server_tool_call_chunk"){if(p.id){const g=c.get(p.id)??{name:p.name,args:[]};p.name&&(g.name=p.name),p.args&&g.args.push(p.args),c.set(p.id,g)}}else if(p.type==="server_tool_call_result")yield*d(),yield v(p);else if(p.type!=="audio")if(p.type==="file"){const g=y(p);g&&h([g])}else if(p.type==="image"){const g=f(p);g&&h([g])}else if(p.type==="video"){const g=y(p);g&&h([g])}else p.type==="text-plain"?p.text&&h([{type:"input_text",text:p.text}]):p.type==="non_standard"&&e&&(yield*d(),yield p.value)}yield*d();for(const[p,g]of l){if(!p||a.has(p))continue;const _=g.args.join("");!g.name&&!_||(yield{type:"function_call",call_id:p,name:g.name??"",arguments:_})}for(const[p,g]of c){if(!p||o.has(p))continue;const _=g.args.join("");!g.name&&!_||(yield{type:"function_call",call_id:p,name:g.name??"",arguments:_})}}return Array.from(n())},Wk=({messages:t,zdrEnabled:e,model:n})=>t.flatMap(r=>{var o,l,c,d;const s=r.response_metadata;if((s==null?void 0:s.output_version)==="v1")return X8(r);const i=r.additional_kwargs;let a=Jc(r);if(a==="system"&&Yc(n)&&(a="developer"),a==="function")throw new Error("Function messages are not supported in Responses API");if(a==="tool"){const h=r;return(i==null?void 0:i.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof h.content=="string")return{type:"computer_screenshot",image_url:h.content};if(Array.isArray(h.content)){const f=h.content.find(w=>w.type==="computer_screenshot");if(f)return f;const y=h.content.find(w=>w.type==="image_url");if(y)return{type:"computer_screenshot",image_url:typeof y.image_url=="string"?y.image_url:y.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:h.tool_call_id}:(o=h.additional_kwargs)!=null&&o.customTool?{type:"custom_tool_call_output",call_id:h.tool_call_id,output:h.content}:{type:"function_call_output",call_id:h.tool_call_id,id:(l=h.id)!=null&&l.startsWith("fc_")?h.id:void 0,output:typeof h.content!="string"?JSON.stringify(h.content):h.content}}if(a==="assistant"){if(!e&&(s==null?void 0:s.output)!=null&&Array.isArray(s==null?void 0:s.output)&&(s==null?void 0:s.output.length)>0&&(s!=null&&s.output.every(x=>"type"in x)))return s==null?void 0:s.output;const h=[];if(i!=null&&i.reasoning&&!e){const x=Y8(i.reasoning);h.push(x)}let{content:m}=r;i!=null&&i.refusal&&(typeof m=="string"&&(m=[{type:"output_text",text:m,annotations:[]}]),m=[...m,{type:"refusal",refusal:i.refusal}]),(typeof m=="string"||m.length>0)&&h.push({type:"message",role:"assistant",...r.id&&!e&&r.id.startsWith("msg_")?{id:r.id}:{},content:ra(()=>typeof m=="string"?m:m.flatMap(x=>x.type==="text"?{type:"output_text",text:x.text,annotations:x.annotations??[]}:x.type==="output_text"||x.type==="refusal"?x:[]))});const f=i==null?void 0:i[Xa];Cn.isInstance(r)&&((c=r.tool_calls)!=null&&c.length)?h.push(...r.tool_calls.map(x=>KV(x)?{type:"custom_tool_call",id:x.call_id,call_id:x.id??"",input:x.args.input,name:x.name}:{type:"function_call",name:x.name,arguments:JSON.stringify(x.args),call_id:x.id,...e?{}:{id:f==null?void 0:f[x.id]}})):i!=null&&i.tool_calls&&h.push(...i.tool_calls.map(x=>({type:"function_call",name:x.function.name,call_id:x.id,arguments:x.function.arguments,...e?{}:{id:f==null?void 0:f[x.id]}})));const y=(d=s==null?void 0:s.output)!=null&&d.length?s==null?void 0:s.output:i.tool_outputs,w=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(y!=null){const x=y,v=x==null?void 0:x.filter(p=>w.includes(p.type));v.length>0&&h.push(...v)}return h}if(a==="user"||a==="system"||a==="developer"){if(typeof r.content=="string")return{type:"message",role:a,content:r.content};const h=[],m=r.content.flatMap(f=>{if(f.type==="mcp_approval_response"&&h.push({type:"mcp_approval_response",approval_request_id:f.approval_request_id,approve:f.approve}),Jr(f))return Kv(f,tj);if(f.type==="text")return{type:"input_text",text:f.text};if(f.type==="image_url"){const y=ra(()=>{if(typeof f.image_url=="string")return f.image_url;if(typeof f.image_url=="object"&&f.image_url!==null&&"url"in f.image_url)return f.image_url.url}),w=ra(()=>{if(typeof f.image_url=="string")return"auto";if(typeof f.image_url=="object"&&f.image_url!==null&&"detail"in f.image_url)return f.image_url.detail});return{type:"input_image",image_url:y,detail:w}}return f.type==="input_text"||f.type==="input_image"||f.type==="input_file"?f:[]});return m.length>0&&h.push({type:"message",role:a,content:m}),h}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${a}`),[]});var Q8=class extends zw{invocationParams(t){var s;let e;(t==null?void 0:t.strict)!==void 0?e=t.strict:this.supportsStrictToolCalling!==void 0&&(e=this.supportsStrictToolCalling);const n={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:t==null?void 0:t.previous_response_id,truncation:t==null?void 0:t.truncation,include:t==null?void 0:t.include,tools:(s=t==null?void 0:t.tools)!=null&&s.length?this._reduceChatOpenAITools(t.tools,{stream:this.streaming,strict:e}):void 0,tool_choice:WV(t==null?void 0:t.tool_choice)?t==null?void 0:t.tool_choice:(()=>{const i=jR(t==null?void 0:t.tool_choice);if(typeof i=="object"&&"type"in i){if(i.type==="function")return{type:"function",name:i.function.name};if(i.type==="allowed_tools")return{type:"allowed_tools",mode:i.allowed_tools.mode,tools:i.allowed_tools.tools};if(i.type==="custom")return{type:"custom",name:i.custom.name}}})(),text:(()=>{if(t!=null&&t.text)return t.text;const i=this._getResponseFormat(t==null?void 0:t.response_format);return(i==null?void 0:i.type)==="json_schema"?i.json_schema.schema!=null?{format:{type:"json_schema",schema:i.json_schema.schema,description:i.json_schema.description,name:i.json_schema.name,strict:i.json_schema.strict},verbosity:t==null?void 0:t.verbosity}:void 0:{format:i,verbosity:t==null?void 0:t.verbosity}})(),parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},r=this._getReasoningParams(t);return r!==void 0&&(n.reasoning=r),n}async _generate(t,e){var r;const n=this.invocationParams(e);if(n.stream){const s=this._streamResponseChunks(t,e);let i;for await(const a of s)a.message.response_metadata={...a.generationInfo,...a.message.response_metadata},i=(i==null?void 0:i.concat(a))??a;return{generations:i?[i]:[],llmOutput:{estimatedTokenUsage:(r=i==null?void 0:i.message)==null?void 0:r.usage_metadata}}}else{const s=await this.completionWithRetry({input:Wk({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),...n,stream:!1},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options});return{generations:[{text:s.output_text,message:rj(s)}],llmOutput:{id:s.id,estimatedTokenUsage:s.usage?{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens,totalTokens:s.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(t,e,n){const r=await this.completionWithRetry({...this.invocationParams(e),input:Wk({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0},e);for await(const s of r){const i=J8(s);i!=null&&(yield i,await(n==null?void 0:n.handleLLMNewToken(i.text||"",{prompt:e.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:i})))}}async completionWithRetry(t,e){return this.caller.call(async()=>{var r,s;const n=this._getClientOptions(e);try{return((s=(r=t.text)==null?void 0:r.format)==null?void 0:s.type)==="json_schema"&&!t.stream?await this.client.responses.parse(t,n):await this.client.responses.create(t,n)}catch(i){throw AN(i)}})}_reduceChatOpenAITools(t,e){const n=[];for(const r of t)if($w(r))r.type==="image_generation"&&(e!=null&&e.stream)&&(r.partial_images=1),n.push(r);else if(Wh(r)){const s=r.metadata.customTool;n.push({type:"custom",name:s.name,description:s.description,format:s.format})}else Mw(r)?n.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:(e==null?void 0:e.strict)??null}):PR(r)&&n.push(ZV(r));return n}},eW=class sj extends zw{constructor(n){super(n);T(this,"useResponsesApi",!1);T(this,"responses");T(this,"completions");this.fields=n,this.useResponsesApi=(n==null?void 0:n.useResponsesApi)??!1,this.responses=(n==null?void 0:n.responses)??new Q8(n),this.completions=(n==null?void 0:n.completions)??new Z8(n)}get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}_useResponsesApi(n){var a,o,l,c,d;const r=(a=n==null?void 0:n.tools)==null?void 0:a.some($w),s=(n==null?void 0:n.previous_response_id)!=null||(n==null?void 0:n.text)!=null||(n==null?void 0:n.truncation)!=null||(n==null?void 0:n.include)!=null||((o=n==null?void 0:n.reasoning)==null?void 0:o.summary)!=null||((l=this.reasoning)==null?void 0:l.summary)!=null,i=((c=n==null?void 0:n.tools)==null?void 0:c.some(PR))||((d=n==null?void 0:n.tools)==null?void 0:d.some(Wh));return this.useResponsesApi||r||s||i}getLsParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.getLsParams(r):this.completions.getLsParams(r)}invocationParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.invocationParams(r):this.completions.invocationParams(r)}async _generate(n,r,s){return this._useResponsesApi(r)?this.responses._generate(n,r):this.completions._generate(n,r,s)}async*_streamResponseChunks(n,r,s){if(this._useResponsesApi(r)){yield*this.responses._streamResponseChunks(n,this._combineCallOptions(r),s);return}yield*this.completions._streamResponseChunks(n,this._combineCallOptions(r),s)}withConfig(n){const r=new sj(this.fields);return r.defaultOptions={...this.defaultOptions,...n},r}},tW={};De(tW,{BaseLLM:()=>ij,LLM:()=>nW});var ij=class kl extends Fw{constructor(){super(...arguments);T(this,"lc_namespace",["langchain","llms",this._llmType()])}async invoke(n,r){const s=kl._convertInputToPromptValue(n);return(await this.generatePrompt([s],r,r==null?void 0:r.callbacks)).generations[0][0].text}async*_streamResponseChunks(n,r,s){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(n){const[r,s]=super._separateRunnableConfigFromCallOptions(n);return s.signal=r.signal,[r,s]}async*_streamIterator(n,r){if(this._streamResponseChunks===kl.prototype._streamResponseChunks)yield this.invoke(n,r);else{const s=kl._convertInputToPromptValue(n),[i,a]=this._separateRunnableConfigFromCallOptionsCompat(r),o=await En.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},c=await(o==null?void 0:o.handleLLMStart(this.toJSON(),[s.toString()],i.runId,void 0,l,void 0,void 0,i.runName));let d=new wo({text:""});try{for await(const h of this._streamResponseChunks(s.toString(),a,c==null?void 0:c[0]))d?d=d.concat(h):d=h,typeof h.text=="string"&&(yield h.text)}catch(h){throw await Promise.all((c??[]).map(m=>m==null?void 0:m.handleLLMError(h))),h}await Promise.all((c??[]).map(h=>h==null?void 0:h.handleLLMEnd({generations:[[d]]})))}}async generatePrompt(n,r,s){const i=n.map(a=>a.toString());return this.generate(i,r,s)}invocationParams(n){return{}}_flattenLLMResult(n){const r=[];for(let s=0;s<n.generations.length;s+=1){const i=n.generations[s];if(s===0)r.push({generations:[i],llmOutput:n.llmOutput});else{const a=n.llmOutput?{...n.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[i],llmOutput:a})}}return r}async _generateUncached(n,r,s,i){let a;if(i!==void 0&&i.length===n.length)a=i;else{const d=await En.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),h={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:n.length};a=await(d==null?void 0:d.handleLLMStart(this.toJSON(),n,s.runId,void 0,h,void 0,void 0,s==null?void 0:s.runName))}const o=!!(a!=null&&a[0].handlers.find(aw));let l;if(o&&n.length===1&&this._streamResponseChunks!==kl.prototype._streamResponseChunks)try{const d=await this._streamResponseChunks(n[0],r,a==null?void 0:a[0]);let h;for await(const m of d)h===void 0?h=m:h=yi(h,m);if(h===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[h]],llmOutput:{}},await(a==null?void 0:a[0].handleLLMEnd(l))}catch(d){throw await(a==null?void 0:a[0].handleLLMError(d)),d}else{try{l=await this._generate(n,r,a==null?void 0:a[0])}catch(h){throw await Promise.all((a??[]).map(m=>m==null?void 0:m.handleLLMError(h))),h}const d=this._flattenLLMResult(l);await Promise.all((a??[]).map((h,m)=>h==null?void 0:h.handleLLMEnd(d[m])))}const c=(a==null?void 0:a.map(d=>d.runId))||void 0;return Object.defineProperty(l,Tc,{value:c?{runIds:c}:void 0,configurable:!0}),l}async _generateCached({prompts:n,cache:r,llmStringKey:s,parsedOptions:i,handledOptions:a,runId:o}){const l=await En.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:n.length},d=await(l==null?void 0:l.handleLLMStart(this.toJSON(),n,o,void 0,c,void 0,void 0,a==null?void 0:a.runName)),h=[],f=(await Promise.allSettled(n.map(async(x,v)=>{const p=await r.lookup(x,s);return p==null&&h.push(v),p}))).map((x,v)=>({result:x,runManager:d==null?void 0:d[v]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),y=[];await Promise.all(f.map(async({result:x,runManager:v},p)=>{if(x.status==="fulfilled"){const g=x.value;return y[p]=g.map(_=>(_.generationInfo={..._.generationInfo,tokenUsage:{}},_)),g.length&&await(v==null?void 0:v.handleLLMNewToken(g[0].text)),v==null?void 0:v.handleLLMEnd({generations:[g]},void 0,void 0,void 0,{cached:!0})}else return await(v==null?void 0:v.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const w={generations:y,missingPromptIndices:h,startedRunManagers:d};return Object.defineProperty(w,Tc,{value:d?{runIds:d==null?void 0:d.map(x=>x.runId)}:void 0,configurable:!0}),w}async generate(n,r,s){if(!Array.isArray(n))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(r)?i={stop:r}:i=r;const[a,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=a.callbacks??s,!this.cache)return this._generateUncached(n,o,a);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:d,missingPromptIndices:h,startedRunManagers:m}=await this._generateCached({prompts:n,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:a,runId:a.runId});let f={};if(h.length>0){const y=await this._generateUncached(h.map(w=>n[w]),o,a,m!==void 0?h.map(w=>m==null?void 0:m[w]):void 0);await Promise.all(y.generations.map(async(w,x)=>{const v=h[x];return d[v]=w,l.update(n[v],c,w)})),f=y.llmOutput??{}}return{generations:d,llmOutput:f}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},nW=class extends ij{async _generate(t,e,n){return{generations:await Promise.all(t.map((s,i)=>this._call(s,{...e,promptIndex:i},n).then(a=>[{text:a}])))}}},rW={};De(rW,{chunkArray:()=>sW});const sW=(t,e)=>t.reduce((n,r,s)=>{const i=Math.floor(s/e),a=n[i]||[];return n[i]=a.concat([r]),n},[]);var iW={};De(iW,{Embeddings:()=>aW});var aW=class{constructor(t){T(this,"caller");this.caller=new Zc(t??{})}},oW={};De(oW,{BaseToolkit:()=>lW,DynamicStructuredTool:()=>lj,DynamicTool:()=>oj,StructuredTool:()=>Bw,Tool:()=>aj,ToolInputParsingException:()=>Nh,isLangChainTool:()=>qm,isRunnableToolLike:()=>Pw,isStructuredTool:()=>jw,isStructuredToolParams:()=>Ow,tool:()=>cW});var Bw=class extends Lw{constructor(e){super(e??{});T(this,"returnDirect",!1);T(this,"verboseParsingErrors",!1);T(this,"responseFormat","content");T(this,"defaultConfig");this.verboseParsingErrors=(e==null?void 0:e.verboseParsingErrors)??this.verboseParsingErrors,this.responseFormat=(e==null?void 0:e.responseFormat)??this.responseFormat,this.defaultConfig=(e==null?void 0:e.defaultConfig)??this.defaultConfig,this.metadata=(e==null?void 0:e.metadata)??this.metadata}get lc_namespace(){return["langchain","tools"]}async invoke(e,n){let r,s=Ue(Ph(this.defaultConfig,n));return zl(e)?(r=e.args,s={...s,toolCall:e}):r=e,this.call(r,s)}async call(e,n,r){const s=zl(e)?e.args:e;let i;if(zr(this.schema))try{i=await Bm(this.schema,s)}catch(y){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${y.message}`),oR(y)&&(w=`${w}

${eB(y)}`),new Nh(w,JSON.stringify(e))}else{const y=st(s,this.schema);if(!y.valid){let w="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(w=`${w}
Details: ${y.errors.map(x=>`${x.keywordLocation}: ${x.error}`).join(`
`)}`),new Nh(w,JSON.stringify(e))}i=s}const a=Mm(n),o=En.configure(a.callbacks,this.callbacks,a.tags||r,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l=await(o==null?void 0:o.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),a.runId,void 0,void 0,void 0,a.runName));delete a.runId;let c;try{c=await this._call(i,l,a)}catch(y){throw await(l==null?void 0:l.handleToolError(y)),y}let d,h;if(this.responseFormat==="content_and_artifact")if(Array.isArray(c)&&c.length===2)[d,h]=c;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(c)}`);else d=c;let m;zl(e)&&(m=e.id),!m&&e3(a)&&(m=a.toolCall.id);const f=uW({content:d,artifact:h,toolCallId:m,name:this.name,metadata:this.metadata});return await(l==null?void 0:l.handleToolEnd(f)),f}},aj=class extends Bw{constructor(e){super(e);T(this,"schema",Wm({input:Hm().optional()}).transform(e=>e.input))}call(e,n){const r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,n)}},oj=class extends aj{constructor(e){super(e);T(this,"name");T(this,"description");T(this,"func");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}static lc_name(){return"DynamicTool"}async call(e,n){const r=Mm(n);return r.runName===void 0&&(r.runName=this.name),super.call(e,r)}async _call(e,n,r){return this.func(e,n,r)}},lj=class extends Bw{constructor(e){super(e);T(this,"name");T(this,"description");T(this,"func");T(this,"schema");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}static lc_name(){return"DynamicStructuredTool"}async call(e,n,r){const s=Mm(n);return s.runName===void 0&&(s.runName=this.name),super.call(e,s,r)}_call(e,n,r){return this.func(e,n,r)}},lW=class{getTools(){return this.tools}};function cW(t,e){var a;const n=Tw(e.schema),r=ql(e.schema);if(!e.schema||n||r)return new oj({...e,description:e.description??((a=e.schema)==null?void 0:a.description)??`${e.name} tool`,func:async(o,l,c)=>new Promise((d,h)=>{const m=nt(c,{callbacks:l==null?void 0:l.getChild()});Tr.runWithConfig(Cs(m),async()=>{try{d(t(o,m))}catch(f){h(f)}})})});const s=e.schema,i=e.description??e.schema.description??`${e.name} tool`;return new lj({...e,description:i,schema:s,func:async(o,l,c)=>new Promise((d,h)=>{let m;const f=()=>{c!=null&&c.signal&&m&&c.signal.removeEventListener("abort",m)};c!=null&&c.signal&&(m=()=>{f(),h(Sc(c.signal))},c.signal.addEventListener("abort",m));const y=nt(c,{callbacks:l==null?void 0:l.getChild()});Tr.runWithConfig(Cs(y),async()=>{var w;try{const x=await t(o,y);if((w=c==null?void 0:c.signal)!=null&&w.aborted){f();return}f(),d(x)}catch(x){f(),h(x)}})})})}function uW(t){const{content:e,artifact:n,toolCallId:r,metadata:s}=t;return r&&!Qv(e)?typeof e=="string"||Array.isArray(e)&&e.every(i=>typeof i=="object")?new Xr({status:"success",content:e,artifact:n,tool_call_id:r,name:t.name,metadata:s}):new Xr({status:"success",content:dW(e),artifact:n,tool_call_id:r,name:t.name,metadata:s}):e}function dW(t){try{return JSON.stringify(t,null,2)??""}catch{return`${t}`}}const hW=1e3,mW=200;function fW(t,e,n){const r=n.split(`
`),s=pW(t,e,n,r);return s.length>0?s:gW(t,e,n,r)}function pW(t,e,n,r){var h;const s=[],i=((h=e.split(".").pop())==null?void 0:h.toLowerCase())||"",a=yW(i);if(!a)return[];let o=[],l=1,c=0,d=!1;for(let m=0;m<r.length;m++){const f=r[m],y=m+1;if(f.match(a.start)&&!d){o.length>0&&s.push(Kl(t,e,o.join(`
`),l,y-1)),o=[f],l=y,d=!0,c=qk(f);continue}if(d&&(o.push(f),c+=qk(f),c===0&&o.length>1)){const x=o.join(`
`);x.length>50&&s.push(Kl(t,e,x,l,y)),o=[],d=!1}}return o.length>0&&s.push(Kl(t,e,o.join(`
`),l,r.length)),s.length>0?s:[]}function gW(t,e,n,r){const s=[];let i=[],a=0,o=1;for(let l=0;l<r.length;l++){const c=r[l],d=c.length+1;if(a+d>hW&&i.length>0){s.push(Kl(t,e,i.join(`
`),o,l));const h=i.slice(-Math.floor(mW/50));i=h,a=h.join(`
`).length,o=l-h.length+1}i.push(c),a+=d}return i.length>0&&s.push(Kl(t,e,i.join(`
`),o,r.length)),s}function yW(t){return{js:{start:/^(export\s+)?(async\s+)?(function|class|const|let|var)\s+\w+/},ts:{start:/^(export\s+)?(async\s+)?(function|class|const|let|var|interface|type|enum)\s+\w+/},jsx:{start:/^(export\s+)?(function|const|class)\s+\w+|^const\s+\w+\s*=\s*(\(|async\s*\()/},tsx:{start:/^(export\s+)?(function|const|class|interface|type)\s+\w+|^const\s+\w+\s*[:=]\s*(\(|async\s*\()/},py:{start:/^(def|class|async\s+def)\s+\w+/},java:{start:/^(public|private|protected)?\s*(static\s+)?(class|interface|enum)\s+\w+/},go:{start:/^(func|type|const|var)\s+\w+/},rs:{start:/^(pub\s+)?(fn|struct|enum|impl|trait|mod)\s+\w+/},cpp:{start:/^(class|struct|namespace|template)\s+\w+|^\w+\s*::\s*\w+\s*\(/},c:{start:/^(struct|typedef|enum)\s+\w+|^\w+\s+\w+\s*\(/}}[t]||null}function qk(t){const e=(t.match(/\{/g)||[]).length,n=(t.match(/\}/g)||[]).length;return e-n}function Kl(t,e,n,r,s){return{id:`${t}:${e}:${r}:${s}`,repoName:t,path:e,content:n.trim(),startLine:r,endLine:s}}const cj="text-embedding-3-small";async function vW(t){const e=Eo();if(!e)throw new Error("OpenAI API key is required for embeddings");const n=100,r=[];for(let s=0;s<t.length;s+=n){const i=t.slice(s,s+n),a=await wW(i,e);r.push(...a)}return r}async function wW(t,e){var n;try{const r=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:cj,input:t.map(i=>i.content)})});if(!r.ok){const i=await r.json().catch(()=>({error:{message:r.statusText}}));throw new Error(`Embedding API error: ${((n=i.error)==null?void 0:n.message)||r.statusText}`)}const s=await r.json();return t.map((i,a)=>({id:i.id,values:s.data[a].embedding,metadata:{repoName:i.repoName,path:i.path,startLine:i.startLine,endLine:i.endLine}}))}catch(r){throw console.error("Error generating embeddings:",r),new Error(`Failed to generate embeddings: ${r.message}`)}}async function xW(t){var n;const e=Eo();if(!e)throw new Error("OpenAI API key is required for embeddings");try{const r=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:cj,input:t})});if(!r.ok){const i=await r.json().catch(()=>({error:{message:r.statusText}}));throw new Error(`Embedding API error: ${((n=i.error)==null?void 0:n.message)||r.statusText}`)}return(await r.json()).data[0].embedding}catch(r){throw console.error("Error generating query embedding:",r),new Error(`Failed to generate query embedding: ${r.message}`)}}const _W="gitscribe-rag",bW=1,es="vectors";let Ln=null;async function eu(){return new Promise((t,e)=>{const n=indexedDB.open(_W,bW);n.onerror=()=>e(new Error("Failed to open IndexedDB")),n.onsuccess=()=>{Ln=n.result,t()},n.onupgradeneeded=r=>{const s=r.target.result;if(!s.objectStoreNames.contains(es)){const i=s.createObjectStore(es,{keyPath:"id"});i.createIndex("repoName","metadata.repoName",{unique:!1}),i.createIndex("path","metadata.path",{unique:!1})}}})}async function SW(t,e){return Ln||await eu(),new Promise((n,r)=>{if(!Ln){r(new Error("Database not initialized"));return}const i=Ln.transaction([es],"readwrite").objectStore(es);let a=0,o=!1;const l=new Map(e.map(c=>[c.id,c.content]));t.forEach(c=>{const d={...c,content:l.get(c.id)||""},h=i.put(d);h.onsuccess=()=>{a++,a===t.length&&!o&&n()},h.onerror=()=>{o||(o=!0,r(new Error("Failed to store vector")))}}),t.length===0&&n()})}async function kW(t){return Ln||await eu(),new Promise((e,n)=>{if(!Ln){n(new Error("Database not initialized"));return}const a=Ln.transaction([es],"readonly").objectStore(es).index("repoName").getAll(t);a.onsuccess=()=>{e(a.result||[])},a.onerror=()=>{n(new Error("Failed to retrieve vectors"))}})}async function TW(){return Ln||await eu(),new Promise((t,e)=>{if(!Ln){e(new Error("Database not initialized"));return}const s=Ln.transaction([es],"readonly").objectStore(es).getAll();s.onsuccess=()=>{t(s.result||[])},s.onerror=()=>{e(new Error("Failed to retrieve vectors"))}})}async function AW(t){return Ln||await eu(),new Promise((e,n)=>{if(!Ln){n(new Error("Database not initialized"));return}const a=Ln.transaction([es],"readwrite").objectStore(es).index("repoName").openCursor(IDBKeyRange.only(t));let o=0,l=0;a.onsuccess=c=>{const d=c.target.result;if(d){l++;const h=d.delete();h.onsuccess=()=>{o++,d.continue()},h.onerror=()=>{n(new Error("Failed to delete vector"))}}else l===0||o===l?e():n(new Error("Some vectors failed to delete"))},a.onerror=()=>{n(new Error("Failed to delete vectors"))}})}async function EW(t,e,n=5){const r=await xW(t),s=e?await kW(e):await TW();return s.length===0?[]:s.map(a=>{const o=CW(r,a.values);return{doc:NW(a),score:o}}).sort((a,o)=>o.score-a.score).slice(0,n).filter(a=>a.score>.5)}function CW(t,e){if(t.length!==e.length)throw new Error("Vectors must have the same length");let n=0,r=0,s=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a],r+=t[a]*t[a],s+=e[a]*e[a];const i=Math.sqrt(r)*Math.sqrt(s);return i===0?0:n/i}function NW(t){return{id:t.id,repoName:t.metadata.repoName,path:t.metadata.path,content:t.content,startLine:t.metadata.startLine,endLine:t.metadata.endLine}}function IW(t){return t.length===0?"":`

Relevant code context:
${t.map((n,r)=>{const{doc:s}=n,i=s.startLine&&s.endLine?`lines ${s.startLine}-${s.endLine}`:"file";return`[Context ${r+1}] ${s.path} (${i}):
${s.content}`}).join(`

`)}
`}async function RW(t){console.log(`[RAG] Indexing repository: ${t.fullName}`),await eu(),await AW(t.fullName);const e=await VE(t.owner,t.name,"",t.defaultBranch,void 0,3),n=[".ts",".tsx",".js",".jsx",".py",".java",".go",".rs",".cpp",".c",".h",".hpp"],r=e.filter(a=>n.some(o=>a.toLowerCase().endsWith(o)));console.log(`[RAG] Found ${r.length} code files to index`);const s=[];for(const a of r.slice(0,50))try{const o=await ps(t.owner,t.name,a,t.defaultBranch);if(o){const l=fW(t.fullName,a,o);s.push(...l)}}catch(o){console.warn(`[RAG] Failed to process ${a}:`,o)}if(console.log(`[RAG] Created ${s.length} chunks`),s.length===0)return 0;console.log("[RAG] Generating embeddings...");const i=await vW(s);return console.log(`[RAG] Storing ${i.length} vectors...`),await SW(i,s),console.log(`[RAG] Successfully indexed ${i.length} chunks for ${t.fullName}`),i.length}async function uj(t,e,n=5){const r=await EW(t,e,n);return IW(r)}function dj(t){try{localStorage.setItem("openai_api_key",t),console.log("OpenAI API key stored successfully")}catch(e){throw console.error("Failed to store OpenAI API key:",e),new Error("Could not store OpenAI API key in localStorage")}}function Eo(){try{const t=localStorage.getItem("openai_api_key");if(t)return t}catch{console.warn("Could not access localStorage for OpenAI API key")}return null}const jW=()=>{const t=Eo();if(!t)throw new Error("OpenAI API key not configured. ");return t},PW=(t="gpt-4o-mini",e=.7,n)=>{const r=jW();typeof window<"u";const s={modelName:t,temperature:e,apiKey:r};return n&&(s.maxTokens=n),new eW(s)};async function ya(t,e,n="gpt-4o-mini",r=.7,s,i=!0,a){const o=a||(n.includes("gpt-4o")?16384:4096),l=PW(n,r,o),c=new YR;let d="";if(i&&s)try{d=await uj(t,s,5)}catch(y){console.warn("[LangChain] RAG retrieval failed, continuing without context:",y)}const h=[];e&&h.push(new Es(e));const m=d?`${d}

User query: ${t}`:t;h.push(new ns(m));const f=Fo.from([l,c]);try{return await f.invoke(h)}catch(y){throw new Error(`LangChain error: ${y.message||"Unknown error"}`)}}const OW=Object.freeze(Object.defineProperty({__proto__:null,callLangChain:ya,getOpenAIApiKey:Eo,setOpenAIApiKey:dj},Symbol.toStringTag,{value:"Module"}));async function $W(t){console.log("[RepoAnalysis] Starting repository analysis...");const e={currentStep:Q.ANALYSIS,repoAnalyses:new Map};if(!t.discoveredRepos||t.discoveredRepos.length===0)return e.errors=new Map([["analysis","No repositories to analyze"]]),e;const n=Mt(),r=new Map,s=t.discoveredRepos.length;let i=0;const a=t.discoveredRepos.map(async l=>{try{console.log(`[RepoAnalysis] Starting analysis for ${l.fullName}`);const[c,d]=l.fullName.split("/"),h=l.defaultBranch||"main",[m,f,y]=await Promise.all([ps(c,d,"README.md",h,n||void 0).catch(()=>null),ps(c,d,"package.json",h,n||void 0).catch(()=>null),ys(c,d,"",h,n||void 0).catch(()=>[])]);let w=null;if(f)try{w=JSON.parse(f)}catch{console.warn(`[RepoAnalysis] Failed to parse package.json for ${l.fullName}`)}const x=[],v=[],p=[];if(w){if(w.dependencies){const O=Object.keys(w.dependencies);O.includes("react")&&v.push("React"),O.includes("vue")&&v.push("Vue"),O.includes("angular")&&v.push("Angular"),O.includes("next")&&v.push("Next.js"),O.includes("express")&&v.push("Express"),O.includes("fastify")&&v.push("Fastify")}x.push(w.language||"JavaScript")}const g=new Set;y.forEach(O=>{var $;if(O.type==="file"){const L=($=O.name.split(".").pop())==null?void 0:$.toLowerCase();L&&g.add(L)}}),(g.has("ts")||g.has("tsx"))&&x.push("TypeScript"),(g.has("js")||g.has("jsx"))&&x.push("JavaScript"),g.has("py")&&x.push("Python"),g.has("java")&&x.push("Java"),g.has("go")&&x.push("Go"),g.has("rs")&&x.push("Rust"),y.forEach(O=>{O.type==="file"&&!O.name.startsWith(".")&&p.push(O.name)});let _="",k=[],E=[...x,...v],C="moderate";try{const O=`Analyze this GitHub repository and provide insights:

Repository: ${l.fullName}
Description: ${l.description||"No description"}
Language: ${l.language||x.join(", ")||"Unknown"}
Has README: ${m?"Yes":"No"}
Has package.json: ${w?"Yes":"No"}
Main files: ${p.slice(0,10).join(", ")}

${w?`Package.json dependencies: ${Object.keys(w.dependencies||{}).slice(0,20).join(", ")}`:""}

Provide:
1. A brief summary (2-3 sentences) of what this repository does
2. 3-5 key features or capabilities
3. The primary tech stack
4. Complexity level (simple/moderate/complex)

Format as JSON:
{
  "summary": "...",
  "keyFeatures": ["...", "..."],
  "techStack": ["...", "..."],
  "complexity": "simple|moderate|complex"
}`;RW(l).catch(L=>console.warn(`[RepoAnalysis] RAG indexing failed for ${l.fullName}:`,L));const $=await ya(O,"You are a technical analyst. Provide concise, accurate analysis of code repositories.","gpt-4o-mini",.3,l.fullName,!0);try{const L=JSON.parse($);_=L.summary||"",k=L.keyFeatures||[],L.techStack&&(E=[...new Set([...E,...L.techStack])]),C=L.complexity||"moderate"}catch{_=$.split(`
`)[0]||`A ${l.language||"software"} project`}}catch{console.warn(`[RepoAnalysis] AI analysis failed for ${l.fullName}, using fallback`),_=l.description||`A ${l.language||"software"} project`,k=v.length>0?v:["General purpose"]}if(!C||C==="moderate"){const O=y.length,$=y.some(ge=>ge.name.includes("test")||ge.name.includes("spec")),L=y.some(ge=>ge.name.includes("config")||ge.name.includes(".json")||ge.name.includes(".yaml"));O<10&&!$&&!L?C="simple":O>50||$&&L&&w?C="complex":C="moderate"}const b={repo:l,structure:{languages:[...new Set(x)],frameworks:[...new Set(v)],hasReadme:!!m,hasPackageJson:!!w,hasConfigFiles:y.some(O=>O.name.includes("config")),mainFiles:p.slice(0,20)},summary:_||l.description||`A ${l.language||"software"} project`,keyFeatures:k.length>0?k:["General purpose application"],techStack:[...new Set(E)],complexity:C};return i++,e.progress={current:i,total:s,currentRepo:l.fullName,currentAgent:"RepoAnalysis"},console.log(`[RepoAnalysis] Completed analysis for ${l.fullName} (${i}/${s})`),{repoFullName:l.fullName,analysis:b,error:null}}catch(c){return i++,console.error(`[RepoAnalysis] Error analyzing ${l.fullName}:`,c),e.progress={current:i,total:s,currentRepo:l.fullName,currentAgent:"RepoAnalysis"},{repoFullName:l.fullName,analysis:null,error:{key:`analysis_${l.fullName}`,message:c.message||"Analysis failed"}}}}),o=await Promise.all(a);for(const l of o)l.analysis?r.set(l.repoFullName,l.analysis):l.error&&(e.errors||(e.errors=new Map),e.errors.set(l.error.key,l.error.message));return e.repoAnalyses=r,e.completedSteps=new Set([...t.completedSteps||[],Q.ANALYSIS]),e.progress={current:t.discoveredRepos.length,total:t.discoveredRepos.length,currentAgent:"RepoAnalysis"},console.log(`[RepoAnalysis] Completed analysis for ${r.size} repositories`),e}async function DW(t){console.log("[DocsPlanner] Starting documentation planning...");const e={currentStep:Q.PLANNING,documentationPlans:new Map};if(!t.repoAnalyses||t.repoAnalyses.size===0)return e.errors=new Map([["planning","No repository analyses available"]]),e;const n=new Map,r=t.repoAnalyses.size;let s=0;const i=Array.from(t.repoAnalyses.entries()).map(async([o,l])=>{try{console.log(`[DocsPlanner] Starting planning for ${o}`);const c=`Create a documentation plan for this repository:

Repository: ${o}
Summary: ${l.summary}
Key Features: ${l.keyFeatures.join(", ")}
Tech Stack: ${l.techStack.join(", ")}
Complexity: ${l.complexity}
Has README: ${l.structure.hasReadme}
Has package.json: ${l.structure.hasPackageJson}
Main Files: ${l.structure.mainFiles.slice(0,10).join(", ")}

Create a comprehensive documentation plan with sections. Consider:
- Overview/Introduction
- Features and capabilities
- Setup/Installation instructions
- API documentation (if applicable)
- Architecture/Structure
- Examples/Usage

Return JSON format:
{
  "sections": [
    {
      "title": "Section Title",
      "type": "overview|features|setup|api|architecture|examples",
      "priority": 1-10,
      "estimatedTokens": 500
    }
  ],
  "estimatedLength": 5000,
  "focusAreas": ["area1", "area2"],
  "style": "technical|user-friendly|comprehensive"
}`;let d;try{const h=await ya(c,"You are a documentation planning expert. Create detailed, structured documentation plans.","gpt-4o-mini",.4),m=JSON.parse(h);d={repo:l.repo,sections:m.sections.map(f=>({title:f.title,type:f.type||"overview",priority:f.priority||5,estimatedTokens:f.estimatedTokens||500})),estimatedLength:m.estimatedLength||5e3,focusAreas:m.focusAreas||l.keyFeatures,style:m.style||"comprehensive"}}catch{console.warn(`[DocsPlanner] AI planning failed for ${o}, using default plan`),d={repo:l.repo,sections:[{title:"Overview",type:"overview",priority:10,estimatedTokens:300},{title:"Features",type:"features",priority:9,estimatedTokens:500},{title:"Setup",type:"setup",priority:8,estimatedTokens:400},{title:"Architecture",type:"architecture",priority:7,estimatedTokens:600},{title:"Examples",type:"examples",priority:6,estimatedTokens:400}],estimatedLength:3e3,focusAreas:l.keyFeatures,style:"comprehensive"}}return d.sections.sort((h,m)=>m.priority-h.priority),s++,e.progress={current:s,total:r,currentRepo:o,currentAgent:"DocsPlanner"},console.log(`[DocsPlanner] Completed planning for ${o} (${s}/${r})`),{repoFullName:o,plan:d,error:null}}catch(c){return s++,console.error(`[DocsPlanner] Error planning for ${o}:`,c),e.progress={current:s,total:r,currentRepo:o,currentAgent:"DocsPlanner"},{repoFullName:o,plan:null,error:{key:`planning_${o}`,message:c.message||"Planning failed"}}}}),a=await Promise.all(i);for(const o of a)o.plan?n.set(o.repoFullName,o.plan):o.error&&(e.errors||(e.errors=new Map),e.errors.set(o.error.key,o.error.message));return e.documentationPlans=n,e.completedSteps=new Set([...t.completedSteps||[],Q.PLANNING]),e.progress={current:r,total:r,currentAgent:"DocsPlanner"},console.log(`[DocsPlanner] Completed planning for ${n.size} repositories`),e}async function MW(t,e,n={}){var a;const r=((a=t.sections)==null?void 0:a.sort((o,l)=>o.order-l.order))||[];let s="";s=`${t.title}

`;const i=[];if(r.forEach(o=>{let l="";const c=o.type.toLowerCase(),d=o.props||{};switch(c){case"hero":d.title?(l=`A hero section featuring "${d.title}"`,d.subtitle&&(l+=` with the message "${d.subtitle}"`)):l="A hero section";break;case"features":d.title?(l=`A features section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` highlighting ${d.items.length} key feature${d.items.length!==1?"s":""}`)):l="A features section";break;case"pricing":d.title?(l=`A pricing section titled "${d.title}"`,d.tiers&&Array.isArray(d.tiers)&&(l+=` with ${d.tiers.length} pricing tier${d.tiers.length!==1?"s":""}`)):l="A pricing section";break;case"testimonials":d.title?(l=`A testimonials section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` featuring ${d.items.length} testimonial${d.items.length!==1?"s":""}`)):l="A testimonials section";break;case"faq":d.title?(l=`An FAQ section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` with ${d.items.length} question${d.items.length!==1?"s":""} and answer${d.items.length!==1?"s":""}`)):l="An FAQ section";break;case"gallery":d.title?(l=`A gallery section titled "${d.title}"`,d.items&&Array.isArray(d.items)&&(l+=` showcasing ${d.items.length} item${d.items.length!==1?"s":""}`)):l="A gallery section";break;case"contact":if(d.title){if(l=`A contact section titled "${d.title}"`,d.email||d.phone||d.address){const h=[];d.email&&h.push("email"),d.phone&&h.push("phone"),d.address&&h.push("address"),l+=` with contact information (${h.join(", ")})`}}else l="A contact section";break;case"about":d.title?(l=`An about section titled "${d.title}"`,d.content&&(l+=" with detailed content")):l="An about section";break;case"cta":d.title?(l=`A call-to-action section titled "${d.title}"`,d.ctaLabel&&(l+=` with a "${d.ctaLabel}" button`)):l="A call-to-action section";break;case"footer":d.companyName?(l=`A footer section for ${d.companyName}`,d.links&&Array.isArray(d.links)&&(l+=` with ${d.links.length} link${d.links.length!==1?"s":""}`)):l="A footer section";break;case"navbar":l="A navigation bar";break;default:l=`A ${o.type} section`}i.push(l)}),i.length===0)s+=`This is the ${t.title} page located at ${t.path}. The page is part of the ${e.name} project.

`,s+="Currently, this page does not have any sections configured.";else{s+=`This is the ${t.title} page located at ${t.path}. The page is part of the ${e.name} project.

`,s+=`This page contains the following content:

`,i.forEach((l,c)=>{s+=`${c+1}. ${l}.
`}),s+=`
Together, these sections create a ${t.title.toLowerCase()} page that `;const o=t.title.toLowerCase();o.includes("home")||t.path==="/"?s+=`serves as the main landing page for the website, introducing visitors to ${e.name} and providing key information and navigation options.`:o.includes("about")?s+=`provides information about ${e.name}, including background details and key information about the organization or service.`:o.includes("contact")?s+=`allows visitors to get in touch with ${e.name} through various contact methods.`:o.includes("pricing")||o.includes("plan")?s+=`displays pricing information and options for ${e.name}'s products or services.`:o.includes("service")?s+=`showcases the services or offerings provided by ${e.name}.`:o.includes("portfolio")||o.includes("gallery")||o.includes("work")?s+=`displays a collection of work, projects, or visual content for ${e.name}.`:o.includes("blog")||o.includes("article")?s+=`features blog posts, articles, or news content related to ${e.name}.`:s+=`provides relevant information and content related to ${t.title.toLowerCase()} for ${e.name}.`}return s}async function LW(t,e,n,r,s,i){const a=[];if(n){const l=n.split(`
`).filter(c=>c.trim().length>0).slice(0,5).join(" ");l.length>0&&a.push(`Project Description: ${l.substring(0,500)}`)}if(r&&(r.description&&a.push(`Package Description: ${r.description}`),r.name&&a.push(`Project Name: ${r.name}`),r.scripts)){const o=Object.keys(r.scripts).join(", ");a.push(`Available Scripts: ${o}`)}if(s&&s.pages){const o=s.pages.map(c=>c.title).join(", ");a.push(`Pages: ${o}`);const l=[];if(s.pages.forEach(c=>{c.sections&&Array.isArray(c.sections)&&c.sections.forEach(d=>{d.type&&l.push(d.type)})}),l.length>0){const c=[...new Set(l)];a.push(`Site Features: ${c.join(", ")} sections`)}}try{const o="You are a technical documentation expert. Analyze the provided information about a website or web application and write a clear, comprehensive explanation of what the site does, its purpose, and its main features. Write in a professional but accessible tone.",l=`Based on the following information about the website "${t}" (${e}/${t}), write a comprehensive explanation of what this site does:

${a.join(`

`)}

Please provide:
1. A clear explanation of the site's purpose and what it does
2. The main features and functionality
3. Who the target audience might be
4. What users can accomplish with this site

Write 2-4 paragraphs that clearly explain what this site does.`;return await ya(l,o,"gpt-4o-mini",.7)}catch{return FW(t,e,a,i)}}function FW(t,e,n,r){let s=`## What This Site Does

`;if(s+=`The **${t}** website is a web application developed by ${e}. `,r&&r.length>0){const i=r.map(a=>a.title.toLowerCase());i.some(a=>a.includes("home")||a.includes("landing"))&&(s+="This site serves as a digital presence with a landing page that introduces visitors to the project. "),i.some(a=>a.includes("about"))&&(s+="It includes an About page that provides information about the organization or project. "),i.some(a=>a.includes("contact"))&&(s+="Visitors can get in touch through a dedicated Contact page. "),i.some(a=>a.includes("service")||a.includes("feature"))&&(s+="The site showcases services or features offered by the project. "),i.some(a=>a.includes("product")||a.includes("shop")||a.includes("store"))&&(s+="It includes e-commerce functionality with product listings and shopping capabilities. "),i.some(a=>a.includes("blog")||a.includes("article"))&&(s+="The site features a blog or article section for content publishing. "),i.some(a=>a.includes("portfolio")||a.includes("gallery"))&&(s+="It displays a portfolio or gallery showcasing work, projects, or visual content. "),i.some(a=>a.includes("pricing")||a.includes("plan"))&&(s+="Pricing information and plans are available for users to review. "),i.some(a=>a.includes("dashboard"))&&(s+="The site includes a dashboard with analytics, data visualization, and user management features. "),s+=`

`,s+=`**Main Pages:** The site consists of ${r.length} main page${r.length!==1?"s":""}: ${r.map(a=>a.title).join(", ")}. `,s+="Each page serves a specific purpose in providing information and functionality to visitors."}else s+="Based on the repository structure, this appears to be a web application with various features and functionality. ",s+="The site likely provides information, services, or tools related to the project's purpose.";if(n.length>0){s+=`

**Technical Details:** `;const i=n.filter(a=>!a.includes("Pages:")&&!a.includes("Site Features:"));i.length>0&&(s+=i.join(". ")+".")}return s}async function UW(t,e={}){var w,x,v;const n=pm(t);if(!n)throw new Error("Invalid GitHub URL. Please use format: https://github.com/owner/repo or owner/repo");const{owner:r,repo:s,branch:i="main"}=n,a=Mt();let o="";o=`# Documentation for ${r}/${s}

`,o+=`**Repository:** ${r}/${s}  
`,o+=`**Branch:** ${i}  
`,o+=`**Generated:** ${new Date().toISOString()}

`,o+=`---

`;let l=null;try{l=await ps(r,s,"README.md",i,a||void 0)}catch{}l&&(o+=`## Project Overview

`,o+=`${l}

`,o+=`---

`);let c=null;try{const p=await ps(r,s,"package.json",i,a||void 0);if(p){if(c=JSON.parse(p),o+=`## Project Configuration

`,o+=`**Name:** ${c.name||s}

`,c.description&&(o+=`**Description:** ${c.description}

`),c.version&&(o+=`**Version:** ${c.version}

`),c.scripts&&(o+=`**Available Scripts:**

`,Object.entries(c.scripts).forEach(([g,_])=>{o+=`- \`${g}\`: ${_}
`}),o+=`
`),c.dependencies){const g=Object.keys(c.dependencies).length;o+=`**Dependencies:** ${g} packages

`}o+=`---

`}}catch{}const d=["project.json","export/project.json","src/project.json"];let h=null;for(const p of d)try{const g=await ps(r,s,p,i,a||void 0);if(g)try{h=JSON.parse(g);break}catch{}}catch{}let m="",f=null,y=null;h&&(f={id:"",user_id:"",name:h.name||s,description:h.description||"",theme:h.theme||{primary:"#3b82f6",secondary:"#8b5cf6",background:"#ffffff",text:"#1f2937",fontFamily:"Inter, sans-serif"},pages:((w=h.pages)==null?void 0:w.map(p=>({id:p.id||"",project_id:"",path:p.path,title:p.title,order:p.order||0,sections:p.sections||[]})))||[]},y=f.pages||[]);try{m=await LW(s,r,l,c,h,y),o+=`## What This Site Does

`,o+=`${m}

`,o+=`---

`}catch(p){console.warn("Could not generate AI explanation:",p.message)}if(h){o+=`## Site Structure

`,o+=`This project contains ${((x=h.pages)==null?void 0:x.length)||0} page${((v=h.pages)==null?void 0:v.length)!==1?"s":""}:

`;for(const p of f.pages.sort((g,_)=>g.order-_.order)){const g=await MW(p,f,e);o+=`${g}

`}}else{o+=`## Site Structure Analysis

`;try{const p=["app","pages","src/pages","src/app","components","src/components"],g=[],_=[];for(const E of p)try{const C=await ys(r,s,E,i,a||void 0);for(const b of C)if(b.type==="file"&&(b.name.endsWith(".tsx")||b.name.endsWith(".jsx")||b.name.endsWith(".ts")||b.name.endsWith(".js")))E.includes("page")||b.name.includes("page")||b.path.includes("/page")?g.push(b.path):E.includes("component")&&_.push(b.path);else if(b.type==="dir")try{const O=await ys(r,s,b.path,i,a||void 0);for(const $ of O)$.type==="file"&&($.name.endsWith(".tsx")||$.name.endsWith(".jsx"))&&($.path.includes("page")||$.name==="page.tsx"||$.name==="page.jsx"?g.push($.path):_.push($.path))}catch{}}catch{}if(g.length>0&&(o+=`### Pages Found (${g.length})

`,g.forEach(E=>{o+=`- **${E}**
`}),o+=`
`),_.length>0){o+=`### Components Found (${_.length})

`;const E={};_.forEach(C=>{const b=C.split("/").slice(0,-1).join("/")||"root";E[b]||(E[b]=[]),E[b].push(C.split("/").pop()||C)}),Object.entries(E).forEach(([C,b])=>{o+=`**${C||"root"}:**
`,b.forEach(O=>{o+=`- ${O}
`}),o+=`
`})}const k=["next.config.js","next.config.ts","tailwind.config.js","tailwind.config.ts","tsconfig.json"];o+=`### Configuration Files

`;for(const E of k)try{await ps(r,s,E,i,a||void 0)&&(o+=`**${E}** - Found and analyzed

`)}catch{}}catch(p){o+=`Unable to analyze repository structure: ${p.message}

`,o+=`This may be due to:
`,o+=`- Repository is private (requires GitHub token)
`,o+=`- Rate limiting (try again later or use a GitHub token)
`,o+=`- Invalid repository URL

`}}try{const p=await ys(r,s,"",i,a||void 0);p.length>0&&(o+=`## Repository Structure

`,o+=`**Root Directory Contents:**

`,p.forEach(g=>{const _=g.type==="dir"?"":"";o+=`${_} ${g.name}
`}),o+=`
`)}catch{}return o}function Kk(t,e="documentation.md"){const n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}async function zW(t,e,n,r,s={},i){switch(e){case"markdown":return BW(n,r);case"markdown_mermaid":return await GW(n,r,t,i);case"mdx":return await HW(n,r);case"openapi":return await WW(n,r,t,i);case"html":return qW(n,r);default:return r}}function BW(t,e){return`${ef(t)}

${e}`}async function GW(t,e,n,r){var a,o,l,c,d;const s=ef(t);let i="";try{const h=pm(n);if(h){const{owner:m,repo:f,branch:y="main"}=h,w=Mt();let x="";try{x=`Repository structure: ${(await ys(m,f,"",y,w||void 0)).filter(C=>C.type==="dir").map(C=>C.name).join(", ")}`}catch{}const v=r?`Tech Stack: ${((a=r.techStack)==null?void 0:a.join(", "))||"Unknown"}
Frameworks: ${((l=(o=r.structure)==null?void 0:o.frameworks)==null?void 0:l.join(", "))||"Unknown"}
Languages: ${((d=(c=r.structure)==null?void 0:c.languages)==null?void 0:d.join(", "))||"Unknown"}`:"",p=`Based on this repository documentation and structure, generate a detailed Mermaid diagram for a ${t} section.

${v}
${x}

Repository Documentation:
${e.substring(0,2e3)}

Generate a Mermaid diagram that accurately represents:
${t==="ARCHITECTURE"?"The system architecture, component relationships, and data flow":t==="API"?"API endpoints, request/response flow, and data models":t==="COMPONENTS"?"Component hierarchy, props flow, and component relationships":"The structure and relationships"}

Return ONLY the Mermaid diagram code (without markdown code fences). Make it detailed and accurate based on the repository structure.`;i=`
\`\`\`mermaid
${(await ya(p,"You are an expert at creating Mermaid diagrams for software documentation. Generate accurate, detailed diagrams based on repository structure.","gpt-4o-mini",.4)).replace(/```mermaid\n?/g,"").replace(/```\n?/g,"").trim()}
\`\`\`

`}}catch(h){console.warn("[FormatGenerator] Failed to generate Mermaid diagram, using fallback:",h),i=VW(t)}return`${s}

${i}${e}`}function VW(t){switch(t){case"ARCHITECTURE":return`
\`\`\`mermaid
graph TB
    A[Application] --> B[Components]
    A --> C[Services]
    A --> D[Utilities]
    B --> E[UI Components]
    C --> F[API Layer]
    D --> G[Helpers]
\`\`\`

`;case"API":return`
\`\`\`mermaid
sequenceDiagram
    participant Client
    participant API
    participant Database
    
    Client->>API: Request
    API->>Database: Query
    Database-->>API: Response
    API-->>Client: Result
\`\`\`

`;case"COMPONENTS":return`
\`\`\`mermaid
graph LR
    A[Component] --> B[Props]
    A --> C[State]
    A --> D[Methods]
    B --> E[Inputs]
    C --> F[Data]
\`\`\`

`;default:return""}}async function HW(t,e,n,r){const s=ef(t),i=`import { CodeBlock, Callout, Tabs, TabItem, Card, Grid } from '@mdx/components';
import { Info, Warning, CheckCircle, AlertCircle } from 'lucide-react';

export const meta = {
  title: '${tf(t)}',
  description: '${t} documentation',
};

`;let a=e;return a=a.replace(/```(\w+)?\n([\s\S]*?)```/g,(o,l,c)=>`<CodeBlock language="${l||"text"}" showLineNumbers>
${c.trim()}
</CodeBlock>`),a=a.replace(/^> (.+)$/gm,(o,l)=>`<Callout type="info">
${l.trim()}
</Callout>`),(t==="API"||t==="COMPONENTS")&&(a=`
<Tabs>
  <TabItem label="Overview" value="overview">
${a.split(`
`).slice(0,20).join(`
`)}
  </TabItem>
  <TabItem label="Examples" value="examples">
    <Card>
      <h3>Usage Examples</h3>
      <p>See the code examples below for practical usage.</p>
    </Card>
  </TabItem>
  <TabItem label="Reference" value="reference">
${a}
  </TabItem>
</Tabs>

`),t==="COMPONENTS"&&(a=`<Grid cols={2}>
  <Card>
    <h3>Component Overview</h3>
    ${a.substring(0,500)}
  </Card>
  <Card>
    <h3>Props & Usage</h3>
    ${a.substring(500)}
  </Card>
</Grid>`),`${i}${s}

${a}`}async function WW(t,e,n,r){var d,h,m;if(t!=="API")return`# ${tf(t)}

This section does not contain API documentation.`;const s=pm(n);if(!s)return`# API Reference

Invalid repository URL.`;const{owner:i,repo:a,branch:o="main"}=s,l=Mt();let c=[];try{const f=await ys(i,a,"",o,l||void 0),y=["api","routes","endpoints","controllers","handlers"];for(const w of f)if(w.type==="dir"&&y.some(x=>w.name.toLowerCase().includes(x)))try{const x=await ys(i,a,w.path,o,l||void 0);c.push(...x.filter(v=>v.type==="file"&&(v.name.endsWith(".ts")||v.name.endsWith(".js"))).map(v=>v.path))}catch{}}catch{}try{const f=c.length>0?`

Found potential API files: ${c.slice(0,5).join(", ")}`:"",y=r?`
Tech Stack: ${((d=r.techStack)==null?void 0:d.join(", "))||"Unknown"}
Frameworks: ${((m=(h=r.structure)==null?void 0:h.frameworks)==null?void 0:m.join(", "))||"Unknown"}`:"",w=`Analyze this repository documentation and generate a complete OpenAPI 3.0 specification.

Repository: ${i}/${a}
${y}
${f}

Documentation:
${e.substring(0,3e3)}

Generate a complete OpenAPI 3.0 YAML specification with:
- Info section with proper title, version, and description
- Servers array (infer from documentation or use common patterns)
- Paths section with actual endpoints extracted from the documentation
- Request/response schemas
- Parameters, request bodies, and responses
- Proper HTTP methods (GET, POST, PUT, DELETE, etc.)

Return ONLY valid OpenAPI 3.0 YAML. Be specific and detailed. Include at least 3-5 endpoints if possible.`;let v=(await ya(w,"You are an expert at creating OpenAPI specifications. Generate complete, valid OpenAPI 3.0 YAML with detailed endpoints, schemas, and examples.","gpt-4o-mini",.5)).replace(/```yaml\n?/g,"").replace(/```\n?/g,"").trim();return v.startsWith("openapi:")||(v=`openapi: 3.0.0
${v}`),v}catch(f){return console.warn("[FormatGenerator] Failed to generate OpenAPI spec:",f),`openapi: 3.0.0
info:
  title: ${a} API
  version: 1.0.0
  description: Auto-generated API documentation for ${i}/${a}
servers:
  - url: https://api.example.com
    description: Production server
  - url: https://api-staging.example.com
    description: Staging server
paths:
  /api/v1/health:
    get:
      summary: Health check endpoint
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
components:
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
        code:
          type: integer
`}}function qW(t,e){const n=ef(t);return`
<style>
.doc-html-content * { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
}
.doc-html-content {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif; 
    line-height: 1.8; 
    color: #1a1a1a;
    background: white;
    border-radius: 16px;
    overflow: hidden;
}
.doc-html-content .header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px;
    text-align: center;
    margin: -40px -40px 40px -40px;
}
.doc-html-content .header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
    font-weight: 700;
}
.doc-html-content .header p {
    opacity: 0.9;
    font-size: 1.1em;
}
.doc-html-content .content {
    padding: 0;
}
.doc-html-content h1 { 
    color: #667eea; 
    font-size: 2em;
    margin: 30px 0 20px 0;
    border-bottom: 3px solid #667eea;
    padding-bottom: 10px;
}
.doc-html-content h2 { 
    color: #764ba2; 
    font-size: 1.6em;
    margin: 25px 0 15px 0;
}
.doc-html-content h3 { 
    color: #555; 
    font-size: 1.3em;
    margin: 20px 0 10px 0;
}
.doc-html-content p {
    margin: 15px 0;
    color: #333;
}
.doc-html-content code { 
    background: #f4f4f4; 
    padding: 3px 8px; 
    border-radius: 4px; 
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
    color: #e83e8c;
}
.doc-html-content pre { 
    background: #1e1e1e; 
    color: #d4d4d4;
    padding: 20px; 
    border-radius: 8px; 
    overflow-x: auto;
    margin: 20px 0;
    border-left: 4px solid #667eea;
}
.doc-html-content pre code {
    background: transparent;
    color: #d4d4d4;
    padding: 0;
}
.doc-html-content blockquote { 
    border-left: 4px solid #667eea; 
    padding-left: 20px; 
    margin-left: 0;
    margin: 20px 0;
    padding: 15px 20px;
    background: #f8f9fa;
    border-radius: 4px;
    font-style: italic;
}
.doc-html-content ul, 
.doc-html-content ol {
    margin: 15px 0;
    padding-left: 30px;
}
.doc-html-content li {
    margin: 8px 0;
}
.doc-html-content a {
    color: #667eea;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.3s;
}
.doc-html-content a:hover {
    border-bottom-color: #667eea;
}
.doc-html-content .footer {
    background: #f8f9fa;
    padding: 20px 40px;
    text-align: center;
    color: #666;
    font-size: 0.9em;
    margin: 40px -40px -40px -40px;
}
.doc-html-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}
.doc-html-content th, 
.doc-html-content td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}
.doc-html-content th {
    background: #667eea;
    color: white;
    font-weight: 600;
}
.doc-html-content tr:hover {
    background: #f8f9fa;
}
</style>
<div class="doc-html-content">
    <div class="header">
        <h1>${tf(t)}</h1>
        <p>Comprehensive Documentation</p>
    </div>
    <div class="content">
        ${KW(`${n}

${e}`)}
    </div>
    <div class="footer">
        <p>Generated on ${new Date().toLocaleDateString()}  Auto-generated documentation</p>
    </div>
</div>`}function KW(t){let e=t;return e=e.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/```(\w+)?\n([\s\S]*?)```/gim,(r,s,i)=>`<pre><code class="language-${s||"text"}">${ZW(i.trim())}</code></pre>`),e=e.replace(/`([^`]+)`/gim,"<code>$1</code>"),e=e.replace(/\*\*\*(.*?)\*\*\*/gim,"<strong><em>$1</em></strong>"),e=e.replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>"),e=e.replace(/\*(.*?)\*/gim,"<em>$1</em>"),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener">$1</a>'),e=e.replace(/^> (.+)$/gim,"<blockquote>$1</blockquote>"),e=e.replace(/^\- (.+)$/gim,"<li>$1</li>"),e=e.replace(/^(\d+)\. (.+)$/gim,"<li>$2</li>"),e=e.replace(/^---$/gim,"<hr>"),e=e.split(/\n\n+/).map(r=>(r=r.trim(),r?r.startsWith("<")&&(r.startsWith("<h")||r.startsWith("<pre")||r.startsWith("<ul")||r.startsWith("<ol")||r.startsWith("<blockquote"))?r:`<p>${r}</p>`:"")).join(`

`),e=e.replace(/(<li>.*<\/li>\n?)+/g,r=>`<ul>${r}</ul>`),e}function ZW(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])}function ef(t){return`# ${tf(t)}`}function tf(t){switch(t){case"README":return"README";case"ARCHITECTURE":return"Architecture";case"API":return"API Reference";case"COMPONENTS":return"Components";case"TESTING_CI":return"Testing & CI/CD";case"CHANGELOG":return"Changelog";default:return"Documentation"}}async function YW(t){var m,f;console.log("[DocsWriter] Starting documentation generation...");const e={currentStep:Q.WRITING,generatedDocs:new Map};if(!t.documentationPlans||t.documentationPlans.size===0)return e.errors=new Map([["writing","No documentation plans available"]]),e;const n=t.selectedOutputFormats||["markdown"],r=t.selectedSectionTypes||["README"],s=t.selectedLanguage||"en",i=new Map,a=new Map,o=t.documentationPlans.size;let l=0;const c=t.selectedModel||"gpt-4o-mini",d=Array.from(t.documentationPlans.entries()).map(async([y,w])=>{var v;let x="";try{console.log(`[DocsWriter] Starting generation for ${y}`),console.log(`[DocsWriter] Formats: ${n.join(", ")}, Sections: ${r.join(", ")}`);const p=w.repo.htmlUrl||`${w.repo.owner}/${w.repo.name}`;try{x=await UW(p,{format:"markdown",includeCode:!0,includeProps:!0,includeExamples:!0,depth:w.style==="comprehensive"?"comprehensive":w.style==="technical"?"detailed":"basic"}),console.log(`[DocsWriter] Base markdown generated for ${y}, length: ${x.length}`)}catch(b){console.error(`[DocsWriter] Failed to generate base markdown for ${y}:`,b),x=`# ${w.repo.name}

${w.repo.description||"Documentation for "+y}

*Note: Base documentation generation failed. Please check repository access.*`}const g=[],_=(v=t.repoAnalyses)==null?void 0:v.get(y);for(const b of r){const O=await XW(b,p,x,_,w,s,c);for(const $ of n)try{const L=await zW(p,$,b,O,{includeCode:!0,includeProps:!0,includeExamples:!0,depth:w.style==="comprehensive"?"comprehensive":"detailed"},_),ge={id:`${b}_${$}_${Date.now()}`,type:b,format:$,language:s,title:`${JW(b)} (${$})`};$==="openapi"?ge.openapiYaml=L:$==="html"?ge.html=L:ge.markdown=L,g.push(ge)}catch(L){console.error(`[DocsWriter] Error generating ${$} for ${b}:`,L)}}const k={repoName:w.repo.name,owner:w.repo.owner,sections:g,createdAt:new Date().toISOString()};let E="";const C=g.find(b=>b.markdown);if(C!=null&&C.markdown)E=C.markdown;else if(g.length>0){const b=g[0];E=b.markdown||b.html||b.openapiYaml||""}else if(console.warn(`[DocsWriter] No sections generated for ${y}, using baseMarkdown as fallback`),x&&x.trim().length>0){const b={id:`fallback_${Date.now()}`,type:r[0]||"README",format:n[0]||"markdown",language:s,title:"Documentation",markdown:x};g.push(b),k.sections=g,E=x,console.log(`[DocsWriter] Using baseMarkdown fallback for ${y}`)}else console.error(`[DocsWriter] No documentation generated for ${y} - baseMarkdown is also empty`),E=`# ${w.repo.name}

*Documentation generation failed. Please check the console for errors.*`;return l++,e.progress={current:l,total:o,currentRepo:y,currentAgent:"DocsWriter"},console.log(`[DocsWriter] Completed generation for ${y} (${l}/${o})`),{repoFullName:y,generatedDocs:k,markdown:E,error:null}}catch(p){return l++,console.error(`[DocsWriter] Error generating docs for ${y}:`,p),e.progress={current:l,total:o,currentRepo:y,currentAgent:"DocsWriter"},{repoFullName:y,generatedDocs:null,markdown:"",error:{key:`writing_${y}`,message:p.message||"Documentation generation failed"}}}}),h=await Promise.all(d);for(const y of h)y.generatedDocs?(a.set(y.repoFullName,y.generatedDocs),y.markdown&&i.set(y.repoFullName,y.markdown)):y.error&&(e.errors||(e.errors=new Map),e.errors.set(y.error.key,y.error.message));return e.generatedDocs=i,e.generatedDocsFull=a,e.completedSteps=new Set([...t.completedSteps||[],Q.WRITING]),e.progress={current:o,total:o,currentAgent:"DocsWriter"},console.log(`[DocsWriter] Completed generation for ${i.size} repositories`),console.log(`[DocsWriter] Generated docs map size: ${i.size}, Full docs map size: ${a.size}`),i.size===0&&a.size===0&&(console.error("[DocsWriter] WARNING: No documentation was generated for any repository!"),console.error("[DocsWriter] State check:",{hasDocumentationPlans:!!t.documentationPlans&&t.documentationPlans.size>0,plansCount:((m=t.documentationPlans)==null?void 0:m.size)||0,selectedFormats:n,selectedSectionTypes:r,errors:Array.from(((f=e.errors)==null?void 0:f.entries())||[])})),e}function JW(t){switch(t){case"README":return"README";case"ARCHITECTURE":return"Architecture";case"API":return"API Reference";case"COMPONENTS":return"Components";case"TESTING_CI":return"Testing & CI/CD";case"CHANGELOG":return"Changelog";default:return"Documentation"}}async function XW(t,e,n,r,s,i="en",a="gpt-4o-mini"){var y,w,x,v,p,g;const o=`${s.repo.owner}/${s.repo.name}`;let l="";try{l=await uj(`Generate ${t} documentation for ${o}`,o,10)}catch(_){console.warn(`[DocsWriter] RAG context retrieval failed for ${o}:`,_)}let c="";try{const _=pm(e);if(_){const{owner:k,repo:E,branch:C="main"}=_,b=Mt();c=await HE(k,E,"",C,b||void 0)}}catch(_){console.warn(`[DocsWriter] Failed to generate directory tree for ${o}:`,_)}const d=r?`
Repository Analysis:
- Summary: ${r.summary}
- Key Features: ${r.keyFeatures.join(", ")}
- Tech Stack: ${r.techStack.join(", ")}
- Frameworks: ${((w=(y=r.structure)==null?void 0:y.frameworks)==null?void 0:w.join(", "))||"Unknown"}
- Languages: ${((v=(x=r.structure)==null?void 0:x.languages)==null?void 0:v.join(", "))||"Unknown"}
- Complexity: ${r.complexity}
- Main Files: ${((g=(p=r.structure)==null?void 0:p.mainFiles)==null?void 0:g.join(", "))||"Unknown"}
${c?`
Complete Directory Structure:
\`\`\`
${c}\`\`\`
`:""}
`:c?`
Complete Directory Structure:
\`\`\`
${c}\`\`\`
`:"",h={en:"English",fr:"French",de:"German"},m=i!=="en"?`

IMPORTANT: Generate all content in ${h[i]}. All text, descriptions, and explanations must be in ${h[i]}.`:"";let f="";switch(t){case"README":f=`Generate a comprehensive README.md for the repository "${o}" in Ai-Style documentation format.
${m}

${l?`
Relevant Code Context:
${l}
`:""}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE README content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE README that includes (be thorough and detailed):

1. **Project Title and Description** - Detailed overview with purpose, goals, and target audience
2. **Features** - Comprehensive list of key capabilities with detailed explanations and code references
3. **Installation/Setup** - Complete step-by-step setup instructions with prerequisites, dependencies, and troubleshooting
4. **Usage** - Extensive usage guide with multiple code examples from the actual codebase, different use cases, and scenarios
5. **API/Function Examples** - Detailed documentation of key functions/classes with:
   - Complete signatures and type information
   - Multiple usage examples (basic, advanced, edge cases)
   - Parameter descriptions with constraints
   - Return value explanations
   - Error handling examples
6. **Configuration** - Comprehensive configuration guide with all options explained
7. **Architecture Overview** - System design and component relationships. If including a "Project Structure" section, use the complete directory structure provided in the context above. Display it as a simple tree format with backticks (, ) and brief inline comments, NOT verbose bullet points with descriptions. Show ALL files and directories - do NOT truncate.
8. **Contributing** - Detailed guidelines for contributors with workflow and standards
9. **License** - License information and usage terms
10. **Additional Sections** - FAQ, troubleshooting, known issues, roadmap, etc.

IMPORTANT: Generate EXTENSIVE documentation - aim for 3000-5000+ words. Be thorough, detailed, and comprehensive. Include multiple examples, detailed explanations, and complete information. Do not be brief - provide comprehensive documentation similar to major open-source projects.

Style: Write in a Cursor-like style - code-focused, practical, with real examples from the codebase. Include extensive code snippets that show actual usage patterns. Make it developer-friendly and actionable.`;break;case"ARCHITECTURE":f=`Generate an Architecture documentation section for "${o}" in Ai-Style format.
${m}

${l?`
Relevant Code Context:
${l}
`:""}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Architecture content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Architecture document in Ai-Style that includes (be thorough and detailed):

1. **System Overview** - Detailed high-level architecture description with diagrams descriptions, design decisions, and code references
2. **Component Structure** - Complete breakdown of ALL major components/modules with:
   - Detailed purpose and responsibility
   - Complete code examples
   - Interaction patterns
   - Dependencies between components
3. **Key Classes/Functions** - Comprehensive documentation of important classes and functions with:
   - Complete JSDoc/TSDoc comments
   - Full type signatures with detailed parameter descriptions
   - Purpose, responsibility, and design rationale
   - How they fit in the architecture
   - Multiple usage examples
   - Performance considerations
4. **Data Flow** - Detailed explanation of how data moves through the system with:
   - Step-by-step flow descriptions
   - Reference to actual functions
   - State management approach
   - Data transformation points
5. **Technology Stack** - Comprehensive tech stack documentation with:
   - Detailed explanations of each technology
   - Why each was chosen
   - Code examples showing usage
   - Version information
6. **Project Structure** - Display the COMPLETE directory structure of the entire repository (especially the src/ directory) as a simple tree format using backticks and tree characters (, ). The complete directory structure is provided in the context above. You MUST include ALL files and subdirectories. Format it like this example:

\`\`\`
src/
 components/
    Component1.tsx
    Component2.tsx
 pages/
    Page1.tsx
 lib/
     utils.ts
\`\`\`

IMPORTANT: Use the complete directory structure provided in the context above. Show ALL files and directories - do NOT truncate or summarize. Use ONLY the simple tree format with brief inline comments (using #) for directory purposes. Keep it concise and clean but COMPLETE.
7. **Design Patterns** - Detailed documentation of patterns used with:
   - Pattern explanations
   - Code examples
   - When and why patterns are used
8. **Dependencies** - Comprehensive dependency documentation with:
   - Key dependencies and their roles
   - Version requirements
   - Why each dependency is needed
9. **System Interactions** - How different parts interact
10. **Scalability and Performance** - Architecture considerations

IMPORTANT: Generate EXTENSIVE documentation - aim for 4000-6000+ words. Be thorough, detailed, and comprehensive. Document everything - don't leave anything out. Include extensive code examples and detailed explanations.

Style: Code-first approach like Cursor AI. Show actual code structures, class hierarchies, and function relationships. Include extensive code examples that demonstrate the architecture.`;break;case"API":f=`Generate an API Reference documentation for "${o}" in Ai-Style format.
${m}

${l?`
Relevant Code Context:
${l}
`:""}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE API Reference content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE API Reference in Ai-Style that includes (be thorough and detailed):

1. **API Overview** - Comprehensive introduction to the API including:
   - Purpose and use cases
   - Design philosophy
   - Getting started guide
   - Common patterns

2. **Function/Class Documentation** - For EVERY exported function/class (document all of them):
   - Complete JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
   - Full type signatures with detailed parameter descriptions
   - Complete parameter documentation including:
     * Type information
     * Purpose and constraints
     * Valid value ranges
     * Default values
     * Example values
   - Comprehensive return type documentation including:
     * What is returned
     * Return value structure
     * Edge cases
   - Multiple practical usage examples (basic, advanced, edge cases, error handling)
   - Performance considerations
   - Error conditions and handling
   - Related functions/classes

3. **Code Examples** - Extensive real code examples showing:
   - Basic usage
   - Advanced usage patterns
   - Integration examples
   - Error handling
   - Best practices
   - Anti-patterns to avoid

4. **Type Definitions** - Complete interface/type documentation with:
   - All properties documented
   - Type constraints explained
   - Usage examples
   - Related types

5. **Error Handling** - Comprehensive error documentation including:
   - All error codes and messages
   - When errors occur
   - How to handle errors
   - Error recovery strategies

6. **Authentication** - Complete authentication guide (if applicable)

7. **Additional Sections**:
   - Rate limiting
   - Versioning
   - Migration guides
   - Deprecation notices

IMPORTANT: Generate EXTENSIVE documentation - aim for 5000-8000+ words. Document EVERY function, class, interface, and type. Be thorough, detailed, and comprehensive. Include extensive examples and detailed explanations. Do not skip any API elements.

Style: Generate documentation similar to Cursor AI - include the actual code with inline documentation comments. Show complete function signatures, detailed parameter types, return types, and extensive practical examples. Make it code-first and developer-friendly.`;break;case"COMPONENTS":f=`Generate a Components documentation section for "${o}" in Ai-Style format.
${m}

${l?`
Relevant Code Context:
${l}
`:""}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Components content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Components document in Ai-Style that includes (be thorough and detailed):

1. **Component Overview** - Comprehensive introduction to the component system including:
   - Architecture and design patterns
   - Component organization
   - Design principles

2. **Component Documentation** - For EVERY component/class/module (document all of them):
   - Complete JSDoc/TSDoc style documentation with all standard tags
   - Comprehensive Props/Parameters documentation with:
     * Complete type information
     * Detailed descriptions
     * Required vs optional
     * Default values
     * Validation rules
     * Example values
   - Complete interface/type definitions with all properties documented
   - Extensive usage examples with actual code (basic, advanced, edge cases)
   - Dependencies and imports explained
   - Component lifecycle (if applicable)
   - State management approach
   - Event handling
   - Styling approach

3. **Code Examples** - Extensive examples showing:
   - Actual component code with complete documentation comments
   - Multiple usage scenarios
   - Integration examples
   - Composition patterns
   - Best practices

4. **Component Hierarchy** - Detailed explanation of:
   - How components relate to each other
   - Component tree structure
   - Data flow between components
   - Communication patterns

5. **Props/Configuration** - Comprehensive prop/parameter documentation with:
   - Complete type information
   - Detailed descriptions
   - Validation rules
   - Default values
   - Usage examples

6. **Additional Sections**:
   - Styling guide
   - Theming
   - Accessibility considerations
   - Performance optimization
   - Testing strategies

IMPORTANT: Generate EXTENSIVE documentation - aim for 4000-6000+ words. Document EVERY component, prop, and type. Be thorough, detailed, and comprehensive. Include extensive examples and detailed explanations.

Style: Generate like Cursor AI - show the actual code with inline documentation. Include complete type information, detailed parameter descriptions, and extensive practical examples. Make it code-focused and practical.`;break;case"TESTING_CI":f=`Generate a Testing & CI/CD documentation section for "${o}".
${m}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Testing & CI/CD content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Testing & CI/CD document that includes (be thorough and detailed):

1. **Testing Strategy** - Comprehensive overview of testing approach including:
   - Testing philosophy and principles
   - Testing pyramid explanation
   - Coverage goals
   - Quality metrics

2. **Test Setup** - Complete guide on how to set up and run tests including:
   - Prerequisites and dependencies
   - Configuration files
   - Environment setup
   - Troubleshooting common issues

3. **Test Types** - Detailed documentation of all test types:
   - Unit tests (with examples)
   - Integration tests (with examples)
   - E2E tests (with examples)
   - Performance tests
   - Security tests
   - Visual regression tests

4. **CI/CD Pipeline** - Comprehensive CI/CD documentation including:
   - Complete pipeline configuration
   - All stages explained
   - Build process
   - Deployment process
   - Rollback procedures

5. **Running Tests** - Extensive commands and instructions:
   - All test commands
   - Options and flags
   - Running specific test suites
   - Debugging tests

6. **Coverage** - Complete test coverage information:
   - Coverage reports
   - Coverage goals
   - Improving coverage

7. **Deployment** - Comprehensive deployment documentation:
   - Deployment process step-by-step
   - All environments explained
   - Deployment strategies
   - Monitoring and rollback

8. **Additional Sections**:
   - Best practices
   - Common issues and solutions
   - Performance optimization
   - Security considerations

IMPORTANT: Generate EXTENSIVE documentation - aim for 3000-5000+ words. Be thorough, detailed, and comprehensive. Include extensive examples and detailed explanations.

Focus on practical testing and deployment workflows with complete information.`;break;case"CHANGELOG":f=`Generate a Changelog documentation for "${o}".
${m}

${d}

Reference Documentation (for context only - DO NOT copy verbatim, use as reference to understand the project):
${n.substring(0,2e3)}${n.length>2e3?`

[... truncated for brevity, use RAG context and code analysis instead ...]`:""}

CRITICAL: Generate COMPLETELY NEW, EXTENSIVE, COMPREHENSIVE Changelog content. DO NOT simply reformat or copy the reference documentation above. Instead:
- Analyze the actual codebase using the RAG context and repository analysis
- Generate fresh, detailed documentation based on the actual code structure
- Create comprehensive content that goes FAR BEYOND the reference documentation
- Use the reference only to understand the project's purpose, not to copy content

Create an EXTENSIVE, COMPREHENSIVE Changelog that includes (be thorough and detailed):

1. **Version History** - Complete list of ALL versions with:
   - Dates
   - Release notes
   - Key highlights

2. **Change Categories** - Detailed documentation for each category:
   - Added (with descriptions)
   - Changed (with before/after explanations)
   - Deprecated (with migration paths)
   - Removed (with alternatives)
   - Fixed (with issue descriptions)
   - Security (with severity and impact)

3. **Recent Changes** - Comprehensive documentation of most recent version changes:
   - Detailed descriptions
   - Impact analysis
   - Migration requirements
   - Breaking changes highlighted

4. **Migration Guides** - Complete migration guides for:
   - All breaking changes
   - Step-by-step migration instructions
   - Code examples
   - Common issues and solutions

5. **Release Notes** - Detailed summaries of major releases including:
   - Feature highlights
   - Performance improvements
   - Bug fixes
   - Security updates

6. **Additional Sections**:
   - Timeline visualization
   - Contributor acknowledgments
   - Statistics

IMPORTANT: Generate EXTENSIVE documentation - aim for 2000-4000+ words. Be thorough, detailed, and comprehensive. Include complete information for all versions and changes.

Format it as a standard changelog with version numbers and dates, but make it comprehensive and detailed.`;break;default:return n}try{const _=i!=="en"?`You are an expert code documentation generator in the style of Cursor AI. Generate EXTENSIVE, COMPREHENSIVE, DETAILED ${t} documentation in ${h[i]}. 

CRITICAL REQUIREMENTS:
- Generate COMPLETELY NEW, EXTENSIVE documentation (aim for 3000-8000+ words depending on section type)
- DO NOT copy or reformat the reference documentation - generate fresh content based on actual codebase analysis
- Use RAG context and repository analysis as PRIMARY sources, not the reference documentation
- Be THOROUGH and COMPREHENSIVE - do not be brief
- Document EVERYTHING - all functions, classes, types, interfaces, constants
- Include COMPLETE JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
- Provide MULTIPLE examples for each concept (basic, advanced, edge cases, error handling)
- Include detailed type information with complete parameter descriptions
- Explain design decisions and rationale, not just what but why
- Include performance considerations, security notes, and best practices
- Document internal functions and helpers, not just public APIs
- Provide extensive code examples from the actual codebase (use RAG context to find real code)
- Include troubleshooting guides and common issues
- Make it as comprehensive as professional API documentation (MDN, TypeScript Handbook level)
- ANALYZE THE ACTUAL CODEBASE - don't rely on reference documentation

All content must be in ${h[i]}. Be EXTENSIVE and DETAILED - quality over brevity. Generate NEW comprehensive content based on codebase analysis, not reference material.`:`You are an expert code documentation generator in the style of Cursor AI. Generate EXTENSIVE, COMPREHENSIVE, DETAILED ${t} documentation.

CRITICAL REQUIREMENTS:
- Generate COMPLETELY NEW, EXTENSIVE documentation (aim for 3000-8000+ words depending on section type)
- DO NOT copy or reformat the reference documentation - generate fresh content based on actual codebase analysis
- Use RAG context and repository analysis as PRIMARY sources, not the reference documentation
- Be THOROUGH and COMPREHENSIVE - do not be brief or concise
- Document EVERYTHING - all functions, classes, types, interfaces, constants, utilities
- Include COMPLETE JSDoc/TSDoc style comments with ALL standard tags (@param, @returns, @throws, @example, @see, @since, @deprecated, @remarks)
- Provide MULTIPLE examples for each concept (basic, advanced, edge cases, error handling, integration)
- Include detailed type information with complete parameter descriptions including constraints and valid ranges
- Explain design decisions and rationale - explain both "what" and "why"
- Include performance considerations, security notes, scalability concerns, and best practices
- Document internal functions and helpers, not just public APIs
- Provide extensive code examples from the actual codebase (use RAG context to find real code)
- Include troubleshooting guides, common issues, and solutions
- Make it as comprehensive as professional API documentation (MDN, TypeScript Handbook, major open-source projects level)
- ANALYZE THE ACTUAL CODEBASE - don't rely on reference documentation

Style: Code-first, practical, developer-friendly, but EXTENSIVE and DETAILED. Quality and completeness over brevity. Generate NEW comprehensive content based on codebase analysis, not reference material.`,E=(b=>b.includes("gpt-4o")||b.includes("gpt-5")?16384:b.startsWith("gpt-4")?8192:b.startsWith("gpt-3.5")?4096:16384)(a);return await ya(f,_,a,.2,o,!0,E)}catch{return console.warn(`[DocsWriter] Failed to generate section-specific content for ${t}, using base markdown`),n}}async function QW(t){var a;console.log("[GitOps] Starting Git operations...");const e={currentStep:Q.GITOPS};if(!t.generatedDocsFull||t.generatedDocsFull.size===0)return e.errors=new Map([["gitops","No generated documentation to commit"]]),e;const n=Mt();if(!n)return e.errors=new Map([["gitops","GitHub token required for Git operations"]]),e;const r=new Map;let s=0;const i=t.generatedDocsFull.size;for(const[o,l]of t.generatedDocsFull.entries())try{s++,e.progress={current:s,total:i,currentRepo:o,currentAgent:"GitOps"},console.log(`[GitOps] Committing documentation for ${o} (${s}/${i})`);const[c,d]=o.split("/"),h=[];for(const m of l.sections){let f=m.markdown||m.html||m.openapiYaml||"";if(!f)continue;let y="DOCUMENTATION.md",w=`docs: Auto-generated ${m.type} documentation`;m.format==="openapi"?(y="docs/api/openapi.yaml",w=`docs: Auto-generated OpenAPI spec for ${m.type}`):m.format==="html"?(y=`docs/${m.type.toLowerCase()}.html`,w=`docs: Auto-generated ${m.type} HTML documentation`):m.format==="markdown_mermaid"||m.format==="mdx"?(y=`docs/${m.type.toLowerCase()}.${m.format==="mdx"?"mdx":"md"}`,w=`docs: Auto-generated ${m.type} (${m.format}) documentation`):(y=`docs/${m.type.toLowerCase()}.md`,w=`docs: Auto-generated ${m.type} documentation`);try{const x=await qE(c,d,y,f,w,"main",n);(a=x==null?void 0:x.commit)!=null&&a.sha&&(h.push({path:y,sha:x.commit.sha}),console.log(`[GitOps] Committed ${y} for ${o} (SHA: ${x.commit.sha.substring(0,7)})`))}catch(x){console.error(`[GitOps] Failed to commit ${y} for ${o}:`,x);const v=`gitops_${o}_${y}`;e.errors||(e.errors=new Map),e.errors.set(v,x.message||"Failed to commit file")}}h.length>0&&(r.set(o,h),console.log(`[GitOps] Successfully committed ${h.length} files for ${o}`))}catch(c){console.error(`[GitOps] Error processing ${o}:`,c);const d=`gitops_${o}`;e.errors||(e.errors=new Map),e.errors.set(d,c.message||"Git operations failed")}return e.completedSteps=new Set([...t.completedSteps||[],Q.GITOPS]),e.commits=r,e.progress={current:i,total:i,currentAgent:"GitOps"},console.log(`[GitOps] Completed Git operations for ${r.size} repositories`),e}const hj=[{from:Q.DISCOVERY,to:Q.ANALYSIS},{from:Q.ANALYSIS,to:Q.PLANNING},{from:Q.PLANNING,to:Q.WRITING},{from:Q.WRITING,to:Q.GITOPS,condition:t=>t.autoCommit===!0},{from:Q.WRITING,to:Q.COMPLETE},{from:Q.GITOPS,to:Q.COMPLETE}],Xy=new Map([[Q.DISCOVERY,{name:"RepoDiscovery",execute:QL,shouldRun:t=>{var r,s;const e=((r=t.completedSteps)==null?void 0:r.has(Q.DISCOVERY))||!1,n=t.selectedRepos&&t.selectedRepos.length>0;return console.log("[Manager] DISCOVERY shouldRun check:",{hasCompleted:e,hasRepos:n,selectedReposCount:((s=t.selectedRepos)==null?void 0:s.length)||0}),!e&&n}}],[Q.ANALYSIS,{name:"RepoAnalysis",execute:$W,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(Q.DISCOVERY)&&!((n=t.completedSteps)!=null&&n.has(Q.ANALYSIS))&&t.discoveredRepos&&t.discoveredRepos.length>0)}}],[Q.PLANNING,{name:"DocsPlanner",execute:DW,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(Q.ANALYSIS)&&!((n=t.completedSteps)!=null&&n.has(Q.PLANNING))&&t.repoAnalyses&&t.repoAnalyses.size>0)}}],[Q.WRITING,{name:"DocsWriter",execute:YW,shouldRun:t=>{var e,n;return!!((e=t.completedSteps)!=null&&e.has(Q.PLANNING)&&!((n=t.completedSteps)!=null&&n.has(Q.WRITING))&&t.documentationPlans&&t.documentationPlans.size>0)}}],[Q.GITOPS,{name:"GitOps",execute:QW,shouldRun:t=>{var e,n;return!!(t.autoCommit===!0&&((e=t.completedSteps)!=null&&e.has(Q.WRITING))&&!((n=t.completedSteps)!=null&&n.has(Q.GITOPS))&&t.generatedDocsFull&&t.generatedDocsFull.size>0)}}]]);function mj(t,e){const n=hj.filter(s=>s.from===t);if(n.length===0)return null;for(const s of n){if(!s.condition){const i=n.find(a=>a.condition&&a.condition(e));return i?i.to:s.to}if(s.condition(e))return s.to}const r=n.find(s=>!s.condition);return r?r.to:null}class fj{constructor(e,n,r){this.state={...e},this.onStateUpdate=n,this.onProgress=r}updateState(e){this.state={...this.state,...e,completedSteps:new Set([...this.state.completedSteps||[],...e.completedSteps||[]]),errors:new Map([...this.state.errors||[],...e.errors||[]])},this.onStateUpdate&&this.onStateUpdate(this.state),this.onProgress&&e.progress&&this.onProgress(e.progress)}async executeStep(e){const n=Xy.get(e);if(!n)throw new Error(`No agent node found for step: ${e}`);if(n.shouldRun&&!n.shouldRun(this.state))return console.log(`[Manager] Skipping ${n.name} - conditions not met`),console.log("[Manager] State check:",{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0}),!1;console.log(`[Manager] Executing ${n.name}...`);const r=await n.execute(this.state);return this.updateState(r),!0}async run(){var s,i,a,o;console.log("[Manager] Starting agent workflow..."),console.log("[Manager] Initial state:",{selectedRepos:((s=this.state.selectedRepos)==null?void 0:s.length)||0,completedSteps:Array.from(this.state.completedSteps||[])}),this.updateState({currentStep:Q.DISCOVERY});let e=Q.DISCOVERY,n=0;const r=20;for(;e&&e!==Q.COMPLETE&&n<r;)try{n++,console.log(`[Manager] === Iteration ${n}: Executing step ${e} ===`),console.log("[Manager] State before step:",{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0});const l=await this.executeStep(e);console.log(`[Manager] Step ${e} executed: ${l}`),console.log("[Manager] State after step:",{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0});const c=mj(e,this.state);if(console.log(`[Manager] Next step from ${e}:`,c),l&&c){if(c===e){console.warn(`[Manager] Workflow stuck at ${e}, breaking`);break}if(e===Q.DISCOVERY&&((i=this.state.completedSteps)!=null&&i.has(Q.DISCOVERY))&&(!this.state.discoveredRepos||this.state.discoveredRepos.length===0)){console.error("[Manager] DISCOVERY completed but no repositories found. Stopping workflow."),this.updateState({errors:new Map([["manager","No repositories discovered. Cannot proceed with workflow."]])});break}const d=Xy.get(c);if(d&&d.shouldRun){const h=d.shouldRun(this.state);if(console.log(`[Manager] Next step ${c} can run:`,h),!h&&(console.warn(`[Manager] Next step ${c} conditions not met. State:`,{completedSteps:Array.from(this.state.completedSteps||[]),hasDiscoveredRepos:!!this.state.discoveredRepos&&this.state.discoveredRepos.length>0,hasRepoAnalyses:!!this.state.repoAnalyses&&this.state.repoAnalyses.size>0,hasDocumentationPlans:!!this.state.documentationPlans&&this.state.documentationPlans.size>0,hasGeneratedDocs:!!this.state.generatedDocs&&this.state.generatedDocs.size>0}),c===Q.ANALYSIS&&((a=this.state.completedSteps)!=null&&a.has(Q.DISCOVERY))&&(!this.state.discoveredRepos||this.state.discoveredRepos.length===0))){console.error("[Manager] Cannot proceed to ANALYSIS: No discovered repositories");break}}e=c,this.updateState({currentStep:e})}else if(l){console.log(`[Manager] No next step from ${e}, completing workflow`);break}else{if(console.error(`[Manager] Step ${e} was skipped! This may indicate a problem.`),console.error("[Manager] Current state:",{completedSteps:Array.from(this.state.completedSteps||[]),selectedRepos:((o=this.state.selectedRepos)==null?void 0:o.length)||0}),e===Q.DISCOVERY)throw new Error("DISCOVERY step was skipped - this should never happen on first run. Check that selectedRepos are provided.");if(c&&c!==e)console.log(`[Manager] Attempting to continue to ${c} despite skip`),e=c,this.updateState({currentStep:e});else{console.warn(`[Manager] Cannot proceed from ${e}, breaking`);break}}}catch(l){console.error(`[Manager] Error in step ${e}:`,l);const c=`manager_${e}`;this.updateState({errors:new Map([[c,l.message||"Workflow error"]])});break}return n>=r&&(console.error("[Manager] Workflow exceeded max iterations, stopping"),this.updateState({errors:new Map([["manager","Workflow exceeded maximum iterations"]])})),this.updateState({currentStep:Q.COMPLETE,completedSteps:new Set([...this.state.completedSteps||[],Q.COMPLETE])}),console.log("[Manager] Workflow completed"),this.state}getState(){return{...this.state}}reset(e){this.state={...this.state,...e,currentStep:void 0,completedSteps:new Set,errors:new Map}}}const e7=Object.freeze(Object.defineProperty({__proto__:null,AgentManager:fj,agentGraph:hj,agentNodes:Xy,getNextStep:mj},Symbol.toStringTag,{value:"Module"}));function t7({selectedRepos:t,selectedOutputFormats:e=["markdown"],selectedSectionTypes:n=["README"],selectedLanguage:r="en",selectedModel:s="gpt-4o-mini",onReposChange:i,onComplete:a}){const[o,l]=P.useState(!1),[c,d]=P.useState(null),[h,m]=P.useState(""),[f,y]=P.useState(null),[w]=P.useState(()=>localStorage.getItem("selectedLanguage")||r),x=ma(w),v=P.useCallback(async()=>{if(t.length===0){m(x("pleaseSelectAtLeastOneRepository"));return}m(""),l(!0),m(""),d(null);const E={selectedRepos:t,selectedOutputFormats:e,selectedSectionTypes:n,selectedLanguage:w,selectedModel:s,completedSteps:new Set};try{const C=new fj(E,O=>{d(O)},O=>{});y(C);const b=await C.run();d(b),a(b)}catch(C){m(C.message||x("workflowFailed")),console.error("Agent workflow error:",C)}finally{l(!1)}},[t,e,n,w,s,a,x]);P.useEffect(()=>{const E=()=>{!o&&t.length>0&&v()};return window.addEventListener("autoStartWorkflow",E),()=>{window.removeEventListener("autoStartWorkflow",E)}},[o,t.length,v]);const p=E=>{var C,b;return c?c.currentStep===E?"running":(C=c.completedSteps)!=null&&C.has(E)?"completed":(b=c.errors)!=null&&b.has(`manager_${E}`)?"error":"pending":"pending"},g=(E,C)=>{switch(C){case"completed":return u.jsx(Ka,{className:"w-5 h-5 text-green-600"});case"running":return u.jsx(ty,{className:"w-5 h-5 text-orange-600 animate-spin"});case"error":return u.jsx(GL,{className:"w-5 h-5 text-red-600"});default:return u.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}},_=E=>{switch(E){case Q.DISCOVERY:return x("repositoryDiscovery");case Q.ANALYSIS:return x("repositoryAnalysis");case Q.PLANNING:return x("documentationPlanning");case Q.WRITING:return x("documentationWriting");case Q.GITOPS:return x("gitOps");case Q.COMPLETE:return x("complete");case Q.QUALITY:case Q.REFACTOR:return"";default:return E}},k=[Q.DISCOVERY,Q.ANALYSIS,Q.PLANNING,Q.WRITING];return u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 border border-white/50 shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[u.jsx(Rt,{className:"w-5 h-5 text-red-600"}),x("agentWorkflow")]}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x("automatedPipeline")})]}),o&&u.jsxs("div",{className:"px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-xl font-semibold shadow-lg flex items-center gap-2",children:[u.jsx(ty,{className:"w-5 h-5 animate-spin"}),u.jsx("span",{children:x("running")})]})]}),u.jsx("div",{className:"mb-6 p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl border border-orange-200/50",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-700 mb-2 flex items-center gap-1",children:[u.jsx(an,{className:"w-3.5 h-3.5 text-orange-600"}),x("outputFormats")]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(E=>u.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:E==="markdown"?"MD":E==="markdown_mermaid"?"MD+Mermaid":E==="mdx"?"MDX":E==="openapi"?"OpenAPI":"HTML"},E))})]}),u.jsxs("div",{children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-700 mb-2 flex items-center gap-1",children:[u.jsx(an,{className:"w-3.5 h-3.5 text-orange-600"}),x("sectionTypes")]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map(E=>u.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:E},E))})]})]})}),h&&u.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h}),u.jsx("div",{className:"space-y-4",children:k.map((E,C)=>{var $,L;const b=p(E),O=C===k.length-1;return u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsxs("div",{className:"flex flex-col items-center",children:[g(E,b),!O&&u.jsx("div",{className:`w-0.5 h-12 mt-2 ${b==="completed"?"bg-green-600":"bg-gray-200"}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:_(E)}),(c==null?void 0:c.progress)&&c.progress.currentAgent===E.replace("_","")&&u.jsxs("span",{className:"text-xs text-gray-500",children:[c.progress.current,"/",c.progress.total,c.progress.currentRepo&&u.jsx("span",{className:"ml-2 text-red-600",children:c.progress.currentRepo.split("/")[1]})]})]}),b==="running"&&(($=c==null?void 0:c.progress)==null?void 0:$.currentRepo)&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[x("processing")," ",c.progress.currentRepo]}),b==="completed"&&u.jsx("p",{className:"text-sm text-green-600 mt-1",children:x("completed")}),b==="error"&&u.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[x("error")," ",(L=c==null?void 0:c.errors)==null?void 0:L.get(`manager_${E}`)]})]})]},E)})}),((c==null?void 0:c.currentStep)===Q.COMPLETE||(c==null?void 0:c.generatedDocsFull))&&u.jsxs("div",{className:"mt-6 space-y-4",children:[(c==null?void 0:c.currentStep)===Q.COMPLETE&&u.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[u.jsxs("h4",{className:"font-semibold text-green-900 mb-2 flex items-center gap-2",children:[u.jsx(Ka,{className:"w-5 h-5"}),x("workflowComplete")]}),u.jsx("div",{className:"space-y-2 text-sm text-green-800",children:c.generatedDocs&&u.jsxs("p",{children:[x("generatedDocumentationFor")," ",c.generatedDocs.size," ",c.generatedDocs.size!==1?x("repositories"):x("repository")]})})]}),c.generatedDocsFull&&c.generatedDocsFull.size>0&&u.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[u.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[u.jsx(ao,{className:"w-5 h-5"}),x("pdfExport")]}),u.jsx("div",{className:"space-y-2",children:Array.from(c.generatedDocsFull.entries()).map(([E,C])=>u.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[u.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:E.split("/")[1]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:C.sections.map(b=>u.jsxs("button",{onClick:async()=>{try{const{exportToPDF:O,downloadPDF:$}=await vh(async()=>{const{exportToPDF:ge,downloadPDF:ot}=await import("./pdf-exporter-M1iVyzVj.js");return{exportToPDF:ge,downloadPDF:ot}},[]),L=await O(b);$(L,`${E.split("/")[1]}_${b.type}_${b.format}.pdf`)}catch(O){alert(`${x("pdfExportFailed")}: ${O.message}`)}},className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-xs font-medium",children:[u.jsx(ao,{className:"w-3.5 h-3.5"}),b.type," (",b.format,")"]},b.id))})]},E))})]})]})]})}function n7({onBack:t}){const[e,n]=P.useState(""),[r,s]=P.useState(new Map),[i,a]=P.useState(new Map),[o,l]=P.useState("markdown"),[c,d]=P.useState("README"),[h,m]=P.useState(!1),[f,y]=P.useState(""),[w,x]=P.useState([]),[v,p]=P.useState(!1),[g,_]=P.useState("gpt-4o-mini"),[k,E]=P.useState(""),[C,b]=P.useState(Mt()||""),[O,$]=P.useState(!1),[L,ge]=P.useState(Eo()||""),[ot,K]=P.useState(!1),[B,G]=P.useState(!1),[q,j]=P.useState(Mt()||""),[M,U]=P.useState(Eo()||""),[ie,ee]=P.useState(!1),[Ae,Ge]=P.useState(null),[Ie,A]=P.useState(!1),[S,F]=P.useState(""),[N,Ne]=P.useState("main"),[$e,Ve]=P.useState("combined"),[Qe,wt]=P.useState(!1),[At,Je]=P.useState(!1),[Ft,$s]=P.useState(!0),[rs,Y]=P.useState(!1),[ss,ye]=P.useState(!1),[ce,ve]=P.useState(!1),[te,Z]=P.useState(!1),[we,fe]=P.useState(!1),[Xe,Ti]=P.useState(null),[tu,nu]=P.useState(!1),[Ut,Ai]=P.useState(null),[Ei,pj]=P.useState(["markdown"]),[Ci,gj]=P.useState(["README"]),[Ds,ru]=P.useState(["markdown"]),[Ms,su]=P.useState(["README"]),[Ni,yj]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en"),[mn,nf]=P.useState(!1),[rf,sf]=P.useState(""),[vj,af]=P.useState(!1);P.useEffect(()=>{localStorage.setItem("selectedLanguage",Ni),window.dispatchEvent(new Event("languageChanged"))},[Ni]),P.useEffect(()=>{!e&&At&&Je(!1)},[e,At]);const z=ma(Ni),[Vn,iu]=P.useState(new Set),[fn,Gw]=P.useState(!1),zo=P.useRef(null),va=P.useRef(new Map);P.useEffect(()=>{const I=()=>{const J=window.scrollY||document.documentElement.scrollTop;ye(J>300)};return window.addEventListener("scroll",I),()=>window.removeEventListener("scroll",I)},[]);const wj=()=>{window.scrollTo({top:0,behavior:"smooth"})};P.useEffect(()=>{const I=localStorage.getItem("autoFollowRepos"),J=localStorage.getItem("autoFollowEnabled");I&&iu(new Set(JSON.parse(I))),J==="true"&&Gw(!0)},[]),P.useEffect(()=>{localStorage.setItem("autoFollowRepos",JSON.stringify(Array.from(Vn)))},[Vn]),P.useEffect(()=>{localStorage.setItem("autoFollowEnabled",fn.toString())},[fn]);const Vw=async()=>{if(!fn||Vn.size===0)return;const I=Mt();if(!I){console.warn("GitHub token required for auto-follow");return}for(const J of Vn)try{const[pe,We]=J.split("/"),je=await Ib(pe,We,"main",I),Ee=va.current.get(J);if(je&&je!==Ee){const Pe=await JL(pe,We,je,I);if(Pe&&!0){const Hn=Pe.isMerge?"merge":"push";console.log(`New ${Hn} detected for ${J} (SHA: ${je.substring(0,7)}), regenerating documentation...`);const Ir=w.find(Ii=>Ii.fullName===J);if(Ir&&Ir.name)try{console.log(`[Auto-Update] Starting documentation regeneration for ${J}...`);const Ii={currentStep:Q.DISCOVERY,selectedRepos:[Ir],selectedOutputFormats:Ei,selectedSectionTypes:Ci,selectedLanguage:Ni,autoCommit:!0,completedSteps:new Set},{AgentManager:uf}=await vh(async()=>{const{AgentManager:gu}=await Promise.resolve().then(()=>e7);return{AgentManager:gu}},void 0),xa=await new uf(Ii).run();if(xa.generatedDocsFull&&xa.generatedDocsFull.has(J)){const gu=xa.generatedDocsFull.get(J);a(is=>{const Ri=new Map(is);return Ri.set(J,gu),Ri});const yu=gu.sections.find(is=>is.markdown);if(yu!=null&&yu.markdown){const is=yu.markdown;is&&s(Ri=>{const Qw=new Map(Ri);return Qw.set(J,is),Qw})}if(xa.commits&&xa.commits.has(J)){const is=xa.commits.get(J);console.log(`[Auto-Update] GitOps agent committed ${is.length} files for ${J}`),is.forEach(Ri=>{console.log(`[Auto-Update]  Committed ${Ri.path} (SHA: ${Ri.sha.substring(0,7)})`)})}else console.warn(`[Auto-Update] No commits found for ${J} - GitOps may have been skipped or failed`);console.log(`[Auto-Update] Documentation successfully auto-updated for ${J}`),Ai({message:`Documentation auto-generated for ${Ir.name}`,type:"success",repoName:J}),setTimeout(()=>Ai(null),5e3),"Notification"in window&&Notification.permission==="granted"&&new Notification("Documentation Auto-Updated",{body:`Documentation has been regenerated and committed for ${Ir.name}`,icon:"/favicon.ico"})}else console.warn(`[Auto-Update] No documentation generated for ${J}`),Ai({message:`Failed to generate documentation for ${Ir.name}`,type:"error",repoName:J}),setTimeout(()=>Ai(null),5e3)}catch(Ii){console.error(`[Auto-Update] Failed to auto-update documentation for ${J}:`,Ii),Ai({message:`Error auto-updating documentation for ${Ir.name}`,type:"error",repoName:J}),setTimeout(()=>Ai(null),5e3)}else console.warn(`[Auto-Update] Repository ${J} not found in selectedRepos or missing name`)}va.current.set(J,je)}}catch(pe){console.error(`[Auto-Update] Error checking updates for ${J}:`,pe)}};P.useEffect(()=>{fn&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[fn]),P.useEffect(()=>{if(fn&&Vn.size>0)return Vw(),zo.current=setInterval(()=>{Vw()},2*60*1e3),()=>{zo.current&&clearInterval(zo.current)};zo.current&&clearInterval(zo.current)},[fn,Vn,w]),P.useEffect(()=>{const I=async()=>{const J=Mt();if(J){for(const pe of w)if(Vn.has(pe.fullName)&&!va.current.has(pe.fullName))try{const[We,je]=pe.fullName.split("/"),Ee=await Ib(We,je,"main",J);Ee&&va.current.set(pe.fullName,Ee)}catch(We){console.error(`Failed to get initial commit SHA for ${pe.fullName}:`,We)}}};w.length>0&&fn&&I()},[w,Vn,fn]);const au=(I,J,pe)=>{console.log(`[updateDocumentationDisplay] Updating for ${I}, format: ${J}, section: ${pe}`);const We=i.get(I);if(console.log(`[updateDocumentationDisplay] Full docs available: ${!!We}, sections: ${(We==null?void 0:We.sections.length)||0}`),We&&We.sections.length>0){const Ee=We.sections.find(Pe=>Pe.format===J&&Pe.type===pe);if(console.log(`[updateDocumentationDisplay] Matching section found: ${!!Ee}`),Ee){const Pe=Ee.markdown||Ee.html||Ee.openapiYaml||"";console.log(`[updateDocumentationDisplay] Setting content from section, length: ${Pe.length}`),n(Pe);return}else{const Pe=We.sections.find(He=>He.format===J)||We.sections.find(He=>He.type===pe)||We.sections[0];if(Pe){const He=Pe.markdown||Pe.html||Pe.openapiYaml||"";console.log(`[updateDocumentationDisplay] Using fallback section, length: ${He.length}`),n(He);return}}}const je=r.get(I);console.log(`[updateDocumentationDisplay] Using simple doc, available: ${!!je}, length: ${(je==null?void 0:je.length)||0}`),je?n(je):console.warn(`[updateDocumentationDisplay] No documentation found for ${I}`)},ou=()=>w,xj=async()=>{if(mn&&wa(),w.length===0){y(z("noRepositoriesSelected"));return}if(!S.trim()){y(z("pleaseProvideCommitMessage"));return}m(!0),y(""),Ge(null);try{const I=Mt();if(!I)throw new Error(z("githubTokenRequiredForCommitting"));const J=[];for(let je=0;je<w.length;je++){const Ee=w[je];Ge({current:je+1,total:w.length,repo:Ee.fullName});try{const Pe=r.get(Ee.fullName);if(!Pe)throw new Error(z("documentationNotFoundForRepository"));const[He,Hn]=Ee.fullName.split("/"),Ir=await qE(He,Hn,"DOCUMENTATION.md",Pe,S,N,I);J.push({repo:Ee.fullName,success:!0,commitUrl:Ir.commit.html_url})}catch(Pe){J.push({repo:Ee.fullName,success:!1,error:Pe.message})}}const pe=J.filter(je=>je.success).length,We=J.filter(je=>!je.success).length;if(We===0)y(""),alert(pe===1?z("successfullyCommittedToRepository"):z("successfullyCommittedToRepositories").replace("{count}",pe.toString())),A(!1);else{const je=J.filter(Ee=>!Ee.success).map(Ee=>`${Ee.repo}: ${Ee.error}`).join(`
`);y(We===1?`${z("failedToCommitToRepository")}
${je}`:`${z("failedToCommitToRepositories").replace("{count}",We.toString())}
${je}`)}}catch(I){y(I.message||z("failedToCommitDocumentation")),console.error("Commit error:",I)}finally{m(!1),Ge(null)}},Hw=(I,J="manual")=>{var We;n(I),J==="manual"&&mn&&nf(!1);const pe=$e!=="combined"?$e:(We=w[0])==null?void 0:We.fullName;pe?(s(je=>{const Ee=new Map(je);return Ee.set(pe,I),console.log(`[DocumentationEditor] Updated repoDocumentations for ${pe}`),Ee}),a(je=>{const Ee=new Map(je),Pe=je.get(pe);if(Pe){const He=Pe.sections.map(Hn=>Hn.format===o&&Hn.type===c?o==="openapi"?{...Hn,openapiYaml:I}:o==="html"?{...Hn,html:I}:{...Hn,markdown:I}:Hn);Ee.set(pe,{...Pe,sections:He}),console.log(`[DocumentationEditor] Updated repoDocumentationsFull for ${pe}, format: ${o}, section: ${c}`)}else console.log(`[DocumentationEditor] No full docs found for ${pe}, creating basic entry`);return Ee})):console.log("[DocumentationEditor] No current repo found, updating documentation state only"),G(!1)},wa=()=>{mn&&rf!==e&&Hw(rf,"manual")},Ww=I=>{console.log("[DocumentationEditor] Assistant update received, saving to repository maps..."),Hw(I,"assistant"),console.log("[DocumentationEditor] Assistant update saved successfully")},qw=()=>{mn&&wa(),e&&af(!0)},lu=async I=>{if(!e)return;const J=w.length>0?w[0].fullName:"documentation",pe=J?`documentation-${J.replace("/","-")}`:"documentation";switch(I){case"md":Kk(e,`${pe}.md`);break;case"txt":Kk(e,`${pe}.txt`);break;case"html":const We=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1, h2, h3, h4, h5, h6 { margin-top: 24px; margin-bottom: 16px; }
    code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; }
    pre { background-color: #f4f4f4; padding: 16px; border-radius: 6px; overflow-x: auto; }
    pre code { background-color: transparent; padding: 0; }
  </style>
</head>
<body>
${e.split(`
`).map(He=>He.startsWith("# ")?`<h1>${He.substring(2)}</h1>`:He.startsWith("## ")?`<h2>${He.substring(3)}</h2>`:He.startsWith("### ")?`<h3>${He.substring(4)}</h3>`:He.startsWith("#### ")?`<h4>${He.substring(5)}</h4>`:He.startsWith("```")?He.includes("```")?"</pre>":"<pre>":He.trim()===""?"<br>":`<p>${He.replace(/`([^`]+)`/g,"<code>$1</code>")}</p>`).join(`
`)}
</body>
</html>`,je=new Blob([We],{type:"text/html"}),Ee=URL.createObjectURL(je),Pe=document.createElement("a");Pe.href=Ee,Pe.download=`${pe}.html`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(Ee);break;case"pdf":try{const{exportToPDF:He,downloadPDF:Hn}=await vh(async()=>{const{exportToPDF:uf,downloadPDF:Xw}=await import("./pdf-exporter-M1iVyzVj.js");return{exportToPDF:uf,downloadPDF:Xw}},[]),Ii=await He({id:"export",type:c,format:"markdown",language:Ni,title:"Documentation",markdown:e});Hn(Ii,`${pe}.pdf`)}catch(He){alert(`PDF export failed: ${He.message}`)}break}af(!1)},Ls=e?Math.round(e.length/4):0,Bo=e?e.split(/\s+/).filter(I=>I.length>0).length:0,cu=e?e.split(`
`).length:0,of=e?e.length:0,Kw=cu>0?(Bo/cu).toFixed(1):"0",uu=Bo>0?Math.ceil(Bo/200):0,Zw=(of/1024).toFixed(2),du=e?(e.match(/^##+\s/gm)||[]).length:0,hu=e?(e.match(/```[\s\S]*?```/g)||[]).length:0,mu=e?(e.match(/\[([^\]]+)\]\(([^)]+)\)/g)||[]).length:0,fu=e?(e.match(/^#+\s/gm)||[]).length:0,Yw={"gpt-4o-mini":{input:.15,output:.6},"gpt-4o":{input:2.5,output:10},"gpt-4o-2024-08-06":{input:2.5,output:10},"gpt-4-turbo":{input:10,output:30},"gpt-4-turbo-preview":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"gpt-5.2":{input:5,output:15},"gpt-5-codex":{input:8,output:24}},Jw=Yw[g]||Yw["gpt-4o-mini"],lf=Math.round(Ls*.3),cf=Math.round(Ls*.7),pu=e?lf/1e6*Jw.input+cf/1e6*Jw.output:0;return u.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-slate-50 via-orange-50/30 to-red-50/30",children:[u.jsx("header",{className:"bg-white/70 backdrop-blur-xl border-b border-white/20 shadow-lg shadow-black/5 flex-shrink-0 sticky top-0 z-50",children:u.jsx("div",{className:"px-4 md:px-6 lg:px-8 py-3 md:py-4 lg:py-5",children:u.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 lg:gap-5 min-w-0 flex-1",children:[u.jsx("button",{onClick:t,className:"p-2 md:p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 group shadow-sm hover:shadow-md flex-shrink-0",children:u.jsx(BE,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-600 group-hover:text-orange-600 group-hover:-translate-x-1 transition-all"})}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0",children:[u.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg shadow-orange-500/30 flex-shrink-0",children:u.jsx(Rt,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-extrabold bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 bg-clip-text text-transparent truncate",children:z("startWritingDocumentation")}),u.jsx("p",{className:"text-xs md:text-sm text-slate-500 mt-0.5 font-medium truncate",children:z("aiPoweredGeneration")})]})]})]}),u.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 flex-shrink-0",children:[u.jsxs("select",{value:Ni,onChange:I=>yj(I.target.value),className:"px-2 md:px-3 py-1.5 md:py-2 text-xs md:text-sm font-semibold rounded-xl bg-white/80 backdrop-blur-sm text-slate-700 hover:bg-white border border-slate-200 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md cursor-pointer",title:"Translate page",children:[u.jsx("option",{value:"en",children:" EN"}),u.jsx("option",{value:"fr",children:" FR"}),u.jsx("option",{value:"de",children:" DE"})]}),u.jsxs("button",{onClick:()=>{e&&Je(!At)},className:`p-2 md:p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md relative group ${e?"":"opacity-50 cursor-not-allowed"}`,title:z(e?At?"hideAiAssistant":"showAiAssistant":"assistantErrorNoDocumentation"),disabled:!e,children:[u.jsx(ML,{className:`w-4 h-4 md:w-5 md:h-5 transition-colors ${At?"text-orange-600":"text-slate-400"}`}),At&&u.jsx("span",{className:"absolute -top-1 -right-1 w-2 md:w-2.5 h-2 md:h-2.5 bg-green-500 rounded-full border-2 border-white animate-pulse"})]}),u.jsx("button",{onClick:()=>wt(!Qe),className:"hidden md:flex p-2 md:p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md",children:u.jsx(Uu,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-600"})}),u.jsxs("button",{onClick:()=>Y(!rs),className:"md:hidden p-2.5 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md relative","aria-label":"Toggle actions and settings",children:[u.jsx(Xo,{className:`w-5 h-5 transition-colors ${rs?"text-orange-600":"text-slate-600"}`}),rs&&u.jsx("span",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white animate-pulse"})]})]})]})})}),u.jsxs("div",{className:"flex-1 flex min-h-0 relative",children:[At&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>Je(!1),children:u.jsxs("aside",{className:"absolute left-0 top-0 bottom-0 w-80 max-w-[85vw] bg-white/95 backdrop-blur-xl border-r border-white/30 shadow-2xl shadow-black/5 overflow-hidden flex flex-col transition-all duration-300",onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:z("aiAssistant")}),u.jsx("button",{onClick:()=>Je(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":z("close"),children:u.jsx(xt,{className:"w-5 h-5 text-gray-600"})})]}),u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Nb,{documentation:e,onUpdateDocumentation:Ww,model:g})})]})}),u.jsx("aside",{className:"hidden md:flex w-64 md:w-72 lg:w-80 sticky top-0 self-start h-screen bg-white/60 backdrop-blur-xl border-r border-white/30 shadow-2xl shadow-black/5 overflow-hidden flex-col transition-all duration-300 flex-shrink-0",children:u.jsx(Nb,{documentation:e,onUpdateDocumentation:Ww,model:g})})]}),u.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-slate-50 via-orange-50/20 to-red-50/20",children:[u.jsxs("div",{className:"bg-white/40 backdrop-blur-xl border-b border-white/30 shadow-lg shadow-black/5 flex-shrink-0",children:[u.jsx("div",{className:"p-3 md:p-4 border-b border-white/20",children:u.jsxs("button",{onClick:()=>$s(!Ft),className:"w-full flex items-center justify-between group hover:bg-white/30 rounded-lg p-2 transition-all duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-1.5 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg shadow-md",children:u.jsx(gr,{className:"w-4 h-4 text-white"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition-colors",children:z("sourceSelection")}),u.jsx("p",{className:"text-xs text-slate-500",children:z(Ft?"clickToCollapse":"clickToExpand")})]})]}),u.jsx("div",{className:"p-1.5 rounded-lg bg-white/50 group-hover:bg-white/80 transition-all duration-300",children:Ft?u.jsx(jL,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-900 transition-colors"}):u.jsx(RL,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-900 transition-colors"})})]})}),u.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${Ft?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:u.jsx("div",{className:"p-3 md:p-4",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-3 border border-white/50 shadow-lg shadow-orange-500/10",children:[u.jsxs("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[u.jsx(Xs,{className:"w-3 h-3 text-orange-500"}),z("selectRepos")]}),u.jsx("button",{onClick:()=>p(!0),className:"w-full px-3 py-2.5 border-2 border-dashed border-slate-300 rounded-lg hover:border-orange-400 hover:bg-gradient-to-br hover:from-orange-50 hover:to-red-50 transition-all text-left group shadow-sm hover:shadow-md",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg group-hover:bg-orange-200 transition-colors",children:u.jsx(Xs,{className:"w-4 h-4 text-orange-600"})}),u.jsx("span",{className:"text-xs text-slate-700 font-medium",children:w.length>0?`${w.length} repo${w.length!==1?"s":""}`:z("selectRepos")})]}),u.jsx(GE,{className:"w-4 h-4 text-slate-400 group-hover:text-orange-500 transition-colors"})]})}),w.length>0&&u.jsx("div",{className:"space-y-1.5 mt-2 max-h-32 overflow-y-auto",children:w.map(I=>{const J=Vn.has(I.fullName);return u.jsxs("div",{className:"flex items-center justify-between px-2.5 py-1.5 bg-gradient-to-r from-orange-50/80 to-red-50/80 backdrop-blur-sm border border-orange-200/50 rounded-lg shadow-sm hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(hs,{className:"w-3 h-3 text-orange-600"}),u.jsx("span",{className:"text-xs text-slate-700 font-bold truncate max-w-[120px]",children:I.name}),J&&u.jsxs("span",{className:"px-1.5 py-0.5 bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 rounded-full text-[10px] font-bold flex items-center gap-1 border border-green-200",children:[u.jsx(Xf,{className:"w-2.5 h-2.5"}),"Auto"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>{const pe=new Set(Vn);J?(pe.delete(I.fullName),va.current.delete(I.fullName)):pe.add(I.fullName),iu(pe)},className:`p-1 rounded transition-all duration-300 ${J?"bg-gradient-to-br from-green-100 to-emerald-100 text-green-700 hover:from-green-200 hover:to-emerald-200":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:z(J?"disableAutoUpdate":"enableAutoUpdate"),children:J?u.jsx(Xf,{className:"w-3 h-3"}):u.jsx(CL,{className:"w-3 h-3"})}),u.jsx("button",{onClick:()=>{Ti(I),fe(!0)},className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-all duration-300",title:"Remove repository",children:u.jsx(xt,{className:"w-3 h-3"})})]})]},I.id)})}),w.length>0&&u.jsxs("button",{onClick:()=>nu(!0),className:"mt-2 w-full px-3 py-2 text-xs font-semibold text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 rounded-lg transition-all duration-300 flex items-center justify-center gap-2",children:[u.jsx(xt,{className:"w-3 h-3"}),"Clear All"]}),w.length>0&&u.jsx("div",{className:"mt-3 p-3 bg-gradient-to-br from-green-50/80 to-emerald-50/80 backdrop-blur-sm border border-green-200/50 rounded-xl shadow-md shadow-green-500/10",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-1 rounded-lg ${fn?"bg-green-100 animate-pulse":"bg-slate-100"}`,children:u.jsx(FL,{className:`w-3.5 h-3.5 ${fn?"text-green-600 animate-spin":"text-slate-400"}`})}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-700 cursor-pointer block",children:"Auto-Update"}),u.jsx("p",{className:"text-[10px] text-slate-600",children:"Auto-regenerate on push/merge"})]})]}),u.jsx("button",{onClick:()=>Gw(!fn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 shadow-md ${fn?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-slate-300"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform duration-300 ${fn?"translate-x-6":"translate-x-1"}`})})]})})]}),u.jsxs("button",{onClick:()=>ee(!0),className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-3 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg shadow-orange-500/30 hover:shadow-xl hover:shadow-orange-500/40 flex items-center justify-center gap-2",children:[u.jsx(Uu,{className:"w-4 h-4"}),z("settings")," - ",z("token")," & ",z("openaiKey")]}),u.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[C&&u.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[u.jsx(Ka,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"GitHub Token"})]}),L&&u.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[u.jsx(Ka,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"OpenAI Key"})]}),!C&&!L&&u.jsx("span",{className:"text-gray-500",children:"No credentials configured"})]})]})})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-8 min-h-0 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent hover:scrollbar-thumb-slate-400",children:[f&&u.jsx("div",{className:"max-w-5xl mx-auto mb-6 p-5 bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 rounded-2xl text-red-700 shadow-xl shadow-red-500/20",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:u.jsx(xt,{className:"w-5 h-5 text-red-600"})}),u.jsx("span",{className:"font-bold",children:f})]})}),!e&&!h&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center max-w-3xl mx-auto",children:[u.jsxs("div",{className:"relative mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-400 rounded-3xl blur-2xl opacity-20 animate-pulse"}),u.jsx("div",{className:"relative p-8 bg-gradient-to-br from-orange-100 via-red-100 to-pink-100 rounded-3xl shadow-2xl",children:u.jsx(an,{className:"w-20 h-20 text-orange-600 mx-auto"})})]}),u.jsx("h3",{className:"text-3xl font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-4",children:"Ready to Generate Documentation"}),u.jsx("p",{className:"text-slate-600 text-lg font-medium max-w-xl",children:"Enter a GitHub repository URL to generate comprehensive documentation from its structure and code."})]}),h&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[u.jsxs("div",{className:"relative mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400 to-red-400 rounded-full blur-3xl opacity-30 animate-pulse"}),u.jsx("div",{className:"relative animate-spin w-20 h-20 border-4 border-orange-200 border-t-orange-600 rounded-full"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(Rt,{className:"w-8 h-8 text-orange-600 animate-pulse"})})]}),u.jsx("p",{className:"text-slate-700 font-bold text-xl mb-2 bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:z("generating")}),Ae&&u.jsxs("div",{className:"mt-6 text-center max-w-md bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/50",children:[u.jsxs("p",{className:"text-sm text-slate-600 mb-3 font-medium",children:["Processing ",u.jsx("span",{className:"font-bold text-orange-600 text-lg",children:Ae.current})," of"," ",u.jsx("span",{className:"font-bold text-slate-700",children:Ae.total})]}),Ae.repo&&u.jsx("p",{className:"text-xs text-slate-500 mb-4 font-mono bg-slate-50 px-3 py-2 rounded-lg",children:Ae.repo}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 overflow-hidden shadow-inner",children:u.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 h-full rounded-full transition-all duration-500 shadow-lg",style:{width:`${Ae.current/Ae.total*100}%`}})})]})]}),e&&u.jsxs("div",{className:"h-full flex flex-col max-w-6xl mx-auto min-h-0",children:[r.size>0&&w.length>0&&u.jsx("div",{className:"bg-white/90 backdrop-blur-xl border border-white/50 rounded-2xl mb-6 flex-shrink-0 shadow-2xl shadow-black/5 overflow-hidden",children:u.jsx("div",{className:"flex items-center gap-2 overflow-x-auto px-4 py-3 scrollbar-thin",children:w.map(I=>{const J=r.has(I.fullName),pe=$e===I.fullName;return u.jsxs("button",{onClick:()=>{Ve(I.fullName),au(I.fullName,o,c)},className:`px-3 md:px-4 lg:px-5 py-2 md:py-2.5 lg:py-3 text-xs md:text-sm font-bold border-b-2 transition-all duration-300 whitespace-nowrap flex items-center gap-1.5 md:gap-2 rounded-t-lg md:rounded-t-xl ${pe?"border-orange-500 text-orange-600 bg-gradient-to-b from-orange-50 to-white shadow-lg":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300 hover:bg-slate-50"}`,children:[u.jsx(hs,{className:`w-3.5 h-3.5 md:w-4 md:h-4 flex-shrink-0 ${pe?"text-orange-600":"text-slate-500"}`}),u.jsx("span",{className:"truncate max-w-[120px] md:max-w-[150px] lg:max-w-[200px]",children:I.name}),J&&u.jsx("span",{className:"px-2 py-0.5 bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 rounded-full text-xs flex-shrink-0 font-bold border border-green-200",children:""})]},I.id)})})}),i.size>0&&u.jsx("div",{className:"bg-white/90 backdrop-blur-xl border border-white/50 rounded-lg md:rounded-xl mb-3 md:mb-4 flex-shrink-0 shadow-lg shadow-black/5 p-2 md:p-2.5",children:u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 flex-1 min-w-0",children:[u.jsx(an,{className:"w-3 h-3 md:w-3.5 md:h-3.5 text-orange-500 flex-shrink-0"}),u.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-slate-600 flex-shrink-0",children:z("format")}),u.jsx("div",{className:"flex gap-0.5 md:gap-1 flex-wrap min-w-0",children:Ei.map(I=>u.jsx("button",{onClick:()=>{var pe;l(I);const J=$e!=="combined"?$e:(pe=w[0])==null?void 0:pe.fullName;J&&au(J,I,c)},className:`px-2 py-1 text-[10px] font-semibold rounded-md transition-all whitespace-nowrap ${o===I?"bg-orange-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-orange-100 hover:text-orange-700 hover:shadow-md hover:scale-105 cursor-pointer"}`,title:z(I==="markdown"?"markdownStandardFormat":I==="markdown_mermaid"?"markdownMermaidDescription":I==="mdx"?"mdxDescription":I==="openapi"?"openapiDescription":"htmlDescription"),children:I==="markdown"?"MD":I==="markdown_mermaid"?"MD+M":I==="mdx"?"MDX":I==="openapi"?"OAPI":"HTML"},I))})]}),u.jsx("div",{className:"w-px h-6 bg-slate-300"}),u.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[u.jsx(Qo,{className:"w-3.5 h-3.5 text-orange-500 flex-shrink-0"}),u.jsx("span",{className:"text-[10px] font-bold text-slate-600 flex-shrink-0",children:z("section")}),u.jsx("div",{className:"flex gap-1 flex-wrap min-w-0",children:Ci.map(I=>u.jsx("button",{onClick:()=>{var pe;d(I);const J=$e!=="combined"?$e:(pe=w[0])==null?void 0:pe.fullName;J&&au(J,o,I)},className:`px-2 py-1 text-[10px] font-semibold rounded-md transition-all whitespace-nowrap ${c===I?"bg-orange-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-orange-100 hover:text-orange-700 hover:shadow-md hover:scale-105 cursor-pointer"}`,title:z(I==="README"?"sectionReadme":I==="ARCHITECTURE"?"sectionArchitecture":I==="API"?"sectionApiReference":I==="COMPONENTS"?"sectionComponents":I==="TESTING_CI"?"sectionTestingCicd":"sectionChangelog"),children:z(I==="README"?"sectionReadmeShort":I==="ARCHITECTURE"?"sectionArchitectureShort":I==="API"?"sectionApiReferenceShort":I==="COMPONENTS"?"sectionComponentsShort":I==="TESTING_CI"?"sectionTestingCicdShort":"sectionChangelogShort")},I))})]})]})}),u.jsx("div",{className:"flex-1 min-h-0 overflow-hidden relative",children:u.jsxs("div",{className:"h-full bg-white/90 backdrop-blur-xl rounded-2xl md:rounded-3xl border border-white/50 shadow-2xl shadow-black/10 p-4 md:p-6 lg:p-10 overflow-y-auto overflow-x-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent hover:scrollbar-thumb-slate-400",children:[e&&!mn&&u.jsxs("button",{onClick:()=>{sf(e),nf(!0),G(!0)},className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10 flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:z("editDocumentation"),children:[u.jsx(LL,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),u.jsx("span",{className:"hidden md:inline",children:z("edit")})]}),mn&&u.jsxs("div",{className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10 flex items-center gap-1.5 md:gap-2",children:[u.jsxs("button",{onClick:wa,className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:z("saveChanges"),children:[u.jsx(el,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),u.jsx("span",{className:"hidden md:inline",children:z("save")})]}),u.jsxs("button",{onClick:()=>{nf(!1),sf(""),G(!1)},className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-slate-500 to-slate-600 text-white rounded-lg hover:from-slate-600 hover:to-slate-700 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm",title:z("cancel"),children:[u.jsx(xt,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),u.jsx("span",{className:"hidden md:inline",children:z("cancel")})]})]}),!mn&&B&&e&&u.jsx("div",{className:"absolute top-2 md:top-3 lg:top-4 right-2 md:right-3 lg:right-4 z-10",children:u.jsxs("button",{onClick:wa,className:"flex items-center gap-1.5 md:gap-2 px-2 md:px-3 lg:px-4 py-1.5 md:py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-xs md:text-sm animate-pulse",title:z("saveChanges"),children:[u.jsx(el,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),u.jsx("span",{className:"hidden lg:inline",children:z("saveChanges")}),u.jsx("span",{className:"lg:hidden",children:z("save")})]})}),mn?u.jsx("textarea",{value:rf,onChange:I=>{sf(I.target.value),G(I.target.value!==e)},className:"w-full h-full min-h-[400px] md:min-h-[500px] p-3 md:p-4 border-2 border-orange-300 rounded-lg focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200 font-mono text-xs md:text-sm resize-none",placeholder:z("editDocumentationPlaceholder")}):o==="html"?u.jsx("div",{className:"prose prose-slate max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:e}}):o==="openapi"?u.jsx("pre",{className:"whitespace-pre-wrap text-xs md:text-sm font-mono bg-slate-900 text-slate-100 p-4 md:p-6 rounded-lg overflow-x-auto",children:u.jsx("code",{children:e})}):u.jsx("div",{className:"whitespace-pre-wrap text-xs md:text-sm prose prose-slate max-w-none prose-sm md:prose-base prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-700 prose-a:text-orange-600 prose-code:bg-slate-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-pre:bg-slate-900 prose-pre:overflow-x-auto prose-pre:max-w-full",children:e})]})})]})]})]}),rs&&u.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>Y(!1),children:u.jsxs("aside",{className:"absolute bottom-0 left-0 right-0 max-h-[85vh] bg-white/95 backdrop-blur-xl border-t border-white/30 shadow-2xl shadow-black/5 rounded-t-3xl overflow-hidden flex flex-col transition-all duration-300",onClick:I=>I.stopPropagation(),children:[u.jsx("div",{className:"flex items-center justify-center pt-3 pb-2",children:u.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),u.jsxs("div",{className:"flex items-center justify-between px-6 pb-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Actions & Settings"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>wt(!Qe),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Toggle statistics",children:u.jsx(Uu,{className:`w-5 h-5 transition-colors ${Qe?"text-orange-600":"text-gray-600"}`})}),u.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:u.jsx(xt,{className:"w-5 h-5 text-gray-600"})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:u.jsxs("div",{className:"p-4 md:p-5 lg:p-6",children:[u.jsxs("div",{className:"space-y-4 mb-8",children:[u.jsxs("button",{onClick:()=>{if(ou().length===0){y(z("selectAtLeastOneRepo"));return}ru(Ei.length>0?Ei:["markdown"]),su(Ci.length>0?Ci:["README"]),Z(!0),Y(!1)},disabled:h||w.length===0,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 text-white rounded-xl md:rounded-2xl hover:from-red-700 hover:via-orange-700 hover:to-red-700 active:scale-95 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm md:text-base shadow-2xl shadow-orange-500/40 hover:shadow-2xl hover:shadow-orange-500/50 hover:scale-[1.02] disabled:hover:scale-100 transform touch-manipulation",children:[u.jsx(Rt,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("runWorkflow")})]}),e&&u.jsxs(u.Fragment,{children:[(mn||B)&&u.jsxs("button",{onClick:wa,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl md:rounded-2xl hover:from-orange-600 hover:to-red-600 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-orange-500/30 hover:shadow-2xl hover:shadow-orange-500/40 hover:scale-[1.02] transform touch-manipulation",children:[u.jsx(el,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("saveChanges")})]}),u.jsxs("button",{onClick:qw,disabled:mn,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-slate-700 to-slate-900 text-white rounded-xl md:rounded-2xl hover:from-slate-800 hover:to-black active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-slate-500/30 hover:shadow-2xl hover:shadow-slate-500/40 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[u.jsx(ao,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("export")})]}),w.length>0&&u.jsxs("button",{onClick:()=>A(!0),disabled:mn,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-green-500 via-emerald-600 to-teal-600 text-white rounded-xl md:rounded-2xl hover:from-green-600 hover:via-emerald-700 hover:to-teal-700 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-2xl shadow-green-500/40 hover:shadow-2xl hover:shadow-green-500/50 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[u.jsx(yh,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("commitToRepos")})]})]})]}),Qe&&u.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-orange-50/50 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/50 p-4 md:p-5 lg:p-6 shadow-xl shadow-orange-500/10",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-5",children:[u.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-100 to-red-100 rounded-xl shadow-md",children:u.jsx(Xo,{className:"w-4 h-4 md:w-5 md:h-5 text-orange-600"})}),u.jsx("h3",{className:"text-sm md:text-base font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:z("statistics")})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(an,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Length"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:e?`${e.length.toLocaleString()}`:"0"})]}),k&&u.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Qf,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Model Used"})]}),u.jsx("span",{className:"font-bold text-gray-900 text-[10px] truncate max-w-[120px]",title:k,children:k.replace("gpt-","").replace(/-/g," ").toUpperCase()})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Xo,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Est. Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Ls>1e3?`${(Ls/1e3).toFixed(1)}K`:Ls.toString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Sb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Est. Cost"})]}),u.jsxs("span",{className:"font-bold text-green-600",children:["$",pu<.01?"<0.01":pu.toFixed(4)]})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(ey,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Words"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Bo.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Lines"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:cu.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Characters"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:of.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(an,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"File Size"})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:[Zw," KB"]})]}),e&&uu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(bb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Reading Time"})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:["~",uu," min"]})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ab,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Avg Words/Line"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Kw})]}),e&&du>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Qo,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Sections"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:du})]}),e&&fu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Headers"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:fu})]}),e&&hu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Code Blocks"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:hu})]}),e&&mu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(kb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Links"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:mu})]}),e&&u.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Lu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Input Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:lf.toLocaleString()})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Lu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Output Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:cf.toLocaleString()})]})]}),w.length>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Xs,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Repositories"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:w.length})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Source"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:"GitHub"})]})]})]})]})})]})}),u.jsx("aside",{className:"hidden md:block w-64 md:w-72 lg:w-80 bg-white/70 backdrop-blur-xl border-l border-white/30 shadow-2xl shadow-black/5 overflow-y-auto flex-shrink-0",children:u.jsxs("div",{className:"p-4 md:p-5 lg:p-6",children:[u.jsxs("div",{className:"space-y-4 mb-8",children:[u.jsxs("button",{onClick:()=>{if(ou().length===0){y(z("selectAtLeastOneRepo"));return}ru(Ei.length>0?Ei:["markdown"]),su(Ci.length>0?Ci:["README"]),Z(!0)},disabled:h||w.length===0,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-red-600 via-orange-600 to-red-600 text-white rounded-xl md:rounded-2xl hover:from-red-700 hover:via-orange-700 hover:to-red-700 active:scale-95 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-sm md:text-base shadow-2xl shadow-orange-500/40 hover:shadow-2xl hover:shadow-orange-500/50 hover:scale-[1.02] disabled:hover:scale-100 transform touch-manipulation",children:[u.jsx(Rt,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("runWorkflow")})]}),e&&u.jsxs(u.Fragment,{children:[(mn||B)&&u.jsxs("button",{onClick:wa,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl md:rounded-2xl hover:from-orange-600 hover:to-red-600 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-orange-500/30 hover:shadow-2xl hover:shadow-orange-500/40 hover:scale-[1.02] transform touch-manipulation",children:[u.jsx(el,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("saveChanges")})]}),u.jsxs("button",{onClick:qw,disabled:mn,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-slate-700 to-slate-900 text-white rounded-xl md:rounded-2xl hover:from-slate-800 hover:to-black active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-xl shadow-slate-500/30 hover:shadow-2xl hover:shadow-slate-500/40 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[u.jsx(ao,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("export")})]}),w.length>0&&u.jsxs("button",{onClick:()=>A(!0),disabled:mn,className:"w-full flex items-center justify-center gap-2 md:gap-3 px-4 md:px-4 lg:px-5 py-3.5 md:py-3.5 lg:py-4 bg-gradient-to-r from-green-500 via-emerald-600 to-teal-600 text-white rounded-xl md:rounded-2xl hover:from-green-600 hover:via-emerald-700 hover:to-teal-700 active:scale-95 transition-all duration-300 font-bold text-sm md:text-base shadow-2xl shadow-green-500/40 hover:shadow-2xl hover:shadow-green-500/50 hover:scale-[1.02] transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 touch-manipulation",children:[u.jsx(yh,{className:"w-4 h-4 md:w-5 md:h-5"}),u.jsx("span",{className:"truncate",children:z("commitToRepos")})]})]})]}),Qe&&u.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-orange-50/50 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/50 p-4 md:p-5 lg:p-6 shadow-xl shadow-orange-500/10",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-5",children:[u.jsx("div",{className:"p-2 md:p-2.5 bg-gradient-to-br from-orange-100 to-red-100 rounded-xl shadow-md",children:u.jsx(Xo,{className:"w-4 h-4 md:w-5 md:h-5 text-orange-600"})}),u.jsx("h3",{className:"text-sm md:text-base font-extrabold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:z("statistics")})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(an,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Length"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:e?`${e.length.toLocaleString()}`:"0"})]}),k&&u.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Qf,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Model Used"})]}),u.jsx("span",{className:"font-bold text-gray-900 text-[10px] truncate max-w-[120px]",title:k,children:k.replace("gpt-","").replace(/-/g," ").toUpperCase()})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Xo,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Est. Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Ls>1e3?`${(Ls/1e3).toFixed(1)}K`:Ls.toString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Sb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Est. Cost"})]}),u.jsxs("span",{className:"font-bold text-green-600",children:["$",pu<.01?"<0.01":pu.toFixed(4)]})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(ey,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Words"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Bo.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Lines"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:cu.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Characters"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:of.toLocaleString()})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(an,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"File Size"})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:[Zw," KB"]})]}),e&&uu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(bb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Reading Time"})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:["~",uu," min"]})]}),e&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Ab,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Avg Words/Line"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:Kw})]}),e&&du>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Qo,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Sections"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:du})]}),e&&fu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Fu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Headers"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:fu})]}),e&&hu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Code Blocks"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:hu})]}),e&&mu>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(kb,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Links"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:mu})]}),e&&u.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Lu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Input Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:lf.toLocaleString()})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Lu,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Output Tokens"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:cf.toLocaleString()})]})]}),w.length>0&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Xs,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Repositories"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:w.length})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(gr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Source"})]}),u.jsx("span",{className:"font-bold text-gray-900",children:"GitHub"})]})]})]})]})})]}),u.jsx("div",{className:"mt-auto",children:u.jsx(Sv,{onNavigate:I=>{window.dispatchEvent(new CustomEvent("navigate",{detail:I}))}})}),ie&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[u.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[u.jsx(Uu,{className:"w-5 h-5 text-orange-500"}),z("settings")]}),u.jsx("button",{onClick:()=>{B&&(b(q),ge(M),G(!1)),ee(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(xt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[u.jsx(gr,{className:"w-4 h-4 text-orange-500"}),z("token")]}),u.jsx("input",{type:"password",value:C,onChange:I=>{b(I.target.value),$(!1);const J=I.target.value.trim()!==q||L.trim()!==M;G(J)},placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),O&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 font-medium mt-2",children:[u.jsx(Ka,{className:"w-4 h-4"}),"Token saved successfully!"]}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Required for private repos or to avoid rate limits."," ",u.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 underline",children:"Create a token"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[u.jsx(Rt,{className:"w-4 h-4 text-red-500"}),z("openaiKey")]}),u.jsx("input",{type:"password",value:L,onChange:I=>{ge(I.target.value),K(!1);const J=I.target.value.trim()!==M||C.trim()!==q;G(J)},placeholder:"sk-xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),ot&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 font-medium mt-2",children:[u.jsx(Ka,{className:"w-4 h-4"}),"API key saved successfully!"]}),u.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[z("requiredForAiPoweredDocumentationGeneration")," ",u.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-red-600 hover:text-red-700 underline",children:"Get your API key"})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[u.jsx("button",{onClick:()=>{B&&(b(q),ge(M),G(!1)),ee(!1)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:B?"Cancel":"Close"}),B&&u.jsxs("button",{onClick:()=>{try{C.trim()!==q&&(ZL(C.trim()),j(C.trim()),$(!0),setTimeout(()=>$(!1),3e3)),L.trim()!==M&&(dj(L.trim()),U(L.trim()),K(!0),setTimeout(()=>K(!1),3e3)),G(!1),y(""),setTimeout(()=>{ee(!1)},500)}catch{y("Failed to save changes. Please try again.")}},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-red-500 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg shadow-orange-500/30 flex items-center gap-2",children:[u.jsx(el,{className:"w-4 h-4"}),z("saveChanges")]})]})]})}),te&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:u.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[u.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg flex-shrink-0",children:u.jsx(Qo,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 truncate",children:"Select Formats & Sections"}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:"Choose output formats and documentation sections"})]})]}),u.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":z("close"),children:u.jsx(xt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 lg:p-6",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[u.jsx(an,{className:"w-5 h-5 text-orange-500"}),z("formats")]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["markdown","markdown_mermaid","mdx","openapi","html"].map(I=>{const J=Ds.includes(I);return u.jsx("button",{type:"button",onClick:()=>{J?Ds.length>1&&ru(Ds.filter(pe=>pe!==I)):ru([...Ds,I])},className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold text-sm ${J?"bg-gradient-to-r from-orange-500 to-red-500 text-white border-orange-500 shadow-lg shadow-orange-500/30":"bg-white text-slate-700 border-slate-200 hover:border-orange-300 hover:bg-orange-50"}`,children:I==="markdown"?"Markdown":I==="markdown_mermaid"?"Markdown + Mermaid":I==="mdx"?"MDX":I==="openapi"?"OpenAPI":"HTML"},I)})}),Ds.length===0&&u.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Please select at least one format"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[u.jsx(Qo,{className:"w-5 h-5 text-orange-500"}),z("sections")]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["README","ARCHITECTURE","API","COMPONENTS","TESTING_CI","CHANGELOG"].map(I=>{const J=Ms.includes(I);return u.jsx("button",{type:"button",onClick:()=>{J?Ms.length>1&&su(Ms.filter(pe=>pe!==I)):su([...Ms,I])},className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold text-sm ${J?"bg-gradient-to-r from-orange-500 to-red-500 text-white border-orange-500 shadow-lg shadow-orange-500/30":"bg-white text-slate-700 border-slate-200 hover:border-orange-300 hover:bg-orange-50"}`,children:z(I==="README"?"sectionReadme":I==="ARCHITECTURE"?"sectionArchitecture":I==="API"?"sectionApiReference":I==="COMPONENTS"?"sectionComponents":I==="TESTING_CI"?"sectionTestingCicd":"sectionChangelog")},I)})}),Ms.length===0&&u.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Please select at least one section"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[u.jsx(Qf,{className:"w-5 h-5 text-orange-500"}),"AI Model"]}),u.jsxs("select",{value:g,onChange:I=>_(I.target.value),className:"w-full px-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white font-semibold",children:[u.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),u.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),u.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),u.jsx("option",{value:"gpt-4",children:"GPT-4 - Standard"}),u.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),u.jsx("option",{value:"gpt-5.2",children:"GPT-5.2"}),u.jsx("option",{value:"gpt-5-codex",children:"GPT-5 Codex"})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select the AI model to use for documentation generation. GPT-4o Mini is recommended for faster and cost-effective generation."})]})]})}),u.jsxs("div",{className:"p-4 md:p-5 lg:p-6 border-t border-gray-200 flex items-center justify-end gap-3 flex-shrink-0",children:[u.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:z("cancel")}),u.jsxs("button",{onClick:()=>{if(Ds.length===0){y(z("selectAtLeastOneFormat"));return}if(Ms.length===0){y(z("selectAtLeastOneSection"));return}pj(Ds),gj(Ms),Z(!1),ve(!0),setTimeout(()=>{const I=new CustomEvent("autoStartWorkflow");window.dispatchEvent(I)},100)},disabled:Ds.length===0||Ms.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-red-500 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg shadow-orange-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(Rt,{className:"w-4 h-4"}),"Generate Documentation"]})]})]})}),ce&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:u.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[u.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl shadow-lg flex-shrink-0",children:u.jsx(Rt,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 truncate",children:"Agent Workflow"}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:"Automated documentation generation pipeline"})]})]}),u.jsx("button",{onClick:()=>ve(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":z("close"),children:u.jsx(xt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-5 lg:p-6",children:u.jsx(t7,{selectedRepos:ou(),selectedOutputFormats:Ei,selectedSectionTypes:Ci,selectedLanguage:Ni,selectedModel:g,onReposChange:I=>{x(I)},onComplete:I=>{var J,pe;if(E(g),console.log("[DocumentationEditor] onComplete called with state:",{hasGeneratedDocs:!!I.generatedDocs,generatedDocsSize:((J=I.generatedDocs)==null?void 0:J.size)||0,hasGeneratedDocsFull:!!I.generatedDocsFull,generatedDocsFullSize:((pe=I.generatedDocsFull)==null?void 0:pe.size)||0}),I.generatedDocs&&I.generatedDocs.size>0){const We=new Map;I.generatedDocs.forEach((Ee,Pe)=>{console.log(`[DocumentationEditor] Setting docs for ${Pe}, length: ${Ee.length}`),We.set(Pe,Ee)}),s(We),I.generatedDocsFull&&I.generatedDocsFull.size>0&&(console.log(`[DocumentationEditor] Setting full docs, size: ${I.generatedDocsFull.size}`),I.generatedDocsFull.forEach((Ee,Pe)=>{console.log(`[DocumentationEditor] Full docs for ${Pe}:`,{sectionsCount:Ee.sections.length,sections:Ee.sections.map(He=>`${He.type}_${He.format}`)})}),a(I.generatedDocsFull));const je=ou();if(console.log(`[DocumentationEditor] Repos for workflow: ${je.length}`),je.length>0){const Ee=je[0];console.log(`[DocumentationEditor] Setting active tab to: ${Ee.fullName}`),Ve(Ee.fullName),console.log(`[DocumentationEditor] Updating display with format: ${o}, section: ${c}`),au(Ee.fullName,o,c);const Pe=We.get(Ee.fullName);Pe&&(console.log(`[DocumentationEditor] Setting documentation directly, length: ${Pe.length}`),n(Pe),Je(!0))}}else console.warn("[DocumentationEditor] No generated docs in state!");ve(!1)}})})]})}),vj&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-3 md:p-4",children:u.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl shadow-2xl border border-gray-200 max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[u.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl shadow-lg",children:u.jsx(ao,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:[z("export")," ",z("documentation")]}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Choose export format"})]})]}),u.jsx("button",{onClick:()=>af(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":z("close"),children:u.jsx(xt,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-600"})})]}),u.jsx("div",{className:"p-4 md:p-5 lg:p-6",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>lu("md"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all group",children:[u.jsx(an,{className:"w-8 h-8 text-gray-600 group-hover:text-orange-600"}),u.jsx("span",{className:"font-semibold text-gray-900",children:"Markdown"}),u.jsx("span",{className:"text-xs text-gray-500",children:".md"})]}),u.jsxs("button",{onClick:()=>lu("pdf"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all group",children:[u.jsx(an,{className:"w-8 h-8 text-gray-600 group-hover:text-red-600"}),u.jsx("span",{className:"font-semibold text-gray-900",children:"PDF"}),u.jsx("span",{className:"text-xs text-gray-500",children:".pdf"})]}),u.jsxs("button",{onClick:()=>lu("html"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[u.jsx(an,{className:"w-8 h-8 text-gray-600 group-hover:text-blue-600"}),u.jsx("span",{className:"font-semibold text-gray-900",children:"HTML"}),u.jsx("span",{className:"text-xs text-gray-500",children:".html"})]}),u.jsxs("button",{onClick:()=>lu("txt"),className:"flex flex-col items-center gap-2 p-4 border-2 border-gray-200 rounded-xl hover:border-gray-500 hover:bg-gray-50 transition-all group",children:[u.jsx(an,{className:"w-8 h-8 text-gray-600 group-hover:text-gray-700"}),u.jsx("span",{className:"font-semibold text-gray-900",children:"Text"}),u.jsx("span",{className:"text-xs text-gray-500",children:".txt"})]})]})})]})}),v&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsx(XL,{selectedRepos:w,onSelectionChange:x,onClose:()=>p(!1)})}),Ie&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 max-w-md w-full",children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[z("commit")," ",z("documentation")]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:z("commitMessage")}),u.jsx("input",{type:"text",value:S,onChange:I=>F(I.target.value),placeholder:z("addDocumentation"),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:z("branch")}),u.jsx("input",{type:"text",value:N,onChange:I=>Ne(I.target.value),placeholder:"main",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"})]}),u.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-sm text-gray-600",children:["This will commit ",u.jsx("code",{className:"bg-white px-1.5 py-0.5 rounded font-mono text-xs",children:"DOCUMENTATION.md"})," to"," ",w.length," repository",w.length!==1?"ies":"","."]})]}),u.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>{A(!1),F("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:z("cancel")}),u.jsx("button",{onClick:xj,disabled:!S.trim()||h,className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-md",children:z(h?"committing":"commit")})]})]})}),tu&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:u.jsx(xt,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Clear All Repositories"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure?"})]})]}),u.jsx("button",{onClick:()=>nu(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(xt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to remove all ",u.jsx("span",{className:"font-semibold text-gray-900",children:w.length})," selected ",w.length===1?"repository":"repositories","?"]}),(e||r.size>0)&&u.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsx("p",{className:"text-xs text-yellow-800",children:"Clearing all repositories will also remove all generated documentation."})})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[u.jsx("button",{onClick:()=>nu(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:z("cancel")}),u.jsxs("button",{onClick:()=>{x([]),iu(new Set),va.current.clear(),s(new Map),a(new Map),Ve("combined"),n(""),nu(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg shadow-red-500/30 flex items-center gap-2",children:[u.jsx(xt,{className:"w-4 h-4"}),"Clear All"]})]})]})}),we&&Xe&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:u.jsx(xt,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Remove Repository"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure?"})]})]}),u.jsx("button",{onClick:()=>{fe(!1),Ti(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(xt,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to remove ",u.jsx("span",{className:"font-semibold text-gray-900",children:Xe.fullName})," from the selected repositories?"]}),e&&r.has(Xe.fullName)&&u.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsx("p",{className:"text-xs text-yellow-800",children:"Removing this repository will also remove its generated documentation."})})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[u.jsx("button",{onClick:()=>{fe(!1),Ti(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:z("cancel")}),u.jsxs("button",{onClick:()=>{if(Xe){if(x(w.filter(I=>I.id!==Xe.id)),Vn.has(Xe.fullName)){const I=new Set(Vn);I.delete(Xe.fullName),iu(I)}if(r.has(Xe.fullName)){const I=new Map(r);I.delete(Xe.fullName),s(I)}if(i.has(Xe.fullName)){const I=new Map(i);I.delete(Xe.fullName),a(I)}if($e===Xe.fullName){const I=w.filter(J=>J.id!==Xe.id);I.length>0?Ve(I[0].fullName):(Ve("combined"),n(""))}}fe(!1),Ti(null)},className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg shadow-red-500/30 flex items-center gap-2",children:[u.jsx(xt,{className:"w-4 h-4"}),"Remove"]})]})]})}),Ut&&u.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md w-full animate-in slide-in-from-top-5 transition-all duration-300 ${Ut.type==="success"?"bg-green-50 border-green-200":Ut.type==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"} border-2 rounded-xl shadow-2xl p-4 backdrop-blur-sm`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`flex-shrink-0 p-2 rounded-lg ${Ut.type==="success"?"bg-green-100":Ut.type==="error"?"bg-red-100":"bg-blue-100"}`,children:Ut.type==="success"?u.jsx(NL,{className:`w-5 h-5 ${Ut.type==="success"?"text-green-600":""}`}):Ut.type==="error"?u.jsx(xt,{className:"w-5 h-5 text-red-600"}):u.jsx(Xf,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:`font-bold text-sm ${Ut.type==="success"?"text-green-900":Ut.type==="error"?"text-red-900":"text-blue-900"}`,children:Ut.type==="success"?"Documentation Generated":Ut.type==="error"?"Generation Failed":"Auto-Update"}),u.jsx("p",{className:`text-xs mt-1 ${Ut.type==="success"?"text-green-700":Ut.type==="error"?"text-red-700":"text-blue-700"}`,children:Ut.message}),Ut.repoName&&u.jsx("p",{className:"text-xs mt-1 text-gray-600 font-mono",children:Ut.repoName})]}),u.jsx("button",{onClick:()=>Ai(null),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(xt,{className:"w-4 h-4"})})]})}),ss&&u.jsx("button",{onClick:wj,className:"fixed bottom-8 right-8 z-50 p-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-full shadow-2xl shadow-orange-500/50 hover:shadow-orange-500/70 transition-all duration-300 hover:scale-110 active:scale-95 group","aria-label":z("scrollToTop"),children:u.jsx(EL,{className:"w-6 h-6 group-hover:-translate-y-1 transition-transform duration-300"})})]})}function r7({pageType:t,onBack:e}){const[n,r]=P.useState(()=>localStorage.getItem("selectedLanguage")||"en");P.useEffect(()=>{const o=()=>{const c=localStorage.getItem("selectedLanguage");c&&r(c)};window.addEventListener("storage",o);const l=setInterval(o,100);return()=>{window.removeEventListener("storage",o),clearInterval(l)}},[]);const s=ma(n),a=(()=>{switch(t){case"github-integration":return{title:s("githubIntegration"),icon:u.jsx(hs,{className:"w-8 h-8"}),description:s("seamlesslyConnectWithGitHub"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),u.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("gitScribeIntegratesDirectly")," ",s("accessYourRepositories")," ",s("generateComprehensiveDocumentation"),".",s("whetherPublicOrPrivate"),", ",s("ourIntegrationMakesItEasy")," ",s("documentYourCodebase"),"."]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("features")}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg mt-0.5",children:u.jsx(hs,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("repositoryAccess")}),u.jsxs("p",{className:"text-gray-600",children:[s("connectToAnyRepository")," ",s("usingPersonalAccessToken")]})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:u.jsx(Xs,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("fileAnalysis")}),u.jsxs("p",{className:"text-gray-600",children:[s("automaticallyAnalyzeRepository")," ",s("repositoryStructure"),", ",s("codeFiles"),", ",s("configuration")]})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:u.jsx(gr,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("codeUnderstanding")}),u.jsxs("p",{className:"text-gray-600",children:[s("aiPoweredAnalysisOfCodebase")," ",s("generateAccurateDocumentation")]})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("gettingStarted")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["1. ",s("createGitHubToken")]}),u.jsxs("p",{className:"text-gray-600 mb-2",children:[s("goToGitHubSettings"),"  ",s("developerSettings"),"  ",s("personalAccessTokens"),"  ",s("tokensClassic")]}),u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[s("requiredScopes"),": ",u.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," (",s("forPrivateRepos"),")"]}),u.jsx("p",{className:"text-sm text-gray-500",children:s("forPublicRepos")})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["2. ",s("addTokenToGitScribe")]}),u.jsxs("p",{className:"text-gray-600",children:[s("enterYourToken")," ",s("githubTokenField")," ",s("documentationEditorSettings"),". ",s("clickSaveChanges")," ",s("persistIt"),"."]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["3. ",s("startGenerating")]}),u.jsxs("p",{className:"text-gray-600 mb-2",children:[s("enterRepositoryUrl")," (",s("egOwnerRepo"),", ",u.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:s("ownerRepoPlaceholder")}),") ",s("selectMultipleRepositories")]}),u.jsxs("p",{className:"text-gray-600",children:[s("chooseOutputFormats")," ",s("thenClickRunWorkflow")," ",s("startAiAgentWorkflow")]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("supportedFormats")}),u.jsxs("p",{className:"text-gray-700 mb-3",children:[s("youCanUseAnyOfTheseFormats")," ",s("toSpecifyRepository"),":"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsx("li",{children:u.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"https://github.com/owner/repo"})}),u.jsx("li",{children:u.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"github.com/owner/repo"})}),u.jsx("li",{children:u.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"owner/repo"})})]})]})]})};case"multi-repo-support":return{title:s("multiRepoSupportTitle"),icon:u.jsx(Xs,{className:"w-8 h-8"}),description:s("multiRepoSupportDescription"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),u.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("gitScribeIntegratesDirectly")," ",s("generateDocumentationForMultiple")," ",s("simultaneously"),",",s("saveTimeProcessingMultiple")," ",s("maintainConsistentFormat"),"."]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("keyFeatures")}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:u.jsx(Xs,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("batchProcessing")}),u.jsx("p",{className:"text-gray-600",children:s("selectAndProcessMultiple")})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:u.jsx(Rt,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("individualDocumentation")}),u.jsx("p",{className:"text-gray-600",children:s("eachRepositoryGetsOwn")})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mt-0.5",children:u.jsx(yh,{className:"w-5 h-5 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("batchCommit")}),u.jsx("p",{className:"text-gray-600",children:s("commitToAllSelected")})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howToUse")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("selectMultipleReposStep")}),u.jsxs("p",{className:"text-gray-600",children:[s("clickSelectReposButton")," ",s("browseAndSelectFromGitHub"),". ",s("searchAndFilterByVisibility"),"."]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("chooseOutputFormatsSections")}),u.jsxs("p",{className:"text-gray-600",children:[s("selectOneOrMoreFormats")," ",s("markdownMdxOpenapiHtml")," ",s("documentationSectionTypes")," ",s("readmeArchitectureApi")]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("runWorkflowStep")}),u.jsxs("p",{className:"text-gray-600",children:[s("clickRunWorkflowToStart")," ",s("systemWillProcessEachRepo")," ",s("throughDiscoveryAnalysisPlanning"),"."]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("reviewCommitStep")}),u.jsxs("p",{className:"text-gray-600",children:[s("reviewDocumentationInTabs")," ",s("switchBetweenFormatsSections"),". ",s("whenReadyClickCommitToRepos")," ",s("commitAllAtOnce"),"."]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("benefits")}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsx("li",{children:s("saveTimeProcessingMultiple")}),u.jsx("li",{children:s("maintainConsistentFormat")}),u.jsx("li",{children:s("easyManagementWithTabs")}),u.jsx("li",{children:s("batchCommitFunctionality")})]})]})]})};case"ai-powered-generation":return{title:s("aiPoweredGenerationTitle"),icon:u.jsx(Rt,{className:"w-8 h-8"}),description:s("aiPoweredGenerationDescription"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("overview")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("aiPoweredOverview")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiModels")}),u.jsxs("p",{className:"text-gray-700 mb-4",children:[s("gitScribeSupportsMultipleModels"),". ",s("chooseBasedOnNeeds")," ",s("speedCostQuality"),":"]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4oMiniRecommended")}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s("fastAndCostEffective")}),u.jsx("p",{className:"text-xs text-gray-500",children:s("bestBalanceSpeedQuality")})]}),u.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 rounded-lg p-4 border border-red-200",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4o")}),u.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s("mostAdvancedModel")," ",s("complexCodebases")]}),u.jsx("p",{className:"text-xs text-gray-500",children:s("highestQualityHigherCost")})]}),u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt4Turbo")}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s("balancedPerformanceAccuracy")}),u.jsx("p",{className:"text-xs text-gray-500",children:s("goodForLargeRepos")})]}),u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("gpt35Turbo")}),u.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s("fastAndEconomical")," ",s("simpleProjects")]}),u.jsx("p",{className:"text-xs text-gray-500",children:s("lowestCostOption")})]})]}),u.jsxs("p",{className:"text-gray-600 mt-4 text-sm",children:[s("youCanChangeModel")," ",s("settingsPanel"),". ",s("realtimeCostEstimation")," ",s("statisticsSidebar"),"."]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiAssistant")}),u.jsxs("p",{className:"text-gray-700 mb-4",children:[s("aiAssistantFeature")," ",s("interactivelyEditImprove"),":"]}),u.jsxs("ul",{className:"space-y-2 text-gray-700 ml-4",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("rewriteSectionsForClarity")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("fixGrammarSpellingErrors")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("addRemoveContentBasedOnNeeds")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("restructureDocumentation")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("formatTextImproveReadability")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("costEstimation")}),u.jsxs("p",{className:"text-gray-700 mb-3",children:[s("gitScribeProvidesRealtime")," ",s("basedOn"),":"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsx("li",{children:s("selectedAiModelPricing")}),u.jsx("li",{children:s("estimatedTokenUsage")}),u.jsx("li",{children:s("documentationLengthComplexity")})]}),u.jsxs("p",{className:"text-gray-600 mt-4 text-sm",children:[s("costsDisplayedInStatistics")," ",s("statisticsSidebar")," ",s("duringGeneration"),"."]})]})]})};case"export-commit":return{title:s("exportCommitTitle"),icon:u.jsx(ao,{className:"w-8 h-8"}),description:s("exportCommitDescription"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("exportDocumentation")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("downloadGeneratedDocumentation")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("exportFormats")}),u.jsxs("ul",{className:"space-y-2 text-gray-700",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("formatMarkdown")})," - ",s("markdownStandardFormat")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("formatMarkdownMermaid")})," - ",s("markdownMermaidDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("formatMdx")})," - ",s("mdxDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("formatOpenapi")})," - ",s("openapiDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("formatHtml")})," - ",s("htmlDescription")]})]})]}),u.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:s("eachFormatGenerated")})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("commitToRepository")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("automaticallyCommitDocumentation")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("howItWorks")}),u.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[u.jsx("li",{children:s("runWorkflowGenerate")}),u.jsx("li",{children:s("reviewGeneratedDocumentation")}),u.jsx("li",{children:s("clickCommitToRepos")}),u.jsx("li",{children:s("enterCommitMessage")}),u.jsx("li",{children:s("specifyTargetBranch")}),u.jsx("li",{children:s("documentationCommitted")})]}),u.jsxs("p",{className:"text-gray-600 mt-3 text-sm",children:[u.jsxs("strong",{children:[s("overview"),":"]})," ",s("workflowStopsAfterGeneration")," ",s("controlOverCommits")]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("multiRepoSupportTitle")}),u.jsxs("p",{className:"text-gray-700 mb-2",children:[s("whenWorkingWithMultiple")," ",s("commitOperationProcesses")]}),u.jsx("p",{className:"text-gray-600 text-sm",children:s("documentationStoredSeparately")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("autoUpdateFeature")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("enableAutoUpdateDescription")}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx("span",{className:"text-green-600",children:""}),s("automaticUpdates")]}),u.jsxs("ul",{className:"space-y-2 text-gray-700",children:[u.jsxs("li",{children:[" ",s("monitorsRepositories")]}),u.jsxs("li",{children:[" ",s("detectsPushesMerges")]}),u.jsxs("li",{children:[" ",s("automaticallyRegenerates")]}),u.jsxs("li",{children:[" ",s("commitsUpdatedDocumentation")]})]})]})]})]})};case"documentation-page":return{title:s("documentationTitle"),icon:u.jsx(ey,{className:"w-8 h-8"}),description:s("completeGuideToUsing"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("gettingStarted")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("welcomeToGitScribe")}),u.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("quickStart")}),u.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[u.jsx("li",{children:s("addOpenAiKey")}),u.jsx("li",{children:s("optionalAddGitHubToken")}),u.jsx("li",{children:s("enterRepositoryUrlOrSelect")}),u.jsx("li",{children:s("chooseOutputFormatsSections")}),u.jsx("li",{children:s("clickRunWorkflowStart")}),u.jsx("li",{children:s("reviewEditCommit")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("coreFeatures")}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(hs,{className:"w-5 h-5 text-orange-600"}),s("githubIntegration")]}),u.jsx("p",{className:"text-sm text-gray-600",children:s("directIntegration")})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(Xs,{className:"w-5 h-5 text-orange-600"}),s("multiRepoSupport")]}),u.jsx("p",{className:"text-sm text-gray-600",children:s("processMultipleRepos")})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(Rt,{className:"w-5 h-5 text-orange-600"}),s("aiAgentWorkflows")]}),u.jsx("p",{className:"text-sm text-gray-600",children:s("intelligentAgentSystem")})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(yh,{className:"w-5 h-5 text-orange-600"}),s("export")," & ",s("commit")]}),u.jsx("p",{className:"text-sm text-gray-600",children:s("multipleOutputFormats")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("outputFormats")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("outputFormatsDescription")}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMarkdown")}),u.jsx("p",{className:"text-sm text-gray-600",children:s("standardMarkdownFormat")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMarkdownMermaid")}),u.jsx("p",{className:"text-sm text-gray-600",children:s("markdownWithDiagrams")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatMdx")}),u.jsx("p",{className:"text-sm text-gray-600",children:s("markdownWithJsx")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatOpenapi")}),u.jsx("p",{className:"text-sm text-gray-600",children:s("yamlFormatForApi")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:s("formatHtml")}),u.jsx("p",{className:"text-sm text-gray-600",children:s("fullyStyledHtml")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("documentationSections")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("generateDifferentTypes")}),u.jsxs("ul",{className:"space-y-2 text-gray-700",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionReadme")})," - ",s("readmeDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionArchitecture")})," - ",s("architectureDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionApiReference")})," - ",s("apiReferenceDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionComponents")})," - ",s("componentsDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionTestingCicd")})," - ",s("testingCicdDescription")]})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsxs("span",{children:[u.jsx("strong",{children:s("sectionChangelog")})," - ",s("changelogDescription")]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("aiAgentWorkflow")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("gitScribeUsesIntelligent")}),u.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-6 border border-orange-200",children:u.jsxs("ol",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsxs("span",{className:"font-bold text-orange-600",children:["1. ",s("repoDiscovery")]}),u.jsx("span",{className:"text-gray-700",children:s("validatesAndDiscovers")})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsxs("span",{className:"font-bold text-orange-600",children:["2. ",s("repoAnalysis")]}),u.jsx("span",{className:"text-gray-700",children:s("analyzesStructure")})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsxs("span",{className:"font-bold text-orange-600",children:["3. ",s("docsPlanner")]}),u.jsx("span",{className:"text-gray-700",children:s("createsStructuredPlan")})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsxs("span",{className:"font-bold text-orange-600",children:["4. ",s("docsWriter")]}),u.jsx("span",{className:"text-gray-700",children:s("generatesDocumentation")})]})]})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("learnMore")}),u.jsx("p",{className:"text-gray-700",children:s("exploreOtherPages")})]})]})};case"api-reference":return{title:s("apiReferenceTitle"),icon:u.jsx(gr,{className:"w-8 h-8"}),description:s("completeApiDocumentation"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("agentWorkflowSystem")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("gitScribeUsesLangGraph")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-6 overflow-x-auto mb-4",children:u.jsx("pre",{className:"text-sm",children:`${s("agentWorkflowSteps")}
1. ${s("repoDiscovery")} - ${s("validatesAndDiscovers")}
2. ${s("repoAnalysis")} - ${s("analyzesStructure")}
3. ${s("docsPlanner")} - ${s("createsStructuredPlan")}
4. ${s("docsWriter")} - ${s("generatesDocumentation")}`})}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("agentState")}),u.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("workflowMaintainsSharedState")}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 text-sm ml-2",children:[u.jsx("li",{children:s("discoveredRepositories")}),u.jsx("li",{children:s("repositoryAnalyses")}),u.jsx("li",{children:s("documentationPlans")}),u.jsx("li",{children:s("generatedDocumentationByFormat")}),u.jsx("li",{children:s("commitResults")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("githubService")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionFetchUserRepos")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`fetchUserRepos(options?: {
  visibility?: 'all' | 'public' | 'private';
  perPage?: number;
  page?: number;
}): Promise<SimpleRepo[]>`})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionCreateOrUpdateFile")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`createOrUpdateFile(
  owner: string,
  repo: string,
  path: string,
  content: string,
  message: string,
  branch?: string
): Promise<CommitResponse>`})})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("langChainService")}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("functionCallLangChain")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`callLangChain(
  prompt: string,
  systemPrompt?: string,
  model?: string,
  temperature?: number
): Promise<string>`})})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("typeDefinitions")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeSimpleRepo")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`type SimpleRepo = {
  id: number;
  name: string;
  fullName: string;
  owner: string;
  private: boolean;
  htmlUrl: string;
  description?: string;
  defaultBranch: string;
}`})})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeDocOutputFormat")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`type DocOutputFormat = 
  | 'markdown'
  | 'markdown_mermaid'
  | 'mdx'
  | 'openapi'
  | 'html';`})})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("typeDocSectionType")}),u.jsx("div",{className:"bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto",children:u.jsx("pre",{className:"text-sm",children:`type DocSectionType = 
  | 'README'
  | 'ARCHITECTURE'
  | 'API'
  | 'COMPONENTS'
  | 'TESTING_CI'
  | 'CHANGELOG';`})})]})]})]})]})};case"examples":return{title:s("examplesTitle"),icon:u.jsx(DL,{className:"w-8 h-8"}),description:s("exampleUseCases"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example1SingleRepository")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("youWantToGenerate")}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("steps")}),u.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[u.jsxs("li",{children:[s("enterGitHubRepositoryUrl")," ",u.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"facebook/react"})]}),u.jsx("li",{children:s("selectOutputFormatsEg")}),u.jsx("li",{children:s("selectSectionTypesEg")}),u.jsx("li",{children:s("clickRunWorkflowStart")}),u.jsx("li",{children:s("watchWorkflowProgress")}),u.jsx("li",{children:s("reviewGeneratedDocumentationSwitch")}),u.jsx("li",{children:s("clickCommitToReposWhenReady")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example2MultipleRepositories")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("youManageMultipleMicroservices")}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("steps")}),u.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[u.jsx("li",{children:s("clickSelectRepositories")}),u.jsx("li",{children:s("selectOutputFormatsEgOpenAPI")}),u.jsx("li",{children:s("selectSectionTypesEg")}),u.jsx("li",{children:s("clickRunWorkflowStart")}),u.jsx("li",{children:s("monitorWorkflowProgress")}),u.jsx("li",{children:s("reviewEachRepositoryDocumentation")}),u.jsx("li",{children:s("switchBetweenFormatsSectionsForEach")}),u.jsx("li",{children:s("commitAllRepositoriesAtOnce")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example3AutoUpdateWorkflow")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("youWantDocumentationToAutoUpdate")}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("steps")}),u.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 ml-2",children:[u.jsx("li",{children:s("selectRepositoriesInMultiRepoMode")}),u.jsx("li",{children:s("enableAutoUpdateForEach")}),u.jsx("li",{children:s("toggleGlobalAutoUpdateSwitch")}),u.jsx("li",{children:s("documentationWillAutoUpdate")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("example4UsingAiAssistant")}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("scenario")}),u.jsx("p",{className:"text-gray-700 mb-4",children:s("youWantToImproveDocumentation")}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:s("examplePrompts")}),u.jsxs("ul",{className:"space-y-2 text-gray-700",children:[u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("addSectionExplainingInstallation")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("makeApiDocumentationMoreDetailed")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("fixAllGrammarErrors")})]}),u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-orange-600 mt-1",children:""}),u.jsx("span",{children:s("restructureDocumentationForBetterFlow")})]})]})]})]})]})};case"support":return{title:s("supportTitle"),icon:u.jsx($L,{className:"w-8 h-8"}),description:s("supportTitle"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("needHelp")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:s("wereHereToHelp")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactOptions")}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(ny,{className:"w-5 h-5 text-orange-600"}),s("emailSupport")]}),u.jsx("p",{className:"text-gray-600 mb-3",children:s("getDirectHelpViaEmail")}),u.jsx("a",{href:"mailto:support@GitScribe.com",className:"text-orange-600 hover:text-orange-700 font-medium",children:"support@GitScribe.com"})]}),u.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[u.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[u.jsx(hs,{className:"w-5 h-5 text-orange-600"}),s("githubIssues")]}),u.jsx("p",{className:"text-gray-600 mb-3",children:s("reportBugsOrRequestFeatures")}),u.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 font-medium",children:s("openAnIssue")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("commonIssues")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("openaiApiKeyError")}),u.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("addOpenAiKeyInSettings")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("githubRateLimiting")}),u.jsx("p",{className:"text-gray-700 text-sm mb-2",children:s("addGitHubTokenInSettings")}),u.jsxs("p",{className:"text-gray-600 text-xs",children:[s("requiredScopeRepo")," ",u.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," (",s("forPrivateRepos"),")"]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("workflowNotStarting")}),u.jsx("p",{className:"text-gray-700 text-sm",children:s("ensureYouHaveSelected")})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("documentationNotCommitting")}),u.jsxs("p",{className:"text-gray-700 text-sm",children:[s("makeSureGitHubTokenHasRepoScope")," ",u.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"repo"})," ",s("requiredScopeRepo")," ",s("forPrivateRepos"),"."]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("documentation")}),u.jsx("p",{className:"text-gray-700",children:s("checkOutComprehensiveDocumentation")})]})]})};case"privacy-policy":return{title:s("privacyPolicyTitle"),icon:u.jsx(BL,{className:"w-8 h-8"}),description:s("howWeProtectAndHandle"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("introduction")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeCommittedToPrivacy")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("informationWeCollect")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("personalInformation")}),u.jsx("p",{className:"text-gray-700",children:s("weMayCollectPersonalInfo")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("githubTokens")}),u.jsx("p",{className:"text-gray-700",children:s("githubTokensStoredLocally")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("usageData")}),u.jsx("p",{className:"text-gray-700",children:s("weMayCollectUsageData")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howWeUseYourInformation")}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsx("li",{children:s("toProvideAndImprove")}),u.jsx("li",{children:s("toProcessYourRequests")}),u.jsx("li",{children:s("toCommunicateWithYou")}),u.jsx("li",{children:s("toAnalyzeUsagePatterns")})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("dataSecurity")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weImplementSecurityMeasures")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("thirdPartyServices")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:s("weUseFollowingThirdParty")}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"OpenAI:"})," ",s("openaiForAiPowered")]}),u.jsxs("li",{children:[u.jsx("strong",{children:"GitHub:"})," ",s("githubForRepositoryAccess")]}),u.jsxs("li",{children:[u.jsx("strong",{children:"LocalStorage:"})," ",s("localStorageForStoring")]})]}),u.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:s("allDataStoredLocally")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("yourRights")}),u.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("youHaveRightToAccess")," support@GitScribe.com."]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactUsPrivacy")}),u.jsxs("p",{className:"text-gray-700",children:[s("ifYouHaveQuestionsPrivacy")," ",u.jsx("a",{href:"mailto:privacy@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"privacy@GitScribe.com"})]})]})]})};case"terms-of-service":return{title:s("termsOfServiceTitle"),icon:u.jsx(an,{className:"w-8 h-8"}),description:s("termsAndConditions"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("agreementToTerms")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("byAccessingOrUsing")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("useOfService")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("eligibility")}),u.jsx("p",{className:"text-gray-700",children:s("youMustBeAtLeast18")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("accountResponsibility")}),u.jsx("p",{className:"text-gray-700",children:s("youAreResponsibleForMaintaining")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("acceptableUse")}),u.jsx("p",{className:"text-gray-700 mb-2",children:s("youAgreeNotTo")}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 ml-4",children:[u.jsx("li",{children:s("useServiceForIllegalPurpose")}),u.jsx("li",{children:s("violateLawsOrRegulations")}),u.jsx("li",{children:s("infringeOnIntellectualProperty")}),u.jsx("li",{children:s("transmitMaliciousCode")}),u.jsx("li",{children:s("attemptUnauthorizedAccess")})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("apiUsageAndCosts")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeUsesOpenAIApi")}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 mt-3",children:[u.jsx("li",{children:s("providingYourOwnOpenAiKey")}),u.jsx("li",{children:s("allCostsAssociated")}),u.jsx("li",{children:s("managingYourApiKeySecurity")})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("intellectualProperty")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("serviceOwnedByGitScribe")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("limitationOfLiability")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("gitScribeProvidedAsIs")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("changesToTerms")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weReserveRightToModify")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactTerms")}),u.jsxs("p",{className:"text-gray-700",children:[s("forQuestionsAboutTerms")," ",u.jsx("a",{href:"mailto:legal@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"legal@GitScribe.com"})]})]})]})};case"cookie-policy":return{title:s("cookiePolicyTitle"),icon:u.jsx(PL,{className:"w-8 h-8"}),description:s("howWeUseCookies"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{children:[u.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[s("lastUpdated")," ",new Date().toLocaleDateString()]}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("whatAreCookies")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("cookiesAreSmallTextFiles")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("howWeUseCookiesTitle")}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("essentialCookies")}),u.jsx("p",{className:"text-gray-700",children:s("theseCookiesAreNecessary")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("preferenceCookies")}),u.jsx("p",{className:"text-gray-700",children:s("weUseLocalStorageToStore")})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("analyticsCookies")}),u.jsx("p",{className:"text-gray-700",children:s("weMayUseAnalyticsCookies")})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("localStorageUsage")}),u.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:s("gitScribeUsesBrowserLocalStorage")}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4",children:[u.jsx("li",{children:s("githubPersonalAccessTokensEncrypted")}),u.jsx("li",{children:s("userPreferencesAndSettings")}),u.jsx("li",{children:s("autoFollowRepositoryConfigurations")})]}),u.jsx("p",{className:"text-gray-700 mt-4",children:s("thisDataRemainsOnDevice")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("managingCookies")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("youCanControlCookies")}),u.jsx("p",{className:"text-gray-700 mt-4",children:s("toClearLocalStorageData")})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("thirdPartyCookies")}),u.jsx("p",{className:"text-gray-700 leading-relaxed",children:s("weMayUseThirdPartyServices")}),u.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 mt-3",children:u.jsx("li",{children:s("analyticsProviders")})})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("contactCookiePolicy")}),u.jsxs("p",{className:"text-gray-700",children:[s("forQuestionsAboutCookiePolicy")," ",u.jsx("a",{href:"mailto:privacy@GitScribe.com",className:"text-orange-600 hover:text-orange-700",children:"privacy@GitScribe.com"})]})]})]})};case"Donate":return{title:s("Donate"),icon:u.jsx(Qi,{className:"w-8 h-8"}),description:s("supportGitScribeDevelopment"),content:u.jsxs("div",{className:"space-y-6",children:[u.jsx("section",{children:u.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-8 border border-orange-200 text-center mb-6",children:[u.jsx(Qi,{className:"w-16 h-16 text-red-500 mx-auto mb-4 fill-red-500"}),u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:s("supportGitScribe")}),u.jsx("p",{className:"text-lg text-gray-700 mb-6",children:s("ifYouFindGitScribeUseful")}),u.jsxs("a",{href:"https://www.buymeacoffee.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-bold text-lg hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[u.jsx("span",{children:""}),u.jsx("span",{children:s("buyMeACoffee")})]})]})}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("whySupport")}),u.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[s("gitScribeIsFreeAndOpenSource")," ",s("yourSupportHelpsUs")]}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg mt-0.5",children:u.jsx(Rt,{className:"w-5 h-5 text-orange-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("newFeatures")}),u.jsx("p",{className:"text-gray-600",children:s("developNewFeaturesAndImprovements")})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mt-0.5",children:u.jsx(gr,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("maintenanceAndUpdates")}),u.jsx("p",{className:"text-gray-600",children:s("keepGitScribeRunningSmoothly")})]})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg mt-0.5",children:u.jsx(Qi,{className:"w-5 h-5 text-green-600 fill-green-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:s("freeAndOpenSource")}),u.jsx("p",{className:"text-gray-600",children:s("maintainFreeAccessForEveryone")})]})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s("otherWaysToSupport")}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[u.jsx(hs,{className:"w-8 h-8 text-gray-700 mb-3"}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("starOnGitHub")}),u.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s("starringOurRepository")}),u.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:[s("visitGitHub")," "]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[u.jsx(ny,{className:"w-8 h-8 text-gray-700 mb-3"}),u.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s("shareFeedback")}),u.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s("letUsKnowWhatYouThink")}),u.jsxs("a",{href:"mailto:support@GitScribe.com",className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:[s("contactUs")," "]})]})]})]}),u.jsxs("section",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:s("thankYou")}),u.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s("everyContributionMatters")," ",s("whetherThroughDonations")," ",s("weAppreciateYourSupport")]})]})]})};default:return{title:s("pageNotFound"),icon:u.jsx(an,{className:"w-8 h-8"}),description:s("theRequestedPageCouldNotBeFound"),content:u.jsx("div",{children:u.jsx("p",{className:"text-gray-700",children:s("thePageYoureLookingForDoesntExist")})})}}})();return u.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[u.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(BE,{className:"w-5 h-5 text-gray-600"})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg",children:a.icon}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-900",children:a.title}),u.jsx("p",{className:"text-sm text-gray-500",children:a.description})]})]})]})})})}),u.jsx("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-12 w-full",children:u.jsx("div",{className:"prose prose-slate max-w-none",children:a.content})}),u.jsx(Sv,{onNavigate:o=>{window.dispatchEvent(new CustomEvent("navigate",{detail:o}))}})]})}function s7(){const[t,e]=P.useState("landing");return P.useEffect(()=>{const r=s=>{e(s.detail)};return window.addEventListener("navigate",r),()=>{window.removeEventListener("navigate",r)}},[]),["github-integration","multi-repo-support","ai-powered-generation","export-commit","documentation-page","api-reference","examples","support","privacy-policy","terms-of-service","cookie-policy","Donate"].includes(t)?u.jsx(r7,{pageType:t,onBack:()=>e("landing")}):t==="documentation"?u.jsx(n7,{onBack:()=>e("landing")}):u.jsx(HL,{onGenerate:()=>e("documentation")})}cA(document.getElementById("root")).render(u.jsx(P.StrictMode,{children:u.jsx(s7,{})}));
